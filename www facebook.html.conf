<!DOCTYPE html>
<html lang="en" id="facebook" class="no_js">
<head><meta charset="utf-8" /><meta name="referrer" content="default" id="meta_referrer" /><script nonce="3zFaFKoi">function envFlush(a){function b(b){for(var c in a)b[c]=a[c]}window.requireLazy?window.requireLazy(["Env"],b):(window.Env=window.Env||{},b(window.Env))}envFlush({"useTrustedTypes":false,"isTrustedTypesReportOnly":false,"ajaxpipe_token":"AXiamt_7uZ3Q1m37iXw","stack_trace_limit":30,"timesliceBufferSize":5000,"show_invariant_decoder":false,"compat_iframe_token":"AUXolxVfiElRYCi7h0TBhzDgAOU","isCQuick":false,"brsid":"7484978647544352438","promise_include_trace":false});</script><script nonce="3zFaFKoi">window.openDatabase&&(window.openDatabase=function(){throw new Error()});</script><script nonce="3zFaFKoi">_btldr={};</script><script nonce="3zFaFKoi">(function(){function a(a){return a.parentElement!==document.body&&a.parentElement!==document.head}function b(a){return a.nodeName==="SCRIPT"||a.nodeName==="LINK"&&((a=c(a))==null?void 0:a.asyncCss)}function c(a){return!(a.dataset instanceof window.DOMStringMap)?null:a.dataset}function d(d){var e;try{if(d.nodeType!==Node.ELEMENT_NODE)return}catch(a){return}if(a(d)||!b(d))return;var f=(e=c(d))==null?void 0:e.bootloaderHash;if(f!=null&&f!==""){var g=null,h=function(){window._btldr[f]=1,g==null?void 0:g()};g=function(){d.removeEventListener("load",h),d.removeEventListener("error",h)};d.addEventListener("load",h);d.addEventListener("error",h)}}Array.from(document.querySelectorAll('script,link[data-async-css="1"]')).forEach(function(a){return d(a)});var e=new MutationObserver(function(a,b){a.forEach(function(a){a.type==="childList"&&Array.from(a.addedNodes).forEach(function(a){d(a)})})});e.observe(document.getElementsByTagName("html")[0],{attributes:!1,childList:!0,subtree:!0})})();</script><style nonce="3zFaFKoi"></style><script nonce="3zFaFKoi">__DEV__=0;</script><noscript><meta http-equiv="refresh" content="0; URL=/?_fb_noscript=1" /></noscript><link rel="manifest" id="MANIFEST_LINK" href="/data/manifest/?is_workplace_mobile_pwa_dogfooding=0" crossorigin="use-credentials" /><title id="pageTitle">Facebook - log in or sign up</title><meta name="bingbot" content="noarchive" /><meta property="og:site_name" content="Facebook" /><meta property="og:url" content="https://www.facebook.com/" /><meta property="og:image" content="https://www.facebook.com/images/fb_icon_325x325.png" /><meta property="og:locale" content="en_US" /><link rel="alternate" media="only screen and (max-width: 640px)" href="https://m.facebook.com/" /><link rel="alternate" media="handheld" href="https://m.facebook.com/" /><meta name="description" content="Log into Facebook to start sharing and connecting with your friends, family, and people you know." /><script type="application/ld+json" nonce="3zFaFKoi">{"\u0040context":"http:\/\/schema.org","\u0040type":"WebSite","name":"Facebook","url":"https:\/\/www.facebook.com\/"}</script><link rel="canonical" href="https://www.facebook.com/" /><link rel="icon" href="https://static.xx.fbcdn.net/rsrc.php/yB/r/2sFJRNmJ5OP.ico" /><link type="text/css" rel="stylesheet" href="https://static.xx.fbcdn.net/rsrc.php/v5/yp/l/0,cross/Gq1otrMKgGO.css" data-bootloader-hash="kQeX049" crossorigin="anonymous" />
<link type="text/css" rel="stylesheet" href="https://static.xx.fbcdn.net/rsrc.php/v5/yK/l/0,cross/q-ylR7rXeoc.css" data-bootloader-hash="2SCIVmA" crossorigin="anonymous" />
<link type="text/css" rel="stylesheet" href="https://static.xx.fbcdn.net/rsrc.php/v5/yp/l/0,cross/CaoZLveWk0o.css" data-bootloader-hash="n+36Djy" crossorigin="anonymous" />
<link type="text/css" rel="stylesheet" href="https://static.xx.fbcdn.net/rsrc.php/v5/yH/l/0,cross/Ks2Fj0vE6GG.css" data-bootloader-hash="DTjkF3f" crossorigin="anonymous" />
<link type="text/css" rel="stylesheet" href="https://static.xx.fbcdn.net/rsrc.php/v5/yZ/l/0,cross/wNWZkdhYsX7.css" data-bootloader-hash="Jq40kvF" crossorigin="anonymous" />
<link type="text/css" rel="stylesheet" href="https://static.xx.fbcdn.net/rsrc.php/v5/yA/l/0,cross/3sj_ybF1asA.css" data-bootloader-hash="bOIVWOx" crossorigin="anonymous" />
<script src="https://static.xx.fbcdn.net/rsrc.php/v4/yb/r/FqlRSdjUgpb.js" data-bootloader-hash="QJiKcEE" crossorigin="anonymous"></script>
<script nonce="3zFaFKoi">requireLazy(["HasteSupportData"],function(m){m.handle({"clpData":{"1744178":{"r":1,"s":1},"1814852":{"r":1},"1838142":{"r":1,"s":1},"6476":{"r":1000,"s":1},"1848815":{"r":10000,"s":1}},"gkxData":{"196":{"result":false,"hash":null},"329":{"result":false,"hash":null},"417":{"result":false,"hash":null},"1093":{"result":false,"hash":null},"1154":{"result":false,"hash":null},"1514":{"result":false,"hash":null},"1624":{"result":false,"hash":null},"2160":{"result":false,"hash":null},"2641":{"result":false,"hash":null},"3485":{"result":true,"hash":null},"4008":{"result":false,"hash":null},"5196":{"result":false,"hash":null},"5415":{"result":false,"hash":null},"5679":{"result":false,"hash":null},"6796":{"result":false,"hash":null},"7686":{"result":false,"hash":null},"7687":{"result":false,"hash":null},"7742":{"result":false,"hash":null},"8029":{"result":false,"hash":null},"8068":{"result":false,"hash":null},"8460":{"result":false,"hash":null},"8821":{"result":false,"hash":null},"8859":{"result":false,"hash":null},"8869":{"result":false,"hash":null},"9063":{"result":false,"hash":null},"9389":{"result":false,"hash":null},"10726":{"result":false,"hash":null},"10863":{"result":false,"hash":null},"10865":{"result":false,"hash":null},"20836":{"result":false,"hash":null},"20935":{"result":false,"hash":null},"20936":{"result":false,"hash":null},"20980":{"result":false,"hash":null},"20981":{"result":false,"hash":null},"20982":{"result":false,"hash":null},"20983":{"result":false,"hash":null},"20984":{"result":true,"hash":null},"20985":{"result":false,"hash":null},"20987":{"result":false,"hash":null},"20988":{"result":true,"hash":null},"21043":{"result":false,"hash":null},"21050":{"result":false,"hash":null},"21051":{"result":false,"hash":null},"21053":{"result":false,"hash":null},"21055":{"result":false,"hash":null},"21056":{"result":false,"hash":null},"21057":{"result":false,"hash":null},"21058":{"result":false,"hash":null},"21075":{"result":false,"hash":null},"21106":{"result":false,"hash":null},"21107":{"result":false,"hash":null},"21117":{"result":false,"hash":null},"22681":{"result":false,"hash":null},"22792":{"result":false,"hash":null},"22803":{"result":false,"hash":null},"22826":{"result":false,"hash":null},"22875":{"result":false,"hash":null},"22876":{"result":true,"hash":null},"22877":{"result":false,"hash":null},"22968":{"result":false,"hash":null},"22979":{"result":false,"hash":null},"23433":{"result":false,"hash":null},"26340":{"result":false,"hash":null},"26341":{"result":false,"hash":null},"26342":{"result":false,"hash":null},"20948":{"result":true,"hash":null},"25572":{"result":false,"hash":null},"1221":{"result":false,"hash":null},"25571":{"result":false,"hash":null}},"metaconfigData":{"73":{"value":false},"179":{"value":false}},"qexData":{"1696":{"r":null}},"justknobxData":{"144":{"r":true},"450":{"r":true},"1417":{"r":true},"1806":{"r":true},"2269":{"r":true},"2635":{"r":true},"3323":{"r":true},"3409":{"r":true},"2552":{"r":false}}})});requireLazy(["TimeSliceImpl","ServerJS"],function(TimeSlice,ServerJS){(new ServerJS()).handle({"define":[["cr:310",["RunWWW"],{"__rc":["RunWWW",null]},-1],["cr:1078",[],{"__rc":[null,null]},-1],["cr:1080",["unexpectedUseInComet"],{"__rc":["unexpectedUseInComet",null]},-1],["cr:1126",["TimeSliceImpl"],{"__rc":["TimeSliceImpl",null]},-1],["cr:3725",["clearTimeoutWWWOrMobile"],{"__rc":["clearTimeoutWWWOrMobile",null]},-1],["cr:4344",["setTimeoutWWWOrMobile"],{"__rc":["setTimeoutWWWOrMobile",null]},-1],["cr:6108",["CSS"],{"__rc":["CSS",null]},-1],["cr:6640",["PromiseImpl"],{"__rc":["PromiseImpl",null]},-1],["cr:7385",["clearIntervalWWW"],{"__rc":["clearIntervalWWW",null]},-1],["cr:7389",["setIntervalAcrossTransitionsWWW"],{"__rc":["setIntervalAcrossTransitionsWWW",null]},-1],["cr:7391",["setTimeoutAcrossTransitionsWWW"],{"__rc":["setTimeoutAcrossTransitionsWWW",null]},-1],["cr:8958",["FBJSON"],{"__rc":["FBJSON",null]},-1],["cr:8959",["DTSG"],{"__rc":["DTSG",null]},-1],["cr:8960",["DTSG_ASYNC"],{"__rc":["DTSG_ASYNC",null]},-1],["cr:696703",[],{"__rc":[null,null]},-1],["cr:708886",["EventProfilerImpl"],{"__rc":["EventProfilerImpl",null]},-1],["cr:135",["RunBlue"],{"__rc":["RunBlue",null]},-1],["cr:6669",["DataStore"],{"__rc":["DataStore",null]},-1],["URLFragmentPreludeConfig",[],{"hashtagRedirect":true,"fragBlacklist":["nonce","access_token","oauth_token","xs","checkpoint_data","code"]},137],["CookiePrivacySandboxConfig",[],{"is_affected_by_samesite_lax":false},7723],["CometPersistQueryParams",[],{"relative":{},"domain":{}},6231],["CookieDomain",[],{"domain":"facebook.com"},6421],["GetAsyncParamsExtraData",[],{"extra_data":{}},7511],["BootloaderConfig",[],{"deferBootloads":false,"enableLoadingUnavailableResources":false,"jsRetries":[200,500],"jsRetryAbortNum":2,"jsRetryAbortTime":5,"silentDups":false,"timeout":60000,"tieredLoadingFromTier":100,"hypStep4":false,"phdOn":false,"phdSeparateBitmaps":false,"btCutoffIndex":1781,"fastPathForAlreadyRequired":true,"earlyRequireLazy":false,"enableTimeoutLoggingForNonComet":false,"deferLongTailManifest":true,"lazySoT":false,"csrOn":false,"translationRetries":[200,500],"translationRetryAbortNum":3,"translationRetryAbortTime":50},329],["CSSLoaderConfig",[],{"timeout":5000},619],["CookieCoreConfig",[],{"alsfid":{},"c_user":{"t":31536000},"cppo":{"t":86400},"dpr":{"t":604800},"fbl_st":{"t":31536000},"hckd":{},"i_user":{"t":31536000},"locale":{"t":604800},"m_ls":{"t":34560000},"m_pixel_ratio":{"t":604800},"noscript":{},"presence":{"t":2592000},"sfau":{},"usida":{},"vpd":{"t":5184000},"wd":{"t":604800},"wl_cbv":{"t":7776000},"x-referer":{},"x-src":{"t":1}},2104],["CurrentUserInitialData",[],{"ACCOUNT_ID":"0","USER_ID":"0","NAME":"","SHORT_NAME":null,"IS_BUSINESS_PERSON_ACCOUNT":false,"HAS_SECONDARY_BUSINESS_PERSON":false,"IS_FACEBOOK_WORK_ACCOUNT":false,"IS_INSTAGRAM_BUSINESS_PERSON":false,"IS_MESSENGER_ONLY_USER":false,"IS_DEACTIVATED_ALLOWED_ON_MESSENGER":false,"IS_MESSENGER_CALL_GUEST_USER":false,"IS_WORK_MESSENGER_CALL_GUEST_USER":false,"IS_WORKROOMS_USER":false,"APP_ID":"256281040558","IS_BUSINESS_DOMAIN":false},270],["LSD",[],{"token":"AVpiKCdE2bI"},323],["ServerNonce",[],{"ServerNonce":"4iPtjwmxHEEbWqY3yzn2c2"},141],["SiteData",[],{"server_revision":1021172575,"client_revision":1021172575,"push_phase":"C3","pkg_cohort":"BP:DEFAULT","haste_session":"20170.BP:DEFAULT.2.0...0","pr":1,"manifest_base_uri":"https:\/\/static.xx.fbcdn.net","manifest_origin":null,"manifest_version_prefix":null,"be_one_ahead":false,"is_rtl":false,"is_experimental_tier":false,"is_jit_warmed_up":true,"hsi":"7484978647544352438","semr_host_bucket":"5","bl_hash_version":2,"comet_env":0,"wbloks_env":false,"ef_page":null,"compose_bootloads":false,"spin":4,"__spin_r":1021172575,"__spin_b":"trunk","__spin_t":1742732396,"vip":"2a03:2880:f103:83:face:b00c:0:25de"},317],["SprinkleConfig",[],{"param_name":"jazoest","version":2,"should_randomize":false},2111],["UserAgentData",[],{"browserArchitecture":"32","browserFullVersion":null,"browserMinorVersion":null,"browserName":"Unknown","browserVersion":null,"deviceName":"Unknown","engineName":"Unknown","engineVersion":null,"platformArchitecture":"32","platformName":"Unknown","platformVersion":null,"platformFullVersion":null},527],["PromiseUsePolyfillSetImmediateGK",[],{"www_always_use_polyfill_setimmediate":false},2190],["JSErrorLoggingConfig",[],{"appId":256281040558,"extra":[],"reportInterval":50,"sampleWeight":null,"sampleWeightKey":"__jssesw","projectBlocklist":[]},2776],["DataStoreConfig",[],{"expandoKey":"__FB_STORE","useExpando":true},2915],["CookieCoreLoggingConfig",[],{"maximumIgnorableStallMs":16.67,"sampleRate":9.7e-5,"sampleRateClassic":1.0e-10,"sampleRateFastStale":1.0e-8},3401],["ImmediateImplementationExperiments",[],{"prefer_message_channel":true},3419],["UriNeedRawQuerySVConfig",[],{"uris":["dms.netmng.com","doubleclick.net","r.msn.com","watchit.sky.com","graphite.instagram.com","www.kfc.co.th","learn.pantheon.io","www.landmarkshops.in","www.ncl.com","s0.wp.com","www.tatacliq.com","bs.serving-sys.com","kohls.com","lazada.co.th","xg4ken.com","technopark.ru","officedepot.com.mx","bestbuy.com.mx","booking.com","nibio.no","myworkdayjobs.com","united-united.com","gcc.gnu.org"]},3871],["InitialCookieConsent",[],{"deferCookies":false,"initialConsent":[1,2],"noCookies":false,"shouldShowCookieBanner":false,"shouldWaitForDeferredDatrCookie":false,"optedInIntegrations":["adobe_marketo_rest_api","blings_io_video","chili_piper_api","cloudfront_cdn","giphy_media","google_ads_pixel_frame_legacy","google_ads_pixel_img_legacy","google_ads_pixel_legacy","google_ads_remarketing_tag","google_ads_services","google_analytics_4_tag","google_analytics_img","google_cached_img","google_double_click_loading","google_double_click_redirecting","google_double_click_uri_connect","google_double_click_uri_frame","google_double_click_uri_img","google_fonts","google_fonts_font","google_maps","google_paid_ads_frame","google_paid_ads_img","google_translate","google_universal_analytics_legacy","google_universal_analytics_legacy_img","google_universal_analytics_legacy_script","jio","linkedin_insight","linkedin_insight_img","mapbox_maps_api","medallia_digital_experience_analytics","microsoft_exchange","nytimes_oembed","reachtheworld_s3","soundcloud_oembed","spotify_oembed","spreaker_oembed","ted_oembed","tenor_api","tenor_images","tenor_media","tiktok_oembed","twitter_analytics_pixel","twitter_analytics_pixel_img","twitter_legacy_embed","vimeo_oembed","youtube_embed","youtube_oembed","advertiser_hosted_pixel","airbus_sat","amazon_media","apps_for_office","arkose_captcha","aspnet_cdn","autodesk_fusion","bing_maps","bing_widget","boku_wallet","bootstrap","box","cardinal_centinel_api","chromecast_extensions","cloudflare_cdnjs","cloudflare_datatables","cloudflare_relay","conversions_api_gateway","demandbase_api","digitalglobe_maps_api","dlocal","dropbox","esri_sat","facebook_sdk","fastly_relay","gmg_pulse_embed_iframe","google_ads_conversions_tag","google_drive","google_fonts_legacy","google_hosted_libraries","google_oauth_api","google_oauth_api_v2","google_recaptcha","here_map_ext","hive_streaming_video","iproov","isptoolbox","jquery","js_delivr","kbank","mathjax","meta_pixel","metacdn","microsoft_excel","microsoft_office_addin","microsoft_onedrive","microsoft_speech","microsoft_teams","mmi_tiles","open_street_map","paypal_billing_agreement","paypal_oauth_api","payu","plaid","platformized_adyen_checkout","plotly","pydata","recruitics","rstudio","salesforce_lighting","stripe","team_center","tripshot","trustly_direct_debit_ach","twilio_voice","unifier","unpkg","unsplash_api","unsplash_image_loading","vega","yoti_api","youtube_oembed_api","google_apis","google_apis_scripts","google_img","google_tag","google_uri_frame","google_uri_script"],"hasGranularThirdPartyCookieConsent":true,"exemptedIntegrations":["advertiser_hosted_pixel","airbus_sat","amazon_media","apps_for_office","arkose_captcha","aspnet_cdn","autodesk_fusion","bing_maps","bing_widget","boku_wallet","bootstrap","box","cardinal_centinel_api","chromecast_extensions","cloudflare_cdnjs","cloudflare_datatables","cloudflare_relay","conversions_api_gateway","demandbase_api","digitalglobe_maps_api","dlocal","dropbox","esri_sat","facebook_sdk","fastly_relay","gmg_pulse_embed_iframe","google_ads_conversions_tag","google_drive","google_fonts_legacy","google_hosted_libraries","google_oauth_api","google_oauth_api_v2","google_recaptcha","here_map_ext","hive_streaming_video","iproov","isptoolbox","jquery","js_delivr","kbank","mathjax","meta_pixel","metacdn","microsoft_excel","microsoft_office_addin","microsoft_onedrive","microsoft_speech","microsoft_teams","mmi_tiles","open_street_map","paypal_billing_agreement","paypal_oauth_api","payu","plaid","platformized_adyen_checkout","plotly","pydata","recruitics","rstudio","salesforce_lighting","stripe","team_center","tripshot","trustly_direct_debit_ach","twilio_voice","unifier","unpkg","unsplash_api","unsplash_image_loading","vega","yoti_api","youtube_oembed_api"]},4328],["WebConnectionClassServerGuess",[],{"connectionClass":"EXCELLENT"},4705],["BootloaderEndpointConfig",[],{"debugNoBatching":false,"maxBatchSize":-1,"endpointURI":"https:\/\/www.facebook.com\/ajax\/bootloader-endpoint\/"},5094],["ServerTimeData",[],{"serverTime":1742732396187,"timeOfRequestStart":1742732396139,"timeOfResponseStart":1742732396139},5943],["BigPipeExperiments",[],{"link_images_to_pagelets":false,"am_page_load_promise_timeout":false,"enable_bigpipe_plugins":false},907],["cr:7730",["getFbtResult"],{"__rc":["getFbtResult",null]},-1],["cr:8906",["goURIWWW"],{"__rc":["goURIWWW",null]},-1],["cr:925100",["RunBlue"],{"__rc":["RunBlue",null]},-1],["cr:7386",["clearTimeoutWWW"],{"__rc":["clearTimeoutWWW",null]},-1],["cr:7390",["setTimeoutWWW"],{"__rc":["setTimeoutWWW",null]},-1],["cr:1003267",["clearIntervalBlue"],{"__rc":["clearIntervalBlue",null]},-1],["cr:896462",["setIntervalAcrossTransitionsBlue"],{"__rc":["setIntervalAcrossTransitionsBlue",null]},-1],["cr:986633",["setTimeoutAcrossTransitionsBlue"],{"__rc":["setTimeoutAcrossTransitionsBlue",null]},-1],["cr:6799",["EventProfilerAdsSessionProvider"],{"__rc":["EventProfilerAdsSessionProvider",null]},-1],["IntlVariationHoldout",[],{"disable_variation":false},6533],["IntlNumberTypeProps",["IntlCLDRNumberType05"],{"module":{"__m":"IntlCLDRNumberType05"}},7027],["AdsManagerReadRegions",[],{"excluded_endpoints":["\/am_tabular","\/column_suggestions"]},7950],["AsyncRequestConfig",[],{"retryOnNetworkError":"1","useFetchStreamAjaxPipeTransport":true},328],["DTSGInitialData",[],{},258],["IntlPhonologicalRules",[],{"meta":{"\/_B\/":"([.,!?\\s]|^)","\/_E\/":"([.,!?\\s]|$)"},"patterns":{"\/\u0001(.*)('|&#039;)s\u0001(?:'|&#039;)s(.*)\/":"\u0001$1$2s\u0001$3","\/_\u0001([^\u0001]*)\u0001\/":"javascript"}},1496],["IntlViewerContext",[],{"GENDER":3,"regionalLocale":null},772],["NumberFormatConfig",[],{"decimalSeparator":".","numberDelimiter":",","minDigitsForThousandsSeparator":4,"standardDecimalPatternInfo":{"primaryGroupSize":3,"secondaryGroupSize":3},"numberingSystemData":null},54],["SessionNameConfig",[],{"seed":"2A7t"},757],["ZeroCategoryHeader",[],{},1127],["ZeroRewriteRules",[],{"rewrite_rules":{},"whitelist":{"\/hr\/r":1,"\/hr\/p":1,"\/zero\/unsupported_browser\/":1,"\/zero\/policy\/optin":1,"\/zero\/optin\/write\/":1,"\/zero\/optin\/legal\/":1,"\/zero\/optin\/free\/":1,"\/about\/privacy\/":1,"\/about\/privacy\/update\/":1,"\/privacy\/explanation\/":1,"\/zero\/toggle\/welcome\/":1,"\/zero\/toggle\/nux\/":1,"\/zero\/toggle\/settings\/":1,"\/fup\/interstitial\/":1,"\/work\/landing":1,"\/work\/login\/":1,"\/work\/email\/":1,"\/ai.php":1,"\/js_dialog_resources\/dialog_descriptions_android.json":0,"\/connect\/jsdialog\/MPlatformAppInvitesJSDialog\/":0,"\/connect\/jsdialog\/MPlatformOAuthShimJSDialog\/":0,"\/connect\/jsdialog\/MPlatformLikeJSDialog\/":0,"\/qp\/interstitial\/":1,"\/qp\/action\/redirect\/":1,"\/qp\/action\/close\/":1,"\/zero\/support\/ineligible\/":1,"\/zero_balance_redirect\/":1,"\/zero_balance_redirect":1,"\/zero_balance_redirect\/l\/":1,"\/l.php":1,"\/lsr.php":1,"\/ajax\/dtsg\/":1,"\/checkpoint\/block\/":1,"\/exitdsite":1,"\/zero\/balance\/pixel\/":1,"\/zero\/balance\/":1,"\/zero\/balance\/carrier_landing\/":1,"\/zero\/flex\/logging\/":1,"\/tr":1,"\/tr\/":1,"\/sem_campaigns\/sem_pixel_test\/":1,"\/bookmarks\/flyout\/body\/":1,"\/zero\/subno\/":1,"\/confirmemail.php":1,"\/policies\/":1,"\/mobile\/internetdotorg\/classifier\/":1,"\/zero\/dogfooding":1,"\/xti.php":1,"\/zero\/fblite\/config\/":1,"\/hr\/zsh\/wc\/":1,"\/ajax\/bootloader-endpoint\/":1,"\/mobile\/zero\/carrier_page\/":1,"\/mobile\/zero\/carrier_page\/education_page\/":1,"\/mobile\/zero\/carrier_page\/feature_switch\/":1,"\/mobile\/zero\/carrier_page\/settings_page\/":1,"\/aloha_check_build":1,"\/upsell\/zbd\/softnudge\/":1,"\/mobile\/zero\/af_transition\/":1,"\/mobile\/zero\/af_transition\/action\/":1,"\/mobile\/zero\/freemium\/":1,"\/mobile\/zero\/freemium\/redirect\/":1,"\/mobile\/zero\/freemium\/zero_fup\/":1,"\/privacy\/policy\/":1,"\/privacy\/center\/":1,"\/data\/manifest\/":1,"\/cmon":1,"\/cmon\/":1,"\/4oh4.php":1,"\/autologin.php":1,"\/birthday_help.php":1,"\/checkpoint\/":1,"\/contact-importer\/":1,"\/cr.php":1,"\/legal\/terms\/":1,"\/login.php":1,"\/login\/":1,"\/mobile\/account\/":1,"\/n\/":1,"\/remote_test_device\/":1,"\/upsell\/buy\/":1,"\/upsell\/buyconfirm\/":1,"\/upsell\/buyresult\/":1,"\/upsell\/promos\/":1,"\/upsell\/continue\/":1,"\/upsell\/h\/promos\/":1,"\/upsell\/loan\/learnmore\/":1,"\/upsell\/purchase\/":1,"\/upsell\/promos\/upgrade\/":1,"\/upsell\/buy_redirect\/":1,"\/upsell\/loan\/buyconfirm\/":1,"\/upsell\/loan\/buy\/":1,"\/upsell\/sms\/":1,"\/wap\/a\/channel\/reconnect.php":1,"\/wap\/a\/nux\/wizard\/nav.php":1,"\/wap\/appreg.php":1,"\/wap\/birthday_help.php":1,"\/wap\/c.php":1,"\/wap\/confirmemail.php":1,"\/wap\/cr.php":1,"\/wap\/login.php":1,"\/wap\/r.php":1,"\/zero\/datapolicy":1,"\/a\/timezone.php":1,"\/a\/bz":1,"\/bz\/reliability":1,"\/r.php":1,"\/mr\/":1,"\/reg\/":1,"\/registration\/log\/":1,"\/terms\/":1,"\/f123\/":1,"\/expert\/":1,"\/experts\/":1,"\/terms\/index.php":1,"\/terms.php":1,"\/srr\/":1,"\/msite\/redirect\/":1,"\/fbs\/pixel\/":1,"\/contactpoint\/preconfirmation\/":1,"\/contactpoint\/cliff\/":1,"\/contactpoint\/confirm\/submit\/":1,"\/contactpoint\/confirmed\/":1,"\/contactpoint\/login\/":1,"\/preconfirmation\/contactpoint_change\/":1,"\/help\/contact\/":1,"\/survey\/":1,"\/upsell\/loyaltytopup\/accept\/":1,"\/settings\/":1,"\/lite\/":1,"\/zero_status_update\/":1,"\/operator_store\/":1,"\/upsell\/":1,"\/wifiauth\/login\/":1}},1478],["DTSGInitData",[],{"token":"","async_get_token":""},3515],["WebDriverConfig",[],{"isTestRunning":false,"isJestE2ETestRun":false,"isXRequestConfigEnabled":false,"auxiliaryServiceInfo":{},"testPath":null,"originHost":null},5332],["EventConfig",[],{"sampling":{"bandwidth":0,"play":0,"playing":0,"progress":0,"pause":0,"ended":0,"seeked":0,"seeking":0,"waiting":0,"loadedmetadata":0,"canplay":0,"selectionchange":0,"change":0,"timeupdate":0,"adaptation":0,"focus":0,"blur":0,"load":0,"error":0,"message":0,"abort":0,"storage":0,"scroll":200000,"mousemove":20000,"mouseover":10000,"mouseout":10000,"mousewheel":1,"MSPointerMove":10000,"keydown":0.1,"click":0.02,"mouseup":0.02,"__100ms":0.001,"__default":5000,"__min":100,"__interactionDefault":200,"__eventDefault":100000},"page_sampling_boost":1,"interaction_regexes":{},"interaction_boost":{},"event_types":{},"manual_instrumentation":false,"profile_eager_execution":false,"disable_heuristic":true,"disable_event_profiler":false},1726],["cr:8828",[],{"__rc":[null,null]},-1],["cr:1094907",[],{"__rc":[null,null]},-1],["cr:1183579",["InlineFbtResultImpl"],{"__rc":["InlineFbtResultImpl",null]},-1],["cr:806696",["clearTimeoutBlue"],{"__rc":["clearTimeoutBlue",null]},-1],["cr:807042",["setTimeoutBlue"],{"__rc":["setTimeoutBlue",null]},-1],["FbtResultGK",[],{"shouldReturnFbtResult":true,"inlineMode":"NO_INLINE"},876],["AdsInterfacesSessionConfig",[],{},2393],["FbtQTOverrides",[],{"overrides":{"1_000b6572c6a3f7fe9312e5879dd2e75b":"You'll need to log in with Workplace to continue this video chat.","1_023ac1e3f0ce2980598584f26a784b9f":"Ignore messages","1_028dc427119e6bfbfcd5eb2dd83b2a9e":"View Page status","1_075684469438a60ae5f6813949e94a0d":"Get quote","1_0778dc4cf3fe167942881fecddd5dee2":"Learn more","1_08a3224cc0fd966f2bb0e780c51e6a0b":"New poll","1_0a090165a1d0654210eb444114aabd7c":"Switch between accounts","1_0b9af3d5b6a4de6cb2b17ad5a0beec3a":"Learn more","1_0d0b40d72cd2adc492a402e98e18896f":"Chat notifications","1_0ea6e742163878d88375800514788740":"Invite link","1_0ea7de82b669cced737b30875f15309a":"Local event from Facebook","1_0f008d2991187964d472eceaf9ba28d6":"Featured sticker packs","1_0f48efb82ce58bf43dec6a98dcadc874":"Add your new number","1_0f9fceeb2e66627d9e346dd24e0d6916":"Remove from channel","1_0fee0283487e0259495a07f9e315ad8f":"Your home in Messenger","1_1068c1352d8cbb8919cc2b4a0dbcd9f3":"Hide contact","1_10811a6ece4ca15b10dc22f89805a347":"Customize your chat with {short-name}.","1_117fb24f8ee951759e9435520cc71e70":"More options","1_1248a8548f1b43fd3d9fc77baf835a04":"Contacts only","1_1593f9d2cc4c63f196a61a70eff664cf":"Send to group","1_159aa796a642d08a85379ec9693d25c7":"Opt in","1_1736f6743cf12be3ffc46cd556357e96":"Book now","1_18b8ec487f180574ad865f168eeafa70":"Content not found","1_1905e45a72593e291dda8c774aa4caf4":"Invite people","1_1ac128eda299351dc18567e7a6f31be6":"Hide video","1_1b38f249fefb0fd5ef7912a1fe615d10":"Pinned location","1_1b59f7e84dba4c8754cf60d1bafa6ae5":"Shared stories","1_1cf36465e606a10ef2a48c5dee532085":"Great job, {user_name}!","1_1d36c6e7b1a07971c84821452f9dc407":"Ignore conversation","1_1d89beed629123cabeeea834c345a7fc":"Mute notifications","1_1f209b12cabbe35509c514220825d53b":"New story","1_209b3fb19e7c487ffe3bd85b2adac6db":"Try again","1_20cec0b4386ad8555f8b619ad2c2fb81":"Single pop","1_215afaeceab4d29970af2c11221f79e3":"Web visibility","1_226d5171b148e60fe004a4f3cc53a81b":"Delete group chat?","1_23f5a1596d301feaeb32b47f24dc73a0":"Join call","1_243d55bab0d83c72b2113bfd5ca2e194":"Membership questions","1_25589d7cb1db33911bf18252dbb5155c":"Message history in Inbox","1_2745ba03fa7b9c0f59c0797fb44da204":"Showing in chats","1_27f38b56fa58a394e2d89fbf7288747b":"New sender","1_28ea9e6140b5437477564e5b21353246":"Profile picture","1_2953f6f20942da4f0593b905a4db3d90":"See details","1_2af4c8cb4d30a1aaa744a75187d6b06d":"{number} invited by you","1_2b2898b200686215c54616553499fddf":"Unread messages","1_2b406f4727fff3df7dd970cac1c41536":"Messenger preview","1_2c2ff60e8d5edccadadf61f739b6d87b":"Report story","1_3002f3a3232973642407c2e3830c10f6":"Stop sharing location","1_30ed561a77bfcadb3b66d5960c2a9e05":"Photo reminders","1_313c1c8a5025b45c60712685f0d89c6c":"App visibility","1_33886f5d4a6ede055ec28ddf69251cc5":"Life events","1_3543833b8b31fbb1561d46f2c0b266a8":"Added with theme","1_366d38e456780d92844ab4b39ac1de78":"Not interested","1_37900af383a573c0337521bca05d7955":"Respond to event","1_37ebfbfd36c55a8366f7ba9d528cf7b3":"Chats you can create","1_39339bb4b3f3002e589625a820bf5c7a":"Learn more","1_3a9a1e192465754ec4427995fe1cffb4":"Buy and sell groups","1_3aa3f2c2971602310d482c632c086db8":"Chat hosts","1_3bc7a4f74be5e3dbfdc9b758fa779fff":"Chat plugin","1_3cee79cd9e136ffc84ccfc7082bef6c2":"{number_of_happening_now_events} happening now, {number_of_upcoming_events} upcoming","1_3e8fba90f69e371d19c5b4f79e3f0be7":"Buy and sell groups","1_3f4c233aac1d71d17bee559b932144d3":"See conversation","1_41446ff5d2de26a67626d2ba309c969b":"This video can't be sent","1_4151657ef8e7bc03ab8169e5dcb0d675":"Cancel request","1_41eadd6427237386cc04b60a8ab94a8b":"This chat will show as unread","1_46793f5529ff4a62f831cf9218082b7f":"Unread requests","1_46879d905028aaee9f7297d27c075b50":"See messages","1_46b9f298de3c041a464dbe8ff7f3d978":"Language settings","1_46c8d595559f4232c4a7fe113aac3093":"Get started","1_475781e5e945e3d217b563d6ccd51ecd":"Create prompt","1_489630491bec0288ae7c0bef88ff5ad9":"Show music picker","1_4ad1c9e7de7af0b7d1853ed6863469db":"Snooze for {number_of_hours} hours","1_4b56df30045efb8a5d21ec865d43ec1c":"Approved by you","1_4b9736a9d6cbeb6249b0704870ec383e":"No devices yet","1_4cf8fe13a0639e31c0d73b5aec3b8019":"Something went wrong","1_4d5c8cbda9ac3dfc82b483ecf952a53c":"Open Facebook app","1_4e75a018ef44c107750832d736fcce90":"Send details","1_4ee7496edd4dafc3c2b2a6225f1a6f69":"Nearby places","1_5009586cb3b7953608b1ccc56cb3e630":"See conversation?","1_50c0e7742a3eb3800f3c2fdd5bce8f3a":"Admins & moderators","1_531aa532255f18fbb4386d4ac4bf537d":"Search emoji","1_53e9c4c2a53662ab23979d6cd79d4417":"Stop sharing","1_5490d986c6908e35ac70ae79cca740fc":"Switch account","1_55c0717e522433cf319a51f6ed6d4d09":"No messages","1_55c2f7ac43fba60f684a0a0dfd01bb89":"Edit avatar","1_55e31911698e89d3b19d4c703079cdf2":"{content} Learn more","1_56d2098fc23416108de3ceae0fd6c158":"See link","1_599d20d959e0009397c73fb9edb426dd":"Private post","1_5af9abe8c5f4d9bcce27117d09ca6932":"Start call","1_5e86ca443695bbd6605bcd169ee35a74":"Group updates","1_5f0a4852946206863aa44a9ec3f87708":"Send to group","1_60a7a58934bd27cbaf2058b53ff745f6":"Leave game","1_60eb52f4ce4a109523fbfa8e90244331":"Live location","1_617aeb029449c78895903ece88034b31":"Show picture-in-picture","1_61cb9f934ffb6b5f8cc4cb95757125d4":"Invalid time","1_6315107c7594ac961c8dac9aabbb957a":"Add to her picture","1_64b1b9a14a334d3cce48f22f2b03e7c2":"Not now","1_6544e705bd98780c45018863ca564aa1":"Block messages","1_6582285731ad9288ac97889beeca82f3":"Avatar settings","1_66402d631b18879269b46a49f95a0a4e":"Noise suppression","1_6689492f38a51b5cb39982dd8a0e7f00":"Account details","1_678bfb1d36a580695ccbb699c8fd1bd2":"Logging in\u2026","1_6795cc13b37b3be61a143c35c9c65382":"Recently shared","1_6a9a0529abd169ff91b49b4022dbf5a5":"Buy and sell groups","1_6b124b9a53cd1299ad43ceef50dcd0e2":"Unread chats","1_6d2f04c835bd2e9e555649e2f121fd5f":"Introducing AI stickers","1_6dc5cc58c44e3791e14cdb69816e8a3f":"Product catalog terms","1_6ec9c14f5b6103937c24960c6ae37947":"SMS messages","1_7008293f762c6b49632496bd6aad21ff":"Suggested chats","1_70190249ea4fa344ffbe77fd48af796f":"Pause chat?","1_701d063f9d93574540e7a4aa27d2f86d":"Message reactions","1_7052e2f38bec805609d7986562d34ed0":"Your reactions","1_72920428a45b969c9dad788a656c323c":"Skip to details and actions","1_7341e8b3089e0af586ed3b9682c2b5cf":"View call","1_73761caf2fde503928bfdbd48c983136":"See conversation?","1_7808c5327cf430807c173fa11ac0cc26":"Learn more","1_7930f1b92ced21f16265c1ab07265964":"Chats you can join","1_7bf132b7beb84dbc96f9cc6a1caef3a3":"Last name","1_7c5789ad7c9455a96fa0b8d3edaf1dd0":"View profile","1_7e3e738782f1887fbcebca5e62902a72":"See group","1_7f626e74849fb5ad4a61825532fb6054":"Confirm your identity","1_801af62106d995c8b376a512e2146039":"Block messages","1_806d0518a4e1e599c196185438e2b79c":"Change image","1_83a0754dbad2db42dcbe0e8900e6b48a":"AI-assisted message","1_84698e2e6128e955605ddff2615c2771":"In transit","1_88b60e4824d116c36468b700b6287e2f":"Your location","1_8a1749bf031ab122983b76b370a86be3":"Learn more","1_8bc33223ef4caf9b437b812c2772d946":"Create poll","1_8c84ed97d7d84a31c72b1c75300a9461":"Delete chat?","1_8dea727922641bc0de681cb214274b2f":"View AR object","1_8e82c5b24398a0887342f439b66ce8c3":"{user}'s location","1_8ea29d4da797ad3ae8fa2b3626b2a50c":"Disabled chat","1_8ef9ffb962319c095470bb46de00beaa":"Current location","1_9025bb6bcf560d6de6cfd22af6eaec97":"All chats menu","1_9050fb0878cf1e782d24779cf780114c":"Recent calls","1_91d783db2fb886ee4801ae5e0a86e04c":"Channel admin","1_92255cd3d8f183d6dcb03b606a3445c2":"Recent searches","1_925dfeb7269a4b97e5035aede422151c":"Upload contacts","1_92b1a4d18dca5da9ac47d17733885fc2":"How to add friends on Messenger Kids","1_93183c880d14f092e5d9617d9a246a74":"Read receipts","1_939fba302a75b306e132ccb37e09a148":"Ignore group","1_944401d1748eeaa9a66e62241477695e":"View details","1_948415d2b551fa7c8b50376738732e5b":"Community members","1_9626d7ac31beaf24bbd48f4842bf4744":"{num_activities} activities","1_9645bee1f9dba4ee355d68df18cb1102":"Contact card","1_96cc0d1d8acdfbcc9fe4623a53183f99":"No more posts","1_983e4f9e7f9ecfdb8a2d0aa8247942de":"More conversations","1_99dd31ad1b3145dfb03b7b4b097f28d5":"Send current location","1_9ed1ff8f2501b81918e505f6e17fd362":"Send separately","1_a1195adc52046789d21a0ae117244224":"Creating poll","1_a12b852de26a50e5b6986edc7fa2705e":"Account created","1_a2ed1fddb5b17414f3b7941385713361":"Suggested people","1_a3d27f40032c3217f0934bcd46d52392":"Learn more","1_a3f05430c2d2c4a7949a503649a0941d":"4 things to know about your information","1_a4694c6ccbc990026015c70c944fe25e":"Cover photo","1_a64a04c8ea9a8cf38124918e78c71b60":"You've blocked this account.","1_a7a430455b6aaba0be1cf776314c8e70":"Learn more","1_a7e141af65d2cd2dc972d3c094d2ce4f":"Charge your Bluetooth keys regularly.","1_a8fd7153d9fbad9cece5913d6268813c":"Voice and video calling","1_a96a641ba1f4b43910fab6d1b55c9b17":"Not now","1_a9c08e1b18c1bceb358a7bf4a1aee0aa":"View profile","1_ab80b68f0048ce8515584d069d120405":"Submit a report","1_abd30739736c002c9a49c782066cbe86":"Save changes","1_add682c72addd3a0d8b6fcab3720aadc":"Turn on","1_aeb4b99dd7b73001a4f730b4a9120e04":"Try again","1_aec2472fe4a2eaccb817d6111a4c0d39":"Video call","1_af9c98d11efedfee4f1301601a67874a":"Double knock","1_afc0eae78aa06ac4e92bf98ac3a03177":"Ignore group","1_b0308bd1c93ff21594fabd353bda0a2a":"Red\/green","1_b14ffeb649c54cac70fe09d9f7780889":"Open sticker, emoji and GIF keyboard.","1_b22b6c4a8dd3ff71f35d007751cd87b0":"Get the Messenger app","1_b2cea7ff1ee86133589fc73e5f2f3f9d":"You can turn this off at any time in your Parent Dashboard.","1_b32cee1f96ea285d99c5ca73d4eb725f":"Date of birth","1_b3dd269103f0d9b89d9bdb677dbd8887":"Invalid link","1_b3ecf06a63fd5147cac3c083201ac7eb":"Data saver","1_b42224e77c208d4ee532f212f5fe7a47":"Learn more","1_b449f7098ace13c92ffc9bb9d5a5bb6f":"Live description (optional)","1_b45945f81d03ceaf6f9441f2eeeec891":"Contact us","1_b4c7d1e15b39ef2c3956027bb4d6cd11":"Placed on {date} \u00b7 Canceled","1_b6392edec7f022a20e9867eb0b24de7b":"Featured Facebook photos","1_b6f50b519cec90102cc5b62361a81288":"Mute notifications","1_b81d470fc8105e7a7896e7cffb0ceeed":"Add contact","1_b9143060878dce3a509e6bc2548b82f2":"Search for adults","1_b997548b5fdd3a2dee73c3392135d911":"{number} invited by you","1_ba4838bc3349d125cfb867715cada2f9":"Update build","1_bbc5d4c00b66cc87bd1e6f8ab51fc102":"Call with video","1_bbd9c674819da6d44ca09fa575180083":"Videos to send","1_bc1a68f2efbc9ac36f13fe05f5d65e51":"Unmute notifications","1_bc5ed53c58ed1544e3e014e9d7dee341":"Creating community","1_bf841bb55b37d0620ef1b2bea096b95f":"You waved at {$recipient}.","1_bfbf4cbd94a30fe78e2c6243fbaedb73":"No internet connection","1_bfef0efc933e18bc735d53351af694e0":"Photos to send","1_c174849dd6b0df72ce6c611bda774209":"Add option","1_c21bf170fea995d887a6b64c13639323":"Double pop","1_c6f4d12c2c30c1986800afdd50f373cd":"Preview chat","1_c794c37e69d7f325e9a433f02ba8790b":"Message requests","1_c8077b6c0597db47a0485bc0f32e9980":"Your avatar","1_c921177d0d05ed9c9b95487f15422056":"Delete channel","1_c94482ebd9b72b746183c50a4d4208d6":"Send a like","1_cb73b265ac209451363883bed772c9bb":"Play together","1_cc78ccf039dccf8d1dea818b85eab80d":"More people","1_cd6b327676433f7b3c3515f206c0b82a":"{phone_number} \u2022 Phone contact","1_cdc01fc97f5a6cf6ba07c7bcc4fe11e1":"Add question","1_cde9138094eb836637af973172431d53":"{name1} wants to add {lastPendingKifTargetName} as a friend","1_ce3d72055f43aaf90d886ab0017ca08c":"Recent articles","1_cef77356ede0b83cf0465641b0719a42":"Problem with Bluetooth or audio source","1_d29c32cd116f7833d1f496f064788d8c":"Report someone in this chat","1_d3e1e228c31890a4aba20db8d31fd323":"Notification control","1_d7bbd024b73557f1cf0914a38113498d":"Block messages","1_d8de8ea2ef707a7aace4a752b147d8f1":"Mark as read","1_d9f5379b09800045f33f218dc5408f64":"Welcome message","1_dbd60e7eb18c870f9603d90f44f244ab":"Group chats","1_dc6a01243c06b93a27cbe6c6d6c795f3":"Camera roll","1_dcabb4806e92c408bd735494ddd92a6c":"Draw a necklace","1_dee291c2ba2b66491a65be6138906278":"Hidden group","1_df45795d00cab7a89a5557f9a392a7b2":"You opened this chat from {Origin Domain}","1_df57e221cb0b224e5a0090f7dcef6677":"Forward limit reached","1_df848a5c2d023027ac455f8321243645":"Report buyer","1_e11f9f6dcd24ac5786c0eb8ff1851e1b":"Update information?","1_e12cc3ec2ab93b6916804e5e1f6a336f":"Add to story","1_e146ca287d980280ff6dabc5d32b2713":"Leave conversation?","1_e250ac43039a943db6bd1855c02f6c39":"Learn more","1_e27604669dde9743f8c4a735e650e5a6":"Thanks for being a superstar in this chat!","1_e57e0918dc3eb089646890b6bb915dc0":"Choose kids for {name1}, {name2} and {name count} others to chat with","1_e7861583dd9505c6c9a5dd36aca38d3b":"Unblock messages","1_e809c2825e3b050976f7ca22f1532032":"Faster messaging","1_e8d7d977b19c2aa1894496a663c986dc":"Blue\/yellow","1_ea8ff502404e09cf262e602989d843d8":"Go to recent chats","1_eceb9aa9398269f52436f1a1a7ee41b4":"Send to group","1_ee9abb17ff7ad017ae988a02f8f5beae":"Top friends","1_eec0e983014426e06f0c4077e7333275":"Unblock messages?","1_ef4b4300b7a1f0319566068f5568c938":"Updating poll","1_f165e0191456b0373edec046de3290d5":"Active now","1_f2010c43a90ee7c3b7d6d3cab66ef06e":"Social networking","1_f33ba2aba991e0820ccfef1ac81c4c14":"Recommended communities","1_f580546da084946da3d6f61e3cc636da":"Channel settings","1_f5d924ee511bdbc00c3dd05a10fe8260":"Please update your app","1_f816fc32554f392be8655ee6db8f7dd5":"Continue with PayPal","1_f90fb65f92ad8ac33f140b8be3c9eed1":"Invalid file format","1_f919ada00521135434fd084a87e64542":"Add photos","1_fa663c0ee32eeae58fd133765c35f905":"Learn more","1_fba7ed548a73364cce9a2ad6e168b798":"Audio call","1_fd3afb0fabe31263a19dac9f61fb0d4f":"Look up info","1_fd7ada49a7f6f2ab82454ec27b9c6725":"Couldn't remove message","1_fdf2eec743eaf4ee4b25a683f71525c6":"Add a profile picture","1_fe84ad51b794fd555ef027662cbb6f2e":"Event creation","1_ff1c542ee2c5bb59ee27ade5e7e52cb4":"Resume chats","1_ff6b115a8a131f9f1b4b8c9c80ec38d4":"For families","1_01f3beddbcd5491063fd7587b0785fd7":"Video call is full","1_0bb657a03fcace8be70ff1c092b35b62":"Forward limit reached","1_12213f25a4e94520a59b51c3d565edf1":"Date of birth","1_12d2f816058bda88b9f56cd9dedd5e16":"You can turn this off at any time in your Parent Dashboard.","1_138bdbd67af3b9c9d4cdd6c8cc8708a2":"Something went wrong","1_183c5e431133dafadb40a2627c25432d":"Something's wrong","1_1d0e61a46a120591d790f382f91f9c99":"Search for adults","1_23423f479668dd06c46036d8f37edf9a":"You opened this chat from {Origin Domain}","1_2882107be72d37df895b05e0573990a6":"Unblock messages?","1_2b99f4eb0d10fb2a590c91881bc93620":"Can't create duplicate account","1_2dfe4f010e821ffa89d9c4133df72506":"Problem with Bluetooth or audio source","1_2e510be3887bae0dd4d73733dffa6ec4":"{firstname1}, {firstname2} and {firstname3} are online","1_2e9405cf33a60079eba08f7433c66595":"Unable to connect your call","1_2feb150fdf16fe534e635fa1143a7508":"No devices yet","1_31426213a5556e794c313d21dbeceb6b":"Turn on","1_3bce071d20c866b7a915136c01c2a17f":"Remove from channel","1_3e252ef60c34f4c269a640aedaaf9a91":"Recent calls","1_4323029c4a9559df6910965a98e5f7ee":"Customize your chat with {short-name}.","1_441e2b39aa374ab1c0a622f1b6e7fc94":"Delete {Account Name}'s Messenger Kids account","1_4994c24b8d4dddbbef04db4ac77b8bcc":"Link privacy","1_49d7f78ceda6bf498723e714f09ab445":"Thanks for being a superstar in this chat!","1_5281d15cd9033cfae6f25bbfb95f2a84":"Add people","1_55329bd3473ce3a2df9059b20779a464":"My preview","1_55d8b31242e3dd713affa2d9c303ca18":"Open camera settings menu","1_57095066a5af6f37f159d7a7bcc474b4":"Settings > Add a new device","1_572460b539878eceb021da6f0ba4ad27":"Search in conversation","1_588c13ae9c29e4cad57ff0623473419b":"You can't message this group","1_59e4d389c284d58c6a7006f6b0562811":"Photo reminders","1_5a928f58cc901c2f036154287466ac52":"AI-assisted message","1_5af74bfaddbfdad2526294491119b1ac":"Call notifications","1_5b15ff8357f34309683c127f15840806":"Chat plugin","1_5b4abffee3f305389a50710f7d485df8":"Introducing AI stickers","1_5db467841ea204babe44c0bb4275c013":"Message sent","1_5dbfacce1399e2f5cb7a6380beba0d09":"This may take a moment...","1_67045d680945154400cf43a419e4ff9b":"Please update your app","1_6831028223b7159f4a16a762309aeda5":"Invite with a link","1_68667c64d4e948188b48f13c7b8324c0":"Open Facebook app","1_69b4fbe4cc084fbff4fcf68d2f9d5fed":"Charge your Bluetooth keys regularly.","1_6cd66115c7adbd7d8d450aaa8a5015d9":"Contact phone number","1_74630a0214a11fa5068b0655daafe2de":"Facebook user","1_752a4442f6eb09a9c79427caefd174c5":"4 things to know about your information","1_76f971d0cf5dc8a40e43aa6592bf6015":"{num_activities} activities","1_79cb46c945b63a0e9c8bd77518fd38f0":"Add a profile picture","1_7a4acef2efaf880fb516077a756bea63":"Image ID not returned.","1_8842669d806d74dfddee6ca515f2d8db":"Look up info","1_8c442034b2e9c1bcc394eb6907b1d510":"You'll need to log in with Workplace to continue this video chat.","1_92469592130a0e85a5e996fa12296099":"Account details","1_9dbc389a7657e7c498fe3cd2e8c903b9":"Messenger preview","1_a02773f3eb15c1a027aacc96b97f526f":"Invalid link","1_a2a5724aff5a7cca2d69a4e30e754431":"Open System Preferences, then use the Security & Privacy controls to grant Workplace Chat access to the camera and microphone. You may need to restart the app for the settings to be applied.","1_aa3f089a4051c1e5ed29b0473ecb462c":"Last name","1_aa408b4afeb14b97cfcc9915842b0b00":"Confirm your identity","1_aa542254b59b7d679b6fdb93590402d3":"Show picture-in-picture","1_b2fcaaf664421e83c164b2db208e6c2b":"Dance party","1_bac81400de6624c1e42b308333c30946":"Move to grid","1_beebce762afa64542777f56c09d80178":"How to add friends on Messenger Kids","1_c0a187c52a5eda47cc616d9da9d48264":"This lets you play Apple Music tracks, add tracks to your music library and more.","1_c0bf6a1e1c71e84db2d85d977ea0352c":"You asked to chat with {name1}.","1_c470052944bf04f16919dc993025b1f3":"Send separately","1_c65fba5a9f5914e3837eddb303417521":"Placed on {date} \u00b7 Canceled","1_c70d03f023ad810666fb2b89f962b34f":"Blue\/yellow","1_c995f1a5f939c822beefb3ff278bf59c":"Thanks for being a superstar in this chat!","1_cd4fecb8aead25c0effd4ac632f98755":"Cut over this chat to E2EE","1_d138dd68d66991762d0960a448c9dbf1":"Chat members","1_d2306e12f55ac0dad00099ff94a9ecce":"Install Workplace Chat audio sharing software?","1_d2abcef26824c99a9b7b66ebfd5b36a8":"Manage folders","1_d47fd6e064b6d1afcb5e5d3674dff1e2":"Start chatting","1_d757e02fa81fb3f8bb93135f107c6516":"Test speaker","1_db1d708e4daa1d62b46287504eae8acc":"This video can't be sent","1_df5b853bbb16433e2ce5f781de7d297b":"Squad hang","1_e4cad6566ee6fa7548d52ba7824506c0":"Remove address","1_e67d8767d558befbca8c04d5b99d91d9":"Draw a necklace","1_e811fc5925e4dcd78c046551cb24e889":"This chat will show as unread","1_ed32b0c87ff94ede7145d9b17ba192ba":"View {remainingCount} more photos","1_ee45d6f16d585bfe6cebb6800c4822d4":"Add to her picture","1_f5bffa9a6c448e63ca61155760dca5fd":"No messages","1_f6ffd6ae71c283f8aec7c7bc2cbfa289":"Open audio device selector menu","1_fc4f960e763c5eedcbf5c27cf0411d4b":"{name1} wants to add {lastPendingKifTargetName} as a friend","1_fe319617901612fc3c881e2d69ade21d":"Choose kids for {name1}, {name2} and {name count} others to chat with"}},551],["AnalyticsCoreData",[],{"device_id":"$^|AcYabHPJuLCZbbNWsNnWjl6ApqD1s7CN3ivEAkaOY8QAYVIad8XzWUHmkHFZ5BSZGJzZiFpgs2y4CkIq5rzGQ1UaqhWrdAnzAVie_13ITtM-jE7XygebkvSQLG2l64tQyqmhUUIuEjos4gft0wplg5hj9g0r|fd.Acbx82WtSD5ru1MxE7FjmqM2c90xsEMSdx7VYdGJTmZKs5fPcCsMM8kDTCIY0Bq1r6QpM0IpjY2dvuvaHLHZL9NQ","app_id":"256281040558","enable_bladerunner":false,"enable_ack":true,"push_phase":"C3","enable_observer":false,"enable_cmcd_observer":false,"enable_dataloss_timer":false,"enable_fallback_for_br":true,"queue_activation_experiment":false,"max_delay_br_queue":60000,"max_delay_br_queue_immediate":3,"max_delay_br_init_not_complete":3000,"consents":{},"app_universe":1,"br_stateful_migration_on":true,"enable_non_fb_br_stateless_by_default":false,"use_falco_as_mutex_key":false,"is_intern":false,"enable_session_id_bug_fix":true},5237]],"require":[["markJSEnabled"],["URLFragmentPrelude"],["Primer"],["BigPipe"],["Bootloader"],["TimeSlice"],["AsyncRequest"],["FbtLogging"],["IntlQtEventFalcoEvent"],["RequireDeferredReference","unblock",[],[["AsyncRequest","FbtLogging","IntlQtEventFalcoEvent"],"sd"]],["RequireDeferredReference","unblock",[],[["AsyncRequest","FbtLogging","IntlQtEventFalcoEvent"],"css"]]]});});</script></head><body class="fbIndex UIPage_LoggedOut _-kb _605a b_c3pyn-ahh x1 Locale_en_US" dir="ltr"><script type="text/javascript" nonce="3zFaFKoi">requireLazy(["bootstrapWebSession"],function(j){j(1742732396)})</script><div class="_li" id="u_0_1_A8"><div id="globalContainer" class="uiContextualLayerParent"><div class="fb_content clearfix " id="content" role="main"><div><div class="_8esj _95k9 _8esf _8opv _8f3m _8ilg _8icx _8op_ _95ka"><div class="_8esk"><div class="_8esl"><div class="_8ice"><img class="fb_logo _8ilh img" src="https://static.xx.fbcdn.net/rsrc.php/y1/r/4lCu2zih0ca.svg" alt="Facebook" /></div><h2 class="_8eso">Connect with friends and the world around you on Facebook.</h2></div><div class="_8esn"><div class="_8iep _8icy _9ahz _9ah-"><div class="_6luv _52jv"><form class="_9vtf" data-testid="royal_login_form" action="/login/?privacy_mutation_token=eyJ0eXBlIjowLCJjcmVhdGlvbl90aW1lIjoxNzQyNzMyMzk2LCJjYWxsc2l0ZV9pZCI6MzgxMjI5MDc5NTc1OTQ2fQ%3D%3D&amp;next" method="post" id="u_0_2_JW"><input type="hidden" name="jazoest" value="2900" autocomplete="off" /><input type="hidden" name="lsd" value="AVpiKCdE2bI" autocomplete="off" /><div><div class="_6lux"><input type="text" class="inputtext _55r1 _6luy" name="email" id="email" data-testid="royal-email" placeholder="Email or phone number" autofocus="1" aria-label="Email or phone number" /></div><div class="_6lux"><div class="_6luy _55r1 _1kbt" id="passContainer"><input type="password" class="inputtext _55r1 _6luy _9npi" name="pass" id="pass" data-testid="royal-pass" placeholder="Password" aria-label="Password" /><div class="_9ls7" id="u_0_3_Xr"><a href="#" role="button"><div class="_9lsa"><div class="_9lsb" id="u_0_4_y/"></div></div></a></div></div></div></div><input type="hidden" autocomplete="off" name="login_source" value="comet_headerless_login" /><input type="hidden" autocomplete="off" name="next" value="" /><div class="_6ltg"><button value="1" class="_42ft _4jy0 _6lth _4jy6 _4jy1 selected _51sy" name="login" data-testid="royal-login-button" type="submit" id="u_0_5_nl">Log In</button></div><div class="_6ltj"><a href="https://www.facebook.com/recover/initiate/?privacy_mutation_token=eyJ0eXBlIjowLCJjcmVhdGlvbl90aW1lIjoxNzQyNzMyMzk2LCJjYWxsc2l0ZV9pZCI6MzgxMjI5MDc5NTc1OTQ2fQ%3D%3D&amp;ars=facebook_login&amp;next" id="u_0_6_rS">Forgot password?</a></div><div class="_8icz"></div><div class="_6ltg"><a role="button" class="_42ft _4jy0 _6lti _4jy6 _4jy2 selected _51sy" href="/r.php?entry_point=login" ajaxify="" id="u_0_0_57" data-testid="open-registration-form-button">Create new account</a></div></form></div><div id="reg_pages_msg" class="_58mk"><a href="/pages/create/?ref_type=registration_form" class="_8esh">Create a Page</a> for a celebrity, brand or business.</div></div></div></div></div></div></div><div class=""><div class="_95ke _8opy"><div id="pageFooter" data-referrer="page_footer" data-testid="page_footer"><ul class="uiList localeSelectorList _2pid _509- _4ki _6-h _6-j _6-i" data-nocookies="1"><li>English (US)</li><li><a class="_sv4" dir="ltr" href="https://www.facebook.com/" title="Spanish" id="u_0_7_aX">Español</a></li><li><a class="_sv4" dir="ltr" href="https://es-la.facebook.com/" title="French (France)" id="u_0_8_gZ">Français (France)</a></li><li><a class="_sv4" dir="ltr" href="https://fr-fr.facebook.com/" title="Simplified Chinese (China)" id="u_0_9_fb">中文(简体)</a></li><li><a class="_sv4" dir="rtl" href="https://zh-cn.facebook.com/" title="Arabic" id="u_0_a_AP">العربية</a></li><li><a class="_sv4" dir="ltr" href="https://ar-ar.facebook.com/" title="Portuguese (Brazil)" id="u_0_b_Tz">Português (Brasil)</a></li><li><a class="_sv4" dir="ltr" href="https://pt-br.facebook.com/" title="Italian" id="u_0_c_u9">Italiano</a></li><li><a class="_sv4" dir="ltr" href="https://it-it.facebook.com/" title="Korean" id="u_0_d_Ep">한국어</a></li><li><a class="_sv4" dir="ltr" href="https://ko-kr.facebook.com/" title="German" id="u_0_e_e+">Deutsch</a></li><li><a class="_sv4" dir="ltr" href="https://de-de.facebook.com/" title="Hindi" id="u_0_f_ik">हिन्दी</a></li><li><a class="_sv4" dir="ltr" href="https://hi-in.facebook.com/" title="Japanese" id="u_0_g_/b">日本語</a></li><li><a role="button" class="_42ft _4jy0 _517i _517h _51sy" rel="dialog" ajaxify="/settings/language/language/?uri=https%3A%2F%2Fja-jp.facebook.com%2F&amp;source=www_list_selector_more" href="#" title="Show more languages"><i class="img sp_GPvE0syHYuh sx_8e0301"></i></a></li></ul><div id="contentCurve"></div><div id="pageFooterChildren" role="contentinfo" aria-label="Facebook site links"><ul class="uiList pageFooterLinkList _509- _4ki _703 _6-i"><li><a href="/reg/" title="Sign Up for Facebook">Sign Up</a></li><li><a href="/login/" title="Log into Facebook">Log In</a></li><li><a href="https://messenger.com/" title="Check out Messenger.">Messenger</a></li><li><a href="/lite/" title="Facebook Lite for Android.">Facebook Lite</a></li><li><a href="https://www.facebook.com/watch/" title="Browse in Video">Video</a></li><li><a href="https://about.meta.com/technologies/meta-pay" title="Learn more about Meta Pay" target="_blank">Meta Pay</a></li><li><a href="https://www.meta.com/" title="Check out Meta" target="_blank">Meta Store</a></li><li><a href="https://www.meta.com/quest/" title="Learn more about Meta Quest" target="_blank">Meta Quest</a></li><li><a href="https://www.meta.com/smart-glasses/" title="Learn more about Ray-Ban Meta" target="_blank">Ray-Ban Meta</a></li><li><a href="https://www.meta.ai/" title="Meta AI">Meta AI</a></li><li><a href="https://l.facebook.com/l.php?u=https%3A%2F%2Fwww.instagram.com%2F&amp;h=AT3inbXko_NS4BD9phhaonxBu-HEBXnr5ZzKo07yvIL20jHpn0o-2rCdenoeTqFN-_vJX3czTbHTBQq_9yN0pCtdAWD7WVATOVaJbhetCRz_rPKJ44FIf95cbmzr4bp7YE2rhD6Fd8vexh9TmbtXl5C8zkgWBLdh" title="Check out Instagram" target="_blank" rel="nofollow" data-lynx-mode="hover">Instagram</a></li><li><a href="https://www.threads.net/" title="Check out Threads">Threads</a></li><li><a href="/votinginformationcenter/?entry_point=c2l0ZQ%3D%3D" title="See the Voting Information Center.">Voting Information Center</a></li><li><a href="/privacy/policy/?entry_point=facebook_page_footer" title="Learn how we collect, use and share information to support Facebook.">Privacy Policy</a></li><li><a href="/privacy/policies/health/?entry_point=facebook_page_footer" title="Consumer Health Privacy">Consumer Health Privacy</a></li><li><a href="/privacy/center/?entry_point=facebook_page_footer" title="Learn how to manage and control your privacy on Facebook.">Privacy Center</a></li><li><a href="https://about.meta.com/" accesskey="8" title="Read our blog, discover the resource center, and find job opportunities.">About</a></li><li><a href="/ad_campaign/landing.php?placement=pflo&amp;campaign_id=402047449186&amp;nav_source=unknown&amp;extra_1=auto" title="Advertise on Facebook.">Create ad</a></li><li><a href="/pages/create/?ref_type=site_footer" title="Create a page">Create Page</a></li><li><a href="https://developers.facebook.com/?ref=pf" title="Develop on our platform.">Developers</a></li><li><a href="/careers/?ref=pf" title="Make your next career move to our awesome company.">Careers</a></li><li><a href="/policies/cookies/" title="Learn about cookies and Facebook." data-nocookies="1">Cookies</a></li><li><a class="_41ug" data-nocookies="1" href="https://www.facebook.com/help/568137493302217" title="Learn about Ad Choices.">Ad choices<i class="img sp_GPvE0syHYuh sx_7d98b4"></i></a></li><li><a data-nocookies="1" href="/policies?ref=pf" accesskey="9" title="Review our terms and policies.">Terms</a></li><li><a href="/help/?ref=pf" accesskey="0" title="Visit our Help Center.">Help</a></li><li><a href="https://www.facebook.com/help/637205020878504" title="Visit our Contact Uploading &amp; Non-Users Notice.">Contact Uploading &amp; Non-Users</a></li><li><a accesskey="6" class="accessible_elem" href="/settings" title="View and edit your Facebook settings.">Settings</a></li><li><a accesskey="7" class="accessible_elem" href="/allactivity?privacy_source=activity_log_top_menu" title="View your activity log">Activity log</a></li></ul></div><div class="mvl copyright"><div><span> Meta © 2025</span></div></div></div></div></div></div><div></div><span><img src="https://facebook.com/security/hsts-pixel.gif?c=3.2.5" width="0" height="0" style="display:none" /></span></div><div style="display:none"></div>
<script nonce="3zFaFKoi">requireLazy(["HasteSupportData"],function(m){m.handle({"bxData":{"875231":{"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/y1\/r\/ay1hV6OlegS.ico"}},"clpData":{"4156":{"r":1,"s":1},"4157":{"r":1,"s":1},"4158":{"r":1,"s":1},"4159":{"r":1,"s":1},"4160":{"r":1,"s":1},"4161":{"r":1,"s":1},"4172":{"r":1,"s":1},"4173":{"r":1,"s":1},"6647":{"r":1,"s":1},"6648":{"r":1,"s":1},"6661":{"r":1,"s":1},"6662":{"r":1,"s":1},"1743095":{"r":1,"s":1},"1828945":{"r":100,"s":1}},"gkxData":{"579":{"result":false,"hash":null},"6181":{"result":false,"hash":null},"6708":{"result":false,"hash":null},"8772":{"result":true,"hash":null},"21049":{"result":false,"hash":null},"21116":{"result":false,"hash":null},"20942":{"result":false,"hash":null},"4737":{"result":false,"hash":null},"7170":{"result":false,"hash":null},"20864":{"result":true,"hash":null},"20865":{"result":false,"hash":null},"23413":{"result":false,"hash":null},"23414":{"result":false,"hash":null},"366":{"result":false,"hash":null},"3399":{"result":false,"hash":null},"4516":{"result":false,"hash":null},"10501":{"result":false,"hash":null},"10725":{"result":false,"hash":null},"20858":{"result":false,"hash":null},"20860":{"result":false,"hash":null},"20863":{"result":false,"hash":null},"1326":{"result":false,"hash":null},"9861":{"result":true,"hash":null},"10211":{"result":false,"hash":null},"10662":{"result":false,"hash":null},"10839":{"result":false,"hash":"AT5rFz3dcDqbx7eNI2o"},"10850":{"result":false,"hash":null},"11370":{"result":false,"hash":null},"11452":{"result":false,"hash":null},"21063":{"result":false,"hash":null},"21069":{"result":false,"hash":null},"21071":{"result":false,"hash":null},"21072":{"result":false,"hash":null},"33056":{"result":false,"hash":null},"5608":{"result":false,"hash":null},"6275":{"result":false,"hash":null}},"ixData":{"1876411":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yd\/r\/3mD7kKai_7W.gif","width":12,"height":12},"1876412":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/y1\/r\/mHADa0fT0mI.gif","width":16,"height":16},"1876413":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yV\/r\/ZY0eC865SgX.gif","width":20,"height":20},"1876414":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/y8\/r\/M3mvaC7u8oH.gif","width":24,"height":24},"1876415":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yL\/r\/hVe2HmwMRpE.gif","width":32,"height":32},"1876416":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yC\/r\/yFaaylccZ5L.gif","width":48,"height":48},"1876418":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yk\/r\/96GJYGbUDCJ.gif","width":72,"height":72},"1876419":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yS\/r\/NiR8M1k4AVU.gif","width":12,"height":12},"1876420":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/ym\/r\/FNERtXIk9xp.gif","width":16,"height":16},"1876421":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yJ\/r\/l2FWxc8ihQj.gif","width":20,"height":20},"1876422":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yo\/r\/Io_N1z4MXYh.gif","width":24,"height":24},"1876423":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yD\/r\/-1hifBvDgEQ.gif","width":32,"height":32},"1876424":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yG\/r\/RcIiVWWukEr.gif","width":48,"height":48},"1876426":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yP\/r\/9ISCYYcy94m.gif","width":72,"height":72},"1876427":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yU\/r\/MStXnCtsaSe.gif","width":12,"height":12},"1876428":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/y6\/r\/dw2egiKdoVV.gif","width":16,"height":16},"1876429":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yA\/r\/1DbfjOftY0d.gif","width":20,"height":20},"1876430":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yi\/r\/2uPGz8a6lb6.gif","width":24,"height":24},"1876431":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yw\/r\/60r9oPEvxiL.gif","width":32,"height":32},"1876432":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yM\/r\/NlAFhiEx3a1.gif","width":48,"height":48},"1876434":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yx\/r\/uzrQzxgD_Bg.gif","width":72,"height":72},"1876435":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yM\/r\/TtXj9IXnkoK.gif","width":12,"height":12},"1876436":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yy\/r\/HNs8yq0QiXE.gif","width":16,"height":16},"1876437":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yT\/r\/ay_drQe6StD.gif","width":20,"height":20},"1876438":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/y4\/r\/iACDMhAROS_.gif","width":24,"height":24},"1876439":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yy\/r\/WEhNL1y2zoZ.gif","width":32,"height":32},"1876440":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/y-\/r\/mAeZkO4yhqj.gif","width":48,"height":48},"1876442":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yl\/r\/79uB7ciX8vY.gif","width":72,"height":72},"1876443":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yG\/r\/dzn6it4Fw3p.gif","width":12,"height":12},"1876444":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yc\/r\/wqjQpFb4tea.gif","width":16,"height":16},"1876445":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yk\/r\/yy3mR2PXKrn.gif","width":20,"height":20},"1876446":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yl\/r\/gTdm7zPKz-c.gif","width":24,"height":24},"1876447":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/ym\/r\/kdaft251gQ_.gif","width":32,"height":32},"1876448":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yG\/r\/6-FTd4KBtOk.gif","width":48,"height":48},"1876450":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yq\/r\/Tks_lRPtYc-.gif","width":72,"height":72},"1876451":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yK\/r\/Bys0xcVibDa.gif","width":12,"height":12},"1876452":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yI\/r\/Wk0dcHGH6EG.gif","width":16,"height":16},"1876453":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/ys\/r\/aOTs7vt2hEc.gif","width":20,"height":20},"1876454":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yh\/r\/wVjfNbGZ3CH.gif","width":24,"height":24},"1876455":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yw\/r\/oT6wM_vuQNQ.gif","width":32,"height":32},"1876456":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yp\/r\/ac61i44rSWK.gif","width":48,"height":48},"1876458":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yg\/r\/ZH27Vvjc9-u.gif","width":72,"height":72},"1940508":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/y3\/r\/ycQ2OPoZwUA.gif","width":64,"height":64},"1940509":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yg\/r\/8kyIVWHZW-b.gif","width":64,"height":64},"1940510":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yK\/r\/8gPN8wBD9yB.gif","width":64,"height":64},"1940511":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yG\/r\/WtK_u51t3nM.gif","width":64,"height":64},"1940512":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yj\/r\/JYwEre3ewp7.gif","width":64,"height":64},"1940513":{"sprited":0,"uri":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yu\/r\/M2HDLLPAUWl.gif","width":64,"height":64}},"qexData":{"324":{"r":false},"1003":{"r":false},"1250":{"r":false},"104":{"r":null},"128":{"r":null},"344":{"r":null},"388":{"r":null}},"qplData":{"2444":{"r":100},"4750":{"r":1}},"justknobxData":{"2928":{"r":false},"432":{"r":true},"2233":{"r":true}}})});requireLazy(["Bootloader"],function(m){m.handlePayload({"consistency":{"rev":1021172575},"rsrcMap":{"WzW470F":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/y9\/r\/IAqkaiye5bw.js"},"GiOewQm":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4igOQ4\/yJ\/l\/en_US\/hK59E1uPT_M.js"},"FTkFlke":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/y1\/r\/C3C2yRzecHX.js"},"KqM5E7B":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yd\/r\/Dk1VrT3dgTS.js"},"fwUePtu":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4in714\/yw\/l\/en_US\/LQqIb5wTntP.js"},"EBvNLJT":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4iOo24\/y7\/l\/en_US\/evQ_W-qD7I2.js"},"HJD3GXD":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4ivfN4\/yV\/l\/en_US\/U8Qhx8nFWKr.js"},"4LMRo9t":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yA\/r\/6bAyX3NcuU-.js"},"2XRCDQ+":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yw\/r\/X8Jz-x4lcW_.js"},"s7Hvfol":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yr\/r\/oFw34CFHsjq.js"},"Qz5MBIR":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yG\/r\/MEuJdVYY1rX.js"},"z79DYTE":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yM\/r\/8tlSguhZ4rn.js"},"oQBvcPb":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4iMk-4\/yk\/l\/en_US\/a4bc_jZ3OGg.js"},"aDNH8BG":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/y-\/r\/XOkt7OSZzlI.js"},"l7bfq0p":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yE\/r\/js5aFjtCGxj.js"},"03se9JA":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yQ\/r\/53cBvwDy5lP.js"},"cv1AGa3":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4iSC-4\/y_\/l\/en_US\/jNle7iCXRJn.js"},"YdxHZyO":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/y9\/r\/ygwfa0QgrEc.js"},"dVv\/18N":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yn\/r\/1O53o-MpfhJ.js"},"ra+8Wj0":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yC\/r\/DNMvTOCHwVg.js"},"g1uvzNt":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yC\/r\/CmvN4QRe53p.js"},"JOwuQhi":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yU\/r\/pNm5YDgJip6.js"},"mO\/NSPW":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/ye\/r\/OG9rHLtSHu0.js"},"QGhzutl":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4i7M54\/yp\/l\/en_US\/d1WnywEARfs.js"},"kcqi28U":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4i46k4\/y9\/l\/en_US\/ww5V4a6cjj3.js"},"K1pGhOF":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/ye\/r\/xDgm3Tqkawr.js"},"9NiATAn":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yv\/r\/yRuFCzueB7p.js"},"dAWNZ\/s":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/y9\/r\/BTdUGzsTGVy.js"},"XXEAyP1":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/ye\/r\/b0iIjD_dDVN.js"},"x2BPUp\/":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4iJfX4\/yx\/l\/en_US\/gJGeWOS1cGj.js"},"rBUHKbB":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yw\/r\/-GcXqsWzrBY.js"},"9MP\/k5y":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4iW4a4\/yg\/l\/en_US\/tammXEfmS6x.js"},"+cIuBXV":{"type":"css","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v5\/yI\/l\/0,cross\/D0M8fl_FeM8.css"},"58nwtXJ":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yT\/r\/hPDDCUTQGTm.js"},"p+1OXu8":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4ihVQ4\/yS\/l\/en_US\/F0A_DxAvhUT.js"},"BtvkAAT":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4ieUm4\/yS\/l\/en_US\/W6CDaFSsZUA.js"},"uByLfPB":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4ikPw4\/yf\/l\/en_US\/7hRGQC-GYrG.js"},"WAb4vok":{"type":"css","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v5\/yo\/l\/0,cross\/8jE7XbyFcel.css"},"mUGwgg5":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4iB9B4\/yu\/l\/en_US\/xO56dqDbc3K.js"},"fj3cOcG":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4iojZ4\/ys\/l\/en_US\/kA0usUr4AgR.js"},"tYSK7\/e":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4i2TV4\/y4\/l\/en_US\/3hV3cLyLOax.js"},"1tVcq7W":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4iTER4\/yR\/l\/en_US\/sySQ6qpAYwJ.js"},"us93Cuw":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4ickT4\/yc\/l\/en_US\/KFz7k83y30C.js"},"+aat+Q7":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/y7\/r\/rTSyVU37lih.js"},"8I2\/23A":{"type":"css","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v5\/yU\/l\/0,cross\/g5RRFCgyKsO.css"},"iBQNJ29":{"type":"css","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v5\/y7\/l\/0,cross\/H-Vh1DSaSw9.css"},"zFoBbWe":{"type":"css","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v5\/y9\/l\/0,cross\/QdIOgwer7Hj.css"},"5Vdf4fq":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yF\/r\/GNeeW0QDsVw.js"},"yonD79v":{"type":"css","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v5\/yp\/l\/0,cross\/jidlV3mgHcL.css"},"ftzNXbd":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yn\/r\/7SjgDalTGMq.js"},"zqVCkTS":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4is5S4\/y9\/l\/en_US\/IFQlSbwNxkJ.js"},"q4zsHUg":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4iLl54\/yD\/l\/en_US\/N8avUFMjmTc.js"},"1oOuMrp":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4iRXe4\/yc\/l\/en_US\/gmt0AoIRN7f.js"},"lw9bKXV":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4i7df4\/yR\/l\/en_US\/ZtGX6lVpi2b.js"},"muVZ1zd":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4iVu44\/yF\/l\/en_US\/X6FxWVvexQo.js"},"\/fRfucJ":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yj\/r\/J_2QGZXJPHT.js"},"V8cJk+E":{"type":"css","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v5\/yl\/l\/0,cross\/FQclhPdETf8.css"},"YuHBYfF":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/y4\/r\/ASjPVxDpQ1M.js"},"CoZbYwK":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4iOMh4\/yq\/l\/en_US\/n19C_-DT295.js"},"q794IJ3":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4iwbq4\/y3\/l\/en_US\/DXTxSEFeuFG.js"},"5POQ357":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4iyCS4\/yK\/l\/en_US\/IwRbKWrfWnj.js"},"u8\/CABt":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4iDSI4\/yv\/l\/en_US\/po1lJsZFRk1.js"},"b7RRJeI":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4iWtR4\/ye\/l\/en_US\/lTU4flsOOSc.js"},"y5e3WGi":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yq\/r\/mKHx8zWrPVv.js"},"exAA55S":{"type":"css","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v5\/y9\/l\/0,cross\/MET3muLUnU4.css"},"QxFdbZ+":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4ieLs4\/y-\/l\/en_US\/2-xmvZ4kxht.js"},"zooB5Ym":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4iSOE4\/y4\/l\/en_US\/ENhDph9sVCs.js"},"cZHcuYd":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4ijWR4\/y1\/l\/en_US\/Rf73Yvl-xA5.js"},"0slOKCA":{"type":"css","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v5\/yu\/l\/0,cross\/f4mmKd0Nsee.css"},"dB1g5Qj":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/ys\/r\/GDtJnZhNVsO.js"},"zRqShsJ":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4iVVp4\/yP\/l\/en_US\/PoQVFcgABwt.js"},"SmKcX29":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yS\/r\/Ah1n7q5aFBa.js"},"pKzMx0s":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4i8594\/yS\/l\/en_US\/JrYDznqb9DV.js"},"KIpvbFZ":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4i6Ap4\/yk\/l\/en_US\/Q_E-olAHF5o.js"},"jGcZiJF":{"type":"css","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v5\/yM\/l\/0,cross\/xCpEbl6YTwe.css"},"ZrTjEzV":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yd\/r\/TPgFtzMUDjV.js"},"Pb2fuZV":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yH\/r\/r8d3qqXTO6Q.js"},"4PpJHI7":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4i4HC4\/yE\/l\/en_US\/p_oeQb4SRRO.js"},"3iYupIA":{"type":"css","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v5\/yt\/l\/0,cross\/lf4RWhdigV_.css"},"288Dxk+":{"type":"css","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v5\/y2\/l\/0,cross\/ZcmvH03NT8J.css"},"AI\/5Wpf":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4iLl54\/yB\/l\/en_US\/1V0182rzg3p.js"},"1B1sPuh":{"type":"css","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v5\/yt\/l\/0,cross\/sLbKHujabvb.css"},"Rjwircl":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yg\/r\/_bItwYiKL5i.js"},"BJljJRV":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/ye\/r\/6TKVq8fOdQA.js"},"S\/+eOv4":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4ia9Z4\/ym\/l\/en_US\/xGn5HIN4rc2.js"},"xsFg75a":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yt\/r\/mnLc1TS2Wp-.js"},"rCasuzG":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yA\/r\/OzWmCcYw0wO.js"},"EToYw1m":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4iTfb4\/yx\/l\/en_US\/4heuqjeXkT0.js"},"rE8UVPa":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4i1Xw4\/yn\/l\/en_US\/X3F1775cjEb.js"},"I+GHswV":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yS\/r\/ui2DkP-wt_7.js"},"vdNQr9P":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yj\/r\/FiVT6nDibIJ.js"},"H\/5lfuF":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yF\/r\/iqrvM8jAXX7.js"},"17Grp2h":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/y-\/r\/HhbMrxvaW_H.js"},"QyoftxH":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yL\/r\/j-_AFWnS2kv.js"},"QIamfde":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yA\/r\/Y37sQzk-yb8.js"},"Y7CydAx":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yi\/r\/uZpQB_JWZlM.js"},"tADNV\/7":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yF\/r\/dlKxLCqsy-5.js"},"z3hBw8h":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yh\/r\/qkqnWEiZRwq.js"},"8Rq5kp2":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yX\/r\/R7paD7vUTA2.js"},"Uh9zPeg":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yi\/r\/fcnDhCsH9cT.js"},"zLQaNdg":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yW\/r\/rhZUiD8hJ72.js"},"T9BkhW+":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yJ\/r\/TJc3tU-0fV-.js"},"JuRSzyN":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yF\/r\/WzNMjfKB7nj.js"},"zPYlTyl":{"type":"js","src":"https:\/\/static.xx.fbcdn.net\/rsrc.php\/v4\/yO\/r\/_tJ17sGyxOX.js"},"P\/mr5VE":{"type":"css","src":"data:text\/css; charset=utf-8;base64,","d":1}},"compMap":{"CometNewsRegulationDialog.react":{"r":["kQeX049","WzW470F","GiOewQm","FTkFlke","KqM5E7B","fwUePtu","EBvNLJT","HJD3GXD","4LMRo9t","2XRCDQ+","s7Hvfol","Qz5MBIR","z79DYTE","2SCIVmA","oQBvcPb","aDNH8BG","l7bfq0p","03se9JA","cv1AGa3","YdxHZyO","DTjkF3f","dVv\/18N","ra+8Wj0","g1uvzNt","JOwuQhi"],"rdfds":{"m":["FDSTooltipDeferredImpl.react"],"r":["mO\/NSPW"]},"rds":{"m":["FbtLogging","CometSuspenseFalcoEvent","ODS","IntlQtEventFalcoEvent"],"r":["QGhzutl"]},"be":1},"CometTooltip_DEPRECATED.react":{"r":["kQeX049","WzW470F","FTkFlke","cv1AGa3","HJD3GXD","4LMRo9t","2XRCDQ+","z79DYTE","kcqi28U","2SCIVmA","aDNH8BG","l7bfq0p","JOwuQhi","DTjkF3f"],"rdfds":{"m":["CometTooltipDeferredImpl.react"],"r":["GiOewQm","KqM5E7B","Qz5MBIR","mO\/NSPW","ra+8Wj0","03se9JA","g1uvzNt"]},"rds":{"m":["CometSuspenseFalcoEvent","ODS","FbtLogging","IntlQtEventFalcoEvent"],"r":["QGhzutl"]},"be":1},"VultureJSSampleRatesLoader":{"r":["K1pGhOF"],"be":1},"WebSpeedInteractionsTypedLogger":{"r":["QGhzutl","2XRCDQ+","9NiATAn","03se9JA","ra+8Wj0","g1uvzNt"],"be":1},"AsyncRequest":{"r":["QGhzutl","2XRCDQ+","DTjkF3f"],"rds":{"m":["FbtLogging","IntlQtEventFalcoEvent"]},"be":1},"DOM":{"r":["2XRCDQ+","DTjkF3f"],"be":1},"Form":{"r":["2XRCDQ+","dAWNZ\/s","DTjkF3f"],"be":1},"FormSubmit":{"r":["XXEAyP1","QGhzutl","2XRCDQ+","dAWNZ\/s","DTjkF3f"],"rds":{"m":["FbtLogging","IntlQtEventFalcoEvent"]},"be":1},"Input":{"r":["dAWNZ\/s"],"be":1},"Toggler":{"r":["x2BPUp\/","YdxHZyO","4LMRo9t","2XRCDQ+","DTjkF3f","rBUHKbB","dVv\/18N"],"be":1},"Tooltip":{"r":["WzW470F","FTkFlke","YdxHZyO","9MP\/k5y","QGhzutl","4LMRo9t","2XRCDQ+","DTjkF3f","dVv\/18N","z79DYTE","+cIuBXV","aDNH8BG","58nwtXJ","dAWNZ\/s","mO\/NSPW","l7bfq0p","JOwuQhi"],"rds":{"m":["FbtLogging","ODS","IntlQtEventFalcoEvent","PageTransitions","Animation"],"r":["x2BPUp\/","p+1OXu8"]},"be":1},"URI":{"r":[],"be":1},"trackReferrer":{"r":[],"be":1},"PhotoTagApproval":{"r":["BtvkAAT","uByLfPB","2XRCDQ+","DTjkF3f"],"be":1},"PhotoSnowlift":{"r":["WAb4vok","mUGwgg5","fj3cOcG","58nwtXJ","tYSK7\/e","WzW470F","1tVcq7W","us93Cuw","+aat+Q7","BtvkAAT","8I2\/23A","FTkFlke","Jq40kvF","KqM5E7B","iBQNJ29","zFoBbWe","x2BPUp\/","5Vdf4fq","yonD79v","YdxHZyO","ftzNXbd","zqVCkTS","9MP\/k5y","HJD3GXD","QGhzutl","4LMRo9t","2XRCDQ+","DTjkF3f","q4zsHUg","dAWNZ\/s","1oOuMrp","rBUHKbB","lw9bKXV","muVZ1zd","\/fRfucJ","dVv\/18N","V8cJk+E","YuHBYfF","z79DYTE","CoZbYwK","q794IJ3","5POQ357","JOwuQhi","u8\/CABt","l7bfq0p","b7RRJeI","mO\/NSPW","y5e3WGi","+cIuBXV","exAA55S","p+1OXu8","QxFdbZ+","zooB5Ym","cZHcuYd","0slOKCA","dB1g5Qj","zRqShsJ","bOIVWOx","SmKcX29","pKzMx0s","KIpvbFZ","jGcZiJF","aDNH8BG","03se9JA","ZrTjEzV","ra+8Wj0","g1uvzNt"],"rds":{"m":["Animation","FbtLogging","ODS","IntlQtEventFalcoEvent","PageTransitions"]},"be":1},"PhotoTagger":{"r":["Pb2fuZV","mUGwgg5","4PpJHI7","3iYupIA","WzW470F","1tVcq7W","BtvkAAT","FTkFlke","iBQNJ29","uByLfPB","x2BPUp\/","YdxHZyO","9MP\/k5y","QGhzutl","4LMRo9t","2XRCDQ+","DTjkF3f","rBUHKbB","dVv\/18N","z79DYTE","ra+8Wj0","mO\/NSPW","y5e3WGi","dB1g5Qj","288Dxk+","AI\/5Wpf","aDNH8BG","03se9JA","58nwtXJ","dAWNZ\/s","l7bfq0p","g1uvzNt","JOwuQhi"],"rds":{"m":["FbtLogging","ODS","IntlQtEventFalcoEvent","PageTransitions","Animation"],"r":["p+1OXu8"]},"be":1},"PhotoTags":{"r":["BtvkAAT","uByLfPB","2XRCDQ+","dVv\/18N","DTjkF3f"],"be":1},"TagTokenizer":{"r":["1B1sPuh","Pb2fuZV","Rjwircl","BJljJRV","uByLfPB","YdxHZyO","2XRCDQ+","DTjkF3f","dAWNZ\/s","S\/+eOv4","288Dxk+"],"rds":{"m":["FbtLogging","IntlQtEventFalcoEvent"],"r":["QGhzutl"]},"be":1},"AsyncDialog":{"r":["WAb4vok","WzW470F","FTkFlke","zFoBbWe","x2BPUp\/","YdxHZyO","QGhzutl","4LMRo9t","2XRCDQ+","DTjkF3f","q4zsHUg","rBUHKbB","dVv\/18N","z79DYTE","5POQ357","mO\/NSPW","QxFdbZ+","0slOKCA","aDNH8BG","l7bfq0p","JOwuQhi"],"rds":{"m":["FbtLogging","ODS","IntlQtEventFalcoEvent"]},"be":1},"Hovercard":{"r":["Pb2fuZV","3iYupIA","WzW470F","1tVcq7W","FTkFlke","iBQNJ29","x2BPUp\/","YdxHZyO","9MP\/k5y","QGhzutl","4LMRo9t","2XRCDQ+","DTjkF3f","rBUHKbB","dVv\/18N","z79DYTE","mO\/NSPW","288Dxk+","AI\/5Wpf","aDNH8BG","03se9JA","58nwtXJ","dAWNZ\/s","ra+8Wj0","l7bfq0p","g1uvzNt","JOwuQhi"],"rds":{"m":["FbtLogging","ODS","IntlQtEventFalcoEvent","PageTransitions","Animation"],"r":["p+1OXu8"]},"be":1},"XOfferController":{"r":["xsFg75a","rBUHKbB"],"be":1},"PerfXSharedFields":{"r":["2XRCDQ+","z79DYTE"],"be":1},"KeyEventTypedLogger":{"r":["QGhzutl","2XRCDQ+","rCasuzG","03se9JA","ra+8Wj0","g1uvzNt"],"be":1},"Dialog":{"r":["FTkFlke","x2BPUp\/","YdxHZyO","zqVCkTS","9MP\/k5y","QGhzutl","4LMRo9t","2XRCDQ+","DTjkF3f","dAWNZ\/s","rBUHKbB","dVv\/18N","jGcZiJF","58nwtXJ","WzW470F","z79DYTE","mO\/NSPW","p+1OXu8","aDNH8BG","l7bfq0p"],"rds":{"m":["FbtLogging","IntlQtEventFalcoEvent","Animation","PageTransitions","ODS"]},"be":1},"ExceptionDialog":{"r":["WAb4vok","EToYw1m","WzW470F","1tVcq7W","FTkFlke","Jq40kvF","x2BPUp\/","YdxHZyO","HJD3GXD","4LMRo9t","2XRCDQ+","DTjkF3f","q4zsHUg","rBUHKbB","dVv\/18N","V8cJk+E","YuHBYfF","z79DYTE","5POQ357","b7RRJeI","mO\/NSPW","rE8UVPa","QxFdbZ+","0slOKCA","bOIVWOx","aDNH8BG","QGhzutl","l7bfq0p","JOwuQhi"],"rds":{"m":["FbtLogging","ODS","IntlQtEventFalcoEvent"]},"be":1},"ConfirmationDialog":{"r":["I+GHswV","vdNQr9P","YdxHZyO","2XRCDQ+","dAWNZ\/s","rBUHKbB","DTjkF3f"],"be":1},"MWADeveloperReauthBarrier":{"r":["H\/5lfuF","2XRCDQ+","17Grp2h","QyoftxH","QIamfde"],"be":1},"react":{"r":["WzW470F","2XRCDQ+","z79DYTE","aDNH8BG","l7bfq0p"],"rds":{"m":["ODS"]},"be":1}}})});</script>
<script nonce="3zFaFKoi">requireLazy(["InitialJSLoader"], function(InitialJSLoader) {InitialJSLoader.loadOnDOMContentReady(["QGhzutl","rBUHKbB","WzW470F","FTkFlke","KqM5E7B","YdxHZyO","EBvNLJT","HJD3GXD","4LMRo9t","2XRCDQ+","s7Hvfol","Qz5MBIR","z79DYTE","Y7CydAx","mO\/NSPW","tADNV\/7","z3hBw8h","8Rq5kp2","Uh9zPeg","zLQaNdg","T9BkhW+","I+GHswV","JuRSzyN","dAWNZ\/s","dVv\/18N","zPYlTyl","ra+8Wj0","l7bfq0p","aDNH8BG","03se9JA","g1uvzNt","cv1AGa3","JOwuQhi","P\/mr5VE"]);});</script>
<script nonce="3zFaFKoi">requireLazy(["TimeSliceImpl","ServerJS"],function(TimeSlice,ServerJS){var s=(new ServerJS());s.handle({"define":[["cr:7736",["FBLynxLogging"],{"__rc":["FBLynxLogging",null]},-1],["LinkshimHandlerConfig",[],{"supports_meta_referrer":false,"default_meta_referrer_policy":"default","switched_meta_referrer_policy":"origin","non_linkshim_lnfb_mode":"ie","link_react_default_hash":"AT2gimVpooN-lNbdsc3jTPGzTtLk3nubU7i04bMdUiHpcA01xUS1a0vDAUROtK5qwhKr1ggkGR0iFkuG-LXnPzSnqJcQ_wBM_zQgMGn_3fYvYPeVVr2NY7Uz7wJpBpxnKI1i4lEeSIJiBmXShZNzTCh0ZX1UK5ZV","untrusted_link_default_hash":"AT39qO_riD-y1vZOiIEWs7gCioFL7CIUePxMh4Khekd5EYNwP5xY4A8omcdBuq9yCV05x0xLJ_dLIPMuUGfEhTz5KmYUqwyGEPfYcauGawafhGCC9j9qfehQCWxf3NY6VU09LM6AJ5L4HS-Q2mmile6j1wiEMvwn","linkshim_host":"l.facebook.com","linkshim_path":"\/l.php","linkshim_enc_param":"h","linkshim_url_param":"u","use_rel_no_opener":false,"use_rel_no_referrer":false,"always_use_https":false,"onion_always_shim":true,"middle_click_requires_event":false,"www_safe_js_mode":"hover","m_safe_js_mode":null,"ghl_param_link_shim":false,"click_ids":[],"is_linkshim_supported":true,"current_domain":"facebook.com","blocklisted_domains":["ad.doubleclick.net","ads-encryption-url-example.com","bs.serving-sys.com","ad.atdmt.com","adform.net","ad13.adfarm1.adition.com","ilovemyfreedoms.com","secure.adnxs.com"],"is_mobile_device":false},27]],"elements":[["__elem_a588f507_0_1_fH","u_0_1_A8",1],["__elem_a588f507_0_0_tr","globalContainer",1],["__elem_a588f507_0_2_BV","content",1],["__elem_835c633a_0_0_lp","u_0_2_JW",1],["__elem_9f5fac15_0_0_Y3","passContainer",1],["__elem_558608f3_0_0_3P","pass",1],["__elem_a588f507_0_3_RI","u_0_3_Xr",1],["__elem_a588f507_0_4_xr","u_0_4_y\/",1],["__elem_45d73b5d_0_1_ZI","u_0_5_nl",2],["__elem_072b8e64_0_0_9A","u_0_6_rS",1],["__elem_45d73b5d_0_0_1N","u_0_0_57",1],["__elem_072b8e64_0_1_JB","u_0_7_aX",1],["__elem_072b8e64_0_2_+x","u_0_8_gZ",1],["__elem_072b8e64_0_3_+P","u_0_9_fb",1],["__elem_072b8e64_0_4_dK","u_0_a_AP",1],["__elem_072b8e64_0_5_ab","u_0_b_Tz",1],["__elem_072b8e64_0_6_72","u_0_c_u9",1],["__elem_072b8e64_0_7_r\/","u_0_d_Ep",1],["__elem_072b8e64_0_8_\/R","u_0_e_e+",1],["__elem_072b8e64_0_9_fg","u_0_f_ik",1],["__elem_072b8e64_0_a_Z9","u_0_g_\/b",1]],"require":[["ServiceWorkerLoginAndLogout","login",[],[]],["DOMScanner","scanLoginPage",[],[]],["WebPixelRatioDetector","startDetecting",[],[false]],["ScriptPath","set",[],["XIndexReduxController","a1f3c513",{"imp_id":"1h0TnSFUgc62kRUPF","ef_page":null,"uri":"https:\/\/www.facebook.com\/"}]],["UITinyViewportAction","init",[],[]],["ResetScrollOnUnload","init",["__elem_a588f507_0_0_tr"],[{"__m":"__elem_a588f507_0_0_tr"}]],["KeyboardActivityLogger","init",[],[]],["FocusRing","init",[],[]],["ErrorMessageConsole","listenForUncaughtErrors",[],[]],["HardwareCSS","init",[],[]],["CAALegacyLoggingUtils","attachEventOnClickListener",["__elem_072b8e64_0_0_9A"],[{"__m":"__elem_072b8e64_0_0_9A"},"forgot_password_button_clicked"]],["CAALegacyLoggingUtils","attachEventOnClickListener",["__elem_45d73b5d_0_0_1N"],[{"__m":"__elem_45d73b5d_0_0_1N"},"sign_up_button_clicked"]],["CAALegacyLoggingUtils","attachEventOnClickListener",["__elem_45d73b5d_0_1_ZI"],[{"__m":"__elem_45d73b5d_0_1_ZI"},"login_button_clicked"]],["LoginInitialLoadLogger","onLoad",[],["homepage"]],["CAAWebLoggingUtils","logLoginEvent",[],[{"event":"login_step_view_loaded","event_flow":"login_manual","event_step":"home_page","event_category":"login_home_page_init","extra_client_data":{"path":"\/"}},0]],["LoginFormController","init",["__elem_835c633a_0_0_lp","__elem_45d73b5d_0_1_ZI"],[{"__m":"__elem_835c633a_0_0_lp"},{"__m":"__elem_45d73b5d_0_1_ZI"},null,true,{"pubKey":{"publicKey":"a6d774808520153d206b114eff03828392f774a756d0ffaab6451fd78de5c71d","keyId":175}},false]],["BrowserPrefillLogging","initContactpointFieldLogging",[],[{"contactpointFieldID":"email","serverPrefill":""}]],["BrowserPrefillLogging","initPasswordFieldLogging",[],[{"passwordFieldID":"pass"}]],["FocusListener"],["FlipDirectionOnKeypress"],["LoginFormToggle","initToggle",["__elem_a588f507_0_3_RI","__elem_a588f507_0_4_xr","__elem_558608f3_0_0_3P","__elem_9f5fac15_0_0_Y3"],[{"__m":"__elem_a588f507_0_3_RI"},{"__m":"__elem_a588f507_0_4_xr"},{"__m":"__elem_558608f3_0_0_3P"},{"__m":"__elem_9f5fac15_0_0_Y3"}]],["IntlUtils","initOnClickHandler",["__elem_072b8e64_0_1_JB"],[{"__m":"__elem_072b8e64_0_1_JB"},"es_LA","en_US",false,"www_list_selector","https:\/\/es-la.facebook.com\/",0]],["IntlUtils","initOnClickHandler",["__elem_072b8e64_0_2_+x"],[{"__m":"__elem_072b8e64_0_2_+x"},"fr_FR","en_US",false,"www_list_selector","https:\/\/fr-fr.facebook.com\/",1]],["IntlUtils","initOnClickHandler",["__elem_072b8e64_0_3_+P"],[{"__m":"__elem_072b8e64_0_3_+P"},"zh_CN","en_US",false,"www_list_selector","https:\/\/zh-cn.facebook.com\/",2]],["IntlUtils","initOnClickHandler",["__elem_072b8e64_0_4_dK"],[{"__m":"__elem_072b8e64_0_4_dK"},"ar_AR","en_US",false,"www_list_selector","https:\/\/ar-ar.facebook.com\/",3]],["IntlUtils","initOnClickHandler",["__elem_072b8e64_0_5_ab"],[{"__m":"__elem_072b8e64_0_5_ab"},"pt_BR","en_US",false,"www_list_selector","https:\/\/pt-br.facebook.com\/",4]],["IntlUtils","initOnClickHandler",["__elem_072b8e64_0_6_72"],[{"__m":"__elem_072b8e64_0_6_72"},"it_IT","en_US",false,"www_list_selector","https:\/\/it-it.facebook.com\/",5]],["IntlUtils","initOnClickHandler",["__elem_072b8e64_0_7_r\/"],[{"__m":"__elem_072b8e64_0_7_r\/"},"ko_KR","en_US",false,"www_list_selector","https:\/\/ko-kr.facebook.com\/",6]],["IntlUtils","initOnClickHandler",["__elem_072b8e64_0_8_\/R"],[{"__m":"__elem_072b8e64_0_8_\/R"},"de_DE","en_US",false,"www_list_selector","https:\/\/de-de.facebook.com\/",7]],["IntlUtils","initOnClickHandler",["__elem_072b8e64_0_9_fg"],[{"__m":"__elem_072b8e64_0_9_fg"},"hi_IN","en_US",false,"www_list_selector","https:\/\/hi-in.facebook.com\/",8]],["IntlUtils","initOnClickHandler",["__elem_072b8e64_0_a_Z9"],[{"__m":"__elem_072b8e64_0_a_Z9"},"ja_JP","en_US",false,"www_list_selector","https:\/\/ja-jp.facebook.com\/",9]],["FBLynx","setupDelegation",[],[]],["CometSuspenseFalcoEvent"],["ODS"],["CometExceptionDialog.react"],["FDSTooltipDeferredImpl.react"],["RequireDeferredReference","unblock",[],[["FbtLogging","CometSuspenseFalcoEvent","ODS","IntlQtEventFalcoEvent","CometExceptionDialog.react","FDSTooltipDeferredImpl.react"],"sd"]],["RequireDeferredReference","unblock",[],[["FbtLogging","CometSuspenseFalcoEvent","ODS","IntlQtEventFalcoEvent","CometExceptionDialog.react","FDSTooltipDeferredImpl.react"],"css"]],["TimeSliceImpl"],["HasteSupportData"],["ServerJS"],["Run"],["InitialJSLoader"]],"contexts":[[{"__m":"__elem_a588f507_0_1_fH"},true],[{"__m":"__elem_a588f507_0_2_BV"},true]]});requireLazy(["Run"],function(Run){Run.onAfterLoad(function(){s.cleanup(TimeSlice)})});});

</script>
<script nonce="3zFaFKoi">now_inl=(function(){var p=window.performance;return p&&p.now&&p.timing&&p.timing.navigationStart?function(){return p.now()+p.timing.navigationStart}:function(){return new Date().getTime()};})(); window.__bigPipeFR=now_inl();</script>
<link rel="preload" href="https://static.xx.fbcdn.net/rsrc.php/v5/yp/l/0,cross/Gq1otrMKgGO.css" as="style" crossorigin="anonymous" />
<link rel="preload" href="https://static.xx.fbcdn.net/rsrc.php/v5/yK/l/0,cross/q-ylR7rXeoc.css" as="style" crossorigin="anonymous" />
<link rel="preload" href="https://static.xx.fbcdn.net/rsrc.php/v5/yp/l/0,cross/CaoZLveWk0o.css" as="style" crossorigin="anonymous" />
<link rel="preload" href="https://static.xx.fbcdn.net/rsrc.php/v5/yH/l/0,cross/Ks2Fj0vE6GG.css" as="style" crossorigin="anonymous" />
<link rel="preload" href="https://static.xx.fbcdn.net/rsrc.php/v5/yZ/l/0,cross/wNWZkdhYsX7.css" as="style" crossorigin="anonymous" />
<link rel="preload" href="https://static.xx.fbcdn.net/rsrc.php/v5/yA/l/0,cross/3sj_ybF1asA.css" as="style" crossorigin="anonymous" />
<link rel="preload" href="https://static.xx.fbcdn.net/rsrc.php/v4/yw/r/X8Jz-x4lcW_.js" as="script" crossorigin="anonymous" nonce="3zFaFKoi" />
<link rel="preload" href="https://static.xx.fbcdn.net/rsrc.php/v4i7M54/yp/l/en_US/d1WnywEARfs.js" as="script" crossorigin="anonymous" nonce="3zFaFKoi" />
<script nonce="3zFaFKoi">window.__bigPipeCtor=now_inl();requireLazy(["BigPipe"],function(BigPipe){define("__bigPipe",[],window.bigPipe=new BigPipe({"forceFinish":true,"config":{"flush_pagelets_asap":true,"dispatch_pagelet_replayable_actions":false}}));});</script>
<script nonce="3zFaFKoi">(function(){var n=now_inl();requireLazy(["__bigPipe"],function(bigPipe){bigPipe.beforePageletArrive("first_response",n);})})();</script>
<script nonce="3zFaFKoi">requireLazy(["__bigPipe"],(function(bigPipe){bigPipe.onPageletArrive({displayResources:["kQeX049","2SCIVmA","n+36Djy","DTjkF3f","Jq40kvF","bOIVWOx","2XRCDQ+","QGhzutl","P/mr5VE"],id:"first_response",phase:0,last_in_phase:true,tti_phase:0,all_phases:[63],hsrp:{hblp:{consistency:{rev:1021172575}}},allResources:["QGhzutl","rBUHKbB","WzW470F","FTkFlke","KqM5E7B","YdxHZyO","EBvNLJT","HJD3GXD","4LMRo9t","2XRCDQ+","s7Hvfol","Qz5MBIR","z79DYTE","Y7CydAx","mO/NSPW","kQeX049","2SCIVmA","n+36Djy","DTjkF3f","Jq40kvF","bOIVWOx","tADNV/7","z3hBw8h","8Rq5kp2","Uh9zPeg","zLQaNdg","T9BkhW+","I+GHswV","JuRSzyN","dAWNZ/s","dVv/18N","zPYlTyl","P/mr5VE","ra+8Wj0","l7bfq0p","aDNH8BG","03se9JA","g1uvzNt","cv1AGa3","JOwuQhi"]});}));</script>
<script nonce="3zFaFKoi">requireLazy(["__bigPipe"],function(bigPipe){bigPipe.setPageID("7484978647544352438")});</script><script nonce="3zFaFKoi">(function(){var n=now_inl();requireLazy(["__bigPipe"],function(bigPipe){bigPipe.beforePageletArrive("last_response",n);})})();</script>
<script nonce="3zFaFKoi">requireLazy(["__bigPipe"],(function(bigPipe){bigPipe.onPageletArrive({displayResources:["g1uvzNt"],id:"last_response",phase:63,last_in_phase:true,the_end:true,jsmods:{define:[["cr:6016",["NavigationMetricsWWW"],{__rc:["NavigationMetricsWWW",null]},-1],["cr:70",["FBInteractionTracingDependencies"],{__rc:["FBInteractionTracingDependencies",null]},-1],["cr:619",["setTimeoutCometLoggingPriWWW"],{__rc:["setTimeoutCometLoggingPriWWW",null]},-1],["cr:686",[],{__rc:[null,null]},-1],["cr:734",[],{__rc:[null,null]},-1],["cr:755",["warningWWW"],{__rc:["warningWWW",null]},-1],["cr:1293",["ReactDOM.classic"],{__rc:["ReactDOM.classic",null]},-1],["cr:2099",[],{__rc:[null,null]},-1],["cr:2448",["useHeroBootloadedComponent"],{__rc:["useHeroBootloadedComponent",null]},-1],["cr:3976",[],{__rc:[null,null]},-1],["cr:4874",[],{__rc:[null,null]},-1],["cr:7063",["ErrorBoundary.react"],{__rc:["ErrorBoundary.react",null]},-1],["cr:7162",["ReactDOMCompatibilityLayer"],{__rc:["ReactDOMCompatibilityLayer",null]},-1],["cr:7383",["BanzaiWWW"],{__rc:["BanzaiWWW",null]},-1],["cr:7388",["setIntervalWWW"],{__rc:["setIntervalWWW",null]},-1],["cr:7422",["ImageDownloadTrackerWWW"],{__rc:["ImageDownloadTrackerWWW",null]},-1],["cr:7451",[],{__rc:[null,null]},-1],["cr:8907",["HeroTracingCoreConfigWWW"],{__rc:["HeroTracingCoreConfigWWW",null]},-1],["cr:8908",["HeroTracingCoreDependenciesWWW"],{__rc:["HeroTracingCoreDependenciesWWW",null]},-1],["cr:9610",[],{__rc:[null,null]},-1],["cr:11054",[],{__rc:[null,null]},-1],["cr:15957",[],{__rc:[null,null]},-1],["cr:955714",[],{__rc:[null,null]},-1],["cr:1064332",[],{__rc:[null,null]},-1],["cr:1106516",[],{__rc:[null,null]},-1],["cr:1108857",[],{__rc:[null,null]},-1],["cr:1294158",["React.classic"],{__rc:["React.classic",null]},-1],["cr:1294159",["ReactDOM.classic"],{__rc:["ReactDOM.classic",null]},-1],["cr:1522191",["CometLinkTrackingUtils.facebook"],{__rc:["CometLinkTrackingUtils.facebook",null]},-1],["cr:1984081",[],{__rc:[null,null]},-1],["cr:5662",["Event"],{__rc:["Event",null]},-1],["cr:4425",[],{__rc:[null,null]},-1],["cr:3376",[],{__rc:[null,null]},-1],["cr:1083116",["XAsyncRequest"],{__rc:["XAsyncRequest",null]},-1],["cr:1083117",[],{__rc:[null,null]},-1],["IntlCurrentLocale",[],{code:"en_US"},5954],["JSSelfProfilerTrackedInteractions",[],{interactions:[{action:"*",tracePolicy:"*"}]},6918],["NewsRegulationErrorMessageData",[],{availableErrorCodes:[2216007,2216012,2216012],errorCodeToRegType:{"2216007":"c18","2216012":"au00"},learnMoreLinks:{c18:{regulated_user:"https://www.facebook.com/help/787040499275067",user:"https://www.facebook.com/help/2579891418969617"},au00:{regulated_user:"https://www.facebook.com/help/787040499275067",user:"https://www.facebook.com/help/2579891418969617"},global_block:{regulated_user:"https://www.facebook.com/help/787040499275067",user:"https://www.facebook.com/help/2579891418969617"}},learnMoreLink:{regulated_user:"https://www.facebook.com/help/787040499275067",user:"https://www.facebook.com/help/2579891418969617"},appealLinks:{c18:"https://www.facebook.com/help/contact/419859403337390"}},7133],["ClickIDURLBlocklistSVConfig",[],{block_list_url:["https://www.youtube.com/watch?v=f1J38FlDKxo","https://www.youtube.com/watch?v=6xt7nTuO85A"]},7631],["FBDomainsSVConfig",[],{domains:{__map:[["www.facebook.com",1],["tfbnw.net",1],["m.beta.facebook.com",1],["touch.beta.facebook.com",1],["www.dev.facebook.com",1],["fb.me",1],["s.fb.com",1],["m.fbjs.facebook.com",1],["facebook.com.es",1],["www.fbjs.facebook.com",1],["m.facebook.com",1],["facebook.fr",1],["fbsbx.com",1],["embed.fbsbx.com",1],["attachment.fbsbx.com",1],["lookaside.fbsbx.com",1],["web.facebook.com",1],["fb.com",1],["messenger.com",1],["secure.facebook.com",1],["secure.my-od.facebook.com",1],["www.my-od.facebook.com",1]]}},3828],["ClickIDDomainBlacklistSVConfig",[],{domains:["craigslist","tfbnw.net","canadiantire.ca","o2.co.uk","archive.org","reddit.com","redd.it","gmail.com","cvk.gov.ua","electoralsearch.in","yahoo.com","cve.mitre.org","usenix.org","ky.gov","voteohio.gov","vote.pa.gov","oversightboard.com","wi.gov","pbs.twimg.com","media.discordapp.net","vastadeal.com","theaustralian.com.au","alloygator.com","elsmannimmobilien.de","news.com.au","dennisbonnen.com","stoett.com","investorhour.com","perspectivasur.com","bonnegueule.fr","firstent.org","twitpic.com","kollosche.com.au","nau.edu","arcourts.gov","lomberg.de","network4.hu","balloonrace.com","awstrack.me","ic3.gov","sos.wyo.gov","cnpq.br","0.discoverapp.com","apple.com","apple.co","applecard.apple","services.apple","appletvplus.com","applepay.apple","wallet.apple","beatsbydre.com","dinn.com.mx","soriana.com","facebook.sso.datasite.com","fycextras.com","rik.parlament.gov.rs","elections.delaware.gov","dge.sn","facebook.co1.qualtrics.com","instagram.qualtrics.com"]},3829],["CometCustomKeyCommands",[],{customCommands:{},areSingleKeysDisabled:null,modifiedKeyboardShortcutsPreference:4},4521],["TimeSliceInteractionSV",[],{on_demand_reference_counting:true,on_demand_profiling_counters:true,default_rate:1000,lite_default_rate:100,interaction_to_lite_coinflip:{ADS_INTERFACES_INTERACTION:0,ads_perf_scenario:0,ads_wait_time:0,Event:1},interaction_to_coinflip:{ADS_INTERFACES_INTERACTION:1,ads_perf_scenario:1,ads_wait_time:1,Event:100},enable_heartbeat:false,maxBlockMergeDuration:0,maxBlockMergeDistance:0,enable_banzai_stream:true,user_timing_coinflip:50,banzai_stream_coinflip:0,compression_enabled:true,ref_counting_fix:false,ref_counting_cont_fix:false,also_record_new_timeslice_format:false,force_async_request_tracing_on:false},2609],["InstagramUserAgent",[],{is_chrome:false,is_edge:false,is_edge_chromium_based:false,is_edge_legacy:false,is_firefox:false,is_ig_carbon:false,is_ig_lite:false,is_ig_webview:false,is_barcelona_webview:false,is_igtv_webview:false,is_in_app_browser:false,is_ios:false,is_android:false,is_windows_nt:false,is_ipad:false,is_macos:false,is_mobile:false,is_mobile_safari:false,is_oculus_browser:false,is_opera:false,is_safari:false,is_supported_browser:false,is_twitter_webview:false,is_uc_browser:false,is_vapid_eligible:false,is_webview:false,is_windows_pwa:false,is_igvr:false,user_agent:"Dataman/6 CFNetwork/1498.700.2 Darwin/23.6.0"},6088],["PolarisSiteData",[],{country_code:null,device_id:"",machine_id:"",send_device_id_header:false,e2e_config:null,use_server_machine_id:false},7369],["BDSignalCollectionData",[],{sc:"{\"t\":1659080345,\"c\":[[30000,838801],[30001,838801],[30002,838801],[30003,838801],[30004,838801],[30005,838801],[30006,573585],[30007,838801],[30008,838801],[30012,838801],[30013,838801],[30015,806033],[30018,806033],[30021,540823],[30022,540817],[30040,806033],[30093,806033],[30094,806033],[30095,806033],[30101,541591],[30102,541591],[30103,541591],[30104,541591],[30106,806039],[30107,806039],[38000,541427],[38001,806643]]}",fds:60,fda:60,i:60,sbs:1,dbs:100,bbs:100,hbi:60,rt:262144,hbcbc:2,hbvbc:0,hbbi:30,sid:-1,hbv:"7245324646598414440"},5239],["cr:8546",["FDSCometTooltip.react"],{__rc:["FDSCometTooltip.react",null]},-1],["cr:994756",["BaseBlueModal.react"],{__rc:["BaseBlueModal.react",null]},-1],["cr:1645510",[],{__rc:[null,null]},-1],["cr:1824473",[],{__rc:[null,null]},-1],["cr:1094133",[],{__rc:[null,null]},-1],["cr:2682",["warningBlueish"],{__rc:["warningBlueish",null]},-1],["cr:11202",[],{__rc:[null,null]},-1],["cr:1105154",[],{__rc:[null,null]},-1],["cr:5277",["ReactDOM.classic.prod-or-profiling"],{__rc:["ReactDOM.classic.prod-or-profiling",null]},-1],["cr:13683",[],{__rc:[null,null]},-1],["cr:1642797",["BanzaiBase"],{__rc:["BanzaiBase",null]},-1],["cr:896461",["setIntervalBlue"],{__rc:["setIntervalBlue",null]},-1],["cr:3798",[],{__rc:[null,null]},-1],["cr:1292365",["React-prod.classic"],{__rc:["React-prod.classic",null]},-1],["cr:1042",["XAsyncRequestWWW"],{__rc:["XAsyncRequestWWW",null]},-1],["WebLoomConfig",[],{adaptive_config:{interactions:{modules:{"2097":1,"2804":1,"12068":1},events:{}},qpl:{modules:{},events:{}},modules:null,events:null}},4171],["cr:273",["FocusWithinHandlerStrictMode.react"],{__rc:["FocusWithinHandlerStrictMode.react",null]},-1],["cr:2683",["warningBlue"],{__rc:["warningBlue",null]},-1],["cr:5278",["ReactDOM-prod.classic"],{__rc:["ReactDOM-prod.classic",null]},-1],["cr:1172",["WebSession"],{__rc:["WebSession",null]},-1],["cr:2037",["BanzaiAdapter"],{__rc:["BanzaiAdapter",null]},-1],["cr:3724",["SetIdleTimeoutAcrossTransitions"],{__rc:["SetIdleTimeoutAcrossTransitions",null]},-1],["cr:9985",["performanceAbsoluteNow"],{__rc:["performanceAbsoluteNow",null]},-1],["cr:9986",["CurrentUser"],{__rc:["CurrentUser",null]},-1],["cr:9987",["NavigationMetrics"],{__rc:["NavigationMetrics",null]},-1],["cr:9988",["Visibility"],{__rc:["Visibility",null]},-1],["cr:3695",[],{__rc:[null,null]},-1],["cr:983844",[],{__rc:[null,null]},-1],["cr:5695",["EventListenerWWW"],{__rc:["EventListenerWWW",null]},-1],["cr:8909",["ReactFiberErrorDialogWWW"],{__rc:["ReactFiberErrorDialogWWW",null]},-1],["cr:5866",["BanzaiAdapterWWW"],{__rc:["BanzaiAdapterWWW",null]},-1],["cr:7384",["cancelIdleCallbackWWW"],{__rc:["cancelIdleCallbackWWW",null]},-1],["CoreWarningGK",[],{forceWarning:false},725],["cr:1353359",["EventListenerImplForBlue"],{__rc:["EventListenerImplForBlue",null]},-1],["cr:692209",["cancelIdleCallbackBlue"],{__rc:["cancelIdleCallbackBlue",null]},-1],["BanzaiConfig",[],{MAX_SIZE:10000,MAX_WAIT:150000,MIN_WAIT:null,RESTORE_WAIT:150000,blacklist:["time_spent"],disabled:false,gks:{boosted_pagelikes:true,platform_oauth_client_events:true,sticker_search_ranking:true},known_routes:["artillery_javascript_actions","artillery_javascript_trace","artillery_logger_data","logger","falco","gk2_exposure","js_error_logging","loom_trace","marauder","perfx_custom_logger_endpoint","qex","require_cond_exposure_logging","metaconfig_exposure"],should_drop_unknown_routes:true,should_log_unknown_routes:false},7],["DOMScannerConfig",[],{scan_id:"ZJ7CBvje1f_L",delay:10000,needs_scan:true},7201],["cr:6943",["EventListenerImplForCacheStorage"],{__rc:["EventListenerImplForCacheStorage",null]},-1],["cr:1634616",["UserActivityBlue"],{__rc:["UserActivityBlue",null]},-1],["cr:844180",["TimeSpentImmediateActiveSecondsLoggerBlue"],{__rc:["TimeSpentImmediateActiveSecondsLoggerBlue",null]},-1],["cr:1187159",["BlueCompatBroker"],{__rc:["BlueCompatBroker",null]},-1],["WebDevicePerfInfoData",[],{needsFullUpdate:true,needsPartialUpdate:false,shouldLogResourcePerf:false},3977],["WebStorageMonsterLoggingURI",[],{uri:"/ajax/webstorage/process_keys/?state=1"},3032],["TimeSpentConfig",[],{delay:1000,timeout:64,"0_delay":0,"0_timeout":8},142],["cr:710",[],{__rc:[null,null]},-1],["ImmediateActiveSecondsConfig",[],{sampling_rate:0},423],["CometAltpayJsSdkIframeAllowedDomains",[],{allowed_domains:["https://live.adyen.com","https://integration-facebook.payu.in","https://facebook.payulatam.com","https://secure.payu.com","https://facebook.dlocal.com","https://buy2.boku.com"]},4920]],require:[["BDClientSignalCollectionTrigger","startSignalCollection",[],[{sc:"{\"t\":1659080345,\"c\":[[30000,838801],[30001,838801],[30002,838801],[30003,838801],[30004,838801],[30005,838801],[30006,573585],[30007,838801],[30008,838801],[30012,838801],[30013,838801],[30015,806033],[30018,806033],[30021,540823],[30022,540817],[30040,806033],[30093,806033],[30094,806033],[30095,806033],[30101,541591],[30102,541591],[30103,541591],[30104,541591],[30106,806039],[30107,806039],[38000,541427],[38001,806643]]}",fds:60,fda:60,i:60,sbs:1,dbs:100,bbs:100,hbi:60,rt:262144,hbcbc:2,hbvbc:0,hbbi:30,sid:-1,hbv:"7245324646598414440"}]],["NavigationMetrics","setPage",[],[{page:"XIndexReduxController",page_type:"normal",page_uri:"https://www.facebook.com/",serverLID:"7484978647544352438"}]],["FalcoLoggerTransports","attach",[],[]],["Chromedome","start",[],[{}]],["DimensionTracking"],["ClickRefLogger"],["NavigationClickPointHandler"],["WebDevicePerfInfoLogging","doLog",[],[]],["WebStorageMonster","schedule",[],[]],["Artillery","disable",[],[]],["ScriptPathLogger","startLogging",[],[]],["TimeSpentBitArrayLogger","init",[],[]],["DeferredCookie","addToQueue",[],["_js_datr","bPzfZ6aEUrKL84tjaisc5Mmo",34560000000,"/",true,false,true,".facebook.com"]],["TransportSelectingClientSingletonConditional"],["RequireDeferredReference","unblock",[],[["TransportSelectingClientSingletonConditional"],"sd"]],["RequireDeferredReference","unblock",[],[["TransportSelectingClientSingletonConditional"],"css"]]]},hsrp:{hsdp:{clpData:{"1871697":{r:1,s:1},"1829319":{r:1},"1829320":{r:1},"1843988":{r:1}}},hblp:{consistency:{rev:1021172575}}},allResources:["g1uvzNt","JuRSzyN","QGhzutl","2XRCDQ+","zPYlTyl","FTkFlke","p+1OXu8","JOwuQhi"]});}));</script></body></html>
// ==UserScript==
// @name          【玩的嗨】VIP工具箱,夸克网盘直链批量获取,全网VIP视频免费破解去广告,获取B站封面,下载B站视频等众多功能聚合 长期更新，放心使用
// @namespace     https://www.wandhi.com/
// @description   🔥功能介绍🔥：🎉 1、Vip视频解析；🎉 2、一站式音乐搜索解决方案；🎉 3、bilibili视频封面获取；🎉 4、bilibili视频下载(已支持分P下载)；🎉 5、夸克网盘直链批量获取；🎉 6、CSDN页面、剪切板清理；🎉 7、页面自动展开(更多网站匹配中,欢迎提交想要支持的网站) 🎉 8、YouTube视频下载🎉 9、中间页自动跳转；🎉 10、搜索引擎快速跳转
// @license       MIT
// @version       4.9.24
// @author        MaxZhang
// @exclude       *://vip.wandhi.com/*
// @match         *://*blog.csdn.net/*
// @match         *://*download.csdn.net/*
// @match         *://*c.pc.qq.com/middlem*
// @match         *://*pan.baidu.com/disk/main*
// @match         *://link.csdn.net/*
// @match         *://link.zhihu.com/*
// @match         *://browser.gwdang.com/*
// @match         *://*www.jianshu.com/go-wild*
// @match         *://*gitee.com/link*
// @match         *://*juejin.cn/?target*
// @match         *://www.aliyundrive.com/drive*
// @match         *://www.alipan.com/drive/*
// @match         *://*.youtube.com/watch?v=*
// @match         *://support.qq.com/products*
// @match         *://weibo.cn/sinaurl*
// @match         *://afdian.net/link*
// @match         *://*oschina.net/action/GoToLink*
// @match         *://jump2.bdimg.com/safecheck*
// @match         *://www.douban.com/link2/?url*
// @match         *://link.17173.com*
// @match         *://search.suning.com/*
// @match         *://pan.quark.cn/*
// @match         *://docs.qq.com/scenario/link*
// @match         *://mail.qq.com/cgi-bin/readtemplate*
// @match         *://cloud.tencent.com/developer/tools/blog-entry*
// @match         *://link.uisdc.com/*
// @match         *://*.tudou.com/listplay/*
// @match         *://*.tudou.com/albumplay/*
// @match         *://*.tudou.com/programs/view/*
// @match         *://*.tudou.com/v*
// @match         *://*.mgtv.com/b/*
// @match         *://film.sohu.com/album/*
// @match         *://tv.sohu.com/v/*
// @match         *://*.acfun.cn/v/*
// @match         *://*.bilibili.com/video/*
// @match         *://*.bilibili.com/anime/*
// @match         *://*.bilibili.com/bangumi/play/*
// @match         *://*.pptv.com/show/*
// @match         *://*.baofeng.com/play/*
// @match         *://*.wasu.cn/Play/show*
// @match         *://v.yinyuetai.com/video/*
// @match         *://v.yinyuetai.com/playlist/*
// @match         *://*.wasu.cn/Play/show/*
// @match         *://music.taihe.com/song*
// @match         *://music.163.com/song*
// @match         *://music.163.com/m/song*
// @match         *://y.qq.com/*
// @match         *://*.kugou.com/*
// @match         *://*.kuwo.cn/*
// @match         *://*.xiami.com/*
// @match         *://music.taihe.com/*
// @match         *://*.1ting.com/player*
// @match         *://www.qingting.fm/*
// @match         *://www.lizhi.fm/*
// @match         *://music.migu.cn/*
// @match         *://www.shangxueba.com/ask/*.html
// @match         *://www.ximalaya.com/*
// @match         *://www.shangxueba.com/ask/*.html
// @match         *://pan.baidu.com/disk/home*
// @match         *://yun.baidu.com/disk/home*
// @match         *://pan.baidu.com/s/*
// @match         *://yun.baidu.com/s/*
// @match         *://pan.baidu.com/share/link*
// @match         *://yun.baidu.com/share/link*
// @match         *://wenku.baidu.com/view/*
// @match         *://settings.wandhi.com/*
// @match         *://m.youku.com/v*
// @match         *://m.youku.com/a*
// @match         *://v.youku.com/v_*
// @match         *://v.youku.com/pad_show*
// @match         *://*.iqiyi.com/v_*
// @match         *://*.iqiyi.com/w_*
// @match         *://*.iqiyi.com/a_*
// @match         *://*.iqiyi.com/adv*
// @match         *://*.iq.com/play/*
// @match         *://*.le.com/ptv/vplay/*
// @match         *://v.qq.com/x/cover/*
// @match         *://v.qq.com/x/page/*
// @match         *://v.qq.com/*play*
// @match         *://v.qq.com/cover*
// @match         *://c.pc.qq.com/ios*
// @match         *://www.v2ex.com/t/*
// @match         *://*.nodeseek.com/jump*
// @match         *://*.zhihu.com/question*
// @match         *://www.baidu.com/*
// @match         *://www.google.com/*
// @match         *://www.sogou.com/*
// @match         *://www.so.com/s*
// @match         *://cn.bing.com/search*
// @match         *://sspai.com/link*
// @match         *://*.kdocs.cn/office/link*
// @match         *://ispacesoft.com/*.html
// @match         *://tv.wandhi.com/go.html*
// @match         *://tv.wandhi.com/check.html
// @match         *://*.xiaohongshu.com/explore*
// @match         *://www.yuque.com/r/goto*
// @match         *://blog.51cto.com/transfer*
// @match         *://r.wjx.com/redirect.aspx*
// @match         *://www.infoq.cn/link*
// @match         *://open.work.weixin.qq.com/wwopen/uriconfirm?uri=
// @require       https://lib.baomitu.com/jquery/1.12.4/jquery.min.js
// @require       https://lib.baomitu.com/limonte-sweetalert2/11.4.7/sweetalert2.all.min.js
// @require       https://lib.baomitu.com/echarts/4.6.0/echarts.min.js
// @require       https://lib.baomitu.com/layer/2.3/layer.js
// @require       https://lib.baomitu.com/qrcode-generator/1.4.4/qrcode.min.js
// @require       https://lib.baomitu.com/FileSaver.js/2.0.5/FileSaver.min.js
// @require       https://lib.baomitu.com/viewerjs/1.11.3/viewer.min.js
// @require       https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/react/18.2.0/umd/react.production.min.js
// @require       https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/react-dom/18.2.0/umd/react-dom.production.min.js
// @require       https://registry.npmmirror.com/@douyinfe/semi-ui/2.51.0/files/dist/umd/semi-ui.min.js
// @grant         GM_setClipboard
// @grant         unsafeWindow
// @grant         GM_xmlhttpRequest
// @grant         GM_info
// @grant         GM_cookie
// @grant         GM_addStyle
// @grant         GM.addStyle
// @grant         GM_getValue
// @grant         GM_setValue
// @grant         GM.getValue
// @grant         GM.setValue
// @grant         GM_notification
// @grant         GM_openInTab
// @grant         GM_deleteValue
// @grant         GM_registerMenuCommand
// @grant         GM_unregisterMenuCommand
// @grant         GM_download
// @connect       api.wandhi.com
// @connect       api.huizhek.com
// @connect       cdn.jsdelivr.net
// @connect       tool.manmanbuy.com
// @connect       gwdang.com
// @connect       scriptcat.org
// @connect       quark.cn
// @connect       openapi.baidu.com
// @connect       localhost
// @connect       pan.baidu.com
// @connect       api.bilibili.com
// @compatible    firefox
// @compatible    chrome
// @compatible    opera safari edge
// @compatible    safari
// @compatible    edge
// @run-at        document-end
// @downloadURL https://update.greasyfork.org/scripts/384538/%E3%80%90%E7%8E%A9%E7%9A%84%E5%97%A8%E3%80%91VIP%E5%B7%A5%E5%85%B7%E7%AE%B1%2C%E5%A4%B8%E5%85%8B%E7%BD%91%E7%9B%98%E7%9B%B4%E9%93%BE%E6%89%B9%E9%87%8F%E8%8E%B7%E5%8F%96%2C%E5%85%A8%E7%BD%91VIP%E8%A7%86%E9%A2%91%E5%85%8D%E8%B4%B9%E7%A0%B4%E8%A7%A3%E5%8E%BB%E5%B9%BF%E5%91%8A%2C%E8%8E%B7%E5%8F%96B%E7%AB%99%E5%B0%81%E9%9D%A2%2C%E4%B8%8B%E8%BD%BDB%E7%AB%99%E8%A7%86%E9%A2%91%E7%AD%89%E4%BC%97%E5%A4%9A%E5%8A%9F%E8%83%BD%E8%81%9A%E5%90%88%20%E9%95%BF%E6%9C%9F%E6%9B%B4%E6%96%B0%EF%BC%8C%E6%94%BE%E5%BF%83%E4%BD%BF%E7%94%A8.user.js
// @updateURL https://update.greasyfork.org/scripts/384538/%E3%80%90%E7%8E%A9%E7%9A%84%E5%97%A8%E3%80%91VIP%E5%B7%A5%E5%85%B7%E7%AE%B1%2C%E5%A4%B8%E5%85%8B%E7%BD%91%E7%9B%98%E7%9B%B4%E9%93%BE%E6%89%B9%E9%87%8F%E8%8E%B7%E5%8F%96%2C%E5%85%A8%E7%BD%91VIP%E8%A7%86%E9%A2%91%E5%85%8D%E8%B4%B9%E7%A0%B4%E8%A7%A3%E5%8E%BB%E5%B9%BF%E5%91%8A%2C%E8%8E%B7%E5%8F%96B%E7%AB%99%E5%B0%81%E9%9D%A2%2C%E4%B8%8B%E8%BD%BDB%E7%AB%99%E8%A7%86%E9%A2%91%E7%AD%89%E4%BC%97%E5%A4%9A%E5%8A%9F%E8%83%BD%E8%81%9A%E5%90%88%20%E9%95%BF%E6%9C%9F%E6%9B%B4%E6%96%B0%EF%BC%8C%E6%94%BE%E5%BF%83%E4%BD%BF%E7%94%A8.meta.js
// ==/UserScript==

(function(global, factory) {
    "object" == typeof exports && "undefined" != typeof module ? factory(require("react-dom"), require("sweetalert2"), require("@douyinfe/semi-ui"), require("react")) : "function" == typeof define && define.amd ? define([ "react-dom", "sweetalert2", "@douyinfe/semi-ui", "react" ], factory) : factory((global = "undefined" != typeof globalThis ? globalThis : global || self).ReactDOM, global.Swal, global.SemiUI, global.React);
})(this, (function(ReactDOM, Swal, semiUi, React) {
    "use strict";
    var ReactDOM__default, Swal__default, React__default, LogLevel, BrowerType, VersionResult, css_248z$5, Common, SiteEnum, css_248z$4, css_248z$3, ConfigEnum, Menu$2, css_248z$2, Menu$1, css_248z$1, css_248z, Menu;
    function _interopDefaultLegacy(e) {
        return e && "object" == typeof e && "default" in e ? e : {
            default: e
        };
    }
    ReactDOM__default = _interopDefaultLegacy(ReactDOM), Swal__default = _interopDefaultLegacy(Swal), 
    React__default = _interopDefaultLegacy(React);
    const container = new Map;
    class Container {
        static Registe(type, args) {
            let className = this.processName(type.name);
            return container.has(className) ? container.get(className) : className ? (container.set(className, window.Reflect.construct(type, args)), 
            container.get(className)) : void 0;
        }
        static processName(name) {
            return name.toLowerCase();
        }
        static Require(type) {
            return this.Registe(type, []);
        }
    }
    class Logger {
        static log(msg, group, level) {}
        static debug(msg, group = "debug") {
            this.log(msg, group, LogLevel.debug);
        }
        static info(msg, group = "info") {
            this.log(msg, group, LogLevel.info);
        }
        static warn(msg, group = "warning") {
            this.log(msg, group, LogLevel.warn);
        }
        static error(msg, group = "error") {
            this.log(msg, group, LogLevel.error);
        }
    }
    function __awaiter(thisArg, _arguments, P, generator) {
        return new (P || (P = Promise))((function(resolve, reject) {
            function fulfilled(value) {
                try {
                    step(generator.next(value));
                } catch (e) {
                    reject(e);
                }
            }
            function rejected(value) {
                try {
                    step(generator.throw(value));
                } catch (e) {
                    reject(e);
                }
            }
            function step(result) {
                result.done ? resolve(result.value) : function adopt(value) {
                    return value instanceof P ? value : new P((function(resolve) {
                        resolve(value);
                    }));
                }(result.value).then(fulfilled, rejected);
            }
            step((generator = generator.apply(thisArg, _arguments || [])).next());
        }));
    }
    !function(LogLevel) {
        LogLevel[LogLevel.debug = 0] = "debug", LogLevel[LogLevel.info = 1] = "info", LogLevel[LogLevel.warn = 2] = "warn", 
        LogLevel[LogLevel.error = 3] = "error";
    }(LogLevel || (LogLevel = {})), function(BrowerType) {
        BrowerType[BrowerType.Edge = 0] = "Edge", BrowerType[BrowerType.Edg = 1] = "Edg", 
        BrowerType[BrowerType.Chrome = 2] = "Chrome", BrowerType[BrowerType.Firefox = 3] = "Firefox", 
        BrowerType[BrowerType.Safiri = 4] = "Safiri", BrowerType[BrowerType.Se360 = 5] = "Se360", 
        BrowerType[BrowerType.Ie2345 = 6] = "Ie2345", BrowerType[BrowerType.Baidu = 7] = "Baidu", 
        BrowerType[BrowerType.Liebao = 8] = "Liebao", BrowerType[BrowerType.UC = 9] = "UC", 
        BrowerType[BrowerType.QQ = 10] = "QQ", BrowerType[BrowerType.Sogou = 11] = "Sogou", 
        BrowerType[BrowerType.Opera = 12] = "Opera", BrowerType[BrowerType.Maxthon = 13] = "Maxthon";
    }(BrowerType || (BrowerType = {})), function(VersionResult) {
        VersionResult[VersionResult.less = -1] = "less", VersionResult[VersionResult.equal = 0] = "equal", 
        VersionResult[VersionResult.greater = 1] = "greater", VersionResult[VersionResult.incomparable = NaN] = "incomparable";
    }(VersionResult || (VersionResult = {}));
    class Core {
        constructor() {
            this.url = Core.currentUrl();
        }
        static Render(element, id) {
            let container = document.getElementById(id);
            if (!container) {
                let script = unsafeWindow.window.document.createElement("div");
                script.id = id, unsafeWindow.window.document.head.append(script), container = document.getElementById(id);
            }
            ReactDOM__default.default.render(element, container);
        }
        static appendTo(selector, html) {
            $(selector).append(html);
        }
        static prepend(selector, html) {
            $(selector).prepend(html);
        }
        static lazyload(callback, time = 5) {
            return __awaiter(this, void 0, void 0, (function*() {
                return new Promise(resolve => {
                    setTimeout(() => __awaiter(this, void 0, void 0, (function*() {
                        yield callback(), resolve();
                    })), 1e3 * time);
                });
            }));
        }
        static autoLazyload(is_ok, callback, time = 5) {
            return __awaiter(this, void 0, void 0, (function*() {
                return new Promise(resolve => __awaiter(this, void 0, void 0, (function*() {
                    is_ok() ? (yield callback(), Logger.debug("\u81ea\u52a8\u5ef6\u8fdf\u56de\u8c03\u6267\u884c\u5b8c\u6bd5,\u5ef6\u65f6\u65f6\u95f4:" + time), 
                    resolve()) : setTimeout(() => {
                        Core.autoLazyload(is_ok, callback, time).then(() => resolve());
                    }, 1e3 * time);
                })));
            }));
        }
        static sleep(time) {
            return new Promise(resolve => {
                setTimeout(() => {
                    resolve();
                }, 1e3 * time);
            });
        }
        static random(min, max) {
            let range = max - min, rand = Math.random();
            return min + Math.round(rand * range);
        }
        static randStr(len = 4) {
            let $chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789", maxPos = $chars.length, pwd = "";
            for (let i = 0; i < len; i++) pwd += $chars.charAt(Math.floor(Math.random() * maxPos));
            return pwd;
        }
        static background(callback, time = 5) {
            setInterval(() => {
                callback();
            }, 1e3 * time);
        }
        static get head() {
            return unsafeWindow.window.document.head;
        }
        static isNumber(a) {
            return !Array.isArray(a) && a - parseFloat(a) >= 0;
        }
        static addUrl(key, url) {
            GM_setValue(key, url);
        }
        static openUrl(key) {
            this.open(GM_getValue(key));
        }
        static getPar(option, url = window.location.search) {
            let v = url.match(new RegExp("[?&]" + option + "=([^&]+)", "i"));
            return null == v || v.length < 1 ? "" : v[1];
        }
        static appendCss(url) {
            let linkCSS = document.createElement("link");
            linkCSS.type = "text/css", linkCSS.rel = "stylesheet", linkCSS.href = url, Core.head.appendChild(linkCSS);
        }
        static appendCssContent(content) {
            let Style = document.createElement("style");
            Style.innerHTML = content, Core.head.appendChild(Style);
        }
        bodyAppendCss(url) {
            $("body").append($('<link rel="stylesheet" href="' + url + '">'));
        }
        static bodyAppend(html) {
            $("body").append(html);
        }
        static bodyPrepend(html) {
            $("body").prepend(html);
        }
        static appendJs(url) {
            let linkScript = document.createElement("script");
            linkScript.type = "text/javascript", linkScript.src = url, this.head.appendChild(linkScript);
        }
        bodyAppendJs(url) {
            $("body").append($('<script type="text/javascript" src="' + url + '"><\/script>'));
        }
        static currentUrl() {
            return window.location.href;
        }
        static get url() {
            return window.location.href;
        }
        static inIframe() {
            return !(!self.frameElement || "IFRAME" != self.frameElement.tagName) || (window.frames.length != parent.frames.length || self != top);
        }
        static format(time, fmt = "yyyy-MM-dd hh:mm:ss") {
            let o = {
                "M+": time.getMonth() + 1,
                "d+": time.getDate(),
                "h+": time.getHours(),
                "m+": time.getMinutes(),
                "s+": time.getSeconds(),
                "q+": Math.floor((time.getMonth() + 3) / 3),
                S: time.getMilliseconds()
            };
            /(y+)/.test(fmt) && (fmt = fmt.replace(RegExp.$1, (time.getFullYear() + "").substr(4 - RegExp.$1.length)));
            for (let k in o) new RegExp("(" + k + ")").test(fmt) && (fmt = fmt.replace(RegExp.$1, 1 == RegExp.$1.length ? o[k] : ("00" + o[k]).substr(("" + o[k]).length)));
            return fmt;
        }
        static sizeFormat(value) {
            if (value === +value) {
                let unit = [ "B", "KB", "MB", "GB", "TB", "PB", "EB", "ZB", "YB" ], index = Math.floor(Math.log(value) / Math.log(1024));
                return `${(value / Math.pow(1024, index)).toFixed(1)}${unit[index]}`;
            }
            return "";
        }
        static encode(str) {
            return window.btoa(str);
        }
        static decode(str) {
            return window.atob(str);
        }
        static open(url, loadInBackGround = !1) {
            if (Core.getBrowser() == BrowerType.Safiri && "undefined" == typeof GM_openInTab) {
                if (void 0 === (null === GM || void 0 === GM ? void 0 : GM.openInTab)) return void window.open(url, "_blank");
                null === GM || void 0 === GM || GM.openInTab(url, loadInBackGround);
            }
            GM_openInTab(url, loadInBackGround);
        }
        static click(selector, callback) {
            $(selector).on("click", callback);
        }
        static uuid(len = 10, split = !1, radix = 0) {
            let i, chars = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""), uuid = [];
            if (radix = 0 == radix ? radix || chars.length : radix, split) {
                let r;
                for (uuid[8] = uuid[13] = uuid[18] = uuid[23] = "-", uuid[14] = "4", i = 0; i < 36; i++) uuid[i] || (r = 0 | 16 * Math.random(), 
                uuid[i] = chars[19 == i ? 3 & r | 8 : r]);
            } else for (i = 0; i < len; i++) uuid[i] = chars[0 | Math.random() * radix];
            return uuid.join("");
        }
        static getBrowser() {
            let browser = !1, userAgent = window.navigator.userAgent.toLowerCase();
            return null != userAgent.match(/firefox/) ? browser = BrowerType.Firefox : null != userAgent.match(/edge/) ? browser = BrowerType.Edge : null != userAgent.match(/edg/) ? browser = BrowerType.Edg : null != userAgent.match(/bidubrowser/) ? browser = BrowerType.Baidu : null != userAgent.match(/lbbrowser/) ? browser = BrowerType.Liebao : null != userAgent.match(/ubrowser/) ? browser = BrowerType.UC : null != userAgent.match(/qqbrowse/) ? browser = BrowerType.QQ : null != userAgent.match(/metasr/) ? browser = BrowerType.Sogou : null != userAgent.match(/opr/) ? browser = BrowerType.Opera : null != userAgent.match(/maxthon/) ? browser = BrowerType.Maxthon : null != userAgent.match(/2345explorer/) ? browser = BrowerType.Ie2345 : null != userAgent.match(/chrome/) ? browser = navigator.mimeTypes.length > 10 ? BrowerType.Se360 : BrowerType.Chrome : null != userAgent.match(/safari/) && (browser = BrowerType.Safiri), 
            browser;
        }
        static getPercent(num, total) {
            return num = parseFloat(String(num)), total = parseFloat(String(total)), isNaN(num) || isNaN(total) ? 0 : total <= 0 ? "0" : Math.round(num / total * 1e4) / 100;
        }
        static getReact(dom, traverseUp = 0) {
            const domFiber = dom[Object.keys(dom).find(key => key.startsWith("__reactFiber$") || key.startsWith("__reactInternalInstance$"))];
            if (null == domFiber) return null;
            if (domFiber._currentElement) {
                let compFiber = domFiber._currentElement._owner;
                for (let i = 0; i < traverseUp; i++) compFiber = compFiber._currentElement._owner;
                return compFiber._instance;
            }
            const GetCompFiber = fiber => {
                let parentFiber = fiber.return;
                for (;"string" == typeof parentFiber.type; ) parentFiber = parentFiber.return;
                return parentFiber;
            };
            let compFiber = GetCompFiber(domFiber);
            for (let i = 0; i < traverseUp; i++) compFiber = GetCompFiber(compFiber);
            return compFiber.stateNode || compFiber;
        }
        static copyText(text) {
            const textArea = document.createElement("textarea");
            return textArea.style.position = "fixed", textArea.style.visibility = "-10000px", 
            textArea.value = text, document.body.appendChild(textArea), textArea.focus(), textArea.select(), 
            document.execCommand("copy") ? (document.body.removeChild(textArea), !0) : (document.body.removeChild(textArea), 
            !1);
        }
        static getGmCookie(key, domain = "") {
            return new Promise((resolve, reject) => {
                if ("undefined" == typeof GM_cookie) return void resolve("");
                let obj = {
                    name: key,
                    url: Core.url
                };
                domain && (obj.domain = domain), GM_cookie.list(obj, (cookies, error) => {
                    (null == cookies ? void 0 : cookies.length) > 0 ? resolve(cookies[0].value) : (Logger.warn(`get cookie [${key}] is error:${error}`), 
                    resolve(""));
                });
            });
        }
        static getCookie(key) {
            let arr = document.cookie.replace(/\s/g, "").split(";");
            for (let i = 0, l = arr.length; i < l; i++) {
                let tempArr = arr[i].split("=");
                if (tempArr[0] == key) return decodeURIComponent(tempArr[1]);
            }
            return "";
        }
    }
    const Min = 60, Hour = 60 * Min, Day = 24 * Hour, Week = 7 * Day;
    function styleInject(css, ref) {
        var insertAt, head, style;
        void 0 === ref && (ref = {}), insertAt = ref.insertAt, css && "undefined" != typeof document && (head = document.head || document.getElementsByTagName("head")[0], 
        (style = document.createElement("style")).type = "text/css", "top" === insertAt && head.firstChild ? head.insertBefore(style, head.firstChild) : head.appendChild(style), 
        style.styleSheet ? style.styleSheet.cssText = css : style.appendChild(document.createTextNode(css)));
    }
    css_248z$5 = 'html .aside-nav {\n    -ms-text-size-adjust: 100%;\n    -webkit-text-size-adjust: 100%;\n    -webkit-font-smoothing: antialiased;\n    font-size: 62.5%\n}\n\nbody .aside-nav {\n    font-family: "Helvetica Neue", Helvetica, "Microsoft YaHei", Arial, sans-serif;\n    margin: 0;\n    font-size: 1.6rem;\n    color: #4e546b\n}\n\n.aside-nav {\n    position: fixed;\n    bottom: 0;\n    left: -47px;\n    width: 260px;\n    height: 260px;\n    -webkit-filter: url(#goo);\n    filter: url(#goo);\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    user-select: none;\n    opacity: .75;\n    z-index: 99999\n}\n\n.aside-nav.no-filter {\n    -webkit-filter: none;\n    filter: none\n}\n\n.aside-nav .aside-menu {\n    position: absolute;\n    width: 70px;\n    height: 70px;\n    -webkit-border-radius: 50%;\n    border-radius: 50%;\n    background: #f34444;\n    left: -95px;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    margin: auto;\n    text-align: center;\n    line-height: 70px;\n    color: #fff;\n    font-size: 20px;\n    z-index: 1;\n    cursor: move\n}\n\n.aside-nav .menu-item {\n    position: absolute;\n    width: 60px;\n    height: 60px;\n    background-color: #ff7676;\n    left: -95px;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    margin: auto;\n    line-height: 60px;\n    text-align: center;\n    -webkit-border-radius: 50%;\n    border-radius: 50%;\n    text-decoration: none;\n    color: #fff;\n    -webkit-transition: background .5s, -webkit-transform .6s;\n    transition: background .5s, -webkit-transform .6s;\n    -moz-transition: transform .6s, background .5s, -moz-transform .6s;\n    transition: transform .6s, background .5s;\n    transition: transform .6s, background .5s, -webkit-transform .6s, -moz-transform .6s;\n    font-size: 14px;\n    -webkit-box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    box-sizing: border-box\n}\n\n.aside-nav .menu-item:hover {\n    background: #a9c734\n}\n\n.aside-nav .menu-line {\n    line-height: 20px;\n    padding-top: 10px\n}\n\n.aside-nav:hover {\n    opacity: 1\n}\n\n.aside-nav:hover .aside-menu {\n    -webkit-animation: jello 1s;\n    -moz-animation: jello 1s;\n    animation: jello 1s\n}\n\n.aside-nav:hover .menu-first {\n    -webkit-transform: translate3d(0, -135%, 0);\n    -moz-transform: translate3d(0, -135%, 0);\n    transform: translate3d(0, -135%, 0)\n}\n\n.aside-nav:hover .menu-second {\n    -webkit-transform: translate3d(120%, -70%, 0);\n    -moz-transform: translate3d(120%, -70%, 0);\n    transform: translate3d(120%, -70%, 0)\n}\n\n.aside-nav:hover .menu-third {\n    -webkit-transform: translate3d(120%, 70%, 0);\n    -moz-transform: translate3d(120%, 70%, 0);\n    transform: translate3d(120%, 70%, 0)\n}\n\n.aside-nav:hover .menu-fourth {\n    -webkit-transform: translate3d(0, 135%, 0);\n    -moz-transform: translate3d(0, 135%, 0);\n    transform: translate3d(0, 135%, 0)\n}\n\n@-webkit-keyframes jello {\n    from, 11.1%, to {\n        -webkit-transform: none;\n        transform: none\n    }\n    22.2% {\n        -webkit-transform: skewX(-12.5deg) skewY(-12.5deg);\n        transform: skewX(-12.5deg) skewY(-12.5deg)\n    }\n    33.3% {\n        -webkit-transform: skewX(6.25deg) skewY(6.25deg);\n        transform: skewX(6.25deg) skewY(6.25deg)\n    }\n    44.4% {\n        -webkit-transform: skewX(-3.125deg) skewY(-3.125deg);\n        transform: skewX(-3.125deg) skewY(-3.125deg)\n    }\n    55.5% {\n        -webkit-transform: skewX(1.5625deg) skewY(1.5625deg);\n        transform: skewX(1.5625deg) skewY(1.5625deg)\n    }\n    66.6% {\n        -webkit-transform: skewX(-.78125deg) skewY(-.78125deg);\n        transform: skewX(-.78125deg) skewY(-.78125deg)\n    }\n    77.7% {\n        -webkit-transform: skewX(0.390625deg) skewY(0.390625deg);\n        transform: skewX(0.390625deg) skewY(0.390625deg)\n    }\n    88.8% {\n        -webkit-transform: skewX(-.1953125deg) skewY(-.1953125deg);\n        transform: skewX(-.1953125deg) skewY(-.1953125deg)\n    }\n}\n\n@-moz-keyframes jello {\n    from, 11.1%, to {\n        -moz-transform: none;\n        transform: none\n    }\n    22.2% {\n        -moz-transform: skewX(-12.5deg) skewY(-12.5deg);\n        transform: skewX(-12.5deg) skewY(-12.5deg)\n    }\n    33.3% {\n        -moz-transform: skewX(6.25deg) skewY(6.25deg);\n        transform: skewX(6.25deg) skewY(6.25deg)\n    }\n    44.4% {\n        -moz-transform: skewX(-3.125deg) skewY(-3.125deg);\n        transform: skewX(-3.125deg) skewY(-3.125deg)\n    }\n    55.5% {\n        -moz-transform: skewX(1.5625deg) skewY(1.5625deg);\n        transform: skewX(1.5625deg) skewY(1.5625deg)\n    }\n    66.6% {\n        -moz-transform: skewX(-.78125deg) skewY(-.78125deg);\n        transform: skewX(-.78125deg) skewY(-.78125deg)\n    }\n    77.7% {\n        -moz-transform: skewX(0.390625deg) skewY(0.390625deg);\n        transform: skewX(0.390625deg) skewY(0.390625deg)\n    }\n    88.8% {\n        -moz-transform: skewX(-.1953125deg) skewY(-.1953125deg);\n        transform: skewX(-.1953125deg) skewY(-.1953125deg)\n    }\n}\n\n@keyframes jello {\n    from, 11.1%, to {\n        -webkit-transform: none;\n        -moz-transform: none;\n        transform: none\n    }\n    22.2% {\n        -webkit-transform: skewX(-12.5deg) skewY(-12.5deg);\n        -moz-transform: skewX(-12.5deg) skewY(-12.5deg);\n        transform: skewX(-12.5deg) skewY(-12.5deg)\n    }\n    33.3% {\n        -webkit-transform: skewX(6.25deg) skewY(6.25deg);\n        -moz-transform: skewX(6.25deg) skewY(6.25deg);\n        transform: skewX(6.25deg) skewY(6.25deg)\n    }\n    44.4% {\n        -webkit-transform: skewX(-3.125deg) skewY(-3.125deg);\n        -moz-transform: skewX(-3.125deg) skewY(-3.125deg);\n        transform: skewX(-3.125deg) skewY(-3.125deg)\n    }\n    55.5% {\n        -webkit-transform: skewX(1.5625deg) skewY(1.5625deg);\n        -moz-transform: skewX(1.5625deg) skewY(1.5625deg);\n        transform: skewX(1.5625deg) skewY(1.5625deg)\n    }\n    66.6% {\n        -webkit-transform: skewX(-.78125deg) skewY(-.78125deg);\n        -moz-transform: skewX(-.78125deg) skewY(-.78125deg);\n        transform: skewX(-.78125deg) skewY(-.78125deg)\n    }\n    77.7% {\n        -webkit-transform: skewX(0.390625deg) skewY(0.390625deg);\n        -moz-transform: skewX(0.390625deg) skewY(0.390625deg);\n        transform: skewX(0.390625deg) skewY(0.390625deg)\n    }\n    88.8% {\n        -webkit-transform: skewX(-.1953125deg) skewY(-.1953125deg);\n        -moz-transform: skewX(-.1953125deg) skewY(-.1953125deg);\n        transform: skewX(-.1953125deg) skewY(-.1953125deg)\n    }\n}\n\n.animated {\n    -webkit-animation-duration: 1s;\n    -moz-animation-duration: 1s;\n    animation-duration: 1s;\n    -webkit-animation-fill-mode: both;\n    -moz-animation-fill-mode: both;\n    animation-fill-mode: both\n}\n\n@-webkit-keyframes bounceInUp {\n    from, 60%, 75%, 90%, to {\n        -webkit-animation-timing-function: cubic-bezier(0.215, .61, .355, 1);\n        animation-timing-function: cubic-bezier(0.215, .61, .355, 1)\n    }\n    from {\n        opacity: 0;\n        -webkit-transform: translate3d(0, 800px, 0);\n        transform: translate3d(0, 800px, 0)\n    }\n    60% {\n        opacity: 1;\n        -webkit-transform: translate3d(0, -20px, 0);\n        transform: translate3d(0, -20px, 0)\n    }\n    75% {\n        -webkit-transform: translate3d(0, 10px, 0);\n        transform: translate3d(0, 10px, 0)\n    }\n    90% {\n        -webkit-transform: translate3d(0, -5px, 0);\n        transform: translate3d(0, -5px, 0)\n    }\n    to {\n        -webkit-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0)\n    }\n}\n\n@-moz-keyframes bounceInUp {\n    from, 60%, 75%, 90%, to {\n        -moz-animation-timing-function: cubic-bezier(0.215, .61, .355, 1);\n        animation-timing-function: cubic-bezier(0.215, .61, .355, 1)\n    }\n    from {\n        opacity: 0;\n        -moz-transform: translate3d(0, 800px, 0);\n        transform: translate3d(0, 800px, 0)\n    }\n    60% {\n        opacity: 1;\n        -moz-transform: translate3d(0, -20px, 0);\n        transform: translate3d(0, -20px, 0)\n    }\n    75% {\n        -moz-transform: translate3d(0, 10px, 0);\n        transform: translate3d(0, 10px, 0)\n    }\n    90% {\n        -moz-transform: translate3d(0, -5px, 0);\n        transform: translate3d(0, -5px, 0)\n    }\n    to {\n        -moz-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0)\n    }\n}\n\n@keyframes bounceInUp {\n    from, 60%, 75%, 90%, to {\n        -webkit-animation-timing-function: cubic-bezier(0.215, .61, .355, 1);\n        -moz-animation-timing-function: cubic-bezier(0.215, .61, .355, 1);\n        animation-timing-function: cubic-bezier(0.215, .61, .355, 1)\n    }\n    from {\n        opacity: 0;\n        -webkit-transform: translate3d(0, 800px, 0);\n        -moz-transform: translate3d(0, 800px, 0);\n        transform: translate3d(0, 800px, 0)\n    }\n    60% {\n        opacity: 1;\n        -webkit-transform: translate3d(0, -20px, 0);\n        -moz-transform: translate3d(0, -20px, 0);\n        transform: translate3d(0, -20px, 0)\n    }\n    75% {\n        -webkit-transform: translate3d(0, 10px, 0);\n        -moz-transform: translate3d(0, 10px, 0);\n        transform: translate3d(0, 10px, 0)\n    }\n    90% {\n        -webkit-transform: translate3d(0, -5px, 0);\n        -moz-transform: translate3d(0, -5px, 0);\n        transform: translate3d(0, -5px, 0)\n    }\n    to {\n        -webkit-transform: translate3d(0, 0, 0);\n        -moz-transform: translate3d(0, 0, 0);\n        transform: translate3d(0, 0, 0)\n    }\n}\n\n.bounceInUp {\n    -webkit-animation-name: bounceInUp;\n    -moz-animation-name: bounceInUp;\n    animation-name: bounceInUp;\n    -webkit-animation-delay: 1s;\n    -moz-animation-delay: 1s;\n    animation-delay: 1s\n}\n', 
    styleInject(css_248z$5), function(Common) {
        class Menu {
            constructor() {
                this.core = new Core, this.site = /tv.wandhi.com/i, this.userAgent = navigator.userAgent, 
                this.menusClass = [ "first", "second", "third", "fourth", "fifth" ], this.menuSelector = "#Wandhi-nav";
            }
            loader() {}
            getBody(option) {
                return `<svg width="0" height="0"><defs><filter id="goo"><feGaussianBlur in="SourceGraphic" stdDeviation="10" result="blur"></feGaussianBlur><feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 19 -9" result="goo"></feColorMatrix><feComposite in="SourceGraphic" in2="goo" operator="atop"></feComposite></filter></defs></svg><div class="aside-nav bounceInUp animated" id="Wandhi-nav"><label for="" class="aside-menu" title="\u6309\u4f4f\u62d6\u52a8">VIP</label>${option}</div>`;
            }
            Init(menus, callback, skipIframe = !0) {
                if (Core.inIframe() && skipIframe) return;
                this.loader();
                let str = "";
                menus.forEach((element, index) => {
                    str += `<a href="javascript:void(0)" title="${element.title}" data-cat="${element.type}" class="menu-item menu-line menu-${this.menusClass[index]}">${element.show}</a>`;
                }), Logger.info("\u8ffd\u52a0\u83dc\u5355"), Core.bodyAppend(this.getBody(str)), 
                /Safari|iPhone/i.test(this.userAgent) && /chrome/i.test(this.userAgent) && $("#Wandhi-nav").addClass("no-filter");
                const drags = {
                    down: !1,
                    x: 0,
                    y: 0,
                    winWid: 0,
                    winHei: 0,
                    clientX: 0,
                    clientY: 0
                };
                let asideNav = $(this.menuSelector)[0];
                $("body").on("mousedown", "" + this.menuSelector, (function(a) {
                    const getCss = (a, e) => {
                        var _a, _b, _c;
                        return null !== (_b = null === (_a = document.defaultView) || void 0 === _a ? void 0 : _a.getComputedStyle(a, null)[e]) && void 0 !== _b ? _b : null !== (_c = a.currentStyle) && void 0 !== _c ? _c : a.currentStyle[e];
                    };
                    drags.down = !0, drags.clientX = a.clientX, drags.clientY = a.clientY, drags.x = parseInt(getCss(this, "left")), 
                    drags.y = parseInt(getCss(this, "top")), drags.winHei = $(window).height(), drags.winWid = $(window).width(), 
                    $(document).on("mousemove", (function(a) {
                        var e = a.clientX - drags.clientX, t = a.clientY - drags.clientY;
                        asideNav = asideNav || $("#Wandhi-nav")[0], asideNav.style.top = drags.y + t + "px", 
                        asideNav.style.left = drags.x + e + "px";
                    }));
                })).on("mouseup", "" + this.menuSelector, (function() {
                    drags.down = !1, $(document).off("mousemove");
                })), Menu.fullScreenMirror(), callback.call(this);
            }
            static fullScreenMirror() {
                unsafeWindow.document.onfullscreenchange = e => {
                    Logger.debug("fullElement:" + unsafeWindow.document.fullscreenElement), Menu.autoHide && (unsafeWindow.document.fullscreenElement ? $("#" + Menu.mainId).hide() : $("#" + Menu.mainId).show());
                };
            }
            static close() {
                Menu.autoHide = !1, $("#" + Menu.mainId).hide();
            }
        }
        Menu.mainId = "Wandhi-nav", Menu.autoHide = !0, Common.Menu = Menu;
    }(Common || (Common = {}));
    class PluginBase {
        constructor() {
            this._unique = !0, this.semiui = !1, this.menu = new Common.Menu, this.Process = () => {
                this.semiui && Core.appendCss("https://registry.npmmirror.com/@douyinfe/semi-ui/2.51.0/files/dist/css/semi.min.css"), 
                this.loader(), this.run();
            }, this._appName = "base";
        }
        unique() {
            return this._unique;
        }
        linkTest(url) {
            url || (url = Core.currentUrl());
            let flag = !1;
            return this.rules.forEach((v, k) => !v.test(url) || (flag = !0, this.site = k, !1)), 
            flag;
        }
        appName() {
            return this._appName;
        }
    }
    !function(SiteEnum) {
        SiteEnum.All = "All", SiteEnum.Settings = "Settings", SiteEnum.Settings_Jiexi_Opt = "Settings_Jiexi_Opt", 
        SiteEnum.Settings_AutoJump = "Settings_AutoJump", SiteEnum.Settings_AutoJump_Opt = "Settings_AutoJump_Opt", 
        SiteEnum.Settings_CSDN = "Settings_CSDN", SiteEnum.Settings_CSDN_Opt = "Settings_CSDN_Opt", 
        SiteEnum.Settings_Search = "Settings_Search", SiteEnum.Settings_Search_Opt = "Settings_Search_Opt", 
        SiteEnum.Settings_WangPan_Opt = "Settings_WangPan_Opt", SiteEnum.Settings_Bili_Pc_Opt = "Settings_Bili_Pc_Opt", 
        SiteEnum.TaoBao = "TaoBao", SiteEnum.TMall = "TMall", SiteEnum.JingDong = "JingDong", 
        SiteEnum.JingDongList = "JingDongList", SiteEnum.IQiYi = "IQiYi", SiteEnum.YouKu = "YouKu", 
        SiteEnum.LeShi = "LeShi", SiteEnum.TuDou = "TuDou", SiteEnum.Tencent_V = "Tencent_V", 
        SiteEnum.MangGuo = "MangGuo", SiteEnum.SoHu = "SoHu", SiteEnum.Acfun = "Acfun", 
        SiteEnum.BiliBili = "BiliBili", SiteEnum.BiliMobile = "BiliMobile", SiteEnum.M1905 = "M1905", 
        SiteEnum.PPTV = "PPTV", SiteEnum.YinYueTai = "YinYueTai", SiteEnum.WangYi = "WangYi", 
        SiteEnum.Tencent_M = "Tencent_M", SiteEnum.KuGou = "KuGou", SiteEnum.KaoLa = "KaoLa", 
        SiteEnum.KuWo = "KuWo", SiteEnum.XiaMi = "XiaMi", SiteEnum.TaiHe = "TaiHe", SiteEnum.QingTing = "QingTing", 
        SiteEnum.LiZhi = "LiZhi", SiteEnum.MiGu = "MiGu", SiteEnum.XiMaLaYa = "XiMaLaYa", 
        SiteEnum.WenKu = "WenKu", SiteEnum.YouTuBe = "YouTuBe", SiteEnum.SXB = "SXB", SiteEnum.BDY = "BDY", 
        SiteEnum.ALY = "ALY", SiteEnum.ALY_P = "ALY_P", SiteEnum.BDY1 = "BDY1", SiteEnum.LZY = "LZY", 
        SiteEnum.SuNing = "SuNing", SiteEnum.Steam = "Steam", SiteEnum.Vp = "Vp", SiteEnum.CSDN = "CSDN", 
        SiteEnum.CSDN_Download = "CSDN_Download", SiteEnum.ZhiHu = "ZhiHu", SiteEnum.JianShu = "JianShu", 
        SiteEnum.JueJin = "JueJin", SiteEnum.Gitee = "Gitee", SiteEnum.Weibo = "Weibo", 
        SiteEnum.TuXiaoChao = "TuXiaoChao", SiteEnum.OsCh = "OsCh", SiteEnum.AiFaDian = "AiFaDian", 
        SiteEnum.Baidu = "Baidu", SiteEnum.BaiduPanMain = "BaiduPanMain", SiteEnum.BaiduPanHome = "BaiduPanHome", 
        SiteEnum.DouBan = "DouBan", SiteEnum.g17173 = "g17173", SiteEnum.Google = "Google", 
        SiteEnum.SoGou = "SoGou", SiteEnum.KuaKeHome = "KuaKeHome", SiteEnum.TencentDoc = "TencentDoc", 
        SiteEnum.TencentDiskDoc = "TencentDiskDoc", SiteEnum.TencentMail = "TencentMail", 
        SiteEnum.TencentCloudBlog = "TencentCloudBlog", SiteEnum.SsPAi = "SsPai", SiteEnum.FeiShuDoc = "FeiShuDoc", 
        SiteEnum.TencentQQ = "TencentQQ", SiteEnum.Shuma = "Shuma", SiteEnum.BD_DETAIL_OLD = "BD_DETAIL_OLD", 
        SiteEnum.BD_DETAIL_NEW = "BD_DETAIL_NEW", SiteEnum.BD_DETAIL_Share = "BD_DETAIL_Share", 
        SiteEnum.Gwd = "Gwd", SiteEnum.Xxqg = "Xxqg", SiteEnum.Juhaowan = "Juhaowan", SiteEnum.MhXin = "MhXin", 
        SiteEnum.V2EX = "V2EX", SiteEnum.Github = "Github", SiteEnum.NodeSeek = "NodeSeek", 
        SiteEnum.HiTv = "HiTv", SiteEnum.HiTvCheck = "HiTvCheck", SiteEnum.Xhs = "Xhs", 
        SiteEnum.KingSoftDoc = "KingSoftDoc", SiteEnum.BingCn = "BingCn", SiteEnum.SiChuang = "SiChuang", 
        SiteEnum.Uisdc = "Uisdc", SiteEnum.YuQue = "YuQue", SiteEnum.KDocs = "KDocs", SiteEnum.CTO51 = "CTO51", 
        SiteEnum.WenJuanXing = "WenJuanXing", SiteEnum.InfoQ = "InfoQ", SiteEnum.WeChatWork = "WeChatWork", 
        SiteEnum.KuaKeShare = "KuaKeShare";
    }(SiteEnum || (SiteEnum = {}));
    class Config {
        static get env() {
            return GM_info;
        }
        static get(key, defaultValue = "") {
            let objStr = GM_getValue(this.encode(key), null);
            if (objStr) {
                let obj = JSON.parse(objStr);
                if (-1 == obj.exp || obj.exp > (new Date).getTime()) return Logger.info(`cache true:${key},${obj.exp}`), 
                obj.value;
                GM_deleteValue(key);
            }
            return Logger.info("cache false"), defaultValue;
        }
        static set(key, v, exp = -1) {
            let obj = {
                key: key,
                value: v,
                exp: -1 == exp ? exp : (new Date).getTime() + 1e3 * exp
            };
            Logger.debug(obj), GM_setValue(this.encode(key), JSON.stringify(obj));
        }
        static remember(key, exp, callback) {
            return new Promise((reso, reject) => {
                let v = this.get(key, null);
                null == v || "" === v ? callback().then(res => {
                    this.set(key, res, exp), reso(res);
                }).catch(e => {
                    reject(e);
                }) : (Logger.debug(v), reso(v));
            });
        }
        static clear(key) {
            GM_deleteValue(key);
        }
        static decode(str) {
            return atob(str);
        }
        static encode(str) {
            return btoa(str);
        }
        static inc(s) {
            let v = Config.get(s, 0);
            v++, Config.set(s, v);
        }
    }
    class AjaxOption {
        constructor(_url, _methodType = "GET", _data, _success, _header = new Map, timeOut = 60) {
            this.url = _url, this.methodType = _methodType, this.onSuccess = _success, this.onError = _success, 
            this.data = _data, this.headers = _header, this.timeOut = timeOut;
        }
        getData() {
            if (this.data instanceof FormData) return this.data;
            if (this.data instanceof Map) {
                let fd = new FormData;
                return this.data.forEach((v, k) => {
                    fd.append(k, v);
                }), fd;
            }
            {
                let fd = new FormData;
                for (var i in this.data) fd.append(i, this.data[i]);
                return fd;
            }
        }
    }
    class Http {
        constructor() {}
        static ajax(option) {
            var _a, _b, _c;
            option.headers.set("User-Agent", null !== (_a = unsafeWindow.navigator.userAgent) && void 0 !== _a ? _a : "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.159 Safari/537.36"), 
            0 == option.headers.has("Accept") && option.headers.set("Accept", "application/atom+xml,application/xml,text/xml");
            let head = new HttpHeaders;
            option.url.indexOf("wandhi") > 0 && (head.version = Config.env.script.version, head.auth = null !== (_b = Config.env.script.author) && void 0 !== _b ? _b : "", 
            head.namespace = null !== (_c = Config.env.script.namespace) && void 0 !== _c ? _c : ""), 
            option.headers.forEach((v, k) => {
                head[k] = v;
            }), GM_xmlhttpRequest({
                url: option.url,
                method: option.methodType,
                headers: head,
                data: option.getData(),
                timeout: 1e3 * option.timeOut,
                onload: function(res) {
                    var _a, _b;
                    try {
                        null === (_a = option.onSuccess) || void 0 === _a || _a.call(option, "POST" == option.methodType ? JSON.parse(res.responseText) : res.responseText);
                    } catch (error) {
                        null === (_b = option.onSuccess) || void 0 === _b || _b.call(option, null);
                    }
                },
                onerror: function(res) {
                    var _a, _b, _c;
                    (null === (_a = res.finalUrl) || void 0 === _a ? void 0 : _a.indexOf("adguard.org")) > 0 || (null === (_b = option.url) || void 0 === _b ? void 0 : _b.indexOf("jsdelivr")) > 0 ? option.onError(null) : null === (_c = option.onError) || void 0 === _c || _c.call(option, res);
                }
            });
        }
        static ajaxNew(url, method, data, header = new Map, dataType) {
            var _a, _b;
            let head = new HttpHeaders;
            header.size > 0 && header.forEach((v, k) => {
                head[k] = v;
            }), url.indexOf("wandhi") > 0 && (head.version = Config.env.script.version, head.auth = null !== (_a = Config.env.script.author) && void 0 !== _a ? _a : "", 
            head.namespace = null !== (_b = Config.env.script.namespace) && void 0 !== _b ? _b : "");
            let _data = (_data => {
                if (_data instanceof FormData) return data;
                if (data instanceof Map) {
                    let fd = new FormData;
                    return _data.forEach((v, k) => {
                        let _v;
                        _v = "string" == typeof v ? v.toString() : JSON.stringify(v), fd.append(k, _v);
                    }), fd;
                }
                return JSON.stringify(_data);
            })(data);
            return Logger.debug(_data), null != dataType ? "multipart/form-data" != dataType && (head["Content-Type"] = dataType) : data instanceof FormData || data instanceof Map ? head["Content-Type"] = "application/x-www-form-urlencoded; charset=utf-8" : head["Content-Type"] = "application/json; charset=utf-8", 
            new Promise((resolve, reject) => {
                GM_xmlhttpRequest({
                    url: url,
                    method: method,
                    headers: head,
                    data: _data,
                    onload: res => {
                        try {
                            resolve(JSON.parse(res.responseText));
                        } catch (error) {
                            Logger.debug(error), resolve(res.responseText);
                        }
                    },
                    onerror: err => {
                        Logger.debug(err), reject(err);
                    },
                    ontimeout: () => {
                        Logger.debug("\u8bf7\u6c42\u8d85\u65f6:" + url), reject("\u8bf7\u6c42\u8d85\u65f6");
                    }
                });
            });
        }
        static getData(url, callback) {
            $.getJSON(url, (function(d) {
                callback(d);
            }));
        }
        static JqGet(url, callback, head = new Map) {
            Http.get(url, new Map, head).then(d => {
                callback(d);
            });
        }
        static post(url, data, timeOut = 10) {
            return new Promise((function(resolve) {
                Http.ajax(new AjaxOption(url, "POST", data, (function(data) {
                    resolve(data);
                }), new Map, timeOut));
            }));
        }
        static get(url, data = new Map, head = new Map, loading = !0, time_out = 10) {
            return new Promise((function(resolve, reject) {
                Http.ajax(new AjaxOption(url, "GET", data, (function(data) {
                    var _a;
                    try {
                        let res = null !== (_a = JSON.parse(data)) && void 0 !== _a ? _a : data;
                        resolve(res);
                    } catch (error) {
                        Logger.debug(error), reject();
                    }
                }), head, time_out));
            }));
        }
        static getWithHead(url, data = new Map, head = new Map, time_out = 10) {
            return new Promise((function(resolve, reject) {
                Http.ajax(new AjaxOption(url, "GET", data, (function(data) {
                    var _a;
                    try {
                        let res = null !== (_a = JSON.parse(data)) && void 0 !== _a ? _a : data;
                        resolve(res);
                    } catch (error) {
                        Logger.debug(error), reject();
                    }
                }), head, time_out));
            }));
        }
        static postWithHead(url, data = new Map, head = new Map, time_out = 10) {
            return new Promise((function(resolve, reject) {
                Http.ajax(new AjaxOption(url, "POST", data, (function(data) {
                    try {
                        resolve(data);
                    } catch (error) {
                        Logger.debug([ url, error ]), reject();
                    }
                }), head, time_out));
            }));
        }
        static get_text(url) {
            return new Promise((function(resolve) {
                Http.ajax(new AjaxOption(url, "GET", new Map, (function(data) {
                    resolve(data);
                })));
            }));
        }
        static get302(url) {
            return new Promise((function(resolve) {
                GM_xmlhttpRequest({
                    url: url,
                    onload: function(response) {
                        resolve(response.finalUrl);
                    },
                    onabort: () => {
                        resolve("");
                    },
                    method: "GET",
                    onerror: response => {
                        resolve("");
                    }
                });
            }));
        }
    }
    class HttpHeaders {}
    class Route {
        static get apiRoot() {
            return "https://api.huizhek.com/api";
        }
        static baseApi(api, data, callback, timeOut = 10) {
            Http.post(Route.apiRoot + api, data, timeOut).then(res => {
                callback(res);
            });
        }
        static querySbx(id, callback) {
            "" !== Config.get(this.sxb_key, "") ? this.query365(id, Config.get(this.sxb_key), callback) : this.queryValue("sxb_anhao", res => {
                this.query365(id, res.data, callback);
            });
        }
        static sbxFeedback(id, answer) {
            this.baseApi("/tools/record", new Map([ [ "id", id ], [ "data", answer ], [ "anhao", Config.get(this.sxb_key) ] ]), () => {});
        }
        static query365(id, anhao, callback) {
            let api = Config.get("sxb_api");
            api ? Http.post(api, new Map([ [ "docinfo", `https://www.shangxueba.com/ask/${id}.html` ], [ "anhao", anhao ] ])).then(res => {
                callback(res);
            }) : this.queryValue("sxb_api", res => {
                Config.set("sxb_api", res.data, 864e5), Http.post(res.data, new Map([ [ "docinfo", `https://www.shangxueba.com/ask/${id}.html` ], [ "anhao", anhao ] ]));
            });
        }
        static queryValue(key, callback) {
            this.baseApi(Route.config, new Map([ [ "key", key ] ]), callback);
        }
        static queryHistory(url, siteType, callback) {
            this.baseApi(this.history, new Map([ [ "url", url ], [ "type", siteType ] ]), callback);
        }
        static queryHistoryV5(url) {
            return new Promise((reso, reje) => {
                this.baseApi(this.historyv3, new Map([ [ "url", url ] ]), res => {
                    res.code ? reso(res) : reje(res);
                });
            });
        }
        static queryHistoryV4(url, callback) {
            Http.JqGet(url, callback);
        }
        static queryBiliImg(aid, callback) {
            Http.getData(`${this.biliInfo}?aid=${aid}`, callback);
        }
        static queryBiliDown(aid, cid, callback) {
            Http.get(`${this.bilidown}?cid=${cid}&avid=${aid}&qn=112&fnval=4048&s=wandhi`).then(res => {
                callback(res);
            });
        }
        static queryBiliDownWeb(aid, cid) {
            return Http.get(`https://api.bilibili.com/x/player/wbi/playurl?avid=${aid}&cid=${cid}`);
        }
        static queryCoupons(itemId, callback) {
            this.baseApi(this.coupons, new Map([ [ "id", itemId ] ]), callback);
        }
        static queryJdCoupons(itemId, callback) {
            Route.baseApi(Route.jd_coupons, new Map([ [ "item_id", itemId ] ]), callback);
        }
        static querySnCoupons(url, callback) {
            Route.baseApi(Route.sn_coupons, new Map([ [ "url", url ] ]), callback);
        }
        static queryVpCoupons(url, callback) {
            Route.baseApi(Route.vp_coupons, new Map([ [ "url", url ] ]), callback);
        }
        static queryKlCoupons(itemId) {
            return new Promise(reso => {
                Route.baseApi(Route.kl_coupons, new Map([ [ "itemId", itemId ] ]), res => {
                    reso(res);
                });
            });
        }
        static couponQuery(itemId, type, callback) {
            Route.baseApi("/coupons/info", new Map([ [ "id", itemId ], [ "type", type ] ]), callback);
        }
        static _getSurl() {
            let reg = /(?<=s\/|surl=)([a-zA-Z0-9_-]+)/g;
            return reg.test(Core.url) ? Core.url.match(reg)[0] : "";
        }
        static baiduDriect(fids, accessToken) {
            return __awaiter(this, void 0, void 0, (function*() {
                let url = `https://pan.baidu.com/rest/2.0/xpan/multimedia?method=filemetas&dlink=1&fsids=${fids}&access_token=${accessToken}`;
                return Http.ajaxNew(url, "GET", null, new Map([ [ "User-Agent", "pan.baidu.com" ] ]));
            }));
        }
        static baiduAccessToken() {
            return Http.get302("https://openapi.baidu.com/oauth/2.0/authorize?client_id=IlLqBbU3GjQ0t46TRwFateTprHWl39zF&response_type=token&redirect_uri=oob&scope=basic,netdisk");
        }
        static baiduAccessTokenAuth() {
            var _a, _b;
            return __awaiter(this, void 0, void 0, (function*() {
                let url = "https://openapi.baidu.com/oauth/2.0/authorize?client_id=IlLqBbU3GjQ0t46TRwFateTprHWl39zF&response_type=token&redirect_uri=oob&scope=basic,netdisk", html = yield Http.get_text(url), data = new Map;
                return data.set("grant_permissions_arr", "netdisk"), data.set("bdstoken", null === (_a = null == html ? void 0 : html.match(/name="bdstoken"\s+value="([^"]+)"/)) || void 0 === _a ? void 0 : _a[1]), 
                data.set("client_id", null === (_b = null == html ? void 0 : html.match(/name="client_id"\s+value="([^"]+)"/)) || void 0 === _b ? void 0 : _b[1]), 
                data.set("response_type", "token"), data.set("display", "page"), data.set("grant_permissions", "basic,netdisk"), 
                Http.ajaxNew(url, "POST", data, new Map, "multipart/form-data");
            }));
        }
        static quarkDriect(fids) {
            return Http.ajaxNew("https://drive.quark.cn/1/clouddrive/file/download?pr=ucpro&fr=pc", "POST", {
                fids: fids
            }, new Map([ [ "User-Agent", "quark-cloud-drive" ] ]));
        }
        static RouteConfig() {
            return new Promise(resolve => {
                let config = Config.get("script_config", !1);
                config ? resolve(config) : Route.baseApi("/config/script", new Map, res => {
                    let config = JSON.parse(Core.decode(res.data));
                    Config.set("script_config", config, 2 * Hour), resolve(config);
                });
            });
        }
    }
    Route.sxb_key = "sxb_anhao", Route.config = "/config/query", Route.history = "/history/", 
    Route.historyv1 = "/history/v1", Route.historyv2 = "/history/v2", Route.historyv3 = "/history/v3", 
    Route.bili = "/tools/bili", Route.biliInfo = "https://api.bilibili.com/x/web-interface/view", 
    Route.bilidown = "https://api.bilibili.com/x/player/wbi/playurl", Route.coupons = "/tb/infos/", 
    Route.like = "/tb/guesslike", Route.jd_coupons = "/jd/info", Route.sn_coupons = "/sn/info", 
    Route.vp_coupons = "/vp/info", Route.kl_coupons = "/kl/info", css_248z$4 = ".one-key-vip-container { z-index: 99999!important }\n.one-key-vip-popup { font-size: 14px !important }\n.one-key-vip-setting-label { display: flex;align-items: center;justify-content: space-between;padding-top: 20px; }\n.one-key-vip-setting-checkbox { width: 16px;height: 16px; }\n", 
    styleInject(css_248z$4);
    class sAlert {
        static toast(msg, icon = "success", position = "top", time = 2) {
            Swal__default.default.fire({
                toast: !0,
                position: position,
                showCancelButton: !1,
                showConfirmButton: !1,
                title: msg,
                icon: icon,
                timer: 1e3 * time,
                customClass: this.customeCss
            });
        }
        static error(msg, time = 2) {
            this.toast(msg, "error", "center", time);
        }
        static info(msg, icon = "success", position = "top", time = 2) {
            Swal__default.default.fire({
                toast: !0,
                position: position,
                showCancelButton: !1,
                showConfirmButton: !1,
                title: msg,
                icon: icon,
                timer: 1e3 * time,
                customClass: this.customeCss
            });
        }
        static msg(title, html, width = "32rem") {
            return "auto" == width && (width = unsafeWindow.window.outerWidth < 900 ? "90%" : 800), 
            Swal__default.default.fire({
                title: `<strong>${title}</strong>`,
                html: html,
                showCloseButton: !0,
                width: width
            });
        }
        static html(title, html, cancel = !1, cancelTxt = "", cancelColor = "#3085d6", width = "32rem", confirm = !1, confirmTxt = "") {
            return "auto" == width && (width = unsafeWindow.window.outerWidth < 900 ? "90%" : 800), 
            Swal__default.default.fire({
                position: "center",
                width: width,
                html: html,
                showCancelButton: cancel,
                showConfirmButton: confirm,
                cancelButtonColor: cancelColor,
                title: title,
                cancelButtonText: cancelTxt,
                confirmButtonText: confirmTxt,
                customClass: this.customeCss,
                allowOutsideClick: !1,
                allowEscapeKey: !1
            });
        }
        static confirm(title, text, confirmText = "\u786e\u5b9a", cancelText = "\u53d6\u6d88", icon = "question", denyText = "") {
            let option = {
                title: title,
                text: text,
                icon: icon,
                showCancelButton: !0,
                allowOutsideClick: !1,
                confirmButtonColor: "#3085d6",
                cancelButtonColor: "#d33",
                confirmButtonText: confirmText,
                cancelButtonText: cancelText
            };
            return "" != denyText && (option.denyButtonText = denyText), Swal__default.default.fire(option);
        }
        static showImg(image, title, text, alt, btnTxt = "") {
            let opt = {
                title: title,
                text: text,
                imageUrl: image,
                imageAlt: alt,
                showConfirmButton: !1
            };
            return null != btnTxt && (opt.showConfirmButton = !0, opt.confirmButtonText = btnTxt), 
            Swal__default.default.fire(opt);
        }
        static loading(time = -1, target = null) {
            null == target ? Swal__default.default.showLoading() : Swal__default.default.showLoading(target), 
            -1 != time && Core.sleep(time).then(() => {
                Swal__default.default.hideLoading();
            });
        }
        static closeLoading() {
            Swal__default.default.hideLoading();
        }
        static close(target) {
            Swal__default.default.close(target);
        }
    }
    sAlert.customeCss = {
        container: "one-key-vip-container",
        popup: "one-key-vip-popup",
        header: "one-key-vip-header",
        title: "one-key-vip-title",
        closeButton: "one-key-vip-close",
        icon: "one-key-vip-icon",
        image: "one-key-vip-image",
        content: "one-key-vip-content",
        htmlContainer: "one-key-vip-html",
        input: "one-key-vip-input",
        validationMessage: "one-key-vip-validation",
        actions: "one-key-vip-actions",
        confirmButton: "one-key-vip-confirm",
        denyButton: "one-key-vip-deny",
        cancelButton: "one-key-vip-cancel",
        loader: "one-key-vip-loader",
        footer: "one-key-vip-footer"
    }, css_248z$3 = ".okv-btn {\n  display: inline-block;\n  padding: 6px 16px;\n  font-size: 12px;\n  outline: 0;\n  line-height: 1.5;\n  text-align: center;\n  white-space: nowrap;\n  border: 1px solid #c5d9e8;\n  border-top-color: #c5d9e8;\n  border-right-color: #c5d9e8;\n  border-bottom-color: #c5d9e8;\n  border-left-color: #c5d9e8;\n  border-radius: 0.7rem;\n  background-color: #fff;\n  -webkit-transition: background 0.2s;\n  transition: background 0.2s;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  cursor: pointer;\n}\n.okv-btn-primary {\n  border-color: #6190e8;\n  background-color: #6190e8;\n  color: #fff;\n}\n.okv-btn-primary:hover {\n  background-color: #79a1eb;\n  border-color: #79a1eb;\n}\n.okv-btn-primary:active {\n  background-color: #5782d1;\n  border-color: #5782d1;\n}\n.okv-btn-success {\n  border-color: #13ce66;\n  background-color: #13ce66;\n  color: #fff;\n}\n.okv-btn-success:hover {\n  background-color: #36d57d;\n  border-color: #36d57d;\n}\n.okv-btn-success:active {\n  background-color: #11b95c;\n  border-color: #11b95c;\n}\n.okv-btn-error {\n  border-color: #ff4949;\n  background-color: #ff4949;\n  color: #fff;\n}\n.okv-btn-error:hover {\n  background-color: #ff6464;\n  border-color: #ff6464;\n}\n.okv-btn-error:active {\n  background-color: #e64242;\n  border-color: #e64242;\n}\n.okv-bg-pink {\n  color: #fff;\n  border-color: #fff;\n  background-color: #fb7299;\n}\n.okv-bg-pink:hover {\n  background-color: #fc8bab;\n}\n.okv-tools-bili {\n  padding-top: 5px;\n}\n.video-info-detail {\n  flex-wrap: wrap !important;\n  overflow: unset !important;\n}\n.video-info-container {\n  height: 124px !important;\n}\n.okv-btn {\n  padding: 2px 16px !important;\n}\n.bili-top-button {\n  margin-right: 0.7rem;\n}\n.bili-table {\n  width: 100%;\n  border-collapse: separate;\n  border-spacing: 0;\n  text-align: left;\n  overflow: hidden;\n}\n.bili-table td,\n.bili-table th {\n  height: 40px;\n  text-align: left;\n  text-overflow: ellipsis;\n  vertical-align: middle;\n  border-bottom: 1px solid #ececec;\n}\n.bili-table-cell {\n  padding: 0 16px;\n  border-bottom: 1px solid #ececec;\n}\n.at-table-tbody > tr:hover {\n  background-color: #f6fafe;\n}\n.bili-table-small {\n  font-size: 11px;\n}\n.bili-table-head {\n  border-collapse: separate;\n  border-spacing: 0;\n  text-align: left;\n}\n.bili-table-head tr th {\n  font-weight: 700;\n  text-align: left;\n  background-color: #f7f7f7;\n  white-space: nowrap;\n}\n", 
    styleInject(css_248z$3);
    class Runtime {
        static get url() {
            return window.location.href;
        }
    }
    !function(ConfigEnum) {
        ConfigEnum.WangPan_Aria_Host = "WangPan_Aria_Host", ConfigEnum.WangPan_Aria_Port = "WangPan_Aria_Port", 
        ConfigEnum.WangPan_Aria_Token = "WangPan_Aria_Token", ConfigEnum.WangPan_Aria_Path = "WangPan_Aria_Path", 
        ConfigEnum.WangPan_Aria_Dir = "WangPan_Aria_Dir", ConfigEnum.Jiexi_Cus_Interface = "Jiexi_Cus_Interface", 
        ConfigEnum.Jiexi_Interface_Last_Play = "Jiexi_Interface_Last_Play", ConfigEnum.Jiexi_Interface_Last_Play_Url = "Jiexi_Interface_Last_Play_Url", 
        ConfigEnum.BiliPc_Cover = "bili_pc_cover", ConfigEnum.BiliPc_Video_Download = "bili_pc_video_download", 
        ConfigEnum.BiliPc_Triple_Click = "bili_pc_triple_click", ConfigEnum.AutoJump_ZhiHu = "AutoJump_ZhiHu", 
        ConfigEnum.AutoJump_CSDN = "AutoJump_CSDN", ConfigEnum.AutoJump_JianShu = "AutoJump_JianShu", 
        ConfigEnum.AutoJump_Gitee = "AutoJump_Gitee", ConfigEnum.AutoJump_JueJin = "AutoJump_JueJin", 
        ConfigEnum.AutoJump_Weibo = "AutoJump_Weibo", ConfigEnum.AutoJump_TuXiaoChao = "AutoJump_TuXiaoChao", 
        ConfigEnum.AutoJump_OsCh = "AutoJump_OsCh", ConfigEnum.AutoJump_AiFaDian = "AutoJump_AiFaDian", 
        ConfigEnum.AutoJump_Baidu = "AutoJump_Baidu", ConfigEnum.AutoJump_DouBan = "AutoJump_DouBan", 
        ConfigEnum.AutoJump_g17173 = "AutoJump_g17173", ConfigEnum.AutoJump_TencentDoc = "AutoJump_TencentDoc", 
        ConfigEnum.CSDN_OpImgLink = "csdn_op_img_link", ConfigEnum.CSDN_OpAdClean = "csdn_op_ad_clean", 
        ConfigEnum.CSDN_OpArticleClean = "csdn_op_article_clean", ConfigEnum.CSDN_OpCommentClean = "csdn_op_comment_clean", 
        ConfigEnum.CSDN_OpClipboardClean = "csdn_op_clipboard_clean", ConfigEnum.Search_Helper_Switch = "search_helper_switch", 
        ConfigEnum.Search_OptMenuMethod = "search_opt_menu_method", ConfigEnum.Search_OptMenuPos = "search_opt_menu_pos", 
        ConfigEnum.Search_Helper_Postion = "search_helper_postion";
    }(ConfigEnum || (ConfigEnum = {}));
    class Toast {
        static success(str, time = 3, position = "top") {
            semiUi.Notification.success({
                content: str,
                duration: time,
                position: position
            });
        }
        static warning(str, time = 3, position = "top") {
            semiUi.Notification.warning({
                content: str,
                duration: time,
                position: position,
                zIndex: 999999
            });
        }
        static error(str, time = 3, position = "top") {
            semiUi.Notification.error({
                content: str,
                duration: time,
                position: position
            });
        }
    }
    class BiliImgService extends PluginBase {
        constructor() {
            super(), this.rules = new Map([ [ SiteEnum.BiliBili, /www\.bilibili\.com\/video\/[av|bv]*/i ] ]), 
            this._appName = "bilibili";
        }
        static listHtml(list) {
            let rows = "";
            return list.forEach(e => {
                rows += `<tr>\n                        <td class="bili-table-cell">${e.part}</td>\n                        <td class="bili-table-cell"><button class="okv-btn okv-btn-primary bili-down-item" data-cid="${e.cid}" data-part-title="${e.part}">\u4e0b\u8f7d</button></td>\n                    </tr>`;
            }), `<div style="height: 30rem"><table class="bili-table bili-table-small">\n                    <thead class="bili-table-head">\n                        <tr>                        \n                            <th class="bili-table-cell">\u6807\u9898</th>\n                            <th class="bili-table-cell">\u64cd\u4f5c</th>\n                        </tr>\n                    </thead>\n                    <tbody class="at-table-tbody">                    \n                        ${rows}\n                    </tbody>    \n                </table></div>`;
        }
        static getQuality(id) {
            switch (id) {
              case 16:
                return "360P \u6d41\u7545";

              case 32:
                return "480P \u6e05\u6670";

              case 64:
                return "720P \u9ad8\u6e05";

              case 80:
                return "1080P \u9ad8\u6e05";

              case 112:
                return "1080P 60\u5e27";

              case 30280:
              case 30260:
                return "320Kbps";

              case 30259:
                return "128Kbps";

              case 30257:
                return "64Kbps";

              case 30255:
                return "AUDIO";

              case 30251:
                return "FLAC";

              case 30250:
                return "ATMOS";

              case 30232:
                return "128Kbps";

              case 30216:
                return "64Kbps";

              default:
                return "\u672a\u77e5";
            }
        }
        static videoListHtml(videoList, audioList, duration, mp4s = []) {
            let sizeFormat = (size = 0) => {
                let unit = [ "B", "K", "M", "G" ], i = unit.length - 1, dex = Math.pow(1024, i), vor = Math.pow(1e3, i);
                for (;dex > 1; ) {
                    if (size >= vor) {
                        size = Number((size / dex).toFixed(2));
                        break;
                    }
                    dex /= 1024, vor /= 1e3, i--;
                }
                return size ? size + unit[i] : "N/A";
            }, rows = "";
            return videoList.forEach(e => {
                rows += `<tr>\n            <td class="bili-table-cell">\u89c6\u9891</td>\n            <td class="bili-table-cell">${this.getQuality(e.id)}</td>\n            <td class="bili-table-cell">${sizeFormat(e.bandwidth * duration / 8)}</td>\n            <td class="bili-table-cell">${e.frameRate}</td>\n            <td class="bili-table-cell">${e.codecs}</td>\n            <td class="bili-table-cell"><button class="okv-btn okv-btn-primary bili-down-video-item" data-url="${e.baseUrl}" data-type="1">\u4e0b\u8f7d</button></td>\n            </tr>`;
            }), audioList.forEach(e => {
                rows += `<tr>\n            <td class="bili-table-cell">\u97f3\u9891</td>\n            <td class="bili-table-cell">${this.getQuality(e.id)}</td>\n            <td class="bili-table-cell">${sizeFormat(e.bandwidth * duration / 8)}</td>\n            <td class="bili-table-cell">${e.frameRate}</td>\n            <td class="bili-table-cell">${e.codecs}</td>\n            <td class="bili-table-cell"><button class="okv-btn okv-btn-primary bili-down-video-item" data-url="${e.baseUrl}" data-type="2">\u4e0b\u8f7d</button></td>\n            </tr>`;
            }), mp4s.forEach(e => {
                rows = `<tr>\n            <td class="bili-table-cell">\u97f3\u89c6\u5df2\u5408\u5e76</td>\n            <td class="bili-table-cell">${this.getQuality(e.quality)}</td>\n            <td class="bili-table-cell">${sizeFormat(e.size)}</td>\n            <td class="bili-table-cell">MP4</td>\n            <td class="bili-table-cell">MP4</td>\n            <td class="bili-table-cell"><button class="okv-btn okv-btn-primary bili-down-video-item" data-url="${e.url}" data-type="1">\u4e0b\u8f7d</button></td>\n            </tr>` + rows;
            }), `\n<div style="height: 30rem">\n    <div style="margin-bottom: 20px">\u6ce8\u610f:\u97f3\u89c6\u9891\u662f<b style="color:red">\u5206\u5f00</b>\u7684,\u8bf7\u4e0b\u8f7d\u540e\u81ea\u884c\u5408\u5e76\uff0c\u5408\u5e76\u5de5\u5177\u5728<b>wiki\u7ad9</b>\u7684\u4e0b\u8f7d\u4e2d\u5fc3\u81ea\u884c\u5bfb\u627e</div>\n    <table class="bili-table bili-table-small">\n        <thead class="bili-table-head">\n            <tr>\n                <th class="bili-table-cell">\u7c7b\u578b</th>\n                <th class="bili-table-cell">\u54c1\u8d28</th>\n                <th class="bili-table-cell">\u5927\u5c0f</th>\n                <th class="bili-table-cell">\u7801\u7387</th>\n                <th class="bili-table-cell">\u7f16\u7801</th>\n                <th class="bili-table-cell">\u64cd\u4f5c</th>\n            </tr>\n        </thead>\n        <tbody class="at-table-tbody">                    \n            ${rows}\n        </tbody>    \n    </table>\n</div>`;
        }
        loader() {}
        run() {
            this.init();
        }
        init() {
            Core.autoLazyload(() => {
                var _a, _b, _c, _d;
                return ((null === (_a = $(".reply-box-textarea")) || void 0 === _a ? void 0 : _a.length) > 0 || (null === (_b = $(".comment-submit")) || void 0 === _b ? void 0 : _b.length) > 0 || (null === (_c = $(".comment-container")) || void 0 === _c ? void 0 : _c.length) > 0 || (null === (_d = $("bili-comments")) || void 0 === _d ? void 0 : _d.length) > 0) && ($("#viewbox_report").append('<div class="video-info-detail-list okv-tools-bili"></div>'), 
                !0);
            }, () => {
                Config.get(ConfigEnum.BiliPc_Cover, !0) && BiliImgService.add_img_btn(), Config.get(ConfigEnum.BiliPc_Video_Download, !0) && BiliImgService.add_down_btn(), 
                Config.get(ConfigEnum.BiliPc_Triple_Click, !0) && BiliImgService.add_triple_btn();
            }, 1);
        }
        static add_img_btn() {
            let that = this;
            $(this.hookSelector).last().append(BiliImgService.coverBtn), $("body").on("click", "#findimg", () => {
                let aid = unsafeWindow.__INITIAL_STATE__.videoData.aid;
                that.getVideoInfo(aid).then(res => {
                    res ? sAlert.showImg(res.pic, "\u662f\u5c01\u9762\u5566", "\u554a\u54c8\u54c8\u54c8\u3001\u5c01\u9762\u6765\u54af", "\u662f\u5c01\u9762\u9171\u5566>\u3002<", "\u4e0b\u8f7d").then(() => {
                        Core.open(res.pic);
                    }) : Toast.error("\u54ce\u54df\u6ca1\u627e\u5230\u5c01\u9762\u54e6\uff0c\u8981\u4e0d\u8ddf\u4f5c\u8005\u62a5\u544a\u4e00\u4e0b\uff1f");
                }).catch(() => {
                    Toast.error("\u54ce\u54df\u6ca1\u627e\u5230\u5c01\u9762\u54e6\uff0c\u8981\u4e0d\u8ddf\u4f5c\u8005\u62a5\u544a\u4e00\u4e0b\uff1f", 5);
                });
            });
        }
        static add_down_btn() {
            let that = this;
            $(this.hookSelector).last().append(BiliImgService.downBtn), $("body").on("click", "#downvideo", () => {
                that.initDown();
            });
        }
        static initDown() {
            let aid = unsafeWindow.__INITIAL_STATE__.videoData.aid;
            BiliImgService.getVideoInfo(aid).then(res => {
                sAlert.html(res.title, this.listHtml(res.pages), !0, "\u6211\u597d\u4e86", "#3085d6", "40%"), 
                $(".bili-down-item").on("click", e => {
                    let cid = $(e.currentTarget).attr("data-cid"), title = $(e.currentTarget).attr("data-part-title");
                    BiliImgService.downVideo(aid, cid, title);
                });
            });
        }
        static downVideo(aid, cid, title) {
            let key = `${aid}${cid}MDD-NEW`;
            Config.remember(key, Min, () => new Promise((resolve, reject) => __awaiter(this, void 0, void 0, (function*() {
                let mp4s = yield Route.queryBiliDownWeb(aid, cid);
                Route.queryBiliDown(aid, cid, res => {
                    var _a, _b, _c, _d, _e;
                    let r;
                    (null === (_c = null === (_b = null === (_a = res.data) || void 0 === _a ? void 0 : _a.dash) || void 0 === _b ? void 0 : _b.video) || void 0 === _c ? void 0 : _c.length) > 0 ? (r = res, 
                    (null === (_e = null === (_d = mp4s.data) || void 0 === _d ? void 0 : _d.durl) || void 0 === _e ? void 0 : _e.length) > 0 && (r.data.durl = mp4s.data.durl, 
                    r.data.durl[0].quality = mp4s.data.quality), resolve(r)) : reject(res);
                });
            })))).then(res => {
                sAlert.html(title, this.videoListHtml(res.data.dash.video, res.data.dash.audio, res.data.dash.duration, res.data.durl), !0, "\u6211\u597d\u4e86", "#3085d6", "40%").finally(() => {
                    BiliImgService.initDown();
                }), $(".bili-down-video-item").on("click", e => {
                    let url = $(e.currentTarget).attr("data-url"), type = $(e.currentTarget).attr("data-type");
                    Swal__default.default.fire({
                        title: "\u51c6\u5907\u4e0b\u8f7d",
                        html: '<span id="bili-download-step">\u5f00\u59cb\u4e0b\u8f7d\u540e\u5f53\u524d\u9875\u9762\u5c06\u4e0d\u53ef\u64cd\u4f5c,\u662f\u5426\u5f00\u59cb\u4e0b\u8f7d\uff1f</span>',
                        showCancelButton: !0,
                        confirmButtonText: "\u597d\u7684\u5f00\u59cb",
                        cancelButtonText: "\u8fd8\u662f\u7b97\u4e86",
                        showLoaderOnConfirm: !0,
                        preConfirm: () => new Promise((r, j) => {
                            GM_download({
                                url: url,
                                name: `\u3010${"1" == type ? "\u89c6\u9891" : "\u97f3\u9891"}\u3011${title}.mp4`,
                                headers: {
                                    referer: Runtime.url
                                },
                                onerror(data) {
                                    j(data);
                                },
                                onprogress(data) {
                                    $("#bili-download-step").text(`\u5f53\u524d\u8fdb\u5ea6${Core.getPercent(data.done, data.total)}%`), 
                                    data.done == data.total && r();
                                }
                            });
                        }),
                        allowOutsideClick: () => !Swal__default.default.isLoading()
                    }).then(result => {
                        result.isConfirmed && sAlert.info("\u4e0b\u8f7d\u7ed3\u675f");
                    }).finally(() => {
                        BiliImgService.downVideo(aid, cid, title);
                    });
                });
            }).catch(e => {
                Logger.error(e), sAlert.error("\u5565\u4e5f\u6ca1\u67e5\u7740,\u518d\u8bd5\u4e00\u4e0b\u6216\u8005\u5e26\u7740\u89c6\u9891\u5730\u5740\u7ed9\u4f5c\u8005\u62a5\u544a\u4e00\u4e0b\u5427~");
            });
        }
        static getVideoInfo(aid) {
            return Config.remember("biliInfo-" + aid, Week, () => new Promise((resolve, reje) => {
                Route.queryBiliImg(aid, res => {
                    0 === res.code ? resolve(res.data) : reje();
                });
            }));
        }
        static add_triple_btn() {
            $(this.hookSelector).last().append(BiliImgService.tripleClickBtn), $("body").on("click", "#tripleClick", () => {
                [ ".video-like", ".video-coin", ".video-fav" ].forEach(item => {
                    $(item).trigger("click");
                });
            });
        }
    }
    BiliImgService.coverBtn = '<button class="okv-btn okv-btn-primary okv-bg-pink bili-top-button" id="findimg">\u83b7\u53d6\u5c01\u9762</button>', 
    BiliImgService.downBtn = '<button id="downvideo" class="okv-btn okv-btn-primary okv-bg-pink bili-top-button">\u4e0b\u8f7d\u89c6\u9891</button>', 
    BiliImgService.tripleClickBtn = '<button class="okv-btn okv-btn-primary okv-bg-pink bili-top-button" id="tripleClick">\u4e00\u4e0b\u70b9\u4ee8(\u70b9\u8d5e\u3001\u6295\u5e01\u3001\u6536\u85cf)</button>', 
    BiliImgService.hookSelector = ".okv-tools-bili", Menu$2 = Common.Menu;
    const jks = [ {
        url: "https://www.ckplayer.vip/jiexi/?url=",
        title: "\u63a5\u53e3:Ckplayer"
    }, {
        url: "https://yparse.ik9.cc/index.php?url=",
        title: "\u63a5\u53e3:\u4e91\u6790"
    }, {
        url: "https://www.8090g.cn/?url=",
        title: "\u63a5\u53e3:8090"
    }, {
        title: "\u5256\u5143",
        url: "https://www.pouyun.com/?url="
    }, {
        url: "https://z1.m1907.top/?jx=",
        title: "\u73a9\u7684\u55e8\u2014\u201428-\u82e5\u63a5\u53e3\u5931\u6548\u53ef\u53cd\u9988\uff01QQ\u7fa4:340569308"
    }, {
        url: "https://www.8090.la/8090/?url=",
        title: "\u5168\u80fdvip\u63a5\u53e3\u2461"
    }, {
        title: "\u76d8\u53e4",
        url: "https://www.pangujiexi.com/jiexi/?url="
    }, {
        title: "BL",
        url: "https://vip.bljiex.com/?v="
    }, {
        url: "https://www.mtosz.com/m3u8.php?url=",
        title: "Mao\u89e3\u6790"
    }, {
        title: "play",
        url: "https://www.playm3u8.cn/jiexi.php?url="
    }, {
        title: "\u591c\u5e55",
        url: "https://www.yemu.xyz/?url="
    }, {
        title: "TV\u89e3\u6790[\u817e\u8baf (\u8292\u679c)]",
        url: "https://jx.m3u8.tv/jiexi/?url="
    }, {
        title: "JY",
        url: "https://jx.playerjy.com/?url="
    }, {
        title: "JY\u89e3\u6790",
        url: "https://jx.we-vip.com/?url="
    }, {
        title: "\u2478\u53f7\u89e3\u6790\u63a5\u53e3",
        url: "https://www.8090g.cn/jiexi/?url="
    }, {
        title: "\u867e\u7c731",
        url: "https://jx.xmflv.com/?url="
    }, {
        title: "\u867e\u7c732",
        url: "https://jx.xmflv.cc/?url="
    }, {
        title: "m1907",
        url: "https://im1907.top/?jx="
    }, {
        title: "CK",
        url: "https://jx.m3u8.tv/jiexi/?url="
    }, {
        title: "\u4e03\u54e5",
        url: "https://jx.nnxv.cn/tv.php?url="
    }, {
        title: "\u795e\u54e5",
        url: "https://json.ovvo.pro/jx.php?url="
    }, {
        title: "8090",
        url: "https://www.8090g.cn/?url="
    }, {
        title: "\u51b0\u8c46",
        url: "https://bd.jx.cn/?url="
    } ];
    class MovieService extends PluginBase {
        constructor() {
            super(), this.rules = new Map([ [ SiteEnum.YouKu, /youku\.com/i ], [ SiteEnum.IQiYi, /iqiyi|iq\.com/i ], [ SiteEnum.LeShi, /\.le\.com/i ], [ SiteEnum.Tencent_V, /v\.qq/i ], [ SiteEnum.TuDou, /tudou\.com/i ], [ SiteEnum.MangGuo, /mgtv\.com/i ], [ SiteEnum.SoHu, /sohu\.com/i ], [ SiteEnum.Acfun, /acfun\.com/i ], [ SiteEnum.BiliBili, /bilibili\.com/i ], [ SiteEnum.M1905, /1905\.com/i ], [ SiteEnum.PPTV, /pptv\.com/i ], [ SiteEnum.YinYueTai, /yinyuetai\.com/ ], [ SiteEnum.HiTv, /tv\.wandhi\.com\/go\.html/i ], [ SiteEnum.HiTvCheck, /tv\.wandhi\.com\/check\.html/i ] ]), 
            this.jkPre = "\u81ea\u5b9a\u4e49\u63a5\u53e3\uff1a", this.menu = new Common.Menu, 
            this._unique = !1, this._appName = "MovieService";
        }
        loader() {
            "undefined" == typeof $ && Core.appendJs("//lib.baomitu.com/jquery/1.12.4/jquery.min.js");
        }
        run() {
            switch (this.site) {
              case SiteEnum.HiTv:
                Logger.debug("HiTv\u89e3\u6790\u9875\u9762\uff0c\u52a0\u8f7d\u81ea\u5b9a\u4e49\u63a5\u53e3"), 
                this.cusInterFace(), this.lastPlay();
                break;

              case SiteEnum.HiTvCheck:
                this.jkCheck();
                break;

              default:
                let that = this;
                this.menu.Init([ {
                    title: "\u672c\u6b21\u5173\u95ed",
                    show: "\u672c\u6b21<br>\u5173\u95ed",
                    type: "search"
                }, {
                    title: "\u89c6\u9891\u89e3\u6790",
                    show: "\u89c6\u9891<br>\u89e3\u6790",
                    type: "process"
                }, {
                    title: "\u7edd\u4e16\u597d\u5238",
                    show: "\u7edd\u4e16<br>\u597d\u5238",
                    type: "tb"
                }, {
                    title: "\u4eac\u4e1c\u597d\u5238",
                    show: "\u4eac\u4e1c<br>\u597d\u5238",
                    type: "jd"
                } ], that._onClick), this.autoHide();
            }
        }
        hashCode(str) {
            var i, hash = 0;
            if (0 === str.length) return hash;
            for (i = 0; i < str.length; i++) hash = (hash << 5) - hash + str.charCodeAt(i), 
            hash |= 0;
            return 2147483647 & hash;
        }
        jkCheck() {
            let html = "";
            jks.forEach((item, index) => {
                let id = this.hashCode(item.title);
                html += `<div class="lbl">\n                <label for="name" id="${id}" class="valid-none" data-title="${item.title}" data-url="${item.url}">${item.title}<b style="color:red">(\u5f85\u68c0\u6d4b)</b></label>\n            </div>\n            <div class="ctrl">\n                <input type="text" name="name" data-required="true" data-validation="text"\n                    data-msg="Invalid Name" placeholder="Ex: John Donga" value="${item.url}" disabled>\n            </div>`;
            }), $("#formbody").html(html), unsafeWindow.jks = jks, unsafeWindow.letcheckUrl = url => new Promise((resolve, reject) => {
                try {
                    unsafeWindow.fetch(new Request(url), {
                        mode: "no-cors"
                    }).then(res => {
                        Logger.debug(res, url), resolve(!0);
                    }).catch(e => {
                        Logger.debug(e, url), reject(!1);
                    });
                } catch (e) {
                    reject(!1);
                }
            });
        }
        cusInterFace() {
            let urls = Config.get(ConfigEnum.Jiexi_Cus_Interface), h = "";
            urls && (h = $("#jk").html(), urls.split("\n").forEach(e => {
                let datas = e.split("||");
                "https:" == unsafeWindow.location.protocol ? h += `<option value="${datas[0].replace("http:", "https:")}" selected="">${this.jkPre}${datas[1]}</option>` : h += `<option value="${datas[0]}" selected="">${this.jkPre}${datas[1]}</option>`;
            })), jks.forEach(e => {
                h += `<option value="${e.url}" selected="">${e.title}</option>`;
            }), Logger.debug(h), $("#jk").html(h), Logger.debug(urls);
        }
        lastPlay() {
            $("#bf").on("click", () => {
                let op = $("#jk option:selected"), url = op.val(), name = op.text().replace(this.jkPre, "");
                Config.set(ConfigEnum.Jiexi_Interface_Last_Play, name), Config.set(ConfigEnum.Jiexi_Interface_Last_Play_Url, url);
            });
            let last = Config.get(ConfigEnum.Jiexi_Interface_Last_Play_Url);
            last && $("#jk").val(last), unsafeWindow.dihejk && $("#url").val() && unsafeWindow.dihejk();
        }
        _onClick() {
            $("body").on("click", "[data-cat=process]", (function() {
                Core.open("http://tv.wandhi.com/go.html?url=" + encodeURIComponent(window.location.href));
            })), $("body").on("click", "[data-cat=search]", (function() {
                Menu$2.close();
            })), $("body").on("click", "[data-cat=tb]", (function() {
                Core.open("http://shop.huizhek.com");
            })), $("body").on("click", "[data-cat=jd]", (function() {
                Core.open("http://shop.huizhek.com");
            }));
        }
        autoHide() {
            Logger.info("\u81ea\u52a8\u9690\u85cf"), this.site == SiteEnum.BiliBili && Core.background(() => {
                var _a;
                if ($(".bpx-player-container").length > 0) {
                    let modal = null === (_a = $(".bpx-player-container")) || void 0 === _a ? void 0 : _a.attr("data-screen");
                    "web" == modal || "full" == modal ? $(".aside-nav").hide() : $(".aside-nav").show();
                }
            }, 1);
        }
    }
    class UrlHelper {
        static Bind(CssSelector, method = "click", doc = "body") {
            $(CssSelector).click((function() {
                Core.openUrl($(this).data("key"));
            }));
        }
        static urlEncode(url) {
            return encodeURIComponent(url);
        }
        static urlDecode(url) {
            return decodeURIComponent(url);
        }
    }
    class MusicService extends PluginBase {
        constructor() {
            super(), this.rules = new Map([ [ SiteEnum.WangYi, /163(.*)song/i ], [ SiteEnum.Tencent_M, /y\.QQ(.*)song/i ], [ SiteEnum.KuGou, /kugou\.com\/song\/*/i ], [ SiteEnum.KuWo, /kuwo(.*)yinyue/i ], [ SiteEnum.XiaMi, /xiami/i ], [ SiteEnum.TaiHe, /taihe\.com/i ], [ SiteEnum.QingTing, /qingting\./i ], [ SiteEnum.LiZhi, /lizhi\./i ], [ SiteEnum.MiGu, /migu\./i ], [ SiteEnum.XiMaLaYa, /ximalaya\./i ] ]), 
            this.menu = new Common.Menu, this._appName = "MusicService", this._unique = !1;
        }
        loader() {}
        run() {
            this.menu.Init([ {
                title: "\u7535\u5f71\u641c\u7d22",
                show: "\u7535\u5f71<br>\u641c\u7d22",
                type: "search"
            }, {
                title: "\u97f3\u4e50\u4e0b\u8f7d",
                show: "\u97f3\u4e50<br>\u4e0b\u8f7d",
                type: "process"
            }, {
                title: "\u7edd\u4e16\u597d\u5238",
                show: "\u7edd\u4e16<br>\u597d\u5238",
                type: "tb"
            }, {
                title: "\u4eac\u4e1c\u597d\u5238",
                show: "\u4eac\u4e1c<br>\u597d\u5238",
                type: "jd"
            } ], this._OnClick, !1);
        }
        _OnClick() {
            this.rules, $("body").on("click", "[data-cat=process]", (function() {
                var _a, _b, html;
                if (/ximalaya/i.test(Runtime.url)) {
                    for (let i = 0; i < unsafeWindow.document.scripts.length; i++) /window\.__INITIAL_STATE__ =/i.test(unsafeWindow.document.scripts[i].innerHTML) && (Logger.debug(unsafeWindow.document.scripts[i].innerHTML), 
                    eval(unsafeWindow.document.scripts[i].innerHTML.replace("window.__INITIAL_STATE__", "unsafeWindow.__INITIAL_STATE__")));
                    __INITIAL_STATE__ && (null === (_b = null === (_a = __INITIAL_STATE__.store) || void 0 === _a ? void 0 : _a.SoundDetailPage) || void 0 === _b ? void 0 : _b.trackId) ? Core.open("http://music.wandhi.com/?id=" + __INITIAL_STATE__.store.SoundDetailPage.trackId + "&type=ximalaya") : (layer.closeAll(), 
                    html = '<div style="padding:0px 50px 0px 50px;"><ul class="sound-list dOi2">', $.each(__INITIAL_STATE__.store.AlbumDetailTrackListV2.tracksInfo.tracks, (function(index, item) {
                        html += `<li class="d0i2"><a href="http://music.wandhi.com/?id=${item.trackId}&type=ximalaya" target="_blank">${item.title}</a></li>`;
                    })), html += "</ul></div>", layer.open({
                        type: 1,
                        area: [ "auto", "30%" ],
                        title: "\u4e3a\u4f60\u627e\u5230\u4e86\u8fd9\u4e9b\u66f2\u76ee\u89e3\u6790\u2026\u2026",
                        shade: .6,
                        maxmin: !1,
                        anim: 2,
                        content: html
                    }));
                } else /kugou\.com\/song/i.test(Runtime.url) && $("#myAudio") ? Core.open("http://music.wandhi.com/?type=kugou&id=" + $("#myAudio").attr("data-hash")) : /taihe.com/i.test(Runtime.url) ? Core.open("http://music.wandhi.com/?url=" + UrlHelper.urlEncode(Runtime.url.replace("taihe", "baidu"))) : Core.open("http://music.wandhi.com/?url=" + UrlHelper.urlEncode(Runtime.url));
            })), $("body").on("click", "[data-cat=search]", (function() {
                Core.open("http://tv.wandhi.com/");
            })), $("body").on("click", "[data-cat=tb]", (function() {
                Core.open("https://shop.huizhek.com");
            })), $("body").on("click", "[data-cat=jd]", (function() {
                Core.open("https://shop.huizhek.com");
            }));
        }
    }
    css_248z$2 = "#content_views pre {\n    -webkit-touch-callout: auto !important;\n    -webkit-user-select: auto !important;\n    -khtml-user-select: auto !important;\n    -moz-user-select: auto !important;\n    -ms-user-select: auto !important;\n    user-select: auto !important;\n}\n\n#content_views pre code {\n    -webkit-touch-callout: auto !important;\n    -webkit-user-select: auto !important;\n    -khtml-user-select: auto !important;\n    -moz-user-select: auto !important;\n    -ms-user-select: auto !important;\n    user-select: auto !important;\n}\n\n.passport-login-container {\n    display: none !important;\n}\n", 
    styleInject(css_248z$2);
    class CsdnAdService extends PluginBase {
        constructor() {
            super(), this.rules = new Map([ [ SiteEnum.CSDN, /blog\.csdn\.net/i ] ]), this._appName = "csdn", 
            this._unique = !1;
        }
        loader() {}
        run() {
            Config.get(ConfigEnum.CSDN_OpAdClean, !0) && Core.background(this.removeAds, 3), 
            Config.get(ConfigEnum.CSDN_OpClipboardClean, !0) && this.clipboardClean(), Config.get(ConfigEnum.CSDN_OpCommentClean, !0) && this.commentClean(), 
            Config.get(ConfigEnum.CSDN_OpImgLink, !0) && this.commentFile(), Config.get(ConfigEnum.CSDN_OpArticleClean, !0) && this.articleClean();
        }
        clipboardClean() {
            Logger.info("\u590d\u5236\u7c98\u8d34\u51c0\u5316"), Core.background(() => {
                unsafeWindow.csdn.copyright.textData = "";
            }), Core.autoLazyload(() => $(".hljs-button").length > 0, () => {
                var _a;
                let copyBtn = $(".hljs-button");
                copyBtn.length > 0 && (copyBtn.removeClass("signin"), copyBtn.attr("data-title", "\u590d\u5236"), 
                copyBtn.attr("onclick", "hljs.copyCode(event);setTimeout(function(){$('.hljs-button').attr('data-title', '\u590d\u5236');},3500);")), 
                null === (_a = $("code")) || void 0 === _a || _a.attr("onclick", "mdcp.copyCode(event)"), 
                $("code").bind("copy", (function(e) {
                    var _a;
                    let text = null === (_a = unsafeWindow.getSelection()) || void 0 === _a ? void 0 : _a.toString();
                    text && (Core.copyText(text) ? sAlert.info("\u590d\u5236\u6210\u529f") : sAlert.error("\u590d\u5236\u5931\u8d25,\u8bf7\u5c1d\u8bd5\u4f7f\u7528\u6309\u94ae\u590d\u5236"));
                }));
            }, 3), unsafeWindow.jQuery("#content_views").unbind("copy");
        }
        removeAds() {
            CsdnAdService.adSelectors.forEach(selector => {
                $(selector).remove();
            });
        }
        commentClean() {
            Core.lazyload(() => {
                Logger.info("\u8bc4\u8bba\u533a\u6e05\u7406"), $(".comment-list-box").css("overflow", "").css("max-height", ""), 
                $("#commentPage").removeClass("d-none"), $("#btnMoreComment").remove();
            }, 3);
        }
        commentFile() {
            Core.lazyload(() => {
                Logger.info("\u6587\u4ef6\u94fe\u63a5\u533a\u5206"), $(".type_download").each((i, e) => {
                    $(e).prepend('<img src="https://csdnimg.cn/release/downloadcmsfe/public/img/source.ac4c7e83.png" data-v-d2529d5a="" style="padding-right: 10px;">');
                });
            }, 3);
        }
        articleClean() {
            Core.lazyload(() => {
                Logger.info("\u6587\u7ae0\u533a\u6e05\u7406"), $("#article_content").removeAttr("style"), 
                $(".hide-article-box").remove();
            });
        }
    }
    CsdnAdService.adSelectors = [ "#footerRightAds", ".side-question-box", "div[id^='dmp_ad']", "div[class^='ad_']", "div[id^='floor-ad_']", ".adsbygoogle", "#recommendAdBox", "#asideNewNps", ".box-shadow" ];
    class Alert {
        static open(titls, content, area = [ "400px", "300px" ], shade = 0, offset = "lb", maxmin = !0) {
            return layer.open({
                type: 1,
                title: titls,
                area: area,
                shade: shade,
                offset: offset,
                maxmin: maxmin,
                content: content
            });
        }
        static info(msg) {
            return layer.msg(msg, {
                time: 2e3
            });
        }
        static error(msg) {
            return layer.msg(msg, {
                icon: 5,
                time: 2e3
            });
        }
        static confim(title, msg, buttons, callback, auto_close = !1) {
            let tid = layer.open({
                type: 1,
                title: title || !1,
                closeBtn: 1,
                shade: .8,
                id: "LAY_layuipro",
                resize: !1,
                btn: buttons,
                btnAlign: "c",
                moveType: 1,
                content: `<div style="padding: 20px; line-height: 22px; background-color: #393D49; color: #fff; font-weight: 300;">${msg}</div>`,
                yes: function(index) {
                    callback(index), auto_close && Core.lazyload(() => {
                        layer.close(tid);
                    });
                }
            });
            return tid;
        }
        static prompt(title, v, callback, size, type = 0) {
            layer.prompt({
                title: title,
                value: v,
                formType: type
            }, (v, i, ele) => {
                callback(v), layer.close(i);
            });
        }
        static close(index) {
            layer.close(index);
        }
        static closeAll() {
            layer.closeAll();
        }
        static loading(style = 1, _time = 10, _shade = .3) {
            return 1;
        }
        static loadingS(msg, time = -1) {
            return Swal__default.default.fire({
                title: msg,
                didOpen: () => {
                    Swal__default.default.showLoading();
                },
                allowOutsideClick: !1,
                allowEscapeKey: !1,
                timer: -1 == time ? void 0 : 1e3 * time
            });
        }
    }
    Menu$1 = Common.Menu;
    class WenKuService extends PluginBase {
        constructor() {
            super(), this.rules = new Map([ [ SiteEnum.WenKu, /wenku\.baidu\.com\/view/i ] ]), 
            this._unique = !1, this.menu = new Common.Menu, this._appName = "WenKu";
        }
        loader() {
            "undefined" == typeof $ && Core.appendJs("//lib.baomitu.com/jquery/1.12.4/jquery.min.js"), 
            Core.appendCss("https://registry.npmmirror.com/@douyinfe/semi-ui/2.51.0/files/dist/css/semi.min.css");
        }
        run() {
            this.menu.Init([ {
                title: "\u672c\u6b21\u5173\u95ed",
                show: "\u672c\u6b21<br>\u5173\u95ed",
                type: "search"
            }, {
                title: "\u5bfc\u51fa\u6587\u6863",
                show: "\u5bfc\u51fa<br>\u6587\u6863",
                type: "process"
            }, {
                title: "\u89e3\u9501\u590d\u5236",
                show: "\u89e3\u9501<br>\u590d\u5236",
                type: "jd"
            }, {
                title: "\u7edd\u4e16\u597d\u5238",
                show: "\u7edd\u4e16<br>\u597d\u5238",
                type: "tb"
            } ], this._onClick);
        }
        _onClick() {
            return __awaiter(this, void 0, void 0, (function*() {
                $("body").on("click", "[data-cat=process]", (function() {
                    var _a, _b, _c, _d, _e, _f;
                    return __awaiter(this, void 0, void 0, (function*() {
                        "word" == (null === (_c = null === (_b = null === (_a = unsafeWindow.pageData) || void 0 === _a ? void 0 : _a.viewBiz) || void 0 === _b ? void 0 : _b.docInfo) || void 0 === _c ? void 0 : _c.fileType) ? (null === (_f = null === (_e = null === (_d = unsafeWindow.pageData) || void 0 === _d ? void 0 : _d.mixVipAndUserInfo) || void 0 === _e ? void 0 : _e.userInfo) || void 0 === _f ? void 0 : _f.isLogin) ? (Alert.loadingS("\u89e3\u6790\u4e2d\u8bf7\u7a0d\u540e"), 
                        yield Core.lazyload(() => {
                            WenKuService.loadFullDoc().then(() => {
                                Logger.debug("\u8f7d\u5165\u6587\u5e93\u5185\u5bb9\u5b8c\u6210"), window.scrollTo(0, 0), 
                                WenKuService.exportDoc(), Swal__default.default.close();
                            });
                        }, .5)) : sAlert.error("\u8bf7\u5148\u767b\u5f55") : sAlert.error("\u4ec5\u652f\u6301word\u6587\u6863\u7684\u5bfc\u51fa");
                    }));
                })), $("body").on("click", "[data-cat=search]", (function() {
                    Menu$1.close();
                })), $("body").on("click", "[data-cat=tb]", (function() {
                    Core.open("http://shop.huizhek.com");
                })), $("body").on("click", "[data-cat=jd]", (function() {
                    var _a, _b, _c;
                    null === (_a = unsafeWindow.document.querySelector(".header-wrapper")) || void 0 === _a || (_a.__vue__.$store.state.vipInfo.isVip = !0), 
                    Logger.debug(null === (_b = unsafeWindow.document.querySelector(".header-wrapper")) || void 0 === _b ? void 0 : _b.__vue__.$store.state.vipInfo.isVip), 
                    (null === (_c = unsafeWindow.document.querySelector(".header-wrapper")) || void 0 === _c ? void 0 : _c.__vue__.$store.state.vipInfo.isVip) && Toast.success("\u89e3\u9501\u6210\u529f,\u5feb\u53bb\u590d\u5236\u5427~");
                }));
            }));
        }
        static exportDoc() {
            let doc = $(".reader-word-layer"), _doc = $(doc).clone();
            _doc.each((i, e) => {
                $(e).is(":hidden") && $(e).remove();
            });
            let docContent = `Mime-Version: 1.0\nContent-Base: ${Runtime.url}\nContent-Type: Multipart/related; boundary="NEXT.ITEM-BOUNDARY";type="text/html"\n\n--NEXT.ITEM-BOUNDARY\nContent-Type: text/html; charset="utf-8"\nContent-Location: ${Runtime.url}\n\n<!DOCTYPE html>\n<html>\n<head>\n<meta http-equiv="Content-Type" content="text/html; charset=utf-8">\n<style>\n\n</style>\n</head>\n<body>\n${_doc.text().split("\n").map(t => `<p>${t}</p>`).join("")}\n</body>\n</html>\n--NEXT.ITEM-BOUNDARY--`;
            saveAs(new Blob([ docContent ], {
                type: "application/msword;charset=utf-8"
            }), unsafeWindow.pageData.viewBiz.docInfo.title + ".doc");
        }
        static scrollToEnd() {
            return Core.autoLazyload(() => {
                var _a;
                let docEle = unsafeWindow.document.documentElement, heightTotal = docEle.scrollHeight, scrollTop = null !== (_a = docEle.scrollTop) && void 0 !== _a ? _a : unsafeWindow.document.body.scrollTop, clientHeight = docEle.clientHeight;
                return heightTotal - scrollTop <= 1.1 * clientHeight || (window.scroll(0, scrollTop + clientHeight / 4), 
                !1);
            }, () => {
                Logger.debug("\u6eda\u52a8\u7ed3\u675f");
            }, .1);
        }
        static loadFullDoc() {
            let funded = !1, that = this;
            return Core.autoLazyload(() => {
                var _a;
                let btn = null !== (_a = unsafeWindow.document.querySelector(".goBtn")) && void 0 !== _a ? _a : unsafeWindow.document.querySelector(".read-all");
                return funded = !0, null != btn || funded;
            }, () => __awaiter(this, void 0, void 0, (function*() {
                var _a;
                let btn = null !== (_a = unsafeWindow.document.querySelector(".goBtn")) && void 0 !== _a ? _a : unsafeWindow.document.querySelector(".read-all");
                btn && $(btn).click(), Logger.debug("\u8fdb\u5165\u6eda\u52a8"), yield that.scrollToEnd(), 
                Logger.debug("\u7ed3\u675f\u6eda\u52a8");
            })), 2);
        }
    }
    WenKuService.loaded = !1;
    class LinkJumpService extends PluginBase {
        constructor() {
            super(), this.rules = new Map([ [ SiteEnum.CSDN, /link\.csdn\.net/i ], [ SiteEnum.ZhiHu, /link\.zhihu\.com/i ], [ SiteEnum.JianShu, /www\.jianshu\.com\/go-wild/i ], [ SiteEnum.Gitee, /gitee\.com\/link/i ], [ SiteEnum.JueJin, /juejin\.cn\/\?target/i ], [ SiteEnum.Weibo, /weibo\.cn\/sinaurl/i ], [ SiteEnum.TuXiaoChao, /support\.qq\.com\/products\/.*\/link-jump/i ], [ SiteEnum.OsCh, /oschina\.net\/action\/GoToLink/i ], [ SiteEnum.AiFaDian, /afdian\.net\/link\?target/i ], [ SiteEnum.Baidu, /jump(2?)\.bdimg\.com\/safecheck/i ], [ SiteEnum.DouBan, /www\.douban\.com\/link2\// ], [ SiteEnum.g17173, /link\.17173\.com\/\?target/i ], [ SiteEnum.TencentDoc, /docs\.qq\.com\/scenario\/link/i ], [ SiteEnum.TencentMail, /mail\.qq\.com\/cgi-bin\/readtemplate/i ], [ SiteEnum.TencentQQ, /c\.pc\.qq\.com\/(middlem|ios)\.html/i ], [ SiteEnum.SsPAi, /sspai\.com\/link/i ], [ SiteEnum.NodeSeek, /nodeseek\.com\/jump/i ], [ SiteEnum.KingSoftDoc, /[p|www]\.kdocs\.cn\/office\/link/i ], [ SiteEnum.TencentCloudBlog, /cloud\.tencent\.com\/developer\/tools\/blog-entry/i ], [ SiteEnum.Uisdc, /link\.uisdc\.com\/\?redirect/i ], [ SiteEnum.YuQue, /www\.yuque\.com\/r\/goto/i ], [ SiteEnum.CTO51, /blog\.51cto\.com\/transfer/i ], [ SiteEnum.WenJuanXing, /r\.wjx\.com\/redirect\.aspx/i ], [ SiteEnum.InfoQ, /www\.infoq\.cn\/link/i ], [ SiteEnum.WeChatWork, /open\.work\.weixin\.qq\.com\/wwopen\/uriconfirm/i ], [ SiteEnum.TencentDiskDoc, /weboffice\.qq\.com\/scenario\/link\.html/i ] ]), 
            this.key = "", this.selector = "", this._unique = !1, this._appName = "LinkJump", 
            this.semiui = !0;
        }
        loader() {
            Core.appendCss("https://registry.npmmirror.com/@douyinfe/semi-ui/2.51.0/files/dist/css/semi.min.css");
        }
        run() {
            let config = "AutoJump_" + this.site.toString();
            switch (this.site) {
              case SiteEnum.CSDN:
              case SiteEnum.ZhiHu:
              case SiteEnum.Gitee:
              case SiteEnum.JueJin:
              case SiteEnum.AiFaDian:
              case SiteEnum.g17173:
              case SiteEnum.SsPAi:
              case SiteEnum.KingSoftDoc:
              case SiteEnum.TencentCloudBlog:
              case SiteEnum.InfoQ:
                this.key = "target";
                break;

              case SiteEnum.JianShu:
              case SiteEnum.DouBan:
              case SiteEnum.OsCh:
              case SiteEnum.TencentDoc:
              case SiteEnum.YuQue:
              case SiteEnum.WenJuanXing:
              case SiteEnum.TencentDiskDoc:
                this.key = "url";
                break;

              case SiteEnum.TencentQQ:
                this.key = "pfurl,url";
                break;

              case SiteEnum.Weibo:
                this.key = "u";
                break;

              case SiteEnum.TuXiaoChao:
                this.key = "jump";
                break;

              case SiteEnum.Baidu:
                this.selector = ".link";
                break;

              case SiteEnum.TencentMail:
                this.key = "gourl";
                break;

              case SiteEnum.NodeSeek:
                this.key = "to";
                break;

              case SiteEnum.Uisdc:
                this.key = "redirect";
                break;

              case SiteEnum.CTO51:
                this.selector = ".url span";
                break;

              case SiteEnum.WeChatWork:
                this.key = "uri";
                break;

              default:
                this.key = "";
            }
            if (Config.get(config, !0)) {
                let url = "";
                if ("" != this.key) {
                    let keys = this.key.split(",");
                    for (let item in keys) if (url = Core.getPar(keys[item]), null != url && "" != url) break;
                } else "" != this.selector && (url = $(this.selector).text());
                null != url && "" != url ? (url = decodeURIComponent(url), url.endsWith("/") && (url = url.substr(0, url.length - 1)), 
                Toast.success("\u94fe\u63a5\u5df2\u89e3\u6790,\u6b63\u5728\u8df3\u8f6c~"), this.jump(url)) : (Toast.warning("\u672a\u80fd\u89e3\u6790\u5230\u94fe\u63a5,\u8bf7\u624b\u52a8\u8df3\u8f6c"), 
                Logger.debug(`\u89e3\u6790\u94fe\u63a5:${url},key:${this.key}`));
            } else Toast.warning("\u5df2\u5173\u95ed\u672c\u7f51\u7ad9\u7684\u8df3\u8f6c\u529f\u80fd");
        }
        jump(url) {
            url && ((url = decodeURIComponent(url)).indexOf(":\\") < 1 && !url.startsWith("http://") && !url.startsWith("https://") && (url = "http://" + url), 
            Logger.debug(url), unsafeWindow.window.location.href = url);
        }
    }
    class AutoExpandService extends PluginBase {
        constructor() {
            super(), this.rules = new Map([ [ SiteEnum.CSDN, /blog\.csdn\.net\/*/i ], [ SiteEnum.CSDN_Download, /download\.csdn\.net\/download/i ], [ SiteEnum.SiChuang, /ispacesoft\.com\/.*?\.html/i ] ]), 
            this.contentStyle = "{height: auto !important;max-height: none !important;}", this.expandRules = [ {
                site: [ SiteEnum.CSDN ],
                selector: [ ".guide-box", ".wap-shadowbox", ".readall_box", ".btn_open_app_prompt_div" ],
                content: [ ".article_content" ],
                clicker: [ ".hide-preCode-bt" ],
                style: [],
                script: () => {
                    $(".container-fluid").on("click", event => {
                        let url = $(event).attr("data-url");
                        url && (unsafeWindow.window.location.href = url, event.preventDefault());
                    });
                }
            }, {
                site: [ SiteEnum.CSDN_Download ],
                selector: [],
                style: [],
                content: [ ".detail.hidden.no-preview" ],
                script: () => {},
                clicker: [ "#download-detail .fl[role]" ]
            }, {
                site: [ SiteEnum.SiChuang ],
                selector: [],
                style: [],
                clicker: [ ".entry-readmore-btn" ],
                content: [],
                script: () => {}
            } ], this._appName = "autoExpand", this._unique = !1;
        }
        loader() {}
        run() {
            let that = this;
            this.expandRules.forEach(e => {
                e.site.indexOf(that.site) > -1 && (e.selector.length > 0 && e.selector.forEach(selector => {
                    $(selector).remove();
                }), e.clicker.length > 0 && e.clicker.forEach(clicker => {
                    Core.lazyload(() => {
                        $(clicker).trigger("click");
                    }, 2), Logger.info("\u81ea\u52a8\u5c55\u5f00-\u70b9\u51fb:" + clicker);
                }), e.style.length > 0 && e.style.forEach(style => {
                    Core.appendCssContent(style);
                }), e.content.length > 0 && Core.appendCssContent(`${e.content.join(" ")}${that.contentStyle}`), 
                null != e.script && e.script.apply([]));
            });
        }
    }
    class BIliTools {
        static av2Bv(avNo) {
            let av = avNo.toString(), num = NaN;
            if ("[object Number]" === Object.prototype.toString.call(av) ? num = avNo : "[object String]" === Object.prototype.toString.call(av) && (num = parseInt(av.replace(/[^0-9]/gu, ""))), 
            isNaN(num) || num <= 0) return "";
            num = (num ^ this.xor) + this.add;
            let result = [ ..."BV1  4 1 7  " ], i = 0;
            for (;i < 6; ) result[this.s[i]] = this.table[Math.floor(num / Math.pow(58, i)) % 58], 
            i += 1;
            return result.join("");
        }
        static bv2Av(bv) {
            let str = "";
            if (12 === bv.length) str = bv; else if (10 === bv.length) str = "BV" + bv; else {
                if (9 !== bv.length) return -1;
                str = "BV1" + bv;
            }
            if (!str.match(/[Bb][Vv][fZodR9XQDSUm21yCkr6zBqiveYah8bt4xsWpHnJE7jL5VG3guMTKNPAwcF]{10}/gu)) return -1;
            let result = 0, i = 0;
            for (;i < 6; ) result += this.table.indexOf(str[this.s[i]]) * Math.pow(58, i), i += 1;
            return parseInt("av" + (result - this.add ^ this.xor));
        }
    }
    BIliTools.table = [ ..."fZodR9XQDSUm21yCkr6zBqiveYah8bt4xsWpHnJE7jL5VG3guMTKNPAwcF" ], 
    BIliTools.s = [ 11, 10, 3, 8, 4, 6 ], BIliTools.xor = 177451812, BIliTools.add = 8728348608;
    class BiliMobileService extends PluginBase {
        constructor() {
            super(...arguments), this.rules = new Map([ [ SiteEnum.BiliMobile, /m\.bilibili\.com\/video\//i ] ]), 
            this._appName = "Bili\u624b\u673a";
        }
        loader() {}
        run() {
            let cards = $(".launch-app-btn");
            cards && $(cards).each((i, ele) => {
                let av = $(ele).attr("data-aid");
                av && $(ele).on("click", () => {
                    unsafeWindow.window.location.href = "https://m.bilibili.com/video/" + BIliTools.av2Bv(parseInt(av));
                }), $(ele).removeClass("launch-app-btn");
            });
        }
    }
    class AliyunPanToken extends PluginBase {
        constructor() {
            super(), this.rules = new Map([ [ SiteEnum.ALY, /www\.aliyundrive\.com\/drive*/i ], [ SiteEnum.ALY_P, /www\.alipan\.com\/drive*/i ] ]), 
            this.html = '\n    <li class=" ant-dropdown-menu-item-divider"></li>\n    <li class="ant-dropdown-menu-item ant-dropdown-menu-item-only-child" role="menuitem">\n        <div class="outer-menu--U5weH">\n            <div class="item--2ReU2" id="onekeyvip-token">\n                <span data-role="icon" data-render-as="svg" data-icon-type="PDSMoreCircle" class="item-icon--1ydoa icon--d-ejA "><svg viewBox="0 0 1024 1024"><use xlink:href="#PDSMoreCircle"></use></svg></span>\n                \u83b7\u53d6Token\n            </div>\n        </div>\n    </li>\n    ', 
            this._unique = !1, this._appName = "aliyunpan-token";
        }
        loader() {
            GM_registerMenuCommand("\u83b7\u53d6Token", this.getToken);
        }
        run() {
            Core.autoLazyload(() => {
                var _a, _b;
                let finded = null !== (_b = null === (_a = $(".ant-dropdown-menu")) || void 0 === _a ? void 0 : _a.length) && void 0 !== _b ? _b : -1;
                return Logger.debug("\u83dc\u5355\u67e5\u8be2\u60c5\u51b5:" + finded), finded > 0;
            }, () => {
                $(".ant-dropdown-menu").append(this.html), this.initEvent();
            }, .5);
        }
        getToken() {
            var _a;
            $(".ant-dropdown").addClass("ant-dropdown-hidden");
            let tokenStr = null !== (_a = unsafeWindow.localStorage.token) && void 0 !== _a ? _a : "";
            if (tokenStr) try {
                let tokenObj = JSON.parse(tokenStr);
                sAlert.msg("token\u4fe1\u606f", `<textarea style="width: 100%">${tokenObj.refresh_token}</textarea>`, "auto");
            } catch (e) {
                sAlert.info("Token\u5e8f\u5217\u5316\u9519\u8bef,\u8bf7\u5411\u4f5c\u8005\u53cd\u9988," + e.toString());
            } else sAlert.info("\u672a\u80fd\u83b7\u53d6\u5230Token\u4fe1\u606f,\u8bf7\u91cd\u65b0\u767b\u5f55\u540e\u518d\u8bd5");
        }
        initEvent() {
            $("#onekeyvip-token").on("click", this.getToken);
        }
    }
    css_248z$1 = '.mfb-component--tl,\n.mfb-component--cl,\n.mfb-component--tr,\n.mfb-component--bl,\n.mfb-component--br {\n  box-sizing: border-box;\n  margin: 25px;\n  position: fixed;\n  white-space: nowrap;\n  z-index: 30;\n  padding-left: 0;\n  list-style: none;\n}\n.mfb-component--cl *,\n.mfb-component--tl *,\n.mfb-component--tr *,\n.mfb-component--bl *,\n.mfb-component--br *,\n.mfb-component--tl *:before,\n.mfb-component--cl *:before,\n.mfb-component--tr *:before,\n.mfb-component--bl *:before,\n.mfb-component--br *:before,\n.mfb-component--tl *:after,\n.mfb-component--cl *:after,\n.mfb-component--tr *:after,\n.mfb-component--bl *:after,\n.mfb-component--br *:after {\n  box-sizing: inherit;\n}\n.mfb-component--tl {\n  left: 0;\n  top: 0;\n}\n.mfb-component--cl {\n  left: 0;\n  top: 50%;\n}\n.mfb-component--tr {\n  right: 0;\n  top: 0;\n}\n.mfb-component--bl {\n  left: 0;\n  bottom: 0;\n}\n.mfb-component--br {\n  right: 0;\n  bottom: 0;\n}\n.mfb-component__button--main,\n.mfb-component__button--child {\n  background-color: #e40a5d;\n  display: inline-block;\n  border: none;\n  border-radius: 50%;\n  box-shadow: 0 0 4px rgba(0, 0, 0, 0.14), 0 4px 8px rgba(0, 0, 0, 0.28);\n  cursor: pointer;\n  outline: none;\n  padding: 0;\n  position: relative;\n  -webkit-user-drag: none;\n  color: #f1f1f1;\n  text-align: center;\n  line-height: 55px;\n  font-size: 25px;\n}\n.mfb-component__list {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n.mfb-component__list > li {\n  display: block;\n  position: absolute;\n  top: 0;\n  right: 1px;\n  padding: 10px 0;\n  margin: -10px 0;\n}\n.mfb-component__icon,\n.mfb-component__main-icon--active,\n.mfb-component__main-icon--resting,\n.mfb-component__child-icon {\n  position: absolute;\n  font-size: 18px;\n  text-align: center;\n  line-height: 56px;\n  width: 100%;\n}\n.mfb-component__wrap {\n  padding: 25px;\n  margin: -25px;\n}\n[data-mfb-toggle=hover]:hover .mfb-component__icon,\n[data-mfb-toggle=hover]:hover .mfb-component__main-icon--active,\n[data-mfb-toggle=hover]:hover .mfb-component__main-icon--resting,\n[data-mfb-toggle=hover]:hover .mfb-component__child-icon,\n[data-mfb-state=open] .mfb-component__icon,\n[data-mfb-state=open] .mfb-component__main-icon--active,\n[data-mfb-state=open] .mfb-component__main-icon--resting,\n[data-mfb-state=open] .mfb-component__child-icon {\n  -webkit-transform: scale(1) rotate(0deg);\n  transform: scale(1) rotate(0deg);\n}\n.mfb-component__button--main {\n  height: 56px;\n  width: 56px;\n  z-index: 20;\n  text-align: center;\n  line-height: 55px;\n  font-size: 25px;\n}\n.mfb-component__button--child {\n  height: 56px;\n  width: 56px;\n}\n.mfb-component__main-icon--active,\n.mfb-component__main-icon--resting {\n  -webkit-transform: scale(1) rotate(360deg);\n  transform: scale(1) rotate(360deg);\n  -webkit-transition: -webkit-transform 150ms cubic-bezier(0.4, 0, 1, 1);\n  transition: transform 150ms cubic-bezier(0.4, 0, 1, 1);\n}\n.mfb-component__child-icon,\n.mfb-component__child-icon {\n  line-height: 56px;\n  font-size: 18px;\n}\n.mfb-component__main-icon--active {\n  opacity: 0;\n}\n[data-mfb-toggle=hover]:hover .mfb-component__main-icon,\n[data-mfb-state=open] .mfb-component__main-icon {\n  -webkit-transform: scale(1) rotate(0deg);\n  transform: scale(1) rotate(0deg);\n}\n[data-mfb-toggle=hover]:hover .mfb-component__main-icon--resting,\n[data-mfb-state=open] .mfb-component__main-icon--resting {\n  opacity: 0;\n  position: absolute !important;\n}\n[data-mfb-toggle=hover]:hover .mfb-component__main-icon--active,\n[data-mfb-state=open] .mfb-component__main-icon--active {\n  opacity: 1;\n}\n.mfb-component--tl.mfb-slidein .mfb-component__list li,\n.mfb-component--tr.mfb-slidein .mfb-component__list li {\n  opacity: 0;\n  transition: all 0.5s;\n}\n.mfb-component--tl.mfb-slidein[data-mfb-toggle=hover]:hover .mfb-component__list li,\n.mfb-component--tl.mfb-slidein[data-mfb-state=open] .mfb-component__list li,\n.mfb-component--tr.mfb-slidein[data-mfb-toggle=hover]:hover .mfb-component__list li,\n.mfb-component--tr.mfb-slidein[data-mfb-state=open] .mfb-component__list li {\n  opacity: 1;\n}\n".mfb-component--tl.mfb-slidein"[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(2),\n".mfb-component--tl.mfb-slidein"[data-mfb-state=open] .mfb-component__list li:nth-child(2),\n.mfb-component--tr.mfb-slidein[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(2),\n.mfb-component--tr.mfb-slidein[data-mfb-state=open] .mfb-component__list li:nth-child(2) {\n  -webkit-transform: translateY(140px);\n  transform: translateY(140px);\n}\n".mfb-component--tl.mfb-slidein"[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(3),\n".mfb-component--tl.mfb-slidein"[data-mfb-state=open] .mfb-component__list li:nth-child(3),\n.mfb-component--tr.mfb-slidein[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(3),\n.mfb-component--tr.mfb-slidein[data-mfb-state=open] .mfb-component__list li:nth-child(3) {\n  -webkit-transform: translateY(210px);\n  transform: translateY(210px);\n}\n".mfb-component--tl.mfb-slidein"[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(4),\n".mfb-component--tl.mfb-slidein"[data-mfb-state=open] .mfb-component__list li:nth-child(4),\n.mfb-component--tr.mfb-slidein[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(4),\n.mfb-component--tr.mfb-slidein[data-mfb-state=open] .mfb-component__list li:nth-child(4) {\n  -webkit-transform: translateY(280px);\n  transform: translateY(280px);\n}\n".mfb-component--tl.mfb-slidein"[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(5),\n".mfb-component--tl.mfb-slidein"[data-mfb-state=open] .mfb-component__list li:nth-child(5),\n.mfb-component--tr.mfb-slidein[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(5),\n.mfb-component--tr.mfb-slidein[data-mfb-state=open] .mfb-component__list li:nth-child(5) {\n  -webkit-transform: translateY(350px);\n  transform: translateY(350px);\n}\n".mfb-component--tl.mfb-slidein"[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(6),\n".mfb-component--tl.mfb-slidein"[data-mfb-state=open] .mfb-component__list li:nth-child(6),\n.mfb-component--tr.mfb-slidein[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(6),\n.mfb-component--tr.mfb-slidein[data-mfb-state=open] .mfb-component__list li:nth-child(6) {\n  -webkit-transform: translateY(420px);\n  transform: translateY(420px);\n}\n".mfb-component--tl.mfb-slidein"[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(7),\n".mfb-component--tl.mfb-slidein"[data-mfb-state=open] .mfb-component__list li:nth-child(7),\n.mfb-component--tr.mfb-slidein[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(7),\n.mfb-component--tr.mfb-slidein[data-mfb-state=open] .mfb-component__list li:nth-child(7) {\n  -webkit-transform: translateY(490px);\n  transform: translateY(490px);\n}\n".mfb-component--tl.mfb-slidein"[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(8),\n".mfb-component--tl.mfb-slidein"[data-mfb-state=open] .mfb-component__list li:nth-child(8),\n.mfb-component--tr.mfb-slidein[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(8),\n.mfb-component--tr.mfb-slidein[data-mfb-state=open] .mfb-component__list li:nth-child(8) {\n  -webkit-transform: translateY(560px);\n  transform: translateY(560px);\n}\n".mfb-component--tl.mfb-slidein"[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(9),\n".mfb-component--tl.mfb-slidein"[data-mfb-state=open] .mfb-component__list li:nth-child(9),\n.mfb-component--tr.mfb-slidein[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(9),\n.mfb-component--tr.mfb-slidein[data-mfb-state=open] .mfb-component__list li:nth-child(9) {\n  -webkit-transform: translateY(630px);\n  transform: translateY(630px);\n}\n".mfb-component--tl.mfb-slidein"[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(10),\n".mfb-component--tl.mfb-slidein"[data-mfb-state=open] .mfb-component__list li:nth-child(10),\n.mfb-component--tr.mfb-slidein[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(10),\n.mfb-component--tr.mfb-slidein[data-mfb-state=open] .mfb-component__list li:nth-child(10) {\n  -webkit-transform: translateY(700px);\n  transform: translateY(700px);\n}\n.mfb-component--cl.mfb-slidein .mfb-component__list li,\n.mfb-component--tr.mfb-slidein .mfb-component__list li {\n  opacity: 0;\n  transition: all 0.5s;\n}\n".mfb-component--cl.mfb-slidein"[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(2),\n".mfb-component--cl.mfb-slidein"[data-mfb-state=open] .mfb-component__list li:nth-child(2),\n.mfb-component--tr.mfb-slidein[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(2),\n.mfb-component--tr.mfb-slidein[data-mfb-state=open] .mfb-component__list li:nth-child(2) {\n  -webkit-transform: translateY(140px);\n  transform: translateY(140px);\n}\n".mfb-component--cl.mfb-slidein"[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(3),\n".mfb-component--cl.mfb-slidein"[data-mfb-state=open] .mfb-component__list li:nth-child(3),\n.mfb-component--tr.mfb-slidein[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(3),\n.mfb-component--tr.mfb-slidein[data-mfb-state=open] .mfb-component__list li:nth-child(3) {\n  -webkit-transform: translateY(210px);\n  transform: translateY(210px);\n}\n".mfb-component--cl.mfb-slidein"[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(4),\n".mfb-component--cl.mfb-slidein"[data-mfb-state=open] .mfb-component__list li:nth-child(4),\n.mfb-component--tr.mfb-slidein[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(4),\n.mfb-component--tr.mfb-slidein[data-mfb-state=open] .mfb-component__list li:nth-child(4) {\n  -webkit-transform: translateY(280px);\n  transform: translateY(280px);\n}\n".mfb-component--cl.mfb-slidein"[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(5),\n".mfb-component--cl.mfb-slidein"[data-mfb-state=open] .mfb-component__list li:nth-child(5),\n.mfb-component--tr.mfb-slidein[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(5),\n.mfb-component--tr.mfb-slidein[data-mfb-state=open] .mfb-component__list li:nth-child(5) {\n  -webkit-transform: translateY(350px);\n  transform: translateY(350px);\n}\n".mfb-component--cl.mfb-slidein"[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(6),\n".mfb-component--cl.mfb-slidein"[data-mfb-state=open] .mfb-component__list li:nth-child(6),\n.mfb-component--tr.mfb-slidein[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(6),\n.mfb-component--tr.mfb-slidein[data-mfb-state=open] .mfb-component__list li:nth-child(6) {\n  -webkit-transform: translateY(420px);\n  transform: translateY(420px);\n}\n".mfb-component--cl.mfb-slidein"[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(7),\n".mfb-component--cl.mfb-slidein"[data-mfb-state=open] .mfb-component__list li:nth-child(7),\n.mfb-component--tr.mfb-slidein[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(7),\n.mfb-component--tr.mfb-slidein[data-mfb-state=open] .mfb-component__list li:nth-child(7) {\n  -webkit-transform: translateY(490px);\n  transform: translateY(490px);\n}\n".mfb-component--cl.mfb-slidein"[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(8),\n".mfb-component--cl.mfb-slidein"[data-mfb-state=open] .mfb-component__list li:nth-child(8),\n.mfb-component--tr.mfb-slidein[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(8),\n.mfb-component--tr.mfb-slidein[data-mfb-state=open] .mfb-component__list li:nth-child(8) {\n  -webkit-transform: translateY(560px);\n  transform: translateY(560px);\n}\n".mfb-component--cl.mfb-slidein"[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(9),\n".mfb-component--cl.mfb-slidein"[data-mfb-state=open] .mfb-component__list li:nth-child(9),\n.mfb-component--tr.mfb-slidein[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(9),\n.mfb-component--tr.mfb-slidein[data-mfb-state=open] .mfb-component__list li:nth-child(9) {\n  -webkit-transform: translateY(630px);\n  transform: translateY(630px);\n}\n".mfb-component--cl.mfb-slidein"[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(10),\n".mfb-component--cl.mfb-slidein"[data-mfb-state=open] .mfb-component__list li:nth-child(10),\n.mfb-component--tr.mfb-slidein[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(10),\n.mfb-component--tr.mfb-slidein[data-mfb-state=open] .mfb-component__list li:nth-child(10) {\n  -webkit-transform: translateY(700px);\n  transform: translateY(700px);\n}\n.mfb-component--bl.mfb-slidein .mfb-component__list li,\n.mfb-component--br.mfb-slidein .mfb-component__list li {\n  opacity: 0;\n  transition: all 0.5s;\n}\n.mfb-component--bl.mfb-slidein[data-mfb-toggle=hover]:hover .mfb-component__list li,\n.mfb-component--bl.mfb-slidein[data-mfb-state=open] .mfb-component__list li,\n.mfb-component--br.mfb-slidein[data-mfb-toggle=hover]:hover .mfb-component__list li,\n.mfb-component--br.mfb-slidein[data-mfb-state=open] .mfb-component__list li {\n  opacity: 1;\n}\n.mfb-component--bl.mfb-slidein[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(1),\n.mfb-component--bl.mfb-slidein[data-mfb-state=open] .mfb-component__list li:nth-child(1),\n.mfb-component--br.mfb-slidein[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(1),\n.mfb-component--br.mfb-slidein[data-mfb-state=open] .mfb-component__list li:nth-child(1) {\n  -webkit-transform: translateY(-70px);\n  transform: translateY(-70px);\n}\n.mfb-component--bl.mfb-slidein[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(2),\n.mfb-component--bl.mfb-slidein[data-mfb-state=open] .mfb-component__list li:nth-child(2),\n.mfb-component--br.mfb-slidein[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(2),\n.mfb-component--br.mfb-slidein[data-mfb-state=open] .mfb-component__list li:nth-child(2) {\n  -webkit-transform: translateY(-140px);\n  transform: translateY(-140px);\n}\n.mfb-component--bl.mfb-slidein[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(3),\n.mfb-component--bl.mfb-slidein[data-mfb-state=open] .mfb-component__list li:nth-child(3),\n.mfb-component--br.mfb-slidein[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(3),\n.mfb-component--br.mfb-slidein[data-mfb-state=open] .mfb-component__list li:nth-child(3) {\n  -webkit-transform: translateY(-210px);\n  transform: translateY(-210px);\n}\n.mfb-component--bl.mfb-slidein[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(4),\n.mfb-component--bl.mfb-slidein[data-mfb-state=open] .mfb-component__list li:nth-child(4),\n.mfb-component--br.mfb-slidein[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(4),\n.mfb-component--br.mfb-slidein[data-mfb-state=open] .mfb-component__list li:nth-child(4) {\n  -webkit-transform: translateY(-280px);\n  transform: translateY(-280px);\n}\n.mfb-component--tl.mfb-slidein-spring .mfb-component__list li,\n.mfb-component--tr.mfb-slidein-spring .mfb-component__list li {\n  opacity: 0;\n  transition: all 0.5s;\n  transition-timing-function: cubic-bezier(0.68, -0.55, 0.265, 1.55);\n}\n.mfb-component--tl.mfb-slidein-spring .mfb-component__list li:nth-child(1),\n.mfb-component--tr.mfb-slidein-spring .mfb-component__list li:nth-child(1) {\n  transition-delay: 0.05s;\n}\n.mfb-component--tl.mfb-slidein-spring .mfb-component__list li:nth-child(2),\n.mfb-component--tr.mfb-slidein-spring .mfb-component__list li:nth-child(2) {\n  transition-delay: 0.1s;\n}\n.mfb-component--tl.mfb-slidein-spring .mfb-component__list li:nth-child(3),\n.mfb-component--tr.mfb-slidein-spring .mfb-component__list li:nth-child(3) {\n  transition-delay: 0.15s;\n}\n.mfb-component--tl.mfb-slidein-spring .mfb-component__list li:nth-child(4),\n.mfb-component--tr.mfb-slidein-spring .mfb-component__list li:nth-child(4) {\n  transition-delay: 0.2s;\n}\n.mfb-component--tl.mfb-slidein-spring[data-mfb-toggle=hover]:hover .mfb-component__list li,\n.mfb-component--tl.mfb-slidein-spring[data-mfb-state=open] .mfb-component__list li,\n.mfb-component--tr.mfb-slidein-spring[data-mfb-toggle=hover]:hover .mfb-component__list li,\n.mfb-component--tr.mfb-slidein-spring[data-mfb-state=open] .mfb-component__list li {\n  opacity: 1;\n}\n.mfb-component--tl.mfb-slidein-spring[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(1),\n.mfb-component--tl.mfb-slidein-spring[data-mfb-state=open] .mfb-component__list li:nth-child(1),\n.mfb-component--tr.mfb-slidein-spring[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(1),\n.mfb-component--tr.mfb-slidein-spring[data-mfb-state=open] .mfb-component__list li:nth-child(1) {\n  transition-delay: 0.05s;\n  -webkit-transform: translateY(70px);\n  transform: translateY(70px);\n}\n.mfb-component--tl.mfb-slidein-spring[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(2),\n.mfb-component--tl.mfb-slidein-spring[data-mfb-state=open] .mfb-component__list li:nth-child(2),\n.mfb-component--tr.mfb-slidein-spring[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(2),\n.mfb-component--tr.mfb-slidein-spring[data-mfb-state=open] .mfb-component__list li:nth-child(2) {\n  transition-delay: 0.1s;\n  -webkit-transform: translateY(140px);\n  transform: translateY(140px);\n}\n.mfb-component--tl.mfb-slidein-spring[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(3),\n.mfb-component--tl.mfb-slidein-spring[data-mfb-state=open] .mfb-component__list li:nth-child(3),\n.mfb-component--tr.mfb-slidein-spring[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(3),\n.mfb-component--tr.mfb-slidein-spring[data-mfb-state=open] .mfb-component__list li:nth-child(3) {\n  transition-delay: 0.15s;\n  -webkit-transform: translateY(210px);\n  transform: translateY(210px);\n}\n.mfb-component--tl.mfb-slidein-spring[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(4),\n.mfb-component--tl.mfb-slidein-spring[data-mfb-state=open] .mfb-component__list li:nth-child(4),\n.mfb-component--tr.mfb-slidein-spring[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(4),\n.mfb-component--tr.mfb-slidein-spring[data-mfb-state=open] .mfb-component__list li:nth-child(4) {\n  transition-delay: 0.2s;\n  -webkit-transform: translateY(280px);\n  transform: translateY(280px);\n}\n.mfb-component--bl.mfb-slidein-spring .mfb-component__list li,\n.mfb-component--br.mfb-slidein-spring .mfb-component__list li {\n  opacity: 0;\n  transition: all 0.5s;\n  transition-timing-function: cubic-bezier(0.68, -0.55, 0.265, 1.55);\n}\n.mfb-component--bl.mfb-slidein-spring .mfb-component__list li:nth-child(1),\n.mfb-component--br.mfb-slidein-spring .mfb-component__list li:nth-child(1) {\n  transition-delay: 0.05s;\n}\n.mfb-component--bl.mfb-slidein-spring .mfb-component__list li:nth-child(2),\n.mfb-component--br.mfb-slidein-spring .mfb-component__list li:nth-child(2) {\n  transition-delay: 0.1s;\n}\n.mfb-component--bl.mfb-slidein-spring .mfb-component__list li:nth-child(3),\n.mfb-component--br.mfb-slidein-spring .mfb-component__list li:nth-child(3) {\n  transition-delay: 0.15s;\n}\n.mfb-component--bl.mfb-slidein-spring .mfb-component__list li:nth-child(4),\n.mfb-component--br.mfb-slidein-spring .mfb-component__list li:nth-child(4) {\n  transition-delay: 0.2s;\n}\n.mfb-component--bl.mfb-slidein-spring[data-mfb-toggle=hover]:hover .mfb-component__list li,\n.mfb-component--bl.mfb-slidein-spring[data-mfb-state=open] .mfb-component__list li,\n.mfb-component--br.mfb-slidein-spring[data-mfb-toggle=hover]:hover .mfb-component__list li,\n.mfb-component--br.mfb-slidein-spring[data-mfb-state=open] .mfb-component__list li {\n  opacity: 1;\n}\n.mfb-component--bl.mfb-slidein-spring[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(1),\n.mfb-component--bl.mfb-slidein-spring[data-mfb-state=open] .mfb-component__list li:nth-child(1),\n.mfb-component--br.mfb-slidein-spring[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(1),\n.mfb-component--br.mfb-slidein-spring[data-mfb-state=open] .mfb-component__list li:nth-child(1) {\n  transition-delay: 0.05s;\n  -webkit-transform: translateY(-70px);\n  transform: translateY(-70px);\n}\n.mfb-component--bl.mfb-slidein-spring[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(2),\n.mfb-component--bl.mfb-slidein-spring[data-mfb-state=open] .mfb-component__list li:nth-child(2),\n.mfb-component--br.mfb-slidein-spring[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(2),\n.mfb-component--br.mfb-slidein-spring[data-mfb-state=open] .mfb-component__list li:nth-child(2) {\n  transition-delay: 0.1s;\n  -webkit-transform: translateY(-140px);\n  transform: translateY(-140px);\n}\n.mfb-component--bl.mfb-slidein-spring[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(3),\n.mfb-component--bl.mfb-slidein-spring[data-mfb-state=open] .mfb-component__list li:nth-child(3),\n.mfb-component--br.mfb-slidein-spring[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(3),\n.mfb-component--br.mfb-slidein-spring[data-mfb-state=open] .mfb-component__list li:nth-child(3) {\n  transition-delay: 0.15s;\n  -webkit-transform: translateY(-210px);\n  transform: translateY(-210px);\n}\n.mfb-component--bl.mfb-slidein-spring[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(4),\n.mfb-component--bl.mfb-slidein-spring[data-mfb-state=open] .mfb-component__list li:nth-child(4),\n.mfb-component--br.mfb-slidein-spring[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(4),\n.mfb-component--br.mfb-slidein-spring[data-mfb-state=open] .mfb-component__list li:nth-child(4) {\n  transition-delay: 0.2s;\n  -webkit-transform: translateY(-280px);\n  transform: translateY(-280px);\n}\n.mfb-component--tl.mfb-zoomin .mfb-component__list li,\n.mfb-component--tr.mfb-zoomin .mfb-component__list li {\n  -webkit-transform: scale(0);\n  transform: scale(0);\n}\n.mfb-component--tl.mfb-zoomin .mfb-component__list li:nth-child(1),\n.mfb-component--tr.mfb-zoomin .mfb-component__list li:nth-child(1) {\n  -webkit-transform: translateY(70px) scale(0);\n  transform: translateY(70px) scale(0);\n  transition: all 0.5s;\n  transition-delay: 0.15s;\n}\n.mfb-component--tl.mfb-zoomin .mfb-component__list li:nth-child(2),\n.mfb-component--tr.mfb-zoomin .mfb-component__list li:nth-child(2) {\n  -webkit-transform: translateY(140px) scale(0);\n  transform: translateY(140px) scale(0);\n  transition: all 0.5s;\n  transition-delay: 0.1s;\n}\n.mfb-component--tl.mfb-zoomin .mfb-component__list li:nth-child(3),\n.mfb-component--tr.mfb-zoomin .mfb-component__list li:nth-child(3) {\n  -webkit-transform: translateY(210px) scale(0);\n  transform: translateY(210px) scale(0);\n  transition: all 0.5s;\n  transition-delay: 0.05s;\n}\n.mfb-component--tl.mfb-zoomin .mfb-component__list li:nth-child(4),\n.mfb-component--tr.mfb-zoomin .mfb-component__list li:nth-child(4) {\n  -webkit-transform: translateY(280px) scale(0);\n  transform: translateY(280px) scale(0);\n  transition: all 0.5s;\n  transition-delay: 0s;\n}\n.mfb-component--tl.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(1),\n.mfb-component--tl.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(1),\n.mfb-component--tr.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(1),\n.mfb-component--tr.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(1) {\n  -webkit-transform: translateY(70px) scale(1);\n  transform: translateY(70px) scale(1);\n  transition-delay: 0.05s;\n}\n.mfb-component--tl.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(2),\n.mfb-component--tl.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(2),\n.mfb-component--tr.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(2),\n.mfb-component--tr.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(2) {\n  -webkit-transform: translateY(140px) scale(1);\n  transform: translateY(140px) scale(1);\n  transition-delay: 0.1s;\n}\n.mfb-component--tl.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(3),\n.mfb-component--tl.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(3),\n.mfb-component--tr.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(3),\n.mfb-component--tr.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(3) {\n  -webkit-transform: translateY(210px) scale(1);\n  transform: translateY(210px) scale(1);\n  transition-delay: 0.15s;\n}\n.mfb-component--tl.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(4),\n.mfb-component--tl.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(4),\n.mfb-component--tr.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(4),\n.mfb-component--tr.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(4) {\n  -webkit-transform: translateY(280px) scale(1);\n  transform: translateY(280px) scale(1);\n  transition-delay: 0.2s;\n}\n.mfb-component--cl.mfb-zoomin .mfb-component__list li,\n.mfb-component--br.mfb-zoomin .mfb-component__list li {\n  -webkit-transform: scale(0);\n  transform: scale(0);\n}\n.mfb-component--cl.mfb-zoomin .mfb-component__list li:nth-child(1),\n.mfb-component--br.mfb-zoomin .mfb-component__list li:nth-child(1) {\n  -webkit-transform: translateY(-70px) scale(0);\n  transform: translateY(-70px) scale(0);\n  transition: all 0.5s;\n  transition-delay: 0.1s;\n}\n.mfb-component--cl.mfb-zoomin .mfb-component__list li:nth-child(2),\n.mfb-component--br.mfb-zoomin .mfb-component__list li:nth-child(2) {\n  -webkit-transform: translateY(-140px) scale(0);\n  transform: translateY(-140px) scale(0);\n  transition: all 0.5s;\n  transition-delay: 0.05s;\n}\n.mfb-component--cl.mfb-zoomin .mfb-component__list li:nth-child(3),\n.mfb-component--br.mfb-zoomin .mfb-component__list li:nth-child(3) {\n  -webkit-transform: translateY(-210px) scale(0);\n  transform: translateY(-210px) scale(0);\n  transition: all 0.5s;\n  transition-delay: 0s;\n}\n.mfb-component--cl.mfb-zoomin .mfb-component__list li:nth-child(4),\n.mfb-component--br.mfb-zoomin .mfb-component__list li:nth-child(4) {\n  -webkit-transform: translateY(-280px) scale(0);\n  transform: translateY(-280px) scale(0);\n  transition: all 0.5s;\n  transition-delay: -0.05s;\n}\n.mfb-component--cl.mfb-zoomin .mfb-component__list li:nth-child(5),\n.mfb-component--br.mfb-zoomin .mfb-component__list li:nth-child(5) {\n  -webkit-transform: translateY(-350px) scale(0);\n  transform: translateY(-350px) scale(0);\n  transition: all 0.5s;\n  transition-delay: -0.1s;\n}\n.mfb-component--cl.mfb-zoomin .mfb-component__list li:nth-child(6),\n.mfb-component--br.mfb-zoomin .mfb-component__list li:nth-child(6) {\n  -webkit-transform: translateY(-420px) scale(0);\n  transform: translateY(-420px) scale(0);\n  transition: all 0.5s;\n  transition-delay: -0.15s;\n}\n.mfb-component--cl.mfb-zoomin .mfb-component__list li:nth-child(7),\n.mfb-component--br.mfb-zoomin .mfb-component__list li:nth-child(7) {\n  -webkit-transform: translateY(-490px) scale(0);\n  transform: translateY(-490px) scale(0);\n  transition: all 0.5s;\n  transition-delay: -0.2s;\n}\n.mfb-component--cl.mfb-zoomin .mfb-component__list li:nth-child(8),\n.mfb-component--br.mfb-zoomin .mfb-component__list li:nth-child(8) {\n  -webkit-transform: translateY(-560px) scale(0);\n  transform: translateY(-560px) scale(0);\n  transition: all 0.5s;\n  transition-delay: -0.25s;\n}\n.mfb-component--cl.mfb-zoomin .mfb-component__list li:nth-child(9),\n.mfb-component--br.mfb-zoomin .mfb-component__list li:nth-child(9) {\n  -webkit-transform: translateY(-630px) scale(0);\n  transform: translateY(-630px) scale(0);\n  transition: all 0.5s;\n  transition-delay: -0.3s;\n}\n.mfb-component--cl.mfb-zoomin .mfb-component__list li:nth-child(10),\n.mfb-component--br.mfb-zoomin .mfb-component__list li:nth-child(10) {\n  -webkit-transform: translateY(-700px) scale(0);\n  transform: translateY(-700px) scale(0);\n  transition: all 0.5s;\n  transition-delay: -0.35s;\n}\n.mfb-component--cl.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(1),\n.mfb-component--cl.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(1),\n.mfb-component--br.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(1),\n.mfb-component--br.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(1) {\n  -webkit-transform: translateY(-70px) scale(1);\n  transform: translateY(-70px) scale(1);\n  transition-delay: 0.05s;\n}\n.mfb-component--cl.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(2),\n.mfb-component--cl.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(2),\n.mfb-component--br.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(2),\n.mfb-component--br.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(2) {\n  -webkit-transform: translateY(-140px) scale(1);\n  transform: translateY(-140px) scale(1);\n  transition-delay: 0.1s;\n}\n.mfb-component--cl.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(3),\n.mfb-component--cl.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(3),\n.mfb-component--br.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(3),\n.mfb-component--br.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(3) {\n  -webkit-transform: translateY(-210px) scale(1);\n  transform: translateY(-210px) scale(1);\n  transition-delay: 0.15s;\n}\n.mfb-component--cl.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(4),\n.mfb-component--cl.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(4),\n.mfb-component--br.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(4),\n.mfb-component--br.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(4) {\n  -webkit-transform: translateY(-280px) scale(1);\n  transform: translateY(-280px) scale(1);\n  transition-delay: 0.2s;\n}\n.mfb-component--cl.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(5),\n.mfb-component--cl.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(5),\n.mfb-component--br.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(5),\n.mfb-component--br.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(5) {\n  -webkit-transform: translateY(-350px) scale(1);\n  transform: translateY(-350px) scale(1);\n  transition-delay: 0.25s;\n}\n.mfb-component--cl.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(6),\n.mfb-component--cl.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(6),\n.mfb-component--br.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(6),\n.mfb-component--br.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(6) {\n  -webkit-transform: translateY(-420px) scale(1);\n  transform: translateY(-420px) scale(1);\n  transition-delay: 0.3s;\n}\n.mfb-component--cl.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(7),\n.mfb-component--cl.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(7),\n.mfb-component--br.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(7),\n.mfb-component--br.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(7) {\n  -webkit-transform: translateY(-490px) scale(1);\n  transform: translateY(-490px) scale(1);\n  transition-delay: 0.35s;\n}\n.mfb-component--cl.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(8),\n.mfb-component--cl.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(8),\n.mfb-component--br.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(8),\n.mfb-component--br.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(8) {\n  -webkit-transform: translateY(-560px) scale(1);\n  transform: translateY(-560px) scale(1);\n  transition-delay: 0.4s;\n}\n.mfb-component--cl.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(9),\n.mfb-component--cl.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(9),\n.mfb-component--br.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(9),\n.mfb-component--br.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(9) {\n  -webkit-transform: translateY(-630px) scale(1);\n  transform: translateY(-630px) scale(1);\n  transition-delay: 0.45s;\n}\n.mfb-component--cl.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(10),\n.mfb-component--cl.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(10),\n.mfb-component--br.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(10),\n.mfb-component--br.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(10) {\n  -webkit-transform: translateY(-700px) scale(1);\n  transform: translateY(-700px) scale(1);\n  transition-delay: 0.5s;\n}\n.mfb-component--bl.mfb-zoomin .mfb-component__list li,\n.mfb-component--br.mfb-zoomin .mfb-component__list li {\n  -webkit-transform: scale(0);\n  transform: scale(0);\n}\n.mfb-component--bl.mfb-zoomin .mfb-component__list li:nth-child(1),\n.mfb-component--br.mfb-zoomin .mfb-component__list li:nth-child(1) {\n  -webkit-transform: translateY(-70px) scale(0);\n  transform: translateY(-70px) scale(0);\n  transition: all 0.5s;\n  transition-delay: 0.15s;\n}\n.mfb-component--bl.mfb-zoomin .mfb-component__list li:nth-child(2),\n.mfb-component--br.mfb-zoomin .mfb-component__list li:nth-child(2) {\n  -webkit-transform: translateY(-140px) scale(0);\n  transform: translateY(-140px) scale(0);\n  transition: all 0.5s;\n  transition-delay: 0.1s;\n}\n.mfb-component--bl.mfb-zoomin .mfb-component__list li:nth-child(3),\n.mfb-component--br.mfb-zoomin .mfb-component__list li:nth-child(3) {\n  -webkit-transform: translateY(-210px) scale(0);\n  transform: translateY(-210px) scale(0);\n  transition: all 0.5s;\n  transition-delay: 0.05s;\n}\n.mfb-component--bl.mfb-zoomin .mfb-component__list li:nth-child(4),\n.mfb-component--br.mfb-zoomin .mfb-component__list li:nth-child(4) {\n  -webkit-transform: translateY(-280px) scale(0);\n  transform: translateY(-280px) scale(0);\n  transition: all 0.5s;\n  transition-delay: 0s;\n}\n.mfb-component--bl.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(1),\n.mfb-component--bl.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(1),\n.mfb-component--br.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(1),\n.mfb-component--br.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(1) {\n  -webkit-transform: translateY(-70px) scale(1);\n  transform: translateY(-70px) scale(1);\n  transition-delay: 0.05s;\n}\n.mfb-component--bl.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(2),\n.mfb-component--bl.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(2),\n.mfb-component--br.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(2),\n.mfb-component--br.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(2) {\n  -webkit-transform: translateY(-140px) scale(1);\n  transform: translateY(-140px) scale(1);\n  transition-delay: 0.1s;\n}\n.mfb-component--bl.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(3),\n.mfb-component--bl.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(3),\n.mfb-component--br.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(3),\n.mfb-component--br.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(3) {\n  -webkit-transform: translateY(-210px) scale(1);\n  transform: translateY(-210px) scale(1);\n  transition-delay: 0.15s;\n}\n.mfb-component--bl.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(4),\n.mfb-component--bl.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(4),\n.mfb-component--br.mfb-zoomin[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(4),\n.mfb-component--br.mfb-zoomin[data-mfb-state=open] .mfb-component__list li:nth-child(4) {\n  -webkit-transform: translateY(-280px) scale(1);\n  transform: translateY(-280px) scale(1);\n  transition-delay: 0.2s;\n}\n.mfb-component--tl.mfb-fountain .mfb-component__list li,\n.mfb-component--tr.mfb-fountain .mfb-component__list li {\n  -webkit-transform: scale(0);\n  transform: scale(0);\n}\n.mfb-component--tl.mfb-fountain .mfb-component__list li:nth-child(1),\n.mfb-component--tr.mfb-fountain .mfb-component__list li:nth-child(1) {\n  -webkit-transform: translateY(-70px) scale(0);\n  transform: translateY(-70px) scale(0);\n  transition: all 0.5s;\n  transition-delay: 0.15s;\n}\n.mfb-component--tl.mfb-fountain .mfb-component__list li:nth-child(2),\n.mfb-component--tr.mfb-fountain .mfb-component__list li:nth-child(2) {\n  -webkit-transform: translateY(-140px) scale(0);\n  transform: translateY(-140px) scale(0);\n  transition: all 0.5s;\n  transition-delay: 0.1s;\n}\n.mfb-component--tl.mfb-fountain .mfb-component__list li:nth-child(3),\n.mfb-component--tr.mfb-fountain .mfb-component__list li:nth-child(3) {\n  -webkit-transform: translateY(-210px) scale(0);\n  transform: translateY(-210px) scale(0);\n  transition: all 0.5s;\n  transition-delay: 0.05s;\n}\n.mfb-component--tl.mfb-fountain .mfb-component__list li:nth-child(4),\n.mfb-component--tr.mfb-fountain .mfb-component__list li:nth-child(4) {\n  -webkit-transform: translateY(-280px) scale(0);\n  transform: translateY(-280px) scale(0);\n  transition: all 0.5s;\n  transition-delay: 0s;\n}\n.mfb-component--tl.mfb-fountain[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(1),\n.mfb-component--tl.mfb-fountain[data-mfb-state=open] .mfb-component__list li:nth-child(1),\n.mfb-component--tr.mfb-fountain[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(1),\n.mfb-component--tr.mfb-fountain[data-mfb-state=open] .mfb-component__list li:nth-child(1) {\n  -webkit-transform: translateY(70px) scale(1);\n  transform: translateY(70px) scale(1);\n  transition-delay: 0.05s;\n}\n.mfb-component--tl.mfb-fountain[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(2),\n.mfb-component--tl.mfb-fountain[data-mfb-state=open] .mfb-component__list li:nth-child(2),\n.mfb-component--tr.mfb-fountain[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(2),\n.mfb-component--tr.mfb-fountain[data-mfb-state=open] .mfb-component__list li:nth-child(2) {\n  -webkit-transform: translateY(140px) scale(1);\n  transform: translateY(140px) scale(1);\n  transition-delay: 0.1s;\n}\n.mfb-component--tl.mfb-fountain[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(3),\n.mfb-component--tl.mfb-fountain[data-mfb-state=open] .mfb-component__list li:nth-child(3),\n.mfb-component--tr.mfb-fountain[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(3),\n.mfb-component--tr.mfb-fountain[data-mfb-state=open] .mfb-component__list li:nth-child(3) {\n  -webkit-transform: translateY(210px) scale(1);\n  transform: translateY(210px) scale(1);\n  transition-delay: 0.15s;\n}\n.mfb-component--tl.mfb-fountain[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(4),\n.mfb-component--tl.mfb-fountain[data-mfb-state=open] .mfb-component__list li:nth-child(4),\n.mfb-component--tr.mfb-fountain[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(4),\n.mfb-component--tr.mfb-fountain[data-mfb-state=open] .mfb-component__list li:nth-child(4) {\n  -webkit-transform: translateY(280px) scale(1);\n  transform: translateY(280px) scale(1);\n  transition-delay: 0.2s;\n}\n.mfb-component--bl.mfb-fountain .mfb-component__list li,\n.mfb-component--br.mfb-fountain .mfb-component__list li {\n  -webkit-transform: scale(0);\n  transform: scale(0);\n}\n.mfb-component--bl.mfb-fountain .mfb-component__list li:nth-child(1),\n.mfb-component--br.mfb-fountain .mfb-component__list li:nth-child(1) {\n  -webkit-transform: translateY(70px) scale(0);\n  transform: translateY(70px) scale(0);\n  transition: all 0.5s;\n  transition-delay: 0.15s;\n}\n.mfb-component--bl.mfb-fountain .mfb-component__list li:nth-child(2),\n.mfb-component--br.mfb-fountain .mfb-component__list li:nth-child(2) {\n  -webkit-transform: translateY(140px) scale(0);\n  transform: translateY(140px) scale(0);\n  transition: all 0.5s;\n  transition-delay: 0.1s;\n}\n.mfb-component--bl.mfb-fountain .mfb-component__list li:nth-child(3),\n.mfb-component--br.mfb-fountain .mfb-component__list li:nth-child(3) {\n  -webkit-transform: translateY(210px) scale(0);\n  transform: translateY(210px) scale(0);\n  transition: all 0.5s;\n  transition-delay: 0.05s;\n}\n.mfb-component--bl.mfb-fountain .mfb-component__list li:nth-child(4),\n.mfb-component--br.mfb-fountain .mfb-component__list li:nth-child(4) {\n  -webkit-transform: translateY(280px) scale(0);\n  transform: translateY(280px) scale(0);\n  transition: all 0.5s;\n  transition-delay: 0s;\n}\n.mfb-component--bl.mfb-fountain[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(1),\n.mfb-component--bl.mfb-fountain[data-mfb-state=open] .mfb-component__list li:nth-child(1),\n.mfb-component--br.mfb-fountain[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(1),\n.mfb-component--br.mfb-fountain[data-mfb-state=open] .mfb-component__list li:nth-child(1) {\n  -webkit-transform: translateY(-70px) scale(1);\n  transform: translateY(-70px) scale(1);\n  transition-delay: 0.05s;\n}\n.mfb-component--bl.mfb-fountain[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(2),\n.mfb-component--bl.mfb-fountain[data-mfb-state=open] .mfb-component__list li:nth-child(2),\n.mfb-component--br.mfb-fountain[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(2),\n.mfb-component--br.mfb-fountain[data-mfb-state=open] .mfb-component__list li:nth-child(2) {\n  -webkit-transform: translateY(-140px) scale(1);\n  transform: translateY(-140px) scale(1);\n  transition-delay: 0.1s;\n}\n.mfb-component--bl.mfb-fountain[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(3),\n.mfb-component--bl.mfb-fountain[data-mfb-state=open] .mfb-component__list li:nth-child(3),\n.mfb-component--br.mfb-fountain[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(3),\n.mfb-component--br.mfb-fountain[data-mfb-state=open] .mfb-component__list li:nth-child(3) {\n  -webkit-transform: translateY(-210px) scale(1);\n  transform: translateY(-210px) scale(1);\n  transition-delay: 0.15s;\n}\n.mfb-component--bl.mfb-fountain[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(4),\n.mfb-component--bl.mfb-fountain[data-mfb-state=open] .mfb-component__list li:nth-child(4),\n.mfb-component--br.mfb-fountain[data-mfb-toggle=hover]:hover .mfb-component__list li:nth-child(4),\n.mfb-component--br.mfb-fountain[data-mfb-state=open] .mfb-component__list li:nth-child(4) {\n  -webkit-transform: translateY(-280px) scale(1);\n  transform: translateY(-280px) scale(1);\n  transition-delay: 0.2s;\n}\n[data-mfb-label]:after {\n  content: attr(data-mfb-label);\n  opacity: 0;\n  background: rgba(0, 0, 0, 0.4);\n  padding: 4px 10px;\n  border-radius: 3px;\n  color: rgba(255, 255, 255, 0.8);\n  font-size: 14px;\n  font-weight: 400;\n  pointer-events: none;\n  line-height: normal;\n  position: absolute;\n  top: 50%;\n  margin-top: -11px;\n  transition: all 0.5s;\n}\n[data-mfb-toggle=hover] [data-mfb-label]:hover:after,\n[data-mfb-state=open] [data-mfb-label]:after {\n  content: attr(data-mfb-label);\n  opacity: 1;\n  transition: all 0.3s;\n}\n.mfb-component--br [data-mfb-label]:after,\n.mfb-component--tr [data-mfb-label]:after {\n  content: attr(data-mfb-label);\n  right: 70px;\n}\n.mfb-component--br .mfb-component__list [data-mfb-label]:after,\n.mfb-component--tr .mfb-component__list [data-mfb-label]:after {\n  content: attr(data-mfb-label);\n  right: 70px;\n}\n.mfb-component--tl [data-mfb-label]:after,\n.mfb-component--cl [data-mfb-label]:after,\n.mfb-component--bl [data-mfb-label]:after {\n  content: attr(data-mfb-label);\n  left: 70px;\n}\n.mfb-component--tl .mfb-component__list [data-mfb-label]:after,\n.mfb-component--bl .mfb-component__list [data-mfb-label]:after {\n  content: attr(data-mfb-label);\n  left: 70px;\n}\n.mfb-component__button--child i,\n.mfb-component__button--main i {\n  line-height: inherit;\n}\n.animated {\n  -webkit-animation-duration: 1s;\n  -moz-animation-duration: 1s;\n  animation-duration: 1s;\n  -webkit-animation-fill-mode: both;\n  -moz-animation-fill-mode: both;\n  animation-fill-mode: both;\n}\n@-webkit-keyframes bounceInUp {\n  from,\n  60%,\n  75%,\n  90%,\n  to {\n    -webkit-animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\n    animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\n  }\n  from {\n    opacity: 0;\n    -webkit-transform: translate3d(0, 800px, 0);\n    transform: translate3d(0, 800px, 0);\n  }\n  60% {\n    opacity: 1;\n    -webkit-transform: translate3d(0, -20px, 0);\n    transform: translate3d(0, -20px, 0);\n  }\n  75% {\n    -webkit-transform: translate3d(0, 10px, 0);\n    transform: translate3d(0, 10px, 0);\n  }\n  90% {\n    -webkit-transform: translate3d(0, -5px, 0);\n    transform: translate3d(0, -5px, 0);\n  }\n  to {\n    -webkit-transform: translate3d(0, 0, 0);\n    transform: translate3d(0, 0, 0);\n  }\n}\n@-moz-keyframes bounceInUp {\n  from,\n  60%,\n  75%,\n  90%,\n  to {\n    -moz-animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\n    animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\n  }\n  from {\n    opacity: 0;\n    -moz-transform: translate3d(0, 800px, 0);\n    transform: translate3d(0, 800px, 0);\n  }\n  60% {\n    opacity: 1;\n    -moz-transform: translate3d(0, -20px, 0);\n    transform: translate3d(0, -20px, 0);\n  }\n  75% {\n    -moz-transform: translate3d(0, 10px, 0);\n    transform: translate3d(0, 10px, 0);\n  }\n  90% {\n    -moz-transform: translate3d(0, -5px, 0);\n    transform: translate3d(0, -5px, 0);\n  }\n  to {\n    -moz-transform: translate3d(0, 0, 0);\n    transform: translate3d(0, 0, 0);\n  }\n}\n@keyframes bounceInUp {\n  from,\n  60%,\n  75%,\n  90%,\n  to {\n    -webkit-animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\n    -moz-animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\n    animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\n  }\n  from {\n    opacity: 0;\n    -webkit-transform: translate3d(0, 800px, 0);\n    -moz-transform: translate3d(0, 800px, 0);\n    transform: translate3d(0, 800px, 0);\n  }\n  60% {\n    opacity: 1;\n    -webkit-transform: translate3d(0, -20px, 0);\n    -moz-transform: translate3d(0, -20px, 0);\n    transform: translate3d(0, -20px, 0);\n  }\n  75% {\n    -webkit-transform: translate3d(0, 10px, 0);\n    -moz-transform: translate3d(0, 10px, 0);\n    transform: translate3d(0, 10px, 0);\n  }\n  90% {\n    -webkit-transform: translate3d(0, -5px, 0);\n    -moz-transform: translate3d(0, -5px, 0);\n    transform: translate3d(0, -5px, 0);\n  }\n  to {\n    -webkit-transform: translate3d(0, 0, 0);\n    -moz-transform: translate3d(0, 0, 0);\n    transform: translate3d(0, 0, 0);\n  }\n}\n.bounceInUp {\n  -webkit-animation-name: bounceInUp;\n  -moz-animation-name: bounceInUp;\n  animation-name: bounceInUp;\n  -webkit-animation-delay: 1s;\n  -moz-animation-delay: 1s;\n  animation-delay: 1s;\n}\n.onekeyvip {\n  font-size: 25px !important;\n}\n', 
    styleInject(css_248z$1), css_248z = '@font-face {\n    font-family: "onekeyvip"; /* Project id 3421073 */\n    src:\n            url(\'data:application/x-font-woff2;charset=utf-8;base64,d09GMgABAAAAAAokAAsAAAAAEegAAAnXAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHFQGYACEEAqVMJEnATYCJAMoCxYABCAFhHMHgQgbBw+jooZyUhhkf4Ftw54EEtaIjWEBoJwygw+dDU3DFpDw4dDqAAAwS8FA1LcASNANAEA++F710qRKlvCJs3sQ/tw9wOgBmD/X3lIgTolAISy85GcpO9lsAV0rVKfCo1AoDNDdORD25DVAwJfZqTqrJ9nTzK4Dr+OFPckctMJBSu68dg4LI7i6HwhkwhEcTJaW8/9vrdW7w7xRbfBGiB7jis3+M5tbNKo21WTtHiFCKGpzDdFKkyoWiuVILoSYsSjPTKAq1Mb4Xc8DAoAjQZ/gkrGZeRTfTZEOyhYKYz4B4vakG6MKilQcYBUJBJpZabovA5kEGZBGS+cATPQ/nrxBUpGABJnCCKTuR3X0bPr9nhpWAL0Hlx+uG7++BEAGQAHELMxFplVrE9AQx/jAqaYMbSA4mIkhgLk2NXXTySx8PeD3e6s1FyIF9+8JIJ1MyYDUiTUKZctNZWjQoeKXp8AAG4QMqNUBEzaCBJj88YvIAQUw9QoQAAJygAFmYQ7IwOv+Nmi+cQAIdDwPAT6oMIDz+7hACIToKID1QzDV9AkFs/UalkIWjPHY5CCn+ISQwNaM7PTCltTEhAi1RknQeH9BzGhonjwSqr8jYgVDLX1pnMjStk3/yyhOLm+oqVSW41UxyxgSXX+qX8oTCUwm7T3JjRQKNJ+fXU3SrOyh4E72IvZj++m7V1NB7r2kjwYV9HOqYlNOfrV0bXtgqLIeJmNqAXg7ANGJCLhFyNh7EBFjuyFS2bVegspNGmCh0euO2+KCAhmmiiB3Wwx7FVDESiy/qSOwRT7WZt/GbuNnc/Qk/pq2FooyKDbNPt0h7Q7tfq12raadvCzu5om81a3tdAUy35CeVUWWCmQWBar8JufsakKlSa1QvtAYm9WKLJ/OkdELaMXm9Wzq1ri1lNuUQmrRVpl+idEpWn4fu8ukRY5zmWVOdcjYI/m07HpSvS1cSagUFgIjLY9aZFpnV8Wp6X5f6TlQo/wmPpRN6hJDS95DwW22LTMVmRR4wDWTyz1Xc5txklrUO1mqWMrh1JBVk62K7hoZvXkrLCFVd9Hqy+klAhknBxFEXI+Fq9nZ+RARcJFp2qqSkguMrA2cFIH4DMIOIcLEChsLguMNxTyjSlVeYyHTL6DTLZtofIqUL3bEhMuatmq0u+LlN8mGeQWhkqfJRRsYEDGLnMPp1scsXEnIpHBUBEEpZJTKe2q5e2yLgPH9zas09DePZ5GK0Btw5d/G/6iQqt6ObjwY6i/mbbYjI3JQBk64ztQ0GJ7k3fFTYGRVzKh53Fo5veKixF9hZbrdbnRchWEFn2GjYn6XvxL1HfRN7OpigcxlekmFVtomJ000YAtVhRLNNGm7Ei1fIAtRYRWYHDWNog4k4Ob6BI5UmhJVv/rDWM7q54whoIFVkungaftqayhOqYbAws8iJWNgda6hyOsT1j6CNrQ05CiCwmvFFXYUhoQj6KI2BmMcTZ+gDzGUmBdRhdthb0pJdSE2cH7rG/N2wbzLV8Wo5v/CXe8kGTjJz0K4OTUQcWHTQERyYjh0PQJK7ASh46CaYV5hkEswsHO0074haciUGNga2QLj7DCIup9pmXJpoPJQis9Zxn76KbqYrm1uBPtwv0w/t1a0qOGGblIz0teQuoKalvR08n8ymw30Wgwqu2aQPqD0Iykj9yD7ju1PdI51copzTtjvT/DakugZVRXMDGXGhPpTfcjF1vTm+x7FFL/Q/S4JjnFxTgnOY3dODZkv0rap6ApK88j6fel+B5uEt669jcLFvlvCzj5YeuHWJR1hUJmpo3XCrLD1H4o/yXMHWBF3dg56r9izch6ElOOq7fj20Ch62dw5UMdTx4AxzXQsP/Hb494VV1PF0XV1S0VnJt40Rzpvl4Q9i1a01dDIy8TXqNuGS6tWyD/dwKw2tbDUTvVQnSh49vg7ZHr1Udw3AU2DWHArIyrz8/4fcnbtWD11SpV91D22IH8v4p0DdGbzHCLidZvXJ9+CyNn3L886XTFy4tRPdstoDML7iuu2aEPQ6qX5M+0P5f2tby2x+2iDxkoD+6j7zjzw5mlkaWsf6ID6ouyo7S6Z5gbvMuS9Rul+n1sOKVVxeqSWI5cH08a46GQCT8yJEJAQcNXHy8eze6AI9dT11Fl55VWBWn9I1JpvXQsOXmtg8/GMzs9jtkRQUwq1nJruXFjexIOByzCqcUL9iVGnj3rPnCaOhbY3/AeUkxWPRa39Pjho2K0A/L0+KT3ao2nzvvIPHD/jQxNgVX9lkvGJlNEhfmJDhd/+A/5VoNWvyv8HqvRfB+6O7j24N8AvLfhESOCp/MCTJ0KDQHMD+tpzZvZ/82H9JN7sONMzNtbXa5XURzPhZQOb0KwVNn/pYLFu0sqHGYh1+WH01/1YdktrBBg0YfnLvuwpHVhRdbWXczjFixNsjt17te+O735PjXip3B/HiPU/n2At+hAfs2aL8J3kGZWdyWOYaP8nfa83ZJ9yvPfQY3wANRN/qay3c1ib7J0YGCekrfoPvI/hU12zWKhbWjh0JLywn5t9tjHALT5ZJ5S1kc118oY2CP4gwzEZPOpf77J6ik9lC6tk65cJVk/wpXRxZRRAFU0mvIv4UlasE1ECVq7kX6xB8my/VnWZh9QV9n8S7OIoNqcMODbhBb6yVyeiJ6K/iCt9aN5WOyIBNFHPoDLt0CFAaDEsvDjmrjTmQDYRB+szR7JRalylt6VaOFeHinqbd5ut93/W8n4/q9yw8FnMhf+bZjNdcRVjSZHFSgKkuA8A3aCjHmtB5HSgLhhNrAadQw0/6SFjtDLpHN1KU5oMpbfoEIBxbZI1jQ9RUABtlfS0C/xvKvgCs7weLvy3ZfY93zTxT+33OF79z9usxvDccKAxuXxjnhFWmzVcyPqXsY8P4OSAbZHRh4usO2BozM1pAMtb7uQ3b3JuzLlYTwkykqDCB1HoCNazkBgkQyAVKdBRgDiiTTYWcCaFIILppWHOgQic3CIJdjiIKRXyghlC/iAZbv4pCmKKQBzlZdEJhMWHBSgSdKzuY6Zxh1g6eQSYsL/D3FmgvqWItBxstQjCY9zBjXUN+fpxcED0s4O3Q5ukJJgIbuOx4RqBZXHsYmMDNFkXkNLtqq8n1A51GrfRMAEopJtZh6n2czMazkGCJAGm/bP27WBcswDlsyhEVR85vCjXCB5GLw1rVKehiX6cy48uFtTUs4Nq+iRIBMikdTZsbIkEWGYNh7n0WgagkeoEOlS5utTzo5GmULdVk33DpX/3PoxjciIRShiRiUJUohGdcCKgtGH7zKGRnt1i9rEjmtMaLE55mKow3Q87CLCAH045pxaEe9yn1icmOr6tgqj1GHVqiW9ZMRk7Qg==\') format(\'woff2\'),\n            url(\'//at.alicdn.com/t/c/font_3421073_6n4yizwtdbu.woff?t=1695111033179\') format(\'woff\'),\n            url(\'//at.alicdn.com/t/c/font_3421073_6n4yizwtdbu.ttf?t=1695111033179\') format(\'truetype\'),\n            url(\'//at.alicdn.com/t/c/font_3421073_6n4yizwtdbu.svg?t=1695111033179#onekeyvip\') format(\'svg\');\n}\n\n.onekeyvip {\n    font-family: "onekeyvip" !important;\n    font-size: 16px;\n    font-style: normal;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n}\n\n.onekeyvip-biying:before {\n    content: "\\e609";\n}\n\n.onekeyvip-bilibili:before {\n    content: "\\e600";\n}\n\n.onekeyvip-360logo:before {\n    content: "\\e602";\n}\n\n.onekeyvip-baidu:before {\n    content: "\\e612";\n}\n\n.onekeyvip-zhihu:before {\n    content: "\\e641";\n}\n\n.onekeyvip-google:before {\n    content: "\\e603";\n}\n\n.onekeyvip-sougou:before {\n    content: "\\faef";\n}\n\n.onekeyvip-number-sign-full:before {\n    content: "\\ea7b";\n}\n\n.onekeyvip-number-sign:before {\n    content: "\\ea7c";\n}\n', 
    styleInject(css_248z);
    class MfbMenu {
        constructor(pos = "bl", method = "hover") {
            this.method = "hover", this.method = method, this.pos = pos;
        }
        getHtml(models) {
            let t = "";
            return models.forEach((function(v) {
                t += `            \n            <li>\n                <div data-mfb-label="${v.title}" class="mfb-component__button--child" id="mfb-cus-${v.title}">\n                    <i class="${v.icon.indexOf("onekeyvip") > -1 ? "onekeyvip " : "fa "}${v.icon}" aria-hidden="true"></i>\n                </div>\n            </li>`;
            })), `\n    <ul id="mfb-menu" class="mfb-component--${this.pos} mfb-zoomin bounceInUp animated" data-mfb-toggle="${this.method}">\n        <li class="mfb-component__wrap">\n            <div class="mfb-component__button--main">\n                <i class="fa fa-vimeo" aria-hidden="true"></i>\n            </div>\n            <ul class="mfb-component__list">\n                <li>\n                    <div data-mfb-label="\u672c\u6b21\u5173\u95ed" class="mfb-component__button--child" id="mfb-close">\n                        <i class="fa fa-eye" aria-hidden="true"></i>\n                    </div>\n                </li>\n                ${t}\n            </ul>\n        </li>\n    </ul>`;
        }
        loader() {
            Core.appendCss("//lib.baomitu.com/font-awesome/4.6.0/css/font-awesome.min.css");
        }
        render() {}
        Init(models) {
            MfbMenu.selfId = "#mfb-menu", Core.inIframe() || (this.loader(), Core.bodyAppend(this.getHtml(models)), 
            this.mouseMove(), this.bindEvent(models));
        }
        bindEvent(models) {
            "hover" != $(MfbMenu.selfId).data("mfb-toggle") && $(MfbMenu.selfId).on("click", () => {
                let targetState = "closed" == $(MfbMenu.selfId).attr("data-mfb-state") ? "open" : "closed";
                $(MfbMenu.selfId).attr("data-mfb-state", targetState);
            }), $("#mfb-close").on("click", () => {
                Logger.info("\u5173\u95edmfb\u83dc\u5355"), $(MfbMenu.selfId).hide();
            }), models.forEach(e => {
                $("#mfb-cus-" + e.title).on("click", () => {
                    Logger.info(`\u83dc\u5355${e.title}\u88ab\u70b9\u51fb`), e.callback();
                });
            });
        }
        mouseMove() {
            let menu = unsafeWindow.document.querySelector(MfbMenu.selfId), iWidth = unsafeWindow.document.documentElement.clientWidth, iHeight = unsafeWindow.document.documentElement.clientHeight, moveX = 0, moveY = 0, moveTop = 0, moveLeft = 0, moveable = !1, docMouseMoveEvent = () => {}, docMouseUpEvent = () => {};
            function getEvent() {
                return window.event || arguments.callee.caller.arguments[0];
            }
            menu.onmousedown = function() {
                var evt = getEvent();
                moveable = !0, moveX = evt.clientX, moveY = evt.clientY, moveTop = parseInt($(MfbMenu.selfId).css("top")), 
                moveLeft = parseInt($(MfbMenu.selfId).css("left"));
                let buttonChile = $(".mfb-component__button--child");
                unsafeWindow.document.onmousemove = function() {
                    if (moveable) {
                        let evt = getEvent(), x = moveLeft + evt.clientX - moveX, y = moveTop + evt.clientY - moveY, width = $(MfbMenu.selfId).css("width");
                        x - parseInt(width) / 2 < iWidth / 2 ? (buttonChile.removeClass("right"), buttonChile.addClass("left")) : (buttonChile.removeClass("left"), 
                        buttonChile.addClass("right")), x > 0 && x + parseInt(width) < iWidth && (menu.style.left = x + "px"), 
                        y > 0 && y + parseInt($(MfbMenu.selfId).css("height")) < iHeight && (menu.style.top = y + "px");
                    }
                }, unsafeWindow.document.onmouseup = function() {
                    moveable && (unsafeWindow.document.onmousemove = docMouseMoveEvent, unsafeWindow.document.onmouseup = docMouseUpEvent, 
                    moveable = !1, moveX = 0, moveY = 0, moveTop = 0, moveLeft = 0);
                };
            };
        }
    }
    class MfbModel {
        constructor(title, icon, callback) {
            this.title = title, this.icon = icon, this.callback = callback;
        }
    }
    class YoutubeService extends PluginBase {
        constructor() {
            super(...arguments), this.rules = new Map([ [ SiteEnum.YouTuBe, /(www|m)\.youtube\.com\/watch\?v=(.*?)/i ] ]), 
            this._unique = !1, this._appName = "YouTuBe";
        }
        loader() {
            this.mfbMenu = new MfbMenu;
        }
        run() {
            let menus = [ new MfbModel("\u4e0b\u8f7d", "fa-download", () => {
                Core.open("http://ytv.wandhi.com/?url=" + encodeURIComponent(Runtime.url));
            }) ];
            this.mfbMenu.Init(menus);
        }
    }
    class SettingService extends PluginBase {
        constructor() {
            super(...arguments), this.rules = new Map([ [ SiteEnum.Settings, /settings\.wandhi\.com\/index\/index\/page/i ], [ SiteEnum.Settings_AutoJump, /settings\.wandhi\.com\/tools\/autojump\/page/i ], [ SiteEnum.Settings_AutoJump_Opt, /settings\.wandhi\.com\/tools\/autojump-op\/page/i ], [ SiteEnum.Settings_CSDN, /settings\.wandhi\.com\/tools\/csdn\/page/i ], [ SiteEnum.Settings_CSDN_Opt, /settings\.wandhi\.com\/tools\/csdn-op\/page/i ], [ SiteEnum.Settings_Search, /settings\.wandhi\.com\/tools\/search-helper\/page/i ], [ SiteEnum.Settings_Search_Opt, /settings\.wandhi\.com\/tools\/search-helper-op\/page/i ], [ SiteEnum.Settings_Bili_Pc_Opt, /settings\.wandhi\.com\/tools\/bilibili-pc-op\/page/i ], [ SiteEnum.Settings_Jiexi_Opt, /settings\.wandhi\.com\/tools\/jiexi\/page/i ], [ SiteEnum.Settings_WangPan_Opt, /settings\.wandhi\.com\/tools\/wangpan\/page/i ] ]), 
            this._unique = !1, this._appName = "\u63a7\u5236\u9762\u677f", this.semiui = !0;
        }
        loader() {
            this.removeAlert();
        }
        run() {
            switch (this.site) {
              case SiteEnum.Settings:
                this.initVer();
                break;

              case SiteEnum.Settings_AutoJump_Opt:
                this.autoJumpOpt();
                break;

              case SiteEnum.Settings_CSDN_Opt:
                this.csdnOpt();
                break;

              case SiteEnum.Settings_Search_Opt:
                this.searchHelperOpt();
                break;

              case SiteEnum.Settings_Bili_Pc_Opt:
                this.biliPcOpt();
                break;

              case SiteEnum.Settings_Jiexi_Opt:
                this.JiexiOpt();
                break;

              case SiteEnum.Settings_WangPan_Opt:
                this.WangPanOpt();
            }
        }
        WangPanOpt() {
            let keys = new Map([ [ ConfigEnum.WangPan_Aria_Host, v => !!/^(http|https):\/\/\w+/.test(v) || (Toast.warning("Aria2\u5730\u5740\u683c\u5f0f\u9519\u8bef"), 
            !1) ], [ ConfigEnum.WangPan_Aria_Port, v => !!/^\d+$/.test(v) || (Toast.warning("Aria2\u7aef\u53e3\u683c\u5f0f\u9519\u8bef"), 
            !1) ], [ ConfigEnum.WangPan_Aria_Token, v => !0 ], [ ConfigEnum.WangPan_Aria_Path, v => !0 ], [ ConfigEnum.WangPan_Aria_Dir, v => !0 ] ]);
            this.InputInit(keys, "text");
        }
        JiexiOpt() {
            let keys = new Map([ [ ConfigEnum.Jiexi_Cus_Interface, v => {
                try {
                    v.split("\n").forEach((e, i) => {
                        if (2 != e.split("||").length) throw new Error;
                    });
                } catch (e) {
                    return Toast.error("\u81ea\u5b9a\u4e49\u63a5\u53e3\u683c\u5f0f\u9519\u8bef"), !1;
                }
                return !0;
            } ] ]);
            this.TextAreaInit(keys);
        }
        biliPcOpt() {
            let keys = [ ConfigEnum.BiliPc_Cover, ConfigEnum.BiliPc_Video_Download, ConfigEnum.BiliPc_Triple_Click ];
            this.checkBoxInit(keys);
        }
        searchHelperOpt() {
            let keys = [ ConfigEnum.Search_Helper_Switch ];
            this.checkBoxInit(keys);
        }
        autoJumpOpt() {
            let checkboxes = $("input[type=checkbox]");
            checkboxes.removeProp("disabled"), [ ConfigEnum.AutoJump_ZhiHu, ConfigEnum.AutoJump_CSDN, ConfigEnum.AutoJump_JianShu, ConfigEnum.AutoJump_Gitee, ConfigEnum.AutoJump_JueJin, ConfigEnum.AutoJump_Weibo, ConfigEnum.AutoJump_TuXiaoChao, ConfigEnum.AutoJump_OsCh, ConfigEnum.AutoJump_AiFaDian, ConfigEnum.AutoJump_Baidu, ConfigEnum.AutoJump_DouBan, ConfigEnum.AutoJump_g17173, ConfigEnum.AutoJump_TencentDoc ].forEach((e, i) => {
                $("#" + e.toString()).prop("checked", Config.get(e.toString(), !0));
            }), checkboxes.on("change", e => {
                let el = e.target;
                Logger.debug(`\u914d\u7f6e[${e.target.id}]\u53d1\u751f\u53d8\u66f4,\u6700\u7ec8\u503c:[${$(e.target).prop("checked")}]`), 
                Config.set(el.id, $(el).prop("checked")), Toast.success("\u4fdd\u5b58\u6210\u529f");
            });
        }
        csdnOpt() {
            let keys = [ ConfigEnum.CSDN_OpAdClean, ConfigEnum.CSDN_OpImgLink, ConfigEnum.CSDN_OpCommentClean, ConfigEnum.CSDN_OpArticleClean, ConfigEnum.CSDN_OpClipboardClean ];
            this.checkBoxInit(keys);
        }
        checkBoxInit(keys) {
            let _keys = new Map(keys.map(e => [ e, v => !0 ]));
            this.InputInit(_keys, "checkbox");
        }
        InputInit(keys, type = "checkbox") {
            let ele = $(`input[type=${type}]`);
            ele.removeProp("disabled"), keys.forEach((f, e) => {
                if ("text" == type) {
                    let v = Config.get(e.toString(), "");
                    Logger.debug(`\u914d\u7f6e[${e.toString()}]\u521d\u59cb\u5316,\u503c:[${v}]`), $("#" + e.toString()).val(v);
                } else "checkbox" == type && $("#" + e.toString()).prop("checked", Config.get(e.toString(), !0));
            }), ele.on("change", e => {
                let el = e.target;
                "text" == type ? (Logger.debug(`\u914d\u7f6e[${e.target.id}]\u53d1\u751f\u53d8\u66f4,\u6700\u7ec8\u503c:[${$(e.target).val()}]`), 
                keys.get(el.id).apply(el, [ $(el).val() ]) && (Config.set(el.id, $(el).val()), Toast.success("\u4fdd\u5b58\u6210\u529f"))) : "checkbox" == type && (Logger.debug(`\u914d\u7f6e[${e.target.id}]\u53d1\u751f\u53d8\u66f4,\u6700\u7ec8\u503c:[${$(e.target).prop("checked")}]`), 
                Config.set(el.id, $(el).prop("checked")), Toast.success("\u4fdd\u5b58\u6210\u529f"));
            });
        }
        TextAreaInit(keys) {
            $("textarea").removeProp("disabled"), keys.forEach((f, e) => {
                $("#" + e.toString()).val(Config.get(e.toString(), "")), $("#" + e.toString()).on("change", el => {
                    Logger.debug(`\u914d\u7f6e[${el.target.id}]\u53d1\u751f\u53d8\u66f4,\u6700\u7ec8\u503c:[${$(el.target).val()}]`), 
                    f.apply(el, [ $(el.target).val() ]) && (Config.set(el.target.id, $(el.target).val()), 
                    Toast.success("\u4fdd\u5b58\u6210\u529f"));
                });
            });
        }
        initVer() {
            $("#currentVer").text(Config.env.script.version);
        }
        removeAlert() {
            $(".alert-danger").remove();
        }
        injection() {
            unsafeWindow.window.scriptInfo = Config.env, unsafeWindow.window.gm_Set = Config.set, 
            unsafeWindow.window.gm_Get = Config.get;
        }
    }
    class ControlMenuService extends PluginBase {
        constructor() {
            super(...arguments), this.rules = new Map([ [ SiteEnum.All, /.*/i ] ]), this._appName = "\u63a7\u5236\u83dc\u5355", 
            this._unique = !1;
        }
        loader() {}
        run() {
            GM_registerMenuCommand("\u63a7\u5236\u4e2d\u5fc3", () => {
                Core.open("https://settings.wandhi.com");
            });
        }
    }
    class SearchService extends PluginBase {
        constructor() {
            super(...arguments), this.rules = new Map([ [ SiteEnum.Baidu, /www\.baidu\.com\/(baidu|s)\?/i ], [ SiteEnum.Google, /www\.google\.com\/search\?/i ], [ SiteEnum.SoGou, /www\.sogou\.com\/web/i ], [ SiteEnum.SoGou, /www\.so\.com\/s\?/i ], [ SiteEnum.BingCn, /cn\.bing\.com\/search/i ] ]), 
            this._appName = "\u4fbf\u6377\u641c\u7d22", this._unique = !1, this.siteConfig = new Map([ [ SiteEnum.Baidu, "#kw" ], [ SiteEnum.Google, "input[name=q]" ], [ SiteEnum.SoGou, "#upquery" ], [ SiteEnum.BingCn, "#sb_form_q" ] ]);
        }
        loader() {
            SearchService.currentSite = this.site, this.siteConfig.has(this.site) && (SearchService.keySelector = this.siteConfig.get(this.site));
        }
        run() {
            if (Config.get(ConfigEnum.Search_Helper_Switch, !0)) {
                let menus = [ new MfbModel("\u767e\u5ea6", "onekeyvip-baidu", () => {
                    Core.open("https://www.baidu.com/s?wd=" + $(SearchService.keySelector).val());
                }), new MfbModel("\u641c\u72d7", "onekeyvip-sougou", () => {
                    Core.open(`https://www.sogou.com/web?query=${$(SearchService.keySelector).val()}&ie=utf8`);
                }), new MfbModel("\u8c37\u6b4c", "onekeyvip-google", () => {
                    Core.open("https://www.google.com/search?q=" + $(SearchService.keySelector).val());
                }), new MfbModel("360", "onekeyvip-360logo", () => {
                    Core.open("https://www.so.com/s?q=" + $(SearchService.keySelector).val());
                }), new MfbModel("Bing", "onekeyvip-biying", () => {
                    Core.open("https://cn.bing.com/search?q=" + $(SearchService.keySelector).val());
                }) ];
                new MfbMenu(Config.get(ConfigEnum.Search_OptMenuPos, Config.get(ConfigEnum.Search_Helper_Postion, "cl")), Config.get(ConfigEnum.Search_OptMenuMethod, "hover")).Init(menus);
            }
        }
    }
    SearchService.keySelector = "#none";
    class QuarkFileResponse {}
    class Quark {
        static init() {
            this.sign();
        }
        static notification(msg) {
            semiUi.Notification.success({
                title: "\u7b7e\u5230\u901a\u77e5",
                content: msg,
                duration: 3,
                theme: "light",
                position: "bottomRight"
            });
        }
        static sign() {
            var _a;
            return __awaiter(this, void 0, void 0, (function*() {
                let growth_info = yield Quark.getCurrentInfo();
                if (growth_info) if (null === (_a = growth_info.data.cap_sign) || void 0 === _a ? void 0 : _a.sign_daily) {
                    let message = `\ud83d\udcc5 \u6267\u884c\u7b7e\u5230: \u4eca\u65e5\u5df2\u7b7e\u5230+${growth_info.data.cap_sign.sign_daily_reward / 1024 / 1024}MB\uff0c\u8fde\u7b7e\u8fdb\u5ea6(${growth_info.data.cap_sign.sign_progress}/${growth_info.data.cap_sign.sign_target})\u2705`;
                    this.notification(message);
                } else {
                    let sign_return = yield this.getSignInfo();
                    if (null == sign_return ? void 0 : sign_return.data) {
                        let message = `\ud83d\udcc5 \u6267\u884c\u7b7e\u5230: \u4eca\u65e5\u7b7e\u5230+${sign_return.data.sign_daily_reward / 1024 / 1024}MB\uff0c\u8fde\u7b7e\u8fdb\u5ea6(${growth_info.cap_sign.sign_progress + 1}/${growth_info.cap_sign.sign_target})\u2705`;
                        this.notification(message);
                    }
                }
                Config.set(Quark.signKey, "true", 86400);
            }));
        }
        static getSignInfo() {
            return __awaiter(this, void 0, void 0, (function*() {
                let p = new Map;
                return p.set("sign_cyclic", "true"), Http.post(Quark.signUrl + "?pr=ucpro&fr=pc&uc_param_str", p);
            }));
        }
        static getCurrentInfo() {
            return __awaiter(this, void 0, void 0, (function*() {
                return Http.get(Quark.infoUrl + "?pr=ucpro&fr=pc&uc_param_str", new Map, new Map([ [ "Accept", "application/json" ] ]));
            }));
        }
    }
    Quark.infoUrl = "https://drive-m.quark.cn/1/clouddrive/capacity/growth/info", Quark.signUrl = "https://drive-m.quark.cn/1/clouddrive/capacity/growth/sign", 
    Quark.accUrl = "", Quark.saveUrl = "", Quark.signKey = "QuarkSignKey" + (new Date).toLocaleDateString().replace(/-/g, "");
    class NetDiskDirectService extends PluginBase {
        constructor() {
            super(), this.rules = new Map([ [ SiteEnum.KuaKeHome, /pan\.quark\.cn\/list/ ], [ SiteEnum.KuaKeShare, /pan\.quark\.cn\/s/ ], [ SiteEnum.BaiduPanMain, /pan\.baidu\.com\/disk\/main/i ] ]), 
            this._appName = "NetDiskDirect", this.semiui = !0;
        }
        loader() {}
        run() {
            NetDiskDirectService._site = this.site, this.site == SiteEnum.KuaKeHome ? -1 === Core.url.indexOf("myshare") ? (NetDiskDirectService.btnSelecotr = ".btn-operate", 
            NetDiskDirectService.btn = NetDiskDirectService.quarkBtn, NetDiskDirectService.getSelecor = NetDiskDirectService.getQuarkSelectedFile, 
            NetDiskDirectService.quarkListener(), Core.appendCssContent(".btn-operate {justify-content: flex-start !important;}")) : (NetDiskDirectService.btnSelecotr = ".tabs-container", 
            NetDiskDirectService.btn = '<div class="ovk-main" style="margin-right: 10px;">\n    <button type="button" class="ant-btn btn-file okv-btn-direct">\n        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMyMjIiIHN0cm9rZS13aWR0aD0iMiI+PHBhdGggc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBkPSJNOSAxMmwyIDIgMi0yeiIvPjxwYXRoIGQ9Ik0xNCA4aDEuNTUzYy44NSAwIDEuMTYuMDkzIDEuNDcuMjY3LjMxMS4xNzQuNTU2LjQzLjcyMi43NTYuMTY2LjMyNi4yNTUuNjUuMjU1IDEuNTR2NC44NzNjMCAuODkyLS4wODkgMS4yMTUtLjI1NSAxLjU0LS4xNjYuMzI3LS40MS41ODMtLjcyMi43NTctLjMxLjE3NC0uNjIuMjY3LTEuNDcuMjY3SDYuNDQ3Yy0uODUgMC0xLjE2LS4wOTMtMS40Ny0uMjY3YTEuNzc4IDEuNzc4IDAgMDEtLjcyMi0uNzU2Yy0uMTY2LS4zMjYtLjI1NS0uNjUtLjI1NS0xLjU0di00Ljg3M2MwLS44OTIuMDg5LTEuMjE1LjI1NS0xLjU0LjE2Ni0uMzI3LjQxLS41ODMuNzIyLS43NTcuMzEtLjE3NC42Mi0uMjY3IDEuNDctLjI2N0gxMSIvPjxwYXRoIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTExIDN2MTAiLz48L2c+PC9zdmc+" class="btn-icon" alt="" style="width: 20px;height: 20px">\n        <span>\u5bfc\u51fa\u5206\u4eab\u94fe\u63a5</span>\n    </button>\n</div>', 
            NetDiskDirectService.getSelecor = NetDiskDirectService.getQuarkShareSelectedFile, 
            NetDiskDirectService.quarkListener()) : this.site == SiteEnum.BaiduPanMain ? (NetDiskDirectService.btnSelecotr = ".wp-s-agile-tool-bar__header", 
            NetDiskDirectService.btn = '<div class="ovk-main" style="margin-right: 10px;">\n    <button type="button" class="u-button nd-file-list-toolbar-action-item u-button--primary u-button--small is-round is-has-icon okv-btn-direct" style="background: #09AAFF;border-color: #09AAFF;font-size: 14px;padding: 7px 16px;border: none;\n}">\n        <i class="u-icon u-icon-download"></i>\n        <span>\u83b7\u53d6\u76f4\u94fe</span>\n    </button>\n</div>', 
            NetDiskDirectService.initButton(), NetDiskDirectService.baiduEvent(), NetDiskDirectService.commonEvent()) : this.site == SiteEnum.KuaKeShare && (NetDiskDirectService.btnSelecotr = ".file-info-share-buttom", 
            NetDiskDirectService.btn = NetDiskDirectService.quarkBtn, NetDiskDirectService.initButton(), 
            $(document).on("click", ".okv-btn-direct", e => {
                Toast.warning("\u8bf7\u5148\u4fdd\u5b58\u5230\u81ea\u5df1\u7f51\u76d8\uff0c\u7136\u540e\u4ece\u201c\u6211\u7684\u7f51\u76d8\u201d\u754c\u9762\u83b7\u53d6\u76f4\u94fe");
            }));
        }
        static quarkListener() {
            window.addEventListener("hashchange", e => __awaiter(this, void 0, void 0, (function*() {
                "https://pan.quark.cn/list#/" === e.oldURL && "https://pan.quark.cn/list#/list/all" === e.newURL || (yield Core.sleep(.15), 
                $(".quark-button").length > 0 || NetDiskDirectService.initButton());
            }))), NetDiskDirectService.initButton(), NetDiskDirectService.quarkEvent(), NetDiskDirectService.commonEvent(), 
            Quark.init(), Logger.info("\u5938\u514b\u521d\u59cb\u5316\u5b8c\u6bd5");
        }
        static baiduSelectedList() {
            try {
                return require("system-core:context/context.js").instanceForSystem.list.getSelected();
            } catch (e) {
                return unsafeWindow.document.querySelector(".wp-s-core-pan").__vue__.selectedList;
            }
        }
        static getLogid() {
            return window.btoa(Core.getCookie("BAIDUID"));
        }
        static getToken() {
            var _a;
            return __awaiter(this, void 0, void 0, (function*() {
                let k = "baidu_access_Token", token = Config.get(k) && Config.get(k).length > 0 && Config.get(k);
                if (token) return token;
                let res = yield Route.baiduAccessToken();
                return -1 === res.indexOf("access_token") && (yield Route.baiduAccessTokenAuth(), 
                res = yield Route.baiduAccessToken(), -1 === res.indexOf("access_token")) ? (Toast.error("\u63d0\u793a\uff1a\u83b7\u53d6token\u5931\u8d25\uff01"), 
                !1) : (token = null === (_a = res.match(/access_token=([^&]+)/)) || void 0 === _a ? void 0 : _a[1], 
                token && Config.set(k, token, 21600), token);
            }));
        }
        static sendLinkToRPC(filename, link, ua, cookie) {
            return __awaiter(this, void 0, void 0, (function*() {
                let url = `${Config.get(ConfigEnum.WangPan_Aria_Host, "http://localhost")}:${Config.get(ConfigEnum.WangPan_Aria_Port, 6800)}${Config.get(ConfigEnum.WangPan_Aria_Path, "/jsonrpc")}`, rpcData = {
                    id: (new Date).getTime(),
                    jsonrpc: "2.0",
                    method: "aria2.addUri",
                    params: [ "token:" + Config.get(ConfigEnum.WangPan_Aria_Token, ""), [ link ], {
                        dir: Config.get(ConfigEnum.WangPan_Aria_Dir, "D:\\"),
                        out: filename,
                        header: [ "User-Agent: " + ua, "Cookie: " + cookie ]
                    } ]
                };
                try {
                    return !!(yield Http.ajaxNew(url, "POST", rpcData, new Map([ [ "User-Agent", ua ] ])));
                } catch (e) {
                    return Logger.error(e), !1;
                }
            }));
        }
        static baiduEvent() {
            $(document).on("click", ".okv-btn-direct", e => {
                let selectList = NetDiskDirectService.baiduSelectedList();
                if (0 === selectList.length) return void Toast.error("\u63d0\u793a\uff1a\u8bf7\u5148\u52fe\u9009\u8981\u4e0b\u8f7d\u7684\u6587\u4ef6\uff01");
                let fidsStr = `[${selectList.map(item => item.fs_id).join(",")}]`;
                2 !== fidsStr.length ? this.getToken().then(token => {
                    Route.baiduDriect(fidsStr, token).then(res => __awaiter(this, void 0, void 0, (function*() {
                        if (Logger.debug(res), 0 === res.errno) {
                            let ck = `BDUSS=${yield Core.getGmCookie("BDUSS")};`;
                            sAlert.html("\u76f4\u94fe\u4fe1\u606f", NetDiskDirectService.generateDom(res.list.map(e => {
                                let obj = new QuarkFileResponse;
                                return obj.fid = e.fs_id.toString(), obj.file_name = e.filename, obj.download_url = token ? `${e.dlink}&access_token=${token}` : e.dlink, 
                                obj.size = e.size, obj.ua = "pan.baidu.com", obj.cookie = ck, obj;
                            })), !0, "\u6211\u597d\u4e86", "#3085d6", "auto");
                        } else 112 === res.errno ? Toast.error("\u63d0\u793a\uff1a\u9875\u9762\u8fc7\u671f\uff0c\u8bf7\u5237\u65b0\u91cd\u8bd5\uff01") : Toast.error("\u63d0\u793a\uff1a\u83b7\u53d6\u4e0b\u8f7d\u94fe\u63a5\u5931\u8d25\uff01\u8bf7\u5237\u65b0\u7f51\u9875\u540e\u91cd\u8bd5\uff01");
                    })));
                }) : Toast.error("\u63d0\u793a\uff1a\u8bf7\u6253\u5f00\u6587\u4ef6\u5939\u540e\u52fe\u9009\u6587\u4ef6\uff01");
            });
        }
        static quarkEvent() {
            $(document).on("click", ".okv-btn-direct", e => {
                let selectList = NetDiskDirectService.getQuarkSelectedFile();
                if (Logger.debug("\u5938\u514b-\u9009\u62e9\u6587\u4ef6" + selectList), 0 === selectList.length) return void Toast.error("\u8bf7\u5148\u52fe\u9009\u8981\u4e0b\u8f7d\u7684\u6587\u4ef6");
                if (selectList.filter(e => !e.file).length == selectList.length) return void Toast.error("\u6682\u4e0d\u652f\u6301\u6587\u4ef6\u5939\u4e0b\u8f7d");
                let fids = selectList.filter(e => e.file).map(e => e.fid);
                NetDiskDirectService._site == SiteEnum.KuaKeHome ? Route.quarkDriect(fids).then(res => {
                    if (Logger.debug(res), 31001 == res.code) return void Toast.error("\u8bf7\u5148\u767b\u5f55\u7f51\u76d8");
                    if (0 != res.code) return void Toast.error(`\u94fe\u63a5\u83b7\u53d6\u5931\u8d25,\u8bf7\u7a0d\u540e\u518d\u8bd5(${res.code})`);
                    let data = res.data.map(e => (e.cookie = unsafeWindow.document.cookie, e));
                    sAlert.html("\u76f4\u94fe\u4fe1\u606f", NetDiskDirectService.generateDom(data), !0, "\u6211\u597d\u4e86", "#3085d6", "auto");
                }) : sAlert.error("\u8bf7\u5148\u5c06\u6587\u4ef6\u4fdd\u5b58\u5230\u81ea\u5df1\u7684\u7f51\u76d8");
            });
        }
        static commonEvent() {
            $(document).on("click", ".quark-down-item", e => {
                Core.open(e.target.dataset.url, !0);
            }), $(document).on("click", ".quark-copy-item", e => {
                GM_setClipboard(e.target.dataset.url), e.target.innerText = "\u590d\u5236\u6210\u529f";
            }), $(document).on("click", ".quark-send-item", e => __awaiter(this, void 0, void 0, (function*() {
                let url = e.target.dataset.url, filename = e.target.dataset.filename, ua = e.target.dataset.ua, ck = e.target.dataset.ck;
                "BDUSS=;" == ck && Toast.warning("cookie\u83b7\u53d6\u5f02\u5e38,\u4e0b\u8f7d\u53ef\u80fd\u4f1a\u5931\u8d25,\u53ef\u5c1d\u8bd5\u4f7f\u7528\u811a\u672c\u732b\u907f\u514d\u8be5\u95ee\u9898");
                let res = yield NetDiskDirectService.sendLinkToRPC(filename, url, ua, ck);
                e.target.innerText = res ? "\u53d1\u9001\u6210\u529f" : "\u53d1\u9001\u5931\u8d25(\u8bf7\u68c0\u67e5\u914d\u7f6e)";
            })));
        }
        static generateDom(list) {
            let rows = "";
            return list.forEach(e => {
                rows += `<tr>\n                        <td class="bili-table-cell">${e.file_name}</td>\n                        <td class="bili-table-cell">${Core.sizeFormat(e.size)}</td>\n                        <td class="bili-table-cell">\n                        <button class="okv-btn okv-btn-primary okv-btn-success quark-send-item" data-url="${e.download_url}" data-filename="${e.file_name}" data-ua="${e.ua}" data-ck="${e.cookie}">\u53d1\u9001Aria</button>\n                        <button class="okv-btn okv-btn-primary quark-copy-item" data-url="${e.download_url}">\u590d\u5236\u94fe\u63a5</button>\n                        <button class="okv-btn okv-btn-primary quark-down-item" data-url="${e.download_url}">\u4e0b\u8f7d</button>\n                        </td>\n                    </tr>`;
            }), `<div style="height: 30rem">\n                    <div style="padding-bottom: 25px;">\u5982\u679c\u51fa\u73b0403\u8bf7\u5c1d\u8bd5<a style="color: red" target="_blank" href="https://settings.wandhi.com/tools/wangpan/page.html">\u68c0\u67e5\u914d\u7f6e</a>\u6216\u5347\u7ea7<b>\u6700\u65b0\u7248\u672c</b>\n                    <p>\u76f4\u94fe<b style="color: red">\u5e76\u4e0d\u80fd</b> \u4ee3\u66ff\u7f51\u76d8VIP\u529f\u80fd\uff0c\u4e0d\u4f1a\u4f7f\u7528\u8bf7\u5148\u67e5\u770b<a href="https://wiki.wandhi.com" style="color: blue" target="_blank">Wiki</a></p>\n                    <p>\u76f4\u94fe\u529f\u80fd\u642d\u914dVIP\u4f1a\u5458\u624d\u80fd\u83b7\u53d6\u5230\u52a0\u901f\u94fe\u63a5<b>(<a href="${NetDiskDirectService.bdVip1}" target="_blank" style="color: red">\u83b7\u53d6\u4e34\u65f6VIP\u2460</a>\uff0c<a href="${NetDiskDirectService.bdVip2}" target="_blank" style="color: red">\u83b7\u53d6\u4e34\u65f6VIP\u2461</a>)</b></p>\n                    <p><b style="color: red">\u5927\u6587\u4ef6</b>\u8bf7\u4f18\u5148\u4f7f\u7528Aria\u4e4b\u7c7b\u7684\u4e0b\u8f7d\u5de5\u5177,\u76f4\u63a5\u70b9\u51fb\u4e0b\u8f7d\u5927\u6982\u7387\u4f1a\u6ca1\u6743\u9650</p>\n                    <p><b style="color: red">\u767e\u5ea6UA\uff1a</b>pan.baidu.com</p>\n                    </div>\n                    <table class="bili-table bili-table-small">\n                        <thead class="bili-table-head">\n                            <tr>                        \n                                <th class="bili-table-cell">\u6807\u9898</th>\n                                <th class="bili-table-cell">\u5927\u5c0f</th>\n                                <th class="bili-table-cell">\u64cd\u4f5c</th>\n                            </tr>\n                        </thead>\n                        <tbody class="at-table-tbody">                    \n                            ${rows}\n                        </tbody>    \n                    </table>\n                </div>`;
        }
        static initButton() {
            Core.autoLazyload(() => $(NetDiskDirectService.btnSelecotr).length > 0, () => {
                Core.prepend(NetDiskDirectService.btnSelecotr, NetDiskDirectService.btn);
            }, .5);
        }
        static getQuarkSelectedFile() {
            let selectedList = [];
            try {
                let reactDom = document.getElementsByClassName("file-list")[0], props = Core.getReact(reactDom).props;
                if (props) {
                    let fileList = props.list || [], selectedKeys = props.selectedRowKeys || [];
                    fileList.forEach(val => {
                        selectedKeys.includes(val.fid) && selectedList.push(val);
                    });
                }
                return selectedList;
            } catch (e) {
                return selectedList;
            }
        }
        static getQuarkShareSelectedFile() {
            let selectedList = [];
            try {
                let reactDom = document.getElementsByClassName("file-list")[0], props = Core.getReact(reactDom).props;
                if (props) {
                    let fileList = props.list || [], selectedKeys = props.selectedRowKeys || [];
                    fileList.forEach(val => {
                        selectedKeys.includes(val.share_id) && selectedList.push(val);
                    });
                }
                return selectedList;
            } catch (e) {
                return selectedList;
            }
        }
    }
    NetDiskDirectService.quarkBtn = '<div class="ovk-main" style="margin-right: 10px;">\n    <button type="button" class="ant-btn btn-file okv-btn-direct">\n        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMyMjIiIHN0cm9rZS13aWR0aD0iMiI+PHBhdGggc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBkPSJNOSAxMmwyIDIgMi0yeiIvPjxwYXRoIGQ9Ik0xNCA4aDEuNTUzYy44NSAwIDEuMTYuMDkzIDEuNDcuMjY3LjMxMS4xNzQuNTU2LjQzLjcyMi43NTYuMTY2LjMyNi4yNTUuNjUuMjU1IDEuNTR2NC44NzNjMCAuODkyLS4wODkgMS4yMTUtLjI1NSAxLjU0LS4xNjYuMzI3LS40MS41ODMtLjcyMi43NTctLjMxLjE3NC0uNjIuMjY3LTEuNDcuMjY3SDYuNDQ3Yy0uODUgMC0xLjE2LS4wOTMtMS40Ny0uMjY3YTEuNzc4IDEuNzc4IDAgMDEtLjcyMi0uNzU2Yy0uMTY2LS4zMjYtLjI1NS0uNjUtLjI1NS0xLjU0di00Ljg3M2MwLS44OTIuMDg5LTEuMjE1LjI1NS0xLjU0LjE2Ni0uMzI3LjQxLS41ODMuNzIyLS43NTcuMzEtLjE3NC42Mi0uMjY3IDEuNDctLjI2N0gxMSIvPjxwYXRoIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTExIDN2MTAiLz48L2c+PC9zdmc+" class="btn-icon" alt="" style="width: 20px;height: 20px">\n        <span>\u83b7\u53d6\u76f4\u94fe</span>\n    </button>\n</div>', 
    NetDiskDirectService.btnSelecotr = "", NetDiskDirectService.btn = "", NetDiskDirectService.bdVip2 = "https://wiki.wandhi.com/pan/#%F0%9F%9B%92%E5%90%88%E7%A7%9F%E5%90%A7", 
    NetDiskDirectService.bdVip1 = "http://cc.hrfx.gq";
    class AdClearService extends PluginBase {
        constructor() {
            super(...arguments), this.rules = new Map([ [ SiteEnum.Baidu, /baidu.com\/s\?wd/i ], [ SiteEnum.YouTuBe, /youtube.com\/watch/i ] ]), 
            this._unique = !1, this._appName = "\u5e7f\u544a\u6e05\u7406";
        }
        loader() {}
        run() {
            this.YoutubeMobile();
        }
        YoutubeMobile() {
            let cssText = [ "ytm-item-section-renderer:has(a[href*='googleads'])", "#masthead-ad", "ytd-rich-item-renderer.style-scope.ytd-rich-grid-row #content:has(.ytd-display-ad-renderer)", "ytd-rich-section-renderer #dismissible", ".video-ads.ytp-ad-module", "tp-yt-paper-dialog:has(yt-mealbar-promo-renderer)", "#related #player-ads", "#related ytd-ad-slot-renderer", "ytd-ad-slot-renderer", "yt-mealbar-promo-renderer" ].join(",") + "{display:none!important;}";
            Core.appendCssContent(cssText), Logger.info("YoutubeMobile AdClearService loaded");
        }
    }
    Menu = Common.Menu;
    class XhsService extends PluginBase {
        constructor() {
            super(...arguments), this.rules = new Map([ [ SiteEnum.Xhs, /www\.xiaohongshu\.com\/explore/ ] ]), 
            this._appName = "xhs", this._unique = !1, this.semiui = !0;
        }
        loader() {}
        run() {
            Logger.debug("xhs service");
            this.menu.Init([ {
                title: "\u672c\u6b21\u5173\u95ed",
                show: "\u672c\u6b21<br>\u5173\u95ed",
                type: "search"
            }, {
                title: "\u6c34\u5370\u89e3\u6790",
                show: "\u6c34\u5370<br>\u89e3\u6790",
                type: "process"
            }, {
                title: "\u7edd\u4e16\u597d\u5238",
                show: "\u7edd\u4e16<br>\u597d\u5238",
                type: "tb"
            }, {
                title: "\u4eac\u4e1c\u597d\u5238",
                show: "\u4eac\u4e1c<br>\u597d\u5238",
                type: "jd"
            } ], this._onClick);
        }
        _onClick() {
            $("body").on("click", "[data-cat=process]", (function() {
                XhsService.xhsPorcess();
            })), $("body").on("click", "[data-cat=search]", (function() {
                Menu.close();
            })), $("body").on("click", "[data-cat=tb]", (function() {
                Core.open("http://shop.huizhek.com");
            })), $("body").on("click", "[data-cat=jd]", (function() {
                Core.open("http://shop.huizhek.com");
            }));
        }
        static xhsPorcess() {
            var _a, _b, _c, _d;
            let url = Core.url;
            if (!/https:\/\/www\.xiaohongshu\.com\/explore\/[a-zA-Z0-9_\-]{5,22}/i.test(url)) return void Toast.warning("\u8bf7\u5148\u9009\u62e9\u4e00\u7bc7\u5185\u5bb9");
            if (!Core.getCookie("gid")) return void Toast.warning("\u8bf7\u5148\u767b\u5f55\u5c0f\u7ea2\u4e66");
            let info = unsafeWindow.window.__INITIAL_STATE__, noteId = null === (_a = null == info ? void 0 : info.note) || void 0 === _a ? void 0 : _a.firstNoteId.value;
            if (noteId) {
                let note = null === (_c = null === (_b = null == info ? void 0 : info.note) || void 0 === _b ? void 0 : _b.noteDetailMap[noteId]) || void 0 === _c ? void 0 : _c.note;
                if (!note) return void Toast.error("\u5185\u5bb9\u4fe1\u606f\u83b7\u53d6\u5931\u8d25");
                if (Logger.debug(note), "video" == (null == note ? void 0 : note.type)) Toast.warning("\u6682\u4e0d\u652f\u6301\u89c6\u9891\u89e3\u6790"); else if ("normal" == (null == note ? void 0 : note.type)) {
                    let selectNum = $(".fraction").text();
                    Logger.debug(selectNum);
                    let n = selectNum.match(/\d+/), num = 0;
                    null == n || n.length < 1 || (num = Number.parseInt(n[0]));
                    let code = null === (_d = null == note ? void 0 : note.imageList[num > 0 ? num - 1 : num]) || void 0 === _d ? void 0 : _d.infoList[1].url;
                    Core.open(`https://jx.wandhi.com?u=${window.btoa(code)}&t=xhsimg`);
                } else Toast.error(`\u9519\u8bef\u7684\u6570\u636e\u7c7b\u578b,\u8bf7\u5411\u4f5c\u8005\u53cd\u9988(${null == note ? void 0 : note.type})`);
            }
        }
    }
    class SettingUI extends React__default.default.Component {
        constructor(p) {
            super(p), this.configKeys = [ "search_helper_switch", "search_helper_postion" ], 
            this.handOk = e => {
                let obj = this.fromApi.getValues();
                for (let key in obj) Config.set(key, obj[key]);
                this.setState({
                    visible: !1
                }), Toast.success("\u4fdd\u5b58\u6210\u529f");
            }, this.handCancel = e => {
                this.setState({
                    visible: !1
                });
            }, this.state = {
                visible: !0,
                search_helper_switch: Config.get(ConfigEnum.Search_Helper_Switch, !0),
                search_helper_postion: Config.get(ConfigEnum.Search_Helper_Postion, "cl")
            }, this.handCancel = this.handCancel.bind(this);
        }
        render() {
            return React__default.default.createElement(React__default.default.Fragment, null, React__default.default.createElement(semiUi.Modal, {
                title: "\u63d2\u4ef6\u8bbe\u7f6e",
                visible: this.state.visible,
                onOk: this.handOk,
                onCancel: this.handCancel
            }, React__default.default.createElement(semiUi.Tabs, {
                tabPosition: "left",
                type: "line"
            }, React__default.default.createElement(semiUi.TabPane, {
                tab: React__default.default.createElement("span", null, "\u641c\u7d22\u52a9\u624b"),
                itemKey: "1"
            }, React__default.default.createElement("div", {
                className: "grid"
            }, React__default.default.createElement(semiUi.Form, {
                style: {
                    padding: "0 24px"
                },
                initValues: this.state,
                getFormApi: api => this.fromApi = api,
                render: ({formState: formState, formApi: formApi, values: values}) => React__default.default.createElement(React__default.default.Fragment, null, React__default.default.createElement(semiUi.Form.Switch, {
                    field: "search_helper_switch",
                    label: "\u641c\u7d22\u52a9\u624b"
                }), React__default.default.createElement(semiUi.Form.Select, {
                    field: "search_helper_postion",
                    label: "\u83dc\u5355\u4f4d\u7f6e",
                    style: {
                        width: "100%"
                    }
                }, React__default.default.createElement(semiUi.Form.Select.Option, {
                    value: "tl"
                }, "\u5de6\u4e0a"), React__default.default.createElement(semiUi.Form.Select.Option, {
                    value: "cl"
                }, "\u5de6\u4e2d"), React__default.default.createElement(semiUi.Form.Select.Option, {
                    value: "bl"
                }, "\u5de6\u4e0b"))),
                layout: "vertical",
                onValueChange: values => {}
            }))))));
        }
    }
    class SettingUIService extends PluginBase {
        constructor() {
            super(...arguments), this.rules = new Map([ [ SiteEnum.All, /.*?/i ] ]), this._unique = !1, 
            this.semiui = !0, this._appName = "SettingUI";
        }
        loader() {}
        run() {
            GM_registerMenuCommand("\u63d2\u4ef6\u8bbe\u7f6e", () => Core.Render(React__default.default.createElement(SettingUI, {
                key: (new Date).getTime()
            }), this._appName));
        }
    }
    class OneKeyVipGfInjection {
        constructor() {
            this.plugins = new Array, this.plugins = [ Container.Require(AdClearService), Container.Require(ControlMenuService), Container.Require(SettingUIService), Container.Require(SettingService), Container.Require(AutoExpandService), Container.Require(AliyunPanToken), Container.Require(BiliImgService), Container.Require(BiliMobileService), Container.Require(MovieService), Container.Require(MusicService), Container.Require(CsdnAdService), Container.Require(WenKuService), Container.Require(LinkJumpService), Container.Require(YoutubeService), Container.Require(XhsService), Container.Require(SearchService), Container.Require(NetDiskDirectService) ], 
            Logger.info("container loaded");
        }
        Init() {
            this.plugins.every(element => element.linkTest() ? (new Promise(resolve => {
                resolve(1);
            }).then(element.Process), Logger.debug(`element [${element.appName()}];unique:[${element.unique()}]`), 
            !element.unique()) : (Logger.debug(`element [${element.appName()}];not pass`), !0));
        }
    }
    Logger.level = LogLevel.info, Container.Require(OneKeyVipGfInjection).Init();
}));
// ==UserScript==
// @namespace         https://greasyfork.org/zh-CN/users/106222-qxin-i
 
// @name              网页限制解除(改)
// @name:en           Remove web limits(modified)
// @name:zh           网页限制解除(改)
// @name:ja           ウェブの規制緩和(変更)
 
// @author            Cat73 & iqxin(修改) 
// @contributor       iqxin
 
// @description       通杀大部分网站,可以解除禁止复制、剪切、选择文本、右键菜单的限制。原作者cat73,因为和搜索跳转脚本冲突,遂进行了改动。
// @description:en    Pass to kill most of the site, you can lift the restrictions prohibited to copy, cut, select the text, right-click menu.revised version
// @description:zh    通杀大部分网站,可以解除禁止复制、剪切、选择文本、右键菜单的限制。原作者cat73,因为和搜索跳转脚本冲突,遂进行了改动
// @description:zh-TW 通殺大部分網站,可以解除禁止復制、剪切、選擇文本、右鍵菜單的限制。
// @description:ja    サイトのほとんどを殺すために渡し、あなたは、コピー切り取り、テキスト、右クリックメニューを選択することは禁止の制限を解除することができます。
 
// @description       原作者https://www.github.com/Cat7373/,因为和搜索跳转脚本冲突,遂进行了改动
// @homepageURL       https://cat7373.github.io/remove-web-limits/
// @supportURL        https://greasyfork.org/zh-CN/scripts/28497
 
// @icon              data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAABpElEQVR4nO3Vv2uUQRDG8c/ebSMWqay0trATAxrUSi1S2AiWFoJYpNCgoBjURsHWJKeNRfAvsDgFixQqKdPZ2ViEiCJYBOQu8f1hEXO59713j7MUfLZ6d2a/O8vMO0OzDnin9Ku2Mjvuaw07xgSAYEVXe2indMhj92zpKJLnBhF8MDeye9hn6zbN70eRiqCw02Bra3up8BBLu1FEBxsBucXqW4csz0ULe4jorSCMuPU89boRELDMHiI6Y8V65bbCUTccc70RkaOwKLOg0IkyXa9qTjOu2LAs6NZuD86hrdTyxRNTkUqqdhXlHrngGRVEZsMpJwex9DxIZSHYclesIb65LCoHgIs66UJq6btDBZHZrPh8V6YBOX66LbOkTGckBYimBW2FVTNeuOZNyrFJ236Yl4NSy5SbVm1PDvhodqgyMledTdRlAtDzqfL9tfkwUtyaRkv9LwFj9B/w7wPycXOhqlJ0yZHKPChMi5MCiM47XhsopbVJAUHfrYbmN/EToN+02eLPfz9OYyZhFJzW1Jn3lTsxaKQjCkp52jy45r1ZvSbTb9M0d4PBozGZAAAAAElFTkSuQmCC
 
// @version           4.4.8
// @license           LGPLv3
 
// @match             *://*/*
// @exclude        *www.bilibili.com/video*
// @exclude        *www.bilibili.com/v*
// @exclude        *www.bilibili.com/s/*
// @exclude        *www.bilibili.com/bangumi*
// @exclude        https://www.bilibili.com/medialist/play/*
// @exclude        *www.youtube.com/watch*
// @exclude        *www.panda.tv*
// @exclude        *www.github.com*
// @exclude        https://lanhuapp.com/*
// @exclude        https://www.douyu.com/*
// @exclude        https://www.zhihu.com/signin?*
// @exclude        https://tieba.baidu.com/*
// @exclude        https://v.qq.com/*
// @exclude        *.taobao.com/*
// @exclude        *tmall.com*
// @exclude        *signin*
 
// @connect     eemm.me
// @grant       GM_getValue
// @grant       GM_setValue
// @grant       GM_addStyle
// @grant       GM_deleteValue
// @grant       GM_xmlhttpRequest
// @grant       GM_setClipboard
// @grant       GM_registerMenuCommand
// @run-at      document-start
// @downloadURL https://update.greasyfork.org/scripts/28497/Remove%20web%20limits%28modified%29.user.js
// @updateURL https://update.greasyfork.org/scripts/28497/Remove%20web%20limits%28modified%29.meta.js
// ==/UserScript==
(function() {
    'use strict';
 
    var settingData = {
        "status":1,
        "version" : 0.1,
        "message" : "啦啦啦,啦啦啦,我是卖报的小行家",
        "positionTop":"0",
        "positionLeft":"0",
        "positionRight":"auto",
        "addBtn" : true,
        "connectToTheServer" : false,
        "waitUpload":[],
        "currentURL":"null",
        "shortcut":3,
        // 域名规则列表
        "rules" : {
            "rule_def": {
                "name": "default",
                "hook_eventNames": "contextmenu|select|selectstart|copy|cut|dragstart|mousemove|beforeunload",
                "unhook_eventNames": "mousedown|mouseup|keydown|keyup",
                "dom0": true,
                "hook_addEventListener": true,
                "hook_preventDefault": true,
                "hook_set_returnValue": true,
                "add_css": true
            },
            "rule_plus": {
                "name": "default",
                "hook_eventNames": "contextmenu|select|selectstart|copy|cut|dragstart|mousedown|mouseup|mousemove|beforeunload",
                "unhook_eventNames": "keydown|keyup",
                "dom0": true,
                "hook_addEventListener": true,
                "hook_preventDefault": true,
                "hook_set_returnValue": true,
                "add_css": true
            },
            "rule_zhihu": {
                "name": "default",
                "hook_eventNames": "contextmenu|select|selectstart|copy|cut|dragstart|mousemove",
                "unhook_eventNames": "keydown|keyup",
                "dom0": true,
                "hook_addEventListener": true,
                "hook_preventDefault": true,
                "hook_set_returnValue": true,
                "add_css": true
            }
        },
        "data": [
            "b.faloo.com",
            "bbs.coocaa.com",
            "book.hjsm.tom.com",
            "book.zhulang.com",
            "book.zongheng.com",
            "chokstick.com",
            "chuangshi.qq.com",
            "city.udn.com",
            "cutelisa55.pixnet.net",
            "huayu.baidu.com",
            "imac.hk",
            "life.tw",
            "luxmuscles.com",
            "news.missevan.com",
            "read.qidian.com",
            "www.15yan.com",
            "www.17k.com",
            "www.18183.com",
            "www.360doc.com",
            "www.coco01.net",
            "www.eyu.com",
            "www.hongshu.com",
            "www.hongxiu.com",
            "www.imooc.com",
            "www.jjwxc.net",
            "www.readnovel.com",
            "www.tadu.com",
            "www.xxsy.net",
            "www.z3z4.com",
            "www.zhihu.com",
            "yuedu.163.com",
            "www.ppkao.com",
            "movie.douban.com",
            "www.ruiwen.com",
            "vipreader.qidian.com",
            "www.pigai.org",
            "www.shangc.net",
            "www.myhtlmebook.com",
            "www.yuque.com",
            "www.longmabookcn.com",
            "www.alphapolis.co.jp",
            "www.sdifen.com",
            "votetw.com",
            "boke112.com",
            "www.myhtebooks.com",
            "www.xiegw.cn",
            "chuangshi.qq.com",
            "www.uta-net.com",
            "www.bimiacg.net",
            "www.dianyuan.com",
            "origenapellido.com",
            "3g.163.com",
            "www.lu-xu.com",
            "leetcode.cn",
            "www.jianbiaoku.com",
            "www.soyoung.com",
            "doc.guandang.net",
            "www.51dongshi.com",
            "m.haodf.com",
            "www.daodoc.com",
            "www.wcqjyw.com",
            "www.szxx.com.cn",
        ]
    }
 
    var rwl_userData = null;
    var hostname = window.location.hostname;
    var btn_node = null;   
    var rule = null;
    var list = null;
    var hasFrame = false;
 
    // 储存名称
    var storageName = "iqxinStorageName";
    // 要处理的 event 列表
    var hook_eventNames, unhook_eventNames, eventNames;
    // 储存被 Hook 的函数
    var EventTarget_addEventListener = EventTarget.prototype.addEventListener;
    var document_addEventListener = document.addEventListener;
    var Event_preventDefault = Event.prototype.preventDefault;
 
    // 查看本地是否存在旧数据
    rwl_userData = GM_getValue("rwl_userData");
    if(!rwl_userData){
        rwl_userData = settingData
        // GM_setValue("rwl_userData",rwl_userData);
    }
    // 自动更新数据
    for(let value in settingData){
        if(!rwl_userData.hasOwnProperty(value)){
            rwl_userData[value] = settingData[value];
            GM_setValue("rwl_userData",rwl_userData);
        }
    }
 
    version_up_3_to_4();
 
    // 获取黑名单网站
    list = get_black_list();
 
    // 添加按钮
    // if(rwl_userData.addBtn){
        addBtn();  // 添加
        btn_node = document.getElementById("black_node");
 
        var timer = setInterval(function(){
            if(document.getElementById("black_node")){
                clearInterval(timer);
                qxinStart();
            } else {
                addBtn();
            }
        },500)
 
    // }
 
    GM_registerMenuCommand("复制限制解除 设置", setMenu)
    var userSetting = GM_getValue("rwl_userData");
 
    // // ------------------------------函数 func
 
    function qxinStart(){
        console.log("脚本: 复制限制解除(改) --- 开始执行 --- 发布者: qxin --- GitHub: https://github.com/qxinGitHub/Remove-web-limits-");
        addDragEven();
        setBtnClick();
 
        // 检查是否在黑名单中
        if(check_black_list(list,hostname)){
            try {
                if(rwl_userData.addBtn){
                    btn_node.checked = true;
                }
            } catch (e) {
                console.error("脚本rwl-错误：\n btn_node : %s\n%s\n脚本rwl-错误位置： btn_node.checked = true;",btn_node,e);
            } finally {
                init();
            }
        }
    }
 
    //添加按钮 func
    function addBtn(){
        var node = document.createElement("remove-web-limits-iqxin");
        node.id = "rwl-iqxin";
        node.className = "rwl-exempt";
 
        // 再次打开窗口小于之前窗口的情况,导致按钮出现在可视窗口之外
        var screenClientHeight = document.documentElement.clientHeight;
        var tempHeight;
        if (rwl_userData.positionTop>screenClientHeight){
            tempHeight  = screenClientHeight -40;
        } else{
            tempHeight = rwl_userData.positionTop;
        }
        // 改变窗口大小的情况
        window.onresize=function(){  
            var screenClientHeight = document.documentElement.clientHeight;
            var tempHeight;
 
            if (rwl_userData.positionTop>screenClientHeight){
                    tempHeight  = screenClientHeight -40;
            } else{
                tempHeight = rwl_userData.positionTop;
            }
 
            node.style.top =  tempHeight + "px";
        }
 
        tempHeight = tempHeight<0?0:tempHeight
        node.style.cssText = "position:fixed;top:"+tempHeight+"px;left:"+rwl_userData.positionLeft+"px;right:"+rwl_userData.positionRight+"px;";
        // node.innerHTML = '<label><input type="checkbox" name="" id="black_node">黑名单</label><qxinbutton id="delete">delete</btton>';
        // node.innerHTML = '<label>限制解除 <input type="checkbox"  name="" id="black_node"></label>';
        node.innerHTML = '<qxinbutton type="qxinbutton" id="rwl-setbtn"> set </qxinbutton> <lalala style="cursor:move; font-size:12px;">限制解除</lalala> <input type="checkbox" name="" id="black_node" >';
        if(window.self === window.top){
            if (document.querySelector("body")){
                document.body.appendChild(node);
            } else {
                document.documentElement.appendChild(node);
            }
        }
        node.addEventListener("mouseover",function(){
            node.classList.add("rwl-active-iqxin");
        });
        node.addEventListener("mouseleave",function(){
            setTimeout(function(){
                node.classList.remove("rwl-active-iqxin");
                black_check(black_node.checked);
            },100)
        });
 
        var style = document.createElement("style");
        style.type="text/css";
 
        var styleInner = "#rwl-iqxin{" +
                "position:fixed;" +
                "transform:translate(-95%,0);" +
                "width:85px;" +
                "height:25px;" +
                "font-size:12px;" +
                "font-weight: 500;" +
                "font-family:Verdana, Arial, '宋体';" +
                "color:#fff;" +
                "background:#333;" +
                "z-index:2147483647;" +
                "margin: 0;" +
                "opacity:0.05;" +
                "transition:0.3s;" +
                "overflow:hidden;" +
                "user-select:none;" +
                "text-align:center;" +
                "white-space:nowrap;" +
                "line-height:25px;" +
                "padding:0 16px;" +
                "border:1px solid #ccc;" +
                "border-width:1px 1px 1px 0;" +
                "border-bottom-right-radius:5px;" +
                "box-sizing: content-box;" +
            "}" +
            "#rwl-iqxin input{" +
                "margin: 0;" +
                "padding: 0;" +
                "vertical-align:middle;" +
                "-webkit-appearance:checkbox !important;" +
                "-moz-appearance:checkbox;" +
                "position: static;" +
                "clip: auto;" +
                "opacity: 1;" +
                "cursor: pointer;" +
            "}" +
            "#rwl-iqxin.rwl-active-iqxin{" +
                "left: 0px;" +
                "transform:translate(0,0);" +
                "opacity: 0.9;" +
                "height: 32px;" +
                "line-height: 32px" +
            "}" +
            "#rwl-iqxin label{" +
                "margin:0;" +
                "padding:0;" +
                "font-weight:500;" +
            "}" +
            "#rwl-iqxin #rwl-setbtn{" +
                "margin: 0 4px 0 0;" +
                "padding: 0 0 0 4px;" +
                "border: none;" +
                "border-radius: 2px;" +
                "cursor: pointer;" +
                "background: #fff;" +
                "color: #000;" +
            "}" +
            " "
            
        if(!rwl_userData.addBtn){
            var styleTemp = "#rwl-iqxin{display:none}";
            style.innerHTML = styleInner + styleTemp;
        } else {
            style.innerHTML = styleInner;
        }
        if(document.querySelector("#rwl-iqxin")){
            // console.log("通过style插入");
            document.querySelector("#rwl-iqxin").appendChild(style);
        } else {
            // console.log("通过GM插入");
            GM_addStyle(styleInner);
        }
    };
 
    // 给按钮绑定点击事件
    function setBtnClick(){  
        document.querySelector("#rwl-setbtn").addEventListener("click",setMenu);
    }
 
    // 菜单
     function setMenu(){
            var oldEditBox = document.querySelector("#rwl-setMenu");
            if(oldEditBox){
                oldEditBox.parentNode.removeChild(oldEditBox);
                return;
            }
            var userSetting = GM_getValue("rwl_userData");
            var upload_checked = userSetting.connectToTheServer?"checked":"";
            var btnchecked =  userSetting.addBtn?'checked':''
 
            var odom = document.createElement("div");
            odom.id = "rwl-setMenu";
            odom.style.cssText ="position: fixed;" +
                "top: 100px;" +
                "left: 50px;" +
                "padding: 10px;" +
                "background: #fff;" +
                "border-radius: 4px;";
            GM_addStyle("#rwl-setMenuSave," +
                "#rwl-reset," +
                "#rwl-setMenuClose{" +
                    "margin: 0;" +
                    "padding: 0 2px;" +
                    "border: none;" +
                    "border-radius: 2px;" +
                    "cursor: pointer;" +
                    "background: #fff;" +
                    "color: #000;" +
                "}" +
                "#rwl-reset{" +
                    "border: 1px solid #666;" +
                "}" +
                "#rwl-setMenuSave{" +
                    "border: 1px solid green;" +
                "}" +
                "#rwl-setMenuClose{" +
                    "border: 1px solid red;" +
                "}" +
                "#rwl-setMenu{" +
                    "text-align:left;" +
                    "font-size:14px;" +
                    "z-index:999999;" +
                    "border: 1px solid cornflowerblue;" +
                "}" +
                "#rwl-setMenu p{" +
                    "margin:5px auto;" +
                "}" +
                " ")
            var innerH = "" +
                "<p>距离顶部距离（单位 像素） <input id='positiontop' type='text' value=" + userSetting.positionTop + "></p>" + "" +
                // "<laberl> <p>允许上传黑名单<input id='uploadchecked'  type='checkbox' " + upload_checked + "></p>" + "</laberl>" +
                "<p id='rwl-shortcuts' title='快捷键'>快捷键：" +
                    "<select id='rwl-shortcut'>" +
                        "<option value='off'" + (userSetting.shortcut == 0?"selected":"")  + ">关闭</option>" +
                        "<option value='f1'" + (userSetting.shortcut == 1?"selected":"")  + "> F1 </option>" +
                        "<option value='ctrlf1'" + (userSetting.shortcut == 2?"selected":"")  + ">ctrl + F1</option>" +
                        "<option value='ctrlc'" + (userSetting.shortcut == 3?"selected":"")  + ">ctrl + C</option>" +
                    "</select>" +
                "</p> " +
                "<laberl> <p>显示按钮<input id='btnchecked'  type='checkbox' " + btnchecked + "> 点击脚本管理扩展可以再次打开设置</p>" + "</laberl>" +
                "<p>问题反馈地址: <a target='_blank' href='https://github.com/qxinGitHub/Remove-web-limits-'>GitHub(qxin)</a>, <a target='_blank' href='https://greasyfork.org/zh-CN/scripts/28497-remove-web-limits-modified'>GreasyFork(qxin)</a>  </P>" +
                "<p>项目原作者为 <a target='_blank' href='https://cat7373.github.io/remove-web-limits/'>cat7373</a>, <a target='_blank' href='https://github.com/Cat7373/remove-web-limits'>项目主页</a> </P>" +
                "<p>能力有限,不能每个网站都能完美</P>" +
                "<p>如若反馈,务必带上详细网址</P>" +
                "<p>  </P>" +
                // "<p><s>显示按钮（待添加）</s></p>" +
                // "<p><s>按钮透明度（待添加）</s></p>" +
                // "<p><s>快速复制（待添加）</s></p>" +
                // "<p><s>其他 (待添加）</s></p>" +
                "<p>数据存储方式为JSON,如若在此修改,注意引号逗号</P>" +
                "<textarea wrap='off' cols='45' rows='20' style='overflow:auto;border-radius:4px;'>" + JSON.stringify(userSetting.data,false,4) + "</textarea>" + 
                "<br>" +
                "<qxinbutton id='rwl-reset'>清空设置</qxinbutton> &nbsp;&nbsp;&nbsp;" +
                "<qxinbutton id='rwl-setMenuSave'>保存</qxinbutton> &nbsp;&nbsp;&nbsp;" +
                "<qxinbutton id='rwl-setMenuClose' onclick='this.parentNode.parentNode.removeChild(this.parentNode);' title='如果无法关闭 请刷新界面' >关闭</qxinbutton> &nbsp;&nbsp;&nbsp;" +
                "<span style='font-size:0.7em;'>--| qxin v4.4.8 2022-12-13 |--</span>" +
                ""
            "";
            odom.innerHTML = innerH;
            document.body.appendChild(odom);
 
            document.querySelector("#rwl-setMenuSave").addEventListener("click",saveSetting);
            document.querySelector("#rwl-setMenuClose").addEventListener("click",closeMenu);
            document.querySelector("#rwl-reset").addEventListener("click",rwlReset);
 
        }
 
    // 保存选项
    function saveSetting(){
        var positionTop = document.querySelector("#rwl-setMenu #positiontop").value;
        // var uploadChecked = document.querySelector("#rwl-setMenu #uploadchecked").checked;
        var shortcut = document.querySelector("#rwl-setMenu #rwl-shortcut").selectedIndex;
        var addBtnChecked = document.querySelector("#rwl-setMenu #btnchecked").checked;
        var codevalue = document.querySelector("#rwl-setMenu textarea").value;
        if(codevalue){
            var userSetting = GM_getValue("rwl_userData");
 
            userSetting.addBtn = addBtnChecked;
            userSetting.data = JSON.parse(codevalue);
            userSetting.positionTop = parseInt(positionTop);
            userSetting.shortcut = parseInt(shortcut);
            // userSetting.connectToTheServer = uploadChecked;
 
            GM_setValue("rwl_userData",userSetting);
            // 刷新页面
            setTimeout(function(){
                window.location.reload();
            },300);
        } else {
            alert("输入为空");
            // this.reset();
        }
        closeMenu();
    }
    // 复原菜单
    function rwlReset(){
        GM_deleteValue("rwl_userData");
        window.location.reload();
    }
 
    //关闭菜单
    function closeMenu(){
        var oldEditBox = document.querySelector("#rwl-setMenu");
        if(oldEditBox){
            oldEditBox.parentNode.removeChild(oldEditBox);
            return;
        }
    }
 
    // 增加拖拽事件 进行绑定
    function addDragEven(){
        setTimeout(function(){
            try {
                dragBtn()
            } catch (e) {
                console.error("dragBtn函数 报错");
            }
        },1000)
        // dragBtn();  // 增加拖动事件
    }
 
    // 增加拖动事件 func
    function dragBtn(){
        var rwl_node = document.querySelector("#rwl-iqxin");
        rwl_node.addEventListener("mousedown",function(event){
            rwl_node.style.transition = "null";
            var disX = event.clientX - rwl_node.offsetLeft;
            var disY = event.clientY - rwl_node.offsetTop;
 
            var move = function(event){
                rwl_node.style.left = event.clientX - disX + "px" ;
                rwl_node.style.top  = event.clientY - disY + "px" ;
            }
 
            document.addEventListener("mousemove",move);
            document.addEventListener("mouseup",function(){
                rwl_node.style.transition = "0.3s";
                document.removeEventListener("mousemove",move);
                // 此函数内所有的注释语句都是有用的
                    // 开启后,可拖动到屏幕右侧,但尚未添加css
                    // 在上面添加 rwl-active-iqxin 的地方加上判断左右,在加上相应的css即可
                    // 懒 2018-04-18 21:51:32
                // var bodyWidth = document.body.clientWidth;
                var rwl_nodeWidth = rwl_node.offsetLeft + rwl_node.offsetWidth/2;
                // if(rwl_nodeWidth > bodyWidth/2){
                //     rwl_node.style.left = "auto";
                //     rwl_node.style.right = 0;
                //     rwl_userData.positionLeft = "auto";
                //     rwl_userData.positionRight = "0";
                // } else {
                    rwl_node.style.right = rwl_userData.positionRight = "auto";
                    rwl_node.style.left = rwl_userData.positionLeft =  0;
                // }
                rwl_userData.positionTop = rwl_node.offsetTop;
                GM_setValue("rwl_userData",rwl_userData);
 
            })
        })
    }
 
    // 初始化 init func  这里才是核心
    function init() {
        // 针对个别网站采取不同的策略
        rule = clear();
        // 设置 event 列表
        hook_eventNames = rule.hook_eventNames.split("|");
        // TODO Allowed to return value
        unhook_eventNames = rule.unhook_eventNames.split("|");
        eventNames = hook_eventNames.concat(unhook_eventNames);
 
        // 调用清理 DOM0 event 方法的循环
        if(rule.dom0) {
            setInterval(clearLoop, 10 * 1000);
            setTimeout(clearLoop, 1500);
            window.addEventListener('load', clearLoop, true);
            clearLoop();
        }
 
        // hook addEventListener //导致搜索跳转失效的原因
        if(rule.hook_addEventListener) {
            EventTarget.prototype.addEventListener = addEventListener;
            document.addEventListener = addEventListener;
 
            if(hasFrame){
                for(let i = 0;i<hasFrame.length;i++){
                    hasFrame[i].contentWindow.document.addEventListener = addEventListener;
                }
            }
 
        }
 
        // hook preventDefault
        if(rule.hook_preventDefault) {
            Event.prototype.preventDefault = function() {
                if(hook_eventNames.indexOf(this.type) < 0) {
                    Event_preventDefault.apply(this, arguments);
                }
            };
 
            if(hasFrame){
                for(let i = 0;i<hasFrame.length;i++){
                    hasFrame[i].contentWindow.Event.prototype.preventDefault = function() {
                        if(hook_eventNames.indexOf(this.type) < 0) {
                            Event_preventDefault.apply(this, arguments);
                        }
                    };
                }
            }
        }
 
        // Hook set returnValue
        if(rule.hook_set_returnValue) {
            Event.prototype.__defineSetter__('returnValue', function() {
                if(this.returnValue !== true && hook_eventNames.indexOf(this.type) >= 0) {
                    this.returnValue = true;
                }
            });
        }
 
        // 添加CSS     // console.debug('url: ' + url, 'storageName：' + storageName, 'rule: ' + rule.name);
        if(rule.add_css) {
            GM_addStyle('html, :not([class*="rwl-exempt"]) {-webkit-user-select:text!important; -moz-user-select:text!important;} :not([class*="rwl-exempt"]) ::selection {color:#fff; background:#3390FF!important;}');
        } //else {
            //GM_addStyle('html, :not([class*="rwl-exempt"]) {-webkit-user-select:text!important; -moz-user-select:text!important;}');
        //}
    }
 
    // Hook addEventListener proc
    function addEventListener(type, func, useCapture) {
        var _addEventListener = this === document ? document_addEventListener : EventTarget_addEventListener;
        if(hook_eventNames.indexOf(type) >= 0) {
            _addEventListener.apply(this, [type, returnTrue, useCapture]);
        } else if(unhook_eventNames.indexOf(type) >= 0) {
            var funcsName = storageName + type + (useCapture ? 't' : 'f');
 
            if(this[funcsName] === undefined) {
                this[funcsName] = [];
                _addEventListener.apply(this, [type, useCapture ? unhook_t : unhook_f, useCapture]);
            }
 
            this[funcsName].push(func);
        } else {
            _addEventListener.apply(this, arguments);
        }
    }
 
    // 清理循环
    function clearLoop() {
        rule = clear() // 对于动态生成的节点,随时检测
        var elements = getElements();
 
        for(var i in elements) {
          for(var j in eventNames) {
            var name = 'on' + eventNames[j];
 
            // ;?未解决
                // 2018-04-02 elements中会有字符串出现,原版不会,问题不明,根本原因尚未解决
                // 相关反馈  https://greasyfork.org/zh-CN/forum/discussion/36014
                // 问题版本号  v3.0.7
                // 问题补充   之前可以使用,具体版本未测（2018-04-02 21:27:53）,原版可以使用
            if(Object.prototype.toString.call(elements[i])=="[object String]"){
                continue;
            }
 
            // console.log(elements[i])
            // if(typeof elements[i][name] === "object"){
            //     console.log(typeof elements[i][name])
            // }
            if(elements[i][name] !== null && elements[i][name] !== onxxx) {
                if(unhook_eventNames.indexOf(eventNames[j]) >= 0) {
                    elements[i][storageName + name] = elements[i][name];
                    elements[i][name] = onxxx;
              } else {
                    elements[i][name] = null;
              }
            }
          }
        }
        
        document.onmousedown = function(){return true;};
    }
 
    // 返回true的函数
    function returnTrue(e) {
        return true;
    }
    function unhook_t(e) {
        return unhook(e, this, storageName + e.type + 't');
    }
    function unhook_f(e) {
        return unhook(e, this, storageName + e.type + 'f');
    }
    function unhook(e, self, funcsName) {
        var list = self[funcsName];
        for(var i in list) {
            list[i](e);
        }
 
        e.returnValue = true;
        return true;
    }
    function onxxx(e) {
        var name = storageName + 'on' + e.type;
        this[name](e);
 
        e.returnValue = true;
        return true;
    }
 
    // 获取所有元素 包括document
    function getElements() {
        var elements = Array.prototype.slice.call(document.getElementsByTagName('*'));
        elements.push(document);
 
        // 循环所有 frame 窗口
        var frames = document.querySelectorAll("frame")
        if(frames){
            hasFrame = frames;
            var frames_element;
            for (let i = 0;i<frames.length;i++){
                frames_element = Array.prototype.slice.call(frames[i].contentWindow.document.querySelectorAll("*"))
                elements.push(frames[i].contentWindow.document)
                elements = elements.concat(frames_element);
            }
        }
        return elements;
    };
 
    // 获取黑名单网站 Func
    function get_black_list(){
        // 之前版本可能导致存储空的字符串
            // 2018-06-11 15:11:44 保留,当容错处理
        var data_temp = rwl_userData.data;
        data_temp = data_temp.filter(function(item){
                return item.length>1;
            })
        return data_temp;
    }
    
    // 检查是否存在于黑名单中 返回位置 func
    function check_black_list(list,host){
        for(let i=0;i<list.length;i++){
            if(~hostname.indexOf(list[i])){
                return i+1;  //万一匹配到第一个,返回0
            }
        }
        return false;
    }
 
    // 鼠标点击后按钮后 检查是否在黑名单
    function black_check(bool){
        var list = GM_getValue("rwl_userData").data
        var check = check_black_list(list,hostname);
 
        if (bool && !check) {
            list = list.concat(hostname);
            // console.log("选中 不在黑名单, 增加",hostname,list);
            rwl_userData.waitUpload.push(hostname); //准备上传
            rwl_userData.currentURL = window.location.href;
            // console.log("after: ",rwl_userData.waitUpload)
 
            saveData(list);
            init();
 
        }else if(!bool && check){
            list.splice(check-1,1);
            saveData(list);
            // 刷新页面
            setTimeout(function(){
                window.location.reload(true);
                console.log("刷新页面loading");
            },350);
        }else{
            return false;
        }
    }
 
    // 保存本地数据,并将数据上传至服务器
    function saveData(lists){
        lists = lists.filter(function(item){
            return item.length>1;
        })
 
        // 更新数据
        rwl_userData.data = lists.sort();
 
        // 将本地黑名单上传
        // if (rwl_userData.waitUpload.length > 0 && rwl_userData.connectToTheServer){
        //     // console.log("rwl : 上传...",rwl_userData.waitUpload);
        //     // console.log("rwl : 开始上传-----");
        //     GM_xmlhttpRequest({
        //       method: "POST",
        //       // url: "http://127.0.0.1:8000/tool/testajax/",
        //       url: "http://eemm.me/tool/rwl_upload/",
        //       data: JSON.stringify(rwl_userData),
        //       headers: {
        //         "Content-Type": "application/x-www-form-urlencoded"
        //       },
        //       onload: function(response) {
        //         // console.log("rwl : 上传成功----");
        //       }
        //     });
        //     rwl_userData.waitUpload = [];
        // }
 
        GM_setValue("rwl_userData",rwl_userData);
        return rwl_userData;
    }
 
    // 数组去重
    function unique(arr) {
      var ret = []
      for (var i = 0; i < arr.length; i++) {
        var item = arr[i]
        if (ret.indexOf(item) === -1) {
          ret.push(item)
        }
      }
      return ret;
    }
 
    // 复制到剪贴板
    function setClipboard(){
        var text_obj = window.getSelection();
        var text = text_obj.toString();
        GM_setClipboard(text);
 
    }
 
    // 快捷键 F1（ctrl+f1） 复制 
    function hotkey() {
        var a = window.event.keyCode;
        // if ((a == 112) && (event.ctrlKey)) {
        if (a == 112 && userSetting.shortcut == 1) {
            event.preventDefault();
            setClipboard();
            event.keyCode=0;
            event.returnValue=false;
            return false; 
        } else if (a == 112 && (event.ctrlKey) && userSetting.shortcut == 2){
            setClipboard();
        } else if((a == 67) && (event.ctrlKey) && userSetting.shortcut == 3){
            setClipboard();
        }else {
            console.log("关闭了快捷键");
        }
    } 
    document.onkeydown = hotkey; //当onkeydown 事件发生时调用hotkey函数  
 
    // 部分网站采用了其他的防复制手段
    function clear(){
        // console.log("进入clear",hostname,rwl_userData.rules);
        switch (hostname){
            case "chuangshi.qq.com": clear_chuangshi();break;
            case "votetw.com": clear_votetw();break;
            case "www.myhtebooks.com": clear_covers(".fullimg");break;
            case "www.z3z4.com": clear_covers(".moviedownaddiv"); break;
            case "huayu.baidu.com": clear_covers("#jqContextMenu"); break;
            case "www.myhtlmebook.com": clear_covers("img.fullimg"); break;
            case "www.szxx.com.cn": clear_covers("img#adCover"); break;
            case "zhihu.com":
            case "www.zhihu.com": return rwl_userData.rules.rule_zhihu; break;
            case "t.bilibili.com": clear_link_bilibili(); break;
            case "www.uslsoftware.com": clear_covers(".protect_contents-overlay");clear_covers(".protect_alert"); return rwl_userData.rules.rule_plus; break;
            case "www.longmabookcn.com": clear_covers(".fullimg"); return rwl_userData.rules.rule_plus; break;
            case "boke112.com": return rwl_userData.rules.rule_plus; break;
            case "www.shangc.net": return rwl_userData.rules.rule_plus; break;
            // 去除弹窗
            case "www.daodoc.com": clear_marks(".marks"); break;
            case "www.wcqjyw.com": clear_marks(".marks"); break;
            case "www.jianbiaoku.com": clear_marks(".layui-layer-shade"); break;
        }
        return rwl_userData.rules.rule_def;
    }
    // 去除覆盖层
    function clear_covers(ele){
        var odiv = document.querySelector(ele);
        if(odiv){
            odiv.parentNode.removeChild(odiv);
        }
    }
    // b站将文字嵌套在链接中
    function clear_link_bilibili(){
        var odiv = document.querySelector(".description");
        if(odiv){
            var tDiv = odiv.querySelector(".content-ellipsis");
            var aDiv = odiv.querySelector("a");
             odiv.appendChild(tDiv);
        }
    }
    // https://votetw.com/wiki/%E6%9E%97%E6%99%BA%E5%A0%85
    // 会创建多个无id,无class的div,覆盖在文字上层
    function clear_votetw(){
        var odivs = document.querySelectorAll(".mw-parser-output>div")
        odivs.forEach(function(value){
            value.setAttribute("style","");
        })
    }

    // 去除弹窗, 复制后会出现弹窗提示, 但实际已经复制成功
    function clear_marks(node){
        GM_addStyle(`
            ${node} {
                display: none !important;
            }
        `)
    }
 
    // 创世中文网
    function clear_chuangshi(){
        console.log("创世中文网 开始执行");

        // JS 汉字与Unicode码的相互转化
            // https://www.cnblogs.com/wwlhome/p/5650744.html
        function tounicode(data)
        {
            if(data == '') return '请输入汉字';
            var str =''; 
            for(var i=0;i<data.length;i++)
            {
                str+="\\u"+parseInt(data[i].charCodeAt(0),10).toString(16);
            }
            return str;
        }
        function tohanzi(data)
        {
            if(data == '') return '请输入十六进制unicode';
            data = data.split("\\u");
            var str ='';
            for(var i=0;i<data.length;i++)
            {
                str+=String.fromCharCode(parseInt(data[i],16).toString(10));
            }
            return str;
        }
        // javascript中的replace函数同时替换多个字符串
            // https://bbs.csdn.net/topics/320097246
        Array.prototype.each = function(trans) {
                for (var i=0; i<this.length; i++)
                    this[i] = trans(this[i], i, this);
                return this;
            };
        Array.prototype.map = function(trans) {
            return [].concat(this).each(trans);
        };
        RegExp.escape = function(str) {
            return new String(str).replace(/([.*+?^=!:${}()|[\]\/\\])/g, '\\$1');
        };
        function properties(obj) {
            var props = [];
            for (var p in obj) props.push(p);
            return props;
        }
        // ---------------------------------------------
        var bookreadercontent = document.querySelector(".bookreadercontent");
        if(bookreadercontent){
            var str = bookreadercontent.innerText;
            var strUnicode = tounicode(str);
            var replacements = {"e2af":"4e09","e2af":"4e0b","e2c9":"4e3b","e2d6":"4e48","e2b2":"4e4b","e2a6":"4e5f","e294":"4e8b","e2e9":"4e8c","e30a":"4e8e","e292":"4e94","e298":"4e9b","e2a2":"4ee3","e2f0":"4f46","e30e":"4f4d","e305":"4f53","e296":"4f5c","e2d3":"4f60","e2db":"4f7f","e29b":"516c","e2b0":"5176","e2ed":"51fa","e2eb":"5206","e2f1":"5229","e307":"5230","e2ce":"5236","e2e6":"524d","e2ea":"529b","e2a8":"52a0","e2a5":"5316","e2bd":"5341","e302":"539f","e2df":"53bb","e2c7":"53c8","e303":"53cd","e2ac":"53d1","e2f8":"53ea","e30b":"5404","e29c":"5408","e2d7":"540c","e2d8":"540e","e306":"5411","e2c5":"547d","e2b4":"56db","e2f9":"56e0","e2ca":"5730","e2ef":"5916","e2bc":"591a","e301":"5929","e29a":"597d","e2b7":"5b50","e2cc":"5b83","e2ee":"5b9a","e2ff":"5bb6","e2e8":"5c0f","e2d4":"5c31","e2d5":"5c55","e2a1":"5de5","e2a0":"5e73","e2fe":"5e74","e2c4":"5e76","e2c8":"5ea6","e2ae":"5efa","e304":"5f62","e291":"5f88","e2e2":"5f97","e2f2":"5fc3","e295":"6027","e2d9":"60c5","e2be":"60f3","e2c3":"610f","e30d":"6210","e2ba":"6216","e2fa":"6240","e29e":"628a","e2a7":"63d0","e2d2":"653f","e2ad":"6599","e2cd":"65b0","e2f3":"65b9"};
            var regex = new RegExp(properties(replacements).map(RegExp.escape).join("|"), "g");
            strUnicode = strUnicode.replace(regex, function($0) { return replacements[$0]; });
            
            // console.log(strUnicode)
            strUnicode = strUnicode.replace("u0","");
            str = tohanzi(strUnicode);
    
            bookreadercontent.innerText = str;
        }


    }
 
    // 3.x.x 过渡 4.x.x 版本
    function version_up_3_to_4(){
        var old_version = GM_getValue("black_list");
        if(!old_version){return};
        rwl_userData.data = unique(rwl_userData.data.concat(old_version.data));
        GM_setValue("rwl_userData",rwl_userData);
 
        GM_deleteValue("black_list");
        GM_deleteValue("rwl_userdata");
    }
})(); 
Douglas Crockford

Blog
Books
Videos
2023 Appearance
JavaScript
Misty
JSLint
JSON
Github
Electric Communities
Mastodon/Layer8
Flickr Photo Album
ResearchGate
LinkedIn
About
2019-05-27
The Little JavaScripter
In 1974, Daniel P. Friedman published a little book called The Little LISPer. It was only 68 pages, but it did a remarkable thing: It could teach you to think recursively. It used some pretend dialect of LISP (which was written in all caps in those days). The dialect didn't fully conform to any real LISP. But that was ok because it wasn't really about LISP, it was about recursive functions. You didn't need a computer in order to work through the exercises. After reading the book, I was changed. In a good way. There are very few books that deeply change the way that you think. This is one of those books.
The format is a programmed text with questions on the left side and answers on the right. The way you use it is to read a question, think about the question, come up with an answer, and then compare your answer to Friedman's answer.
He used the names of foods as the symbols that are manipulated by your functions, and little jokes were scattered around to pull you back when things get so deep that your head is going to pop off. It even has a place reserved for JELLY STAINS!
The book has been through several revisions. The latest, The Little Schemer (Fourth Edition), updated by Friedman and Matthias Felleisen, now conforms more closely to a real programming language, Scheme, and has new chapters which delve much deeper into recursive function theory and language processors.
Felleisen is not as comfortable with the programmed text format, so instead of questions and answers, he has a deranged dialog going on which reads a little like Sméagol and Gollum discussing (quote (fishes)).
The Little Schemer is not a complete book on programming. It is weak in practical concerns like documentation, defensive programming, and computational efficiency. The development of a system of arithmetic from three primitives is delightful from a mathematical perspective and shockingly horrible from an engineering perspective.
It also will not teach you very much about Scheme. It touches on only a very small part of the language: a very good part.
Despite its flaws, the book has a very loyal following and that is because it works. It teaches one thing, a thing that is very difficult to teach, a thing that every professional programmer should know, and it does it really well. These are lessons that stick with you. You need to grab a sandwich and study this book.
The Little JavaScripter
JavaScript has much in common with Scheme. It is a dynamic language. It has a flexible datatype (arrays) that can easily simulate s-expressions. And most importantly, functions are lambdas. All JavaScript programmers should have recursive functions in their toolkits.
Because of this deep similarity, all of the functions in The Little Schemer can be written in JavaScript. The syntaxes of these two languages are very different, so some transformation rules are needed.
Little Scheme
JavaScript
(define foo (lambda (a b c) (body)))
const foo = function (a, b, c) {
    return body;
};
function foo(a, b, c) {
    return body;
}
(foo a b c)
foo(a, b, c)
(cond
    (p1 e1)
    (p2 e2)
    (else en)
)
(
    p1
    ? e1
    : (
        p2
        ? e2
        : en
    )
)
(and p1 p2 ... pn)
(p1 && p2 ... && pn)
(or p1 p2 ... pn)
(p1 || p2 ... || pn)
'()
null
'a
"a"
'(a b c)
["a", ["b", ["c"]]]
foo?
isFoo
foo*
foostar
#t #f
true false

So get a copy of The Little Schemer and start recursing. I have prepared a file containing primitive functions (cons, cdr, etc.), a pair of functions (p and s) for converting from s-expressions to text and back), and most of the functions in the book, expressed in JavaScript.
Pay particular attention to The Applicative Order Y Combinator, one of the most strange and wonderful artifacts of Computer Science.
function Y(le) {
    return (function (f) {
        return f(f);
    }(function (f) {
        return le(function (x) {
            return f(f)(x);
        });
    }));
}
Perhaps even more strange and wonderful, nowhere in this book about recursive functions is the Factorial Function ever mentioned. So here is my own special contribution to triteness and hackneyed banality:
var factorial = Y(function (fac) {
    return function (n) {
        return (
            n <= 2
            ? n
            : n * fac(n - 1)
        );
    };
});

var number120 = factorial(5);
Little Scheme in JavaScript.
The final chapter of The Little Schemer is a Little Scheme interpreter, capable of evaluating most of the expressions in the book. I made a couple of modifications.
I added the define function, which allows you to enter all of the Scheme functions and run them.
It can use your own JavaScript functions as Scheme primitives, so you can add new JavaScript capability without modifying the interpreter.
It runs in a web page, so you can execute your Scheme programs in any web browser. Just type your well-formed functions into the input box, press the big fat button, and see the result in the output box.
This interpreter was not designed for speed or reliability, so don't lean on it too hard. But it is responsive, and it is a good companion to the book.
(define demo '(((hotdogs))(and)(pickle) relish))
(car (car demo))
Douglas Crockford

Blog
Books
Videos
2023 Appearance
JavaScript
Misty
JSLint
JSON
Github
Electric Communities
Mastodon/Layer8
Flickr Photo Album
ResearchGate
LinkedIn
About
2019-05-27
The Little JavaScripter
In 1974, Daniel P. Friedman published a little book called The Little LISPer. It was only 68 pages, but it did a remarkable thing: It could teach you to think recursively. It used some pretend dialect of LISP (which was written in all caps in those days). The dialect didn't fully conform to any real LISP. But that was ok because it wasn't really about LISP, it was about recursive functions. You didn't need a computer in order to work through the exercises. After reading the book, I was changed. In a good way. There are very few books that deeply change the way that you think. This is one of those books.
The format is a programmed text with questions on the left side and answers on the right. The way you use it is to read a question, think about the question, come up with an answer, and then compare your answer to Friedman's answer.
He used the names of foods as the symbols that are manipulated by your functions, and little jokes were scattered around to pull you back when things get so deep that your head is going to pop off. It even has a place reserved for JELLY STAINS!
The book has been through several revisions. The latest, The Little Schemer (Fourth Edition), updated by Friedman and Matthias Felleisen, now conforms more closely to a real programming language, Scheme, and has new chapters which delve much deeper into recursive function theory and language processors.
Felleisen is not as comfortable with the programmed text format, so instead of questions and answers, he has a deranged dialog going on which reads a little like Sméagol and Gollum discussing (quote (fishes)).
The Little Schemer is not a complete book on programming. It is weak in practical concerns like documentation, defensive programming, and computational efficiency. The development of a system of arithmetic from three primitives is delightful from a mathematical perspective and shockingly horrible from an engineering perspective.
It also will not teach you very much about Scheme. It touches on only a very small part of the language: a very good part.
Despite its flaws, the book has a very loyal following and that is because it works. It teaches one thing, a thing that is very difficult to teach, a thing that every professional programmer should know, and it does it really well. These are lessons that stick with you. You need to grab a sandwich and study this book.
The Little JavaScripter
JavaScript has much in common with Scheme. It is a dynamic language. It has a flexible datatype (arrays) that can easily simulate s-expressions. And most importantly, functions are lambdas. All JavaScript programmers should have recursive functions in their toolkits.
Because of this deep similarity, all of the functions in The Little Schemer can be written in JavaScript. The syntaxes of these two languages are very different, so some transformation rules are needed.
Little Scheme
JavaScript
(define foo (lambda (a b c) (body)))
const foo = function (a, b, c) {
    return body;
};
function foo(a, b, c) {
    return body;
}
(foo a b c)
foo(a, b, c)
(cond
    (p1 e1)
    (p2 e2)
    (else en)
)
(
    p1
    ? e1
    : (
        p2
        ? e2
        : en
    )
)
(and p1 p2 ... pn)
(p1 && p2 ... && pn)
(or p1 p2 ... pn)
(p1 || p2 ... || pn)
'()
null
'a
"a"
'(a b c)
["a", ["b", ["c"]]]
foo?
isFoo
foo*
foostar
#t #f
true false

So get a copy of The Little Schemer and start recursing. I have prepared a file containing primitive functions (cons, cdr, etc.), a pair of functions (p and s) for converting from s-expressions to text and back), and most of the functions in the book, expressed in JavaScript.
Pay particular attention to The Applicative Order Y Combinator, one of the most strange and wonderful artifacts of Computer Science.
function Y(le) {
    return (function (f) {
        return f(f);
    }(function (f) {
        return le(function (x) {
            return f(f)(x);
        });
    }));
}
Perhaps even more strange and wonderful, nowhere in this book about recursive functions is the Factorial Function ever mentioned. So here is my own special contribution to triteness and hackneyed banality:
var factorial = Y(function (fac) {
    return function (n) {
        return (
            n <= 2
            ? n
            : n * fac(n - 1)
        );
    };
});

var number120 = factorial(5);
Little Scheme in JavaScript.
The final chapter of The Little Schemer is a Little Scheme interpreter, capable of evaluating most of the expressions in the book. I made a couple of modifications.
I added the define function, which allows you to enter all of the Scheme functions and run them.
It can use your own JavaScript functions as Scheme primitives, so you can add new JavaScript capability without modifying the interpreter.
It runs in a web page, so you can execute your Scheme programs in any web browser. Just type your well-formed functions into the input box, press the big fat button, and see the result in the output box.
This interpreter was not designed for speed or reliability, so don't lean on it too hard. But it is responsive, and it is a good companion to the book.
(define demo '(((hotdogs))(and)(pickle) relish))
(car (car demo))
Douglas Crockford

Blog
Books
Videos
2023 Appearance
JavaScript
Misty
JSLint
JSON
Github
Electric Communities
Mastodon/Layer8
Flickr Photo Album
ResearchGate
LinkedIn
About
2019-05-27
The Little JavaScripter
In 1974, Daniel P. Friedman published a little book called The Little LISPer. It was only 68 pages, but it did a remarkable thing: It could teach you to think recursively. It used some pretend dialect of LISP (which was written in all caps in those days). The dialect didn't fully conform to any real LISP. But that was ok because it wasn't really about LISP, it was about recursive functions. You didn't need a computer in order to work through the exercises. After reading the book, I was changed. In a good way. There are very few books that deeply change the way that you think. This is one of those books.
The format is a programmed text with questions on the left side and answers on the right. The way you use it is to read a question, think about the question, come up with an answer, and then compare your answer to Friedman's answer.
He used the names of foods as the symbols that are manipulated by your functions, and little jokes were scattered around to pull you back when things get so deep that your head is going to pop off. It even has a place reserved for JELLY STAINS!
The book has been through several revisions. The latest, The Little Schemer (Fourth Edition), updated by Friedman and Matthias Felleisen, now conforms more closely to a real programming language, Scheme, and has new chapters which delve much deeper into recursive function theory and language processors.
Felleisen is not as comfortable with the programmed text format, so instead of questions and answers, he has a deranged dialog going on which reads a little like Sméagol and Gollum discussing (quote (fishes)).
The Little Schemer is not a complete book on programming. It is weak in practical concerns like documentation, defensive programming, and computational efficiency. The development of a system of arithmetic from three primitives is delightful from a mathematical perspective and shockingly horrible from an engineering perspective.
It also will not teach you very much about Scheme. It touches on only a very small part of the language: a very good part.
Despite its flaws, the book has a very loyal following and that is because it works. It teaches one thing, a thing that is very difficult to teach, a thing that every professional programmer should know, and it does it really well. These are lessons that stick with you. You need to grab a sandwich and study this book.
The Little JavaScripter
JavaScript has much in common with Scheme. It is a dynamic language. It has a flexible datatype (arrays) that can easily simulate s-expressions. And most importantly, functions are lambdas. All JavaScript programmers should have recursive functions in their toolkits.
Because of this deep similarity, all of the functions in The Little Schemer can be written in JavaScript. The syntaxes of these two languages are very different, so some transformation rules are needed.
Little Scheme
JavaScript
(define foo (lambda (a b c) (body)))
const foo = function (a, b, c) {
    return body;
};
function foo(a, b, c) {
    return body;
}
(foo a b c)
foo(a, b, c)
(cond
    (p1 e1)
    (p2 e2)
    (else en)
)
(
    p1
    ? e1
    : (
        p2
        ? e2
        : en
    )
)
(and p1 p2 ... pn)
(p1 && p2 ... && pn)
(or p1 p2 ... pn)
(p1 || p2 ... || pn)
'()
null
'a
"a"
'(a b c)
["a", ["b", ["c"]]]
foo?
isFoo
foo*
foostar
#t #f
true false

So get a copy of The Little Schemer and start recursing. I have prepared a file containing primitive functions (cons, cdr, etc.), a pair of functions (p and s) for converting from s-expressions to text and back), and most of the functions in the book, expressed in JavaScript.
Pay particular attention to The Applicative Order Y Combinator, one of the most strange and wonderful artifacts of Computer Science.
function Y(le) {
    return (function (f) {
        return f(f);
    }(function (f) {
        return le(function (x) {
            return f(f)(x);
        });
    }));
}
Perhaps even more strange and wonderful, nowhere in this book about recursive functions is the Factorial Function ever mentioned. So here is my own special contribution to triteness and hackneyed banality:
var factorial = Y(function (fac) {
    return function (n) {
        return (
            n <= 2
            ? n
            : n * fac(n - 1)
        );
    };
});

var number120 = factorial(5);
Little Scheme in JavaScript.
The final chapter of The Little Schemer is a Little Scheme interpreter, capable of evaluating most of the expressions in the book. I made a couple of modifications.
I added the define function, which allows you to enter all of the Scheme functions and run them.
It can use your own JavaScript functions as Scheme primitives, so you can add new JavaScript capability without modifying the interpreter.
It runs in a web page, so you can execute your Scheme programs in any web browser. Just type your well-formed functions into the input box, press the big fat button, and see the result in the output box.
This interpreter was not designed for speed or reliability, so don't lean on it too hard. But it is responsive, and it is a good companion to the book.
(define demo '(((hotdogs))(and)(pickle) relish))
(car (car demo))
Douglas Crockford

Blog
Books
Videos
2023 Appearance
JavaScript
Misty
JSLint
JSON
Github
Electric Communities
Mastodon/Layer8
Flickr Photo Album
ResearchGate
LinkedIn
About
2019-05-27
The Little JavaScripter
In 1974, Daniel P. Friedman published a little book called The Little LISPer. It was only 68 pages, but it did a remarkable thing: It could teach you to think recursively. It used some pretend dialect of LISP (which was written in all caps in those days). The dialect didn't fully conform to any real LISP. But that was ok because it wasn't really about LISP, it was about recursive functions. You didn't need a computer in order to work through the exercises. After reading the book, I was changed. In a good way. There are very few books that deeply change the way that you think. This is one of those books.
The format is a programmed text with questions on the left side and answers on the right. The way you use it is to read a question, think about the question, come up with an answer, and then compare your answer to Friedman's answer.
He used the names of foods as the symbols that are manipulated by your functions, and little jokes were scattered around to pull you back when things get so deep that your head is going to pop off. It even has a place reserved for JELLY STAINS!
The book has been through several revisions. The latest, The Little Schemer (Fourth Edition), updated by Friedman and Matthias Felleisen, now conforms more closely to a real programming language, Scheme, and has new chapters which delve much deeper into recursive function theory and language processors.
Felleisen is not as comfortable with the programmed text format, so instead of questions and answers, he has a deranged dialog going on which reads a little like Sméagol and Gollum discussing (quote (fishes)).
The Little Schemer is not a complete book on programming. It is weak in practical concerns like documentation, defensive programming, and computational efficiency. The development of a system of arithmetic from three primitives is delightful from a mathematical perspective and shockingly horrible from an engineering perspective.
It also will not teach you very much about Scheme. It touches on only a very small part of the language: a very good part.
Despite its flaws, the book has a very loyal following and that is because it works. It teaches one thing, a thing that is very difficult to teach, a thing that every professional programmer should know, and it does it really well. These are lessons that stick with you. You need to grab a sandwich and study this book.
The Little JavaScripter
JavaScript has much in common with Scheme. It is a dynamic language. It has a flexible datatype (arrays) that can easily simulate s-expressions. And most importantly, functions are lambdas. All JavaScript programmers should have recursive functions in their toolkits.
Because of this deep similarity, all of the functions in The Little Schemer can be written in JavaScript. The syntaxes of these two languages are very different, so some transformation rules are needed.
Little Scheme
JavaScript
(define foo (lambda (a b c) (body)))
const foo = function (a, b, c) {
    return body;
};
function foo(a, b, c) {
    return body;
}
(foo a b c)
foo(a, b, c)
(cond
    (p1 e1)
    (p2 e2)
    (else en)
)
(
    p1
    ? e1
    : (
        p2
        ? e2
        : en
    )
)
(and p1 p2 ... pn)
(p1 && p2 ... && pn)
(or p1 p2 ... pn)
(p1 || p2 ... || pn)
'()
null
'a
"a"
'(a b c)
["a", ["b", ["c"]]]
foo?
isFoo
foo*
foostar
#t #f
true false

So get a copy of The Little Schemer and start recursing. I have prepared a file containing primitive functions (cons, cdr, etc.), a pair of functions (p and s) for converting from s-expressions to text and back), and most of the functions in the book, expressed in JavaScript.
Pay particular attention to The Applicative Order Y Combinator, one of the most strange and wonderful artifacts of Computer Science.
function Y(le) {
    return (function (f) {
        return f(f);
    }(function (f) {
        return le(function (x) {
            return f(f)(x);
        });
    }));
}
Perhaps even more strange and wonderful, nowhere in this book about recursive functions is the Factorial Function ever mentioned. So here is my own special contribution to triteness and hackneyed banality:
var factorial = Y(function (fac) {
    return function (n) {
        return (
            n <= 2
            ? n
            : n * fac(n - 1)
        );
    };
});

var number120 = factorial(5);
Little Scheme in JavaScript.
The final chapter of The Little Schemer is a Little Scheme interpreter, capable of evaluating most of the expressions in the book. I made a couple of modifications.
I added the define function, which allows you to enter all of the Scheme functions and run them.
It can use your own JavaScript functions as Scheme primitives, so you can add new JavaScript capability without modifying the interpreter.
It runs in a web page, so you can execute your Scheme programs in any web browser. Just type your well-formed functions into the input box, press the big fat button, and see the result in the output box.
This interpreter was not designed for speed or reliability, so don't lean on it too hard. But it is responsive, and it is a good companion to the book.
(define demo '(((hotdogs))(and)(pickle) relish))
(car (car demo))
// ==UserScript==
// @name        Direct links out
// @name:ru     Прямые ссылки наружу
// @description Removes all "You are leaving our site" and redirection stuff from links
// @description:ru Убирает "Бла-бла-бла, Вы покидаете наш сайт" и переадресации из ссылок
// @namespace   https://github.com/nokeya
// @author      nokeya
// @update      https://github.com/nokeya/direct-links-out/raw/master/direct-links-out.user.js
// @icon        https://raw.githubusercontent.com/nokeya/direct-links-out/master/icon.png
// @version     2.19
// @grant       none
//google
// @include     *://google.*
// @include     *://www.google.*
// @include     *://encrypted.google.*
//yandex
// @match       *://yandex.ru/*
// @match       *://yandex.ua/*
// @match       *://yandex.by/*
// @match       *://yandex.kz/*
// @match       *://yandex.com.tr/*
// @match       *://yandex.com/*
// @match       *://*.yandex.ru/*
// @match       *://*.yandex.ua/*
// @match       *://*.yandex.by/*
// @match       *://*.yandex.kz/*
// @match       *://*.yandex.com.tr/*
// @match       *://*.yandex.com/*
//youtube
// @match       *://youtube.com/*
// @match       *://*.youtube.com/*
//wikimapia
// @match       *://wikimapia.org/*
//deviantart
// @match       *://deviantart.com/*
// @match       *://*.deviantart.com/*
//joyreactor
// @match       *://joyreactor.cc/*
// @match       *://*.joyreactor.cc/*
// @match       *://reactor.cc/*
// @match       *://*.reactor.cc/*
// @match       *://joyreactor.com/*
// @match       *://*.joyreactor.com/*
//vk
// @match       *://vk.com/*
// @match       *://*.vk.com/*
//ok
// @match       *://ok.ru/*
// @match       *://*.ok.ru/*
//steam
// @match       *://steamcommunity.com/*
// @match       *://*.steamcommunity.com/*
//fb
// @match       *://facebook.com/*
// @match       *://*.facebook.com/*
//twitter
// @match       *://twitter.com/*
// @match       *://*.twitter.com/*
//4pda
// @match       *://4pda.ru/*
// @match       *://*.4pda.ru/*
//kickass
// @match       *://kat.cr/*
// @match       *://kickassto.co/*
// @match       *://katproxy.is/*
// @match       *://thekat.tv/*
// @match       *://*.kat.cr/*
// @match       *://*.kickassto.co/*
// @match       *://*.katproxy.is/*
// @match       *://*.thekat.tv/*
//AMO
// @match       *://addons.mozilla.org/*
//pixiv
// @match       *://pixiv.net/*
// @match       *://*.pixiv.net/*
//tumblr
// @match       *://tumblr.com/*
// @match       *://*.tumblr.com/*
//danieldefo
// @match       *://danieldefo.ru/*
// @match       *://*.danieldefo.ru/*
//yaplakal
// @match       *://yaplakal.com/*
// @match       *://*.yaplakal.com/*
//soundcloud
// @match       *://soundcloud.com/*
// @match       *://*.soundcloud.com/*
//upwork
// @match       *://upwork.com/*
// @match       *://*.upwork.com/*
//picarto
// @match       *://picarto.tv/*
// @match       *://*.picarto.tv/*
//taker
// @match       *://taker.im/*
// @match       *://*.taker.im/*
//forumavia
// @match       *://*.forumavia.ru/*
//slack
// @match       *://*.slack.com/*
//instagram
// @match       *://instagram.com/*
// @match       *://*.instagram.com/*

// @downloadURL https://update.greasyfork.org/scripts/15857/Direct%20links%20out.user.js
// @updateURL https://update.greasyfork.org/scripts/15857/Direct%20links%20out.meta.js
// ==/UserScript==
(function() {
    // anchors and functions
    var anchor;
    var after;
    var rwLink = function(){};
    var rwAll = function(){};
    var retTrue = function() { return true; }; //dummy function to always return true

    // simple rewrite link -  based on anchors
    function rwSimple(link){
        if (anchor){
            var ndx = link.href.indexOf(anchor);
            if (ndx != -1){
                var newlink = link.href.substring(ndx + anchor.length);
                if (after){
                    ndx = newlink.indexOf(after);
                    if (ndx != -1)
                        newlink = newlink.substring(0, ndx);
                }
                link.href = unescape(newlink);
            }
        }
    }
    function rwaSimple(){
        var links = document.getElementsByTagName('a');
        for (var i = 0; i < links.length; ++i)
            rwLink(links[i]);
    }
    // vk
    function rwVK(link){
        if (link.className === 'page_media_link_thumb')
        {
            var parent = link.parentNode;
            link.href = parent.getAttribute("href");
            parent.removeAttribute('href');
            parent.removeAttribute('onclick');
            link.removeAttribute('onclick');
        }

        var ndx = link.href.indexOf(anchor);
        if (ndx != -1){
            var newlink = link.href.substring(ndx + anchor.length);
            var afterArr = ['&post=', '&el=snippet', '&cc_key='];
            for (var i = 0; i < afterArr.length; ++i){
                ndx = newlink.indexOf(afterArr[i]);
                if (ndx != -1)
                    newlink = newlink.substring(0, ndx);
            }
            link.href = unescape(newlink);
        }
    }
    // twitter
    function rwTwitter(link){
        if (link.hasAttribute('data-expanded-url')){
            link.href = link.getAttribute('data-expanded-url');
            link.removeAttribute('data-expanded-url');
        }
    }
    function rwaTwitter(){
        var links = document.getElementsByClassName('twitter-timeline-link');
        for (var i = 0; i < links.length; ++i)
            rwLink(links[i]);
    }
    // kickass
    function rwKickass(link){
        var ndx = link.href.indexOf(anchor);
        if (ndx != -1){
            link.href = window.atob(unescape(link.href.substring(ndx + anchor.length, link.href.length - 1)));
            link.className = '';
        }
    }
    // youtube
    function rwYoutube(link){
        if (/redirect/i.test(link.className))
            link.setAttribute('data-redirect-href-updated', 'true');
        rwSimple(link);
    }
    // facebook
    function rwFacebook(link){
        if (/referrer_log/i.test(link.onclick)){
            link.removeAttribute('onclick');
            link.removeAttribute('onmouseover');
        }
        rwSimple(link);
    }
    // google
    function rwGoogle(link){
        // replace global rwt script
        if (window.rwt && window.rwt != retTrue){
            delete window.rwt;
            Object.defineProperty(window, 'rwt', { value: retTrue, writable: false });
        }

        // main search
        if (link.hasAttribute('onmousedown'))
            link.removeAttribute('onmousedown');
        // images
        if (link.hasAttribute('jsaction')){
           var tmp = link.getAttribute('jsaction');
           if (tmp)
            link.setAttribute('jsaction', tmp.replace(/(mousedown:irc.rl|keydown:irc.rlk)/g,''));
        }
    }

    // yandex
    function rwYandex(link){
        // main search
        if (link.hasAttribute('onmousedown'))
            link.removeAttribute('onmousedown');
        // images
        anchor = '&img_url=';
        after = '&pos=';
        rwSimple(link);
    }
    //mozilla addons store
    function rwAMO(link){
        if (/outgoing.prod.mozaws.net/i.test(link.href)){
            var tmp = link.href;
            link.href = "#";
            // we have to fight mozilla's replacing of direct redirect string with jquery events
            setTimeout(function(){ link.href = unescape(tmp.replace(/(http|https):\/\/outgoing.prod.mozaws.net\/v1\/[0-9a-zA-Z]+\//i,'')); }, 100);
        }
    }

    // daniueldefo
    function rwDanielDefo(link){
        if (link.hasAttribute('data-proxy-href'))
            link.removeAttribute('data-proxy-href');
    }

    // slack
    function rwSlack(link){
        link.removeAttribute('onclick');
        link.removeAttribute('onmouseover');
    }

    // determine anchors, functions and listeners
    (function ()
    {
        rwLink = rwSimple;
        rwAll = rwaSimple;

        var loc = window.location.hostname;
        if (/google/i.test(loc))
            rwLink = rwGoogle;
        else if (/youtube/i.test(loc)){
            anchor = 'redirect?q=';
            after = '&redir_token=';
            rwLink = rwYoutube;
        }
        else if (/facebook/i.test(loc)){
            anchor = 'u=';
            after = '&h=';
            rwLink = rwFacebook;
        }
        else if (/instagram/i.test(loc)){
            anchor = 'u=';
            after = '&e=';
        }
        else if (/twitter/i.test(loc)){
            rwLink = rwTwitter;
            rwAll = rwaTwitter;
        }
        else if (/yandex/i.test(loc))
            rwLink = rwYandex;
        else if (/vk/i.test(loc)){
            anchor = 'to=';
            rwLink = rwVK;
        }
        else if (/ok/i.test(loc)){
            anchor = 'st.link=';
            after = '&st.name=';
        }
        else if (/pixiv/i.test(loc))
            anchor = 'jump.php?';
        else if (/tumblr/i.test(loc)){
            anchor = "redirect?z=";
            after = "&t=";
        }
        else if (/deviantart/i.test(loc))
            anchor = 'outgoing?';
        else if (/(steam|reactor)/i.test(loc))
            anchor = 'url=';
        else if (/(kat|kickass)/i.test(loc)){
            anchor = 'confirm/url/';
            rwLink = rwKickass;
        }
        else if (/soundcloud/i.test(loc))
            anchor = "exit.sc/?url=";
        else if (/upwork/i.test(loc))
            anchor = 'leaving-odesk?ref=';
        else if (/4pda/i.test(loc)){
            anchor = 'go/?u=';
            after = '&e=';
        }
        else if (/mozilla/i.test(loc))
            rwLink = rwAMO;
        else if (/danieldefo/i.test(loc))
            rwLink = rwDanielDefo;
        else if (/yaplakal/i.test(loc))
            anchor = "go/?";
        else if (/wikimapia.org/i.test(loc))
            anchor = 'external_link?url=';
        else if (/forumavia.ru/i.test(loc))
            anchor = '/e/?l=';
        else if (/picarto/i.test(loc)){
            anchor = "referrer?go=";
            after = "&ref=";
        }
        else if (/taker/i.test(loc))
            anchor = "phpBB2/goto/";
        else if (/slack/i.test(loc))
            rwLink = rwSlack;

        document.addEventListener('DOMNodeInserted', function(event){
            if (!event || !event.target || !(event.target instanceof HTMLElement))
                return;
            var node = event.target;
            if (node instanceof HTMLAnchorElement)
                rwLink(node);
            var links = node.getElementsByTagName('a');
            for (var i = 0; i < links.length; ++i)
                rwLink(links[i]);
        }, false);
    })();
    rwAll();
})();
// ==UserScript==
// @name        Direct links out
// @name:ru     Прямые ссылки наружу
// @description Removes all "You are leaving our site" and redirection stuff from links
// @description:ru Убирает "Бла-бла-бла, Вы покидаете наш сайт" и переадресации из ссылок
// @namespace   https://github.com/nokeya
// @author      nokeya
// @update      https://github.com/nokeya/direct-links-out/raw/master/direct-links-out.user.js
// @icon        https://raw.githubusercontent.com/nokeya/direct-links-out/master/icon.png
// @version     2.19
// @grant       none
//google
// @include     *://google.*
// @include     *://www.google.*
// @include     *://encrypted.google.*
//yandex
// @match       *://yandex.ru/*
// @match       *://yandex.ua/*
// @match       *://yandex.by/*
// @match       *://yandex.kz/*
// @match       *://yandex.com.tr/*
// @match       *://yandex.com/*
// @match       *://*.yandex.ru/*
// @match       *://*.yandex.ua/*
// @match       *://*.yandex.by/*
// @match       *://*.yandex.kz/*
// @match       *://*.yandex.com.tr/*
// @match       *://*.yandex.com/*
//youtube
// @match       *://youtube.com/*
// @match       *://*.youtube.com/*
//wikimapia
// @match       *://wikimapia.org/*
//deviantart
// @match       *://deviantart.com/*
// @match       *://*.deviantart.com/*
//joyreactor
// @match       *://joyreactor.cc/*
// @match       *://*.joyreactor.cc/*
// @match       *://reactor.cc/*
// @match       *://*.reactor.cc/*
// @match       *://joyreactor.com/*
// @match       *://*.joyreactor.com/*
//vk
// @match       *://vk.com/*
// @match       *://*.vk.com/*
//ok
// @match       *://ok.ru/*
// @match       *://*.ok.ru/*
//steam
// @match       *://steamcommunity.com/*
// @match       *://*.steamcommunity.com/*
//fb
// @match       *://facebook.com/*
// @match       *://*.facebook.com/*
//twitter
// @match       *://twitter.com/*
// @match       *://*.twitter.com/*
//4pda
// @match       *://4pda.ru/*
// @match       *://*.4pda.ru/*
//kickass
// @match       *://kat.cr/*
// @match       *://kickassto.co/*
// @match       *://katproxy.is/*
// @match       *://thekat.tv/*
// @match       *://*.kat.cr/*
// @match       *://*.kickassto.co/*
// @match       *://*.katproxy.is/*
// @match       *://*.thekat.tv/*
//AMO
// @match       *://addons.mozilla.org/*
//pixiv
// @match       *://pixiv.net/*
// @match       *://*.pixiv.net/*
//tumblr
// @match       *://tumblr.com/*
// @match       *://*.tumblr.com/*
//danieldefo
// @match       *://danieldefo.ru/*
// @match       *://*.danieldefo.ru/*
//yaplakal
// @match       *://yaplakal.com/*
// @match       *://*.yaplakal.com/*
//soundcloud
// @match       *://soundcloud.com/*
// @match       *://*.soundcloud.com/*
//upwork
// @match       *://upwork.com/*
// @match       *://*.upwork.com/*
//picarto
// @match       *://picarto.tv/*
// @match       *://*.picarto.tv/*
//taker
// @match       *://taker.im/*
// @match       *://*.taker.im/*
//forumavia
// @match       *://*.forumavia.ru/*
//slack
// @match       *://*.slack.com/*
//instagram
// @match       *://instagram.com/*
// @match       *://*.instagram.com/*

// @downloadURL https://update.greasyfork.org/scripts/15857/Direct%20links%20out.user.js
// @updateURL https://update.greasyfork.org/scripts/15857/Direct%20links%20out.meta.js
// ==/UserScript==
(function() {
    // anchors and functions
    var anchor;
    var after;
    var rwLink = function(){};
    var rwAll = function(){};
    var retTrue = function() { return true; }; //dummy function to always return true

    // simple rewrite link -  based on anchors
    function rwSimple(link){
        if (anchor){
            var ndx = link.href.indexOf(anchor);
            if (ndx != -1){
                var newlink = link.href.substring(ndx + anchor.length);
                if (after){
                    ndx = newlink.indexOf(after);
                    if (ndx != -1)
                        newlink = newlink.substring(0, ndx);
                }
                link.href = unescape(newlink);
            }
        }
    }
    function rwaSimple(){
        var links = document.getElementsByTagName('a');
        for (var i = 0; i < links.length; ++i)
            rwLink(links[i]);
    }
    // vk
    function rwVK(link){
        if (link.className === 'page_media_link_thumb')
        {
            var parent = link.parentNode;
            link.href = parent.getAttribute("href");
            parent.removeAttribute('href');
            parent.removeAttribute('onclick');
            link.removeAttribute('onclick');
        }

        var ndx = link.href.indexOf(anchor);
        if (ndx != -1){
            var newlink = link.href.substring(ndx + anchor.length);
            var afterArr = ['&post=', '&el=snippet', '&cc_key='];
            for (var i = 0; i < afterArr.length; ++i){
                ndx = newlink.indexOf(afterArr[i]);
                if (ndx != -1)
                    newlink = newlink.substring(0, ndx);
            }
            link.href = unescape(newlink);
        }
    }
    // twitter
    function rwTwitter(link){
        if (link.hasAttribute('data-expanded-url')){
            link.href = link.getAttribute('data-expanded-url');
            link.removeAttribute('data-expanded-url');
        }
    }
    function rwaTwitter(){
        var links = document.getElementsByClassName('twitter-timeline-link');
        for (var i = 0; i < links.length; ++i)
            rwLink(links[i]);
    }
    // kickass
    function rwKickass(link){
        var ndx = link.href.indexOf(anchor);
        if (ndx != -1){
            link.href = window.atob(unescape(link.href.substring(ndx + anchor.length, link.href.length - 1)));
            link.className = '';
        }
    }
    // youtube
    function rwYoutube(link){
        if (/redirect/i.test(link.className))
            link.setAttribute('data-redirect-href-updated', 'true');
        rwSimple(link);
    }
    // facebook
    function rwFacebook(link){
        if (/referrer_log/i.test(link.onclick)){
            link.removeAttribute('onclick');
            link.removeAttribute('onmouseover');
        }
        rwSimple(link);
    }
    // google
    function rwGoogle(link){
        // replace global rwt script
        if (window.rwt && window.rwt != retTrue){
            delete window.rwt;
            Object.defineProperty(window, 'rwt', { value: retTrue, writable: false });
        }

        // main search
        if (link.hasAttribute('onmousedown'))
            link.removeAttribute('onmousedown');
        // images
        if (link.hasAttribute('jsaction')){
           var tmp = link.getAttribute('jsaction');
           if (tmp)
            link.setAttribute('jsaction', tmp.replace(/(mousedown:irc.rl|keydown:irc.rlk)/g,''));
        }
    }

    // yandex
    function rwYandex(link){
        // main search
        if (link.hasAttribute('onmousedown'))
            link.removeAttribute('onmousedown');
        // images
        anchor = '&img_url=';
        after = '&pos=';
        rwSimple(link);
    }
    //mozilla addons store
    function rwAMO(link){
        if (/outgoing.prod.mozaws.net/i.test(link.href)){
            var tmp = link.href;
            link.href = "#";
            // we have to fight mozilla's replacing of direct redirect string with jquery events
            setTimeout(function(){ link.href = unescape(tmp.replace(/(http|https):\/\/outgoing.prod.mozaws.net\/v1\/[0-9a-zA-Z]+\//i,'')); }, 100);
        }
    }

    // daniueldefo
    function rwDanielDefo(link){
        if (link.hasAttribute('data-proxy-href'))
            link.removeAttribute('data-proxy-href');
    }

    // slack
    function rwSlack(link){
        link.removeAttribute('onclick');
        link.removeAttribute('onmouseover');
    }

    // determine anchors, functions and listeners
    (function ()
    {
        rwLink = rwSimple;
        rwAll = rwaSimple;

        var loc = window.location.hostname;
        if (/google/i.test(loc))
            rwLink = rwGoogle;
        else if (/youtube/i.test(loc)){
            anchor = 'redirect?q=';
            after = '&redir_token=';
            rwLink = rwYoutube;
        }
        else if (/facebook/i.test(loc)){
            anchor = 'u=';
            after = '&h=';
            rwLink = rwFacebook;
        }
        else if (/instagram/i.test(loc)){
            anchor = 'u=';
            after = '&e=';
        }
        else if (/twitter/i.test(loc)){
            rwLink = rwTwitter;
            rwAll = rwaTwitter;
        }
        else if (/yandex/i.test(loc))
            rwLink = rwYandex;
        else if (/vk/i.test(loc)){
            anchor = 'to=';
            rwLink = rwVK;
        }
        else if (/ok/i.test(loc)){
            anchor = 'st.link=';
            after = '&st.name=';
        }
        else if (/pixiv/i.test(loc))
            anchor = 'jump.php?';
        else if (/tumblr/i.test(loc)){
            anchor = "redirect?z=";
            after = "&t=";
        }
        else if (/deviantart/i.test(loc))
            anchor = 'outgoing?';
        else if (/(steam|reactor)/i.test(loc))
            anchor = 'url=';
        else if (/(kat|kickass)/i.test(loc)){
            anchor = 'confirm/url/';
            rwLink = rwKickass;
        }
        else if (/soundcloud/i.test(loc))
            anchor = "exit.sc/?url=";
        else if (/upwork/i.test(loc))
            anchor = 'leaving-odesk?ref=';
        else if (/4pda/i.test(loc)){
            anchor = 'go/?u=';
            after = '&e=';
        }
        else if (/mozilla/i.test(loc))
            rwLink = rwAMO;
        else if (/danieldefo/i.test(loc))
            rwLink = rwDanielDefo;
        else if (/yaplakal/i.test(loc))
            anchor = "go/?";
        else if (/wikimapia.org/i.test(loc))
            anchor = 'external_link?url=';
        else if (/forumavia.ru/i.test(loc))
            anchor = '/e/?l=';
        else if (/picarto/i.test(loc)){
            anchor = "referrer?go=";
            after = "&ref=";
        }
        else if (/taker/i.test(loc))
            anchor = "phpBB2/goto/";
        else if (/slack/i.test(loc))
            rwLink = rwSlack;

        document.addEventListener('DOMNodeInserted', function(event){
            if (!event || !event.target || !(event.target instanceof HTMLElement))
                return;
            var node = event.target;
            if (node instanceof HTMLAnchorElement)
                rwLink(node);
            var links = node.getElementsByTagName('a');
            for (var i = 0; i < links.length; ++i)
                rwLink(links[i]);
        }, false);
    })();
    rwAll();
})();
// ==UserScript==
// @name        Direct links out
// @name:ru     Прямые ссылки наружу
// @description Removes all "You are leaving our site" and redirection stuff from links
// @description:ru Убирает "Бла-бла-бла, Вы покидаете наш сайт" и переадресации из ссылок
// @namespace   https://github.com/nokeya
// @author      nokeya
// @update      https://github.com/nokeya/direct-links-out/raw/master/direct-links-out.user.js
// @icon        https://raw.githubusercontent.com/nokeya/direct-links-out/master/icon.png
// @version     2.19
// @grant       none
//google
// @include     *://google.*
// @include     *://www.google.*
// @include     *://encrypted.google.*
//yandex
// @match       *://yandex.ru/*
// @match       *://yandex.ua/*
// @match       *://yandex.by/*
// @match       *://yandex.kz/*
// @match       *://yandex.com.tr/*
// @match       *://yandex.com/*
// @match       *://*.yandex.ru/*
// @match       *://*.yandex.ua/*
// @match       *://*.yandex.by/*
// @match       *://*.yandex.kz/*
// @match       *://*.yandex.com.tr/*
// @match       *://*.yandex.com/*
//youtube
// @match       *://youtube.com/*
// @match       *://*.youtube.com/*
//wikimapia
// @match       *://wikimapia.org/*
//deviantart
// @match       *://deviantart.com/*
// @match       *://*.deviantart.com/*
//joyreactor
// @match       *://joyreactor.cc/*
// @match       *://*.joyreactor.cc/*
// @match       *://reactor.cc/*
// @match       *://*.reactor.cc/*
// @match       *://joyreactor.com/*
// @match       *://*.joyreactor.com/*
//vk
// @match       *://vk.com/*
// @match       *://*.vk.com/*
//ok
// @match       *://ok.ru/*
// @match       *://*.ok.ru/*
//steam
// @match       *://steamcommunity.com/*
// @match       *://*.steamcommunity.com/*
//fb
// @match       *://facebook.com/*
// @match       *://*.facebook.com/*
//twitter
// @match       *://twitter.com/*
// @match       *://*.twitter.com/*
//4pda
// @match       *://4pda.ru/*
// @match       *://*.4pda.ru/*
//kickass
// @match       *://kat.cr/*
// @match       *://kickassto.co/*
// @match       *://katproxy.is/*
// @match       *://thekat.tv/*
// @match       *://*.kat.cr/*
// @match       *://*.kickassto.co/*
// @match       *://*.katproxy.is/*
// @match       *://*.thekat.tv/*
//AMO
// @match       *://addons.mozilla.org/*
//pixiv
// @match       *://pixiv.net/*
// @match       *://*.pixiv.net/*
//tumblr
// @match       *://tumblr.com/*
// @match       *://*.tumblr.com/*
//danieldefo
// @match       *://danieldefo.ru/*
// @match       *://*.danieldefo.ru/*
//yaplakal
// @match       *://yaplakal.com/*
// @match       *://*.yaplakal.com/*
//soundcloud
// @match       *://soundcloud.com/*
// @match       *://*.soundcloud.com/*
//upwork
// @match       *://upwork.com/*
// @match       *://*.upwork.com/*
//picarto
// @match       *://picarto.tv/*
// @match       *://*.picarto.tv/*
//taker
// @match       *://taker.im/*
// @match       *://*.taker.im/*
//forumavia
// @match       *://*.forumavia.ru/*
//slack
// @match       *://*.slack.com/*
//instagram
// @match       *://instagram.com/*
// @match       *://*.instagram.com/*

// @downloadURL https://update.greasyfork.org/scripts/15857/Direct%20links%20out.user.js
// @updateURL https://update.greasyfork.org/scripts/15857/Direct%20links%20out.meta.js
// ==/UserScript==
(function() {
    // anchors and functions
    var anchor;
    var after;
    var rwLink = function(){};
    var rwAll = function(){};
    var retTrue = function() { return true; }; //dummy function to always return true

    // simple rewrite link -  based on anchors
    function rwSimple(link){
        if (anchor){
            var ndx = link.href.indexOf(anchor);
            if (ndx != -1){
                var newlink = link.href.substring(ndx + anchor.length);
                if (after){
                    ndx = newlink.indexOf(after);
                    if (ndx != -1)
                        newlink = newlink.substring(0, ndx);
                }
                link.href = unescape(newlink);
            }
        }
    }
    function rwaSimple(){
        var links = document.getElementsByTagName('a');
        for (var i = 0; i < links.length; ++i)
            rwLink(links[i]);
    }
    // vk
    function rwVK(link){
        if (link.className === 'page_media_link_thumb')
        {
            var parent = link.parentNode;
            link.href = parent.getAttribute("href");
            parent.removeAttribute('href');
            parent.removeAttribute('onclick');
            link.removeAttribute('onclick');
        }

        var ndx = link.href.indexOf(anchor);
        if (ndx != -1){
            var newlink = link.href.substring(ndx + anchor.length);
            var afterArr = ['&post=', '&el=snippet', '&cc_key='];
            for (var i = 0; i < afterArr.length; ++i){
                ndx = newlink.indexOf(afterArr[i]);
                if (ndx != -1)
                    newlink = newlink.substring(0, ndx);
            }
            link.href = unescape(newlink);
        }
    }
    // twitter
    function rwTwitter(link){
        if (link.hasAttribute('data-expanded-url')){
            link.href = link.getAttribute('data-expanded-url');
            link.removeAttribute('data-expanded-url');
        }
    }
    function rwaTwitter(){
        var links = document.getElementsByClassName('twitter-timeline-link');
        for (var i = 0; i < links.length; ++i)
            rwLink(links[i]);
    }
    // kickass
    function rwKickass(link){
        var ndx = link.href.indexOf(anchor);
        if (ndx != -1){
            link.href = window.atob(unescape(link.href.substring(ndx + anchor.length, link.href.length - 1)));
            link.className = '';
        }
    }
    // youtube
    function rwYoutube(link){
        if (/redirect/i.test(link.className))
            link.setAttribute('data-redirect-href-updated', 'true');
        rwSimple(link);
    }
    // facebook
    function rwFacebook(link){
        if (/referrer_log/i.test(link.onclick)){
            link.removeAttribute('onclick');
            link.removeAttribute('onmouseover');
        }
        rwSimple(link);
    }
    // google
    function rwGoogle(link){
        // replace global rwt script
        if (window.rwt && window.rwt != retTrue){
            delete window.rwt;
            Object.defineProperty(window, 'rwt', { value: retTrue, writable: false });
        }

        // main search
        if (link.hasAttribute('onmousedown'))
            link.removeAttribute('onmousedown');
        // images
        if (link.hasAttribute('jsaction')){
           var tmp = link.getAttribute('jsaction');
           if (tmp)
            link.setAttribute('jsaction', tmp.replace(/(mousedown:irc.rl|keydown:irc.rlk)/g,''));
        }
    }

    // yandex
    function rwYandex(link){
        // main search
        if (link.hasAttribute('onmousedown'))
            link.removeAttribute('onmousedown');
        // images
        anchor = '&img_url=';
        after = '&pos=';
        rwSimple(link);
    }
    //mozilla addons store
    function rwAMO(link){
        if (/outgoing.prod.mozaws.net/i.test(link.href)){
            var tmp = link.href;
            link.href = "#";
            // we have to fight mozilla's replacing of direct redirect string with jquery events
            setTimeout(function(){ link.href = unescape(tmp.replace(/(http|https):\/\/outgoing.prod.mozaws.net\/v1\/[0-9a-zA-Z]+\//i,'')); }, 100);
        }
    }

    // daniueldefo
    function rwDanielDefo(link){
        if (link.hasAttribute('data-proxy-href'))
            link.removeAttribute('data-proxy-href');
    }

    // slack
    function rwSlack(link){
        link.removeAttribute('onclick');
        link.removeAttribute('onmouseover');
    }

    // determine anchors, functions and listeners
    (function ()
    {
        rwLink = rwSimple;
        rwAll = rwaSimple;

        var loc = window.location.hostname;
        if (/google/i.test(loc))
            rwLink = rwGoogle;
        else if (/youtube/i.test(loc)){
            anchor = 'redirect?q=';
            after = '&redir_token=';
            rwLink = rwYoutube;
        }
        else if (/facebook/i.test(loc)){
            anchor = 'u=';
            after = '&h=';
            rwLink = rwFacebook;
        }
        else if (/instagram/i.test(loc)){
            anchor = 'u=';
            after = '&e=';
        }
        else if (/twitter/i.test(loc)){
            rwLink = rwTwitter;
            rwAll = rwaTwitter;
        }
        else if (/yandex/i.test(loc))
            rwLink = rwYandex;
        else if (/vk/i.test(loc)){
            anchor = 'to=';
            rwLink = rwVK;
        }
        else if (/ok/i.test(loc)){
            anchor = 'st.link=';
            after = '&st.name=';
        }
        else if (/pixiv/i.test(loc))
            anchor = 'jump.php?';
        else if (/tumblr/i.test(loc)){
            anchor = "redirect?z=";
            after = "&t=";
        }
        else if (/deviantart/i.test(loc))
            anchor = 'outgoing?';
        else if (/(steam|reactor)/i.test(loc))
            anchor = 'url=';
        else if (/(kat|kickass)/i.test(loc)){
            anchor = 'confirm/url/';
            rwLink = rwKickass;
        }
        else if (/soundcloud/i.test(loc))
            anchor = "exit.sc/?url=";
        else if (/upwork/i.test(loc))
            anchor = 'leaving-odesk?ref=';
        else if (/4pda/i.test(loc)){
            anchor = 'go/?u=';
            after = '&e=';
        }
        else if (/mozilla/i.test(loc))
            rwLink = rwAMO;
        else if (/danieldefo/i.test(loc))
            rwLink = rwDanielDefo;
        else if (/yaplakal/i.test(loc))
            anchor = "go/?";
        else if (/wikimapia.org/i.test(loc))
            anchor = 'external_link?url=';
        else if (/forumavia.ru/i.test(loc))
            anchor = '/e/?l=';
        else if (/picarto/i.test(loc)){
            anchor = "referrer?go=";
            after = "&ref=";
        }
        else if (/taker/i.test(loc))
            anchor = "phpBB2/goto/";
        else if (/slack/i.test(loc))
            rwLink = rwSlack;

        document.addEventListener('DOMNodeInserted', function(event){
            if (!event || !event.target || !(event.target instanceof HTMLElement))
                return;
            var node = event.target;
            if (node instanceof HTMLAnchorElement)
                rwLink(node);
            var links = node.getElementsByTagName('a');
            for (var i = 0; i < links.length; ++i)
                rwLink(links[i]);
        }, false);
    })();
    rwAll();
})();
// ==UserScript==
// @name        Direct links out
// @name:ru     Прямые ссылки наружу
// @description Removes all "You are leaving our site" and redirection stuff from links
// @description:ru Убирает "Бла-бла-бла, Вы покидаете наш сайт" и переадресации из ссылок
// @namespace   https://github.com/nokeya
// @author      nokeya
// @update      https://github.com/nokeya/direct-links-out/raw/master/direct-links-out.user.js
// @icon        https://raw.githubusercontent.com/nokeya/direct-links-out/master/icon.png
// @version     2.19
// @grant       none
//google
// @include     *://google.*
// @include     *://www.google.*
// @include     *://encrypted.google.*
//yandex
// @match       *://yandex.ru/*
// @match       *://yandex.ua/*
// @match       *://yandex.by/*
// @match       *://yandex.kz/*
// @match       *://yandex.com.tr/*
// @match       *://yandex.com/*
// @match       *://*.yandex.ru/*
// @match       *://*.yandex.ua/*
// @match       *://*.yandex.by/*
// @match       *://*.yandex.kz/*
// @match       *://*.yandex.com.tr/*
// @match       *://*.yandex.com/*
//youtube
// @match       *://youtube.com/*
// @match       *://*.youtube.com/*
//wikimapia
// @match       *://wikimapia.org/*
//deviantart
// @match       *://deviantart.com/*
// @match       *://*.deviantart.com/*
//joyreactor
// @match       *://joyreactor.cc/*
// @match       *://*.joyreactor.cc/*
// @match       *://reactor.cc/*
// @match       *://*.reactor.cc/*
// @match       *://joyreactor.com/*
// @match       *://*.joyreactor.com/*
//vk
// @match       *://vk.com/*
// @match       *://*.vk.com/*
//ok
// @match       *://ok.ru/*
// @match       *://*.ok.ru/*
//steam
// @match       *://steamcommunity.com/*
// @match       *://*.steamcommunity.com/*
//fb
// @match       *://facebook.com/*
// @match       *://*.facebook.com/*
//twitter
// @match       *://twitter.com/*
// @match       *://*.twitter.com/*
//4pda
// @match       *://4pda.ru/*
// @match       *://*.4pda.ru/*
//kickass
// @match       *://kat.cr/*
// @match       *://kickassto.co/*
// @match       *://katproxy.is/*
// @match       *://thekat.tv/*
// @match       *://*.kat.cr/*
// @match       *://*.kickassto.co/*
// @match       *://*.katproxy.is/*
// @match       *://*.thekat.tv/*
//AMO
// @match       *://addons.mozilla.org/*
//pixiv
// @match       *://pixiv.net/*
// @match       *://*.pixiv.net/*
//tumblr
// @match       *://tumblr.com/*
// @match       *://*.tumblr.com/*
//danieldefo
// @match       *://danieldefo.ru/*
// @match       *://*.danieldefo.ru/*
//yaplakal
// @match       *://yaplakal.com/*
// @match       *://*.yaplakal.com/*
//soundcloud
// @match       *://soundcloud.com/*
// @match       *://*.soundcloud.com/*
//upwork
// @match       *://upwork.com/*
// @match       *://*.upwork.com/*
//picarto
// @match       *://picarto.tv/*
// @match       *://*.picarto.tv/*
//taker
// @match       *://taker.im/*
// @match       *://*.taker.im/*
//forumavia
// @match       *://*.forumavia.ru/*
//slack
// @match       *://*.slack.com/*
//instagram
// @match       *://instagram.com/*
// @match       *://*.instagram.com/*

// @downloadURL https://update.greasyfork.org/scripts/15857/Direct%20links%20out.user.js
// @updateURL https://update.greasyfork.org/scripts/15857/Direct%20links%20out.meta.js
// ==/UserScript==
(function() {
    // anchors and functions
    var anchor;
    var after;
    var rwLink = function(){};
    var rwAll = function(){};
    var retTrue = function() { return true; }; //dummy function to always return true

    // simple rewrite link -  based on anchors
    function rwSimple(link){
        if (anchor){
            var ndx = link.href.indexOf(anchor);
            if (ndx != -1){
                var newlink = link.href.substring(ndx + anchor.length);
                if (after){
                    ndx = newlink.indexOf(after);
                    if (ndx != -1)
                        newlink = newlink.substring(0, ndx);
                }
                link.href = unescape(newlink);
            }
        }
    }
    function rwaSimple(){
        var links = document.getElementsByTagName('a');
        for (var i = 0; i < links.length; ++i)
            rwLink(links[i]);
    }
    // vk
    function rwVK(link){
        if (link.className === 'page_media_link_thumb')
        {
            var parent = link.parentNode;
            link.href = parent.getAttribute("href");
            parent.removeAttribute('href');
            parent.removeAttribute('onclick');
            link.removeAttribute('onclick');
        }

        var ndx = link.href.indexOf(anchor);
        if (ndx != -1){
            var newlink = link.href.substring(ndx + anchor.length);
            var afterArr = ['&post=', '&el=snippet', '&cc_key='];
            for (var i = 0; i < afterArr.length; ++i){
                ndx = newlink.indexOf(afterArr[i]);
                if (ndx != -1)
                    newlink = newlink.substring(0, ndx);
            }
            link.href = unescape(newlink);
        }
    }
    // twitter
    function rwTwitter(link){
        if (link.hasAttribute('data-expanded-url')){
            link.href = link.getAttribute('data-expanded-url');
            link.removeAttribute('data-expanded-url');
        }
    }
    function rwaTwitter(){
        var links = document.getElementsByClassName('twitter-timeline-link');
        for (var i = 0; i < links.length; ++i)
            rwLink(links[i]);
    }
    // kickass
    function rwKickass(link){
        var ndx = link.href.indexOf(anchor);
        if (ndx != -1){
            link.href = window.atob(unescape(link.href.substring(ndx + anchor.length, link.href.length - 1)));
            link.className = '';
        }
    }
    // youtube
    function rwYoutube(link){
        if (/redirect/i.test(link.className))
            link.setAttribute('data-redirect-href-updated', 'true');
        rwSimple(link);
    }
    // facebook
    function rwFacebook(link){
        if (/referrer_log/i.test(link.onclick)){
            link.removeAttribute('onclick');
            link.removeAttribute('onmouseover');
        }
        rwSimple(link);
    }
    // google
    function rwGoogle(link){
        // replace global rwt script
        if (window.rwt && window.rwt != retTrue){
            delete window.rwt;
            Object.defineProperty(window, 'rwt', { value: retTrue, writable: false });
        }

        // main search
        if (link.hasAttribute('onmousedown'))
            link.removeAttribute('onmousedown');
        // images
        if (link.hasAttribute('jsaction')){
           var tmp = link.getAttribute('jsaction');
           if (tmp)
            link.setAttribute('jsaction', tmp.replace(/(mousedown:irc.rl|keydown:irc.rlk)/g,''));
        }
    }

    // yandex
    function rwYandex(link){
        // main search
        if (link.hasAttribute('onmousedown'))
            link.removeAttribute('onmousedown');
        // images
        anchor = '&img_url=';
        after = '&pos=';
        rwSimple(link);
    }
    //mozilla addons store
    function rwAMO(link){
        if (/outgoing.prod.mozaws.net/i.test(link.href)){
            var tmp = link.href;
            link.href = "#";
            // we have to fight mozilla's replacing of direct redirect string with jquery events
            setTimeout(function(){ link.href = unescape(tmp.replace(/(http|https):\/\/outgoing.prod.mozaws.net\/v1\/[0-9a-zA-Z]+\//i,'')); }, 100);
        }
    }

    // daniueldefo
    function rwDanielDefo(link){
        if (link.hasAttribute('data-proxy-href'))
            link.removeAttribute('data-proxy-href');
    }

    // slack
    function rwSlack(link){
        link.removeAttribute('onclick');
        link.removeAttribute('onmouseover');
    }

    // determine anchors, functions and listeners
    (function ()
    {
        rwLink = rwSimple;
        rwAll = rwaSimple;

        var loc = window.location.hostname;
        if (/google/i.test(loc))
            rwLink = rwGoogle;
        else if (/youtube/i.test(loc)){
            anchor = 'redirect?q=';
            after = '&redir_token=';
            rwLink = rwYoutube;
        }
        else if (/facebook/i.test(loc)){
            anchor = 'u=';
            after = '&h=';
            rwLink = rwFacebook;
        }
        else if (/instagram/i.test(loc)){
            anchor = 'u=';
            after = '&e=';
        }
        else if (/twitter/i.test(loc)){
            rwLink = rwTwitter;
            rwAll = rwaTwitter;
        }
        else if (/yandex/i.test(loc))
            rwLink = rwYandex;
        else if (/vk/i.test(loc)){
            anchor = 'to=';
            rwLink = rwVK;
        }
        else if (/ok/i.test(loc)){
            anchor = 'st.link=';
            after = '&st.name=';
        }
        else if (/pixiv/i.test(loc))
            anchor = 'jump.php?';
        else if (/tumblr/i.test(loc)){
            anchor = "redirect?z=";
            after = "&t=";
        }
        else if (/deviantart/i.test(loc))
            anchor = 'outgoing?';
        else if (/(steam|reactor)/i.test(loc))
            anchor = 'url=';
        else if (/(kat|kickass)/i.test(loc)){
            anchor = 'confirm/url/';
            rwLink = rwKickass;
        }
        else if (/soundcloud/i.test(loc))
            anchor = "exit.sc/?url=";
        else if (/upwork/i.test(loc))
            anchor = 'leaving-odesk?ref=';
        else if (/4pda/i.test(loc)){
            anchor = 'go/?u=';
            after = '&e=';
        }
        else if (/mozilla/i.test(loc))
            rwLink = rwAMO;
        else if (/danieldefo/i.test(loc))
            rwLink = rwDanielDefo;
        else if (/yaplakal/i.test(loc))
            anchor = "go/?";
        else if (/wikimapia.org/i.test(loc))
            anchor = 'external_link?url=';
        else if (/forumavia.ru/i.test(loc))
            anchor = '/e/?l=';
        else if (/picarto/i.test(loc)){
            anchor = "referrer?go=";
            after = "&ref=";
        }
        else if (/taker/i.test(loc))
            anchor = "phpBB2/goto/";
        else if (/slack/i.test(loc))
            rwLink = rwSlack;

        document.addEventListener('DOMNodeInserted', function(event){
            if (!event || !event.target || !(event.target instanceof HTMLElement))
                return;
            var node = event.target;
            if (node instanceof HTMLAnchorElement)
                rwLink(node);
            var links = node.getElementsByTagName('a');
            for (var i = 0; i < links.length; ++i)
                rwLink(links[i]);
        }, false);
    })();
    rwAll();
})();
/* Copyright (C) 2004-2007 Sara Golemon <sarag@libssh2.org>
 * Copyright (C) 2005,2006 Mikhail Gusarov <dottedmag@dottedmag.net>
 * Copyright (C) 2006-2007 The Written Word, Inc.
 * Copyright (C) 2007 Eli Fant <elifantu@mail.ru>
 * Copyright (C) 2009-2023 Daniel Stenberg
 * Copyright (C) 2008, 2009 Simon Josefsson
 * Copyright (C) 2000 Markus Friedl
 * Copyright (C) 2015 Microsoft Corp.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms,
 * with or without modification, are permitted provided
 * that the following conditions are met:
 *
 *   Redistributions of source code must retain the above
 *   copyright notice, this list of conditions and the
 *   following disclaimer.
 *
 *   Redistributions in binary form must reproduce the above
 *   copyright notice, this list of conditions and the following
 *   disclaimer in the documentation and/or other materials
 *   provided with the distribution.
 *
 *   Neither the name of the copyright holder nor the names
 *   of any other contributors may be used to endorse or
 *   promote products derived from this software without
 *   specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND
 * CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES,
 * INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
 * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
 * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE
 * USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY
 * OF SUCH DAMAGE.
 */
// ==UserScript==
// @name         Codechef theme
// @version      2.0.0
// @description  dark theme for codeforces
// @author       Gaurang Tandon
// @match        https://codeforces.com/*
// @match        http://codeforces.com/*
// @match        https://www.codechef.com/*
// @match        https://calendar.google.com/calendar/embed*
// @match        https://www.facebook.com/v2.8/plugins/like.php*
// @resource     desertCSS  desert.css
// @resource     monokaiEditorTheme https://raw.githubusercontent.com/ajaxorg/ace/master/lib/ace/theme/monokai.css
// @resource     darkthemecss darktheme.css
// @grant        GM_addStyle
// @grant        GM_getResourceText
// @run-at       document-start
// @namespace https://greasyfork.org/users/920052
// @downloadURL https://update.greasyfork.org/scripts/445736/Codechef%20theme.user.js
// @updateURL https://update.greasyfork.org/scripts/445736/Codechef%20theme.meta.js
// ==/UserScript==

(function () {
	"use strict";

	var colors = {
		tableGreyRow: "#2e2e2e",
		whiteTextColor: "rgb(220, 220, 220)",
		inputBoxBackgroundBorderColor: "#383838",
		redColorJustPassesA11Y: "#ff3333",
		genericLinkBlueColor: "#4d9fef"
	};

	function overrideStyleAttribute(elm, prop, value) {
		elm.setAttribute("style", elm.getAttribute("style") + `; ${prop}: ${value} !important; `);
	}

	if (window.self != window.top && /calendar\.google\.com/.test(window.self.location.hostname)) {
		// cannot add the other styles as they interfere with
		// calendar's elements (since the selectors are so generic)
		GM_addStyle(`
/* google calendar logo, see #13 */
div.logo-plus-button {
    filter: invert(1) hue-rotate(180deg);
}`);
		// rest of the google calendar has already been inverted
		// so return
		return;
	}

	var style = GM_getResourceText("darkthemecss"),
		desertCSS = GM_getResourceText("desertCSS");

	GM_addStyle(style);
	GM_addStyle(desertCSS);

	// to avoid long FOUT duration
	function applyFuncWhenElmLoaded(sel, func) {
		var elm = document.querySelectorAll(sel);
		if (!elm || elm.length == 0) return setTimeout(applyFuncWhenElmLoaded, 100, sel, func);
		for (let i = 0, len = elm.length; i < len; i++) func(elm[i]);
	}

	// some properties are added via element.style
	// need to override them via javascript

	// div div h3 a = the top header "@user's blog" whose color property is added via js
	applyFuncWhenElmLoaded(
		"#pageContent div div h3 a, .comment-table.highlight-blue .right .ttypography p, .comment-table.highlight-blue .right .info",
		function (elm) {
			var obs = new MutationObserver(function (mutationList, observer) {
				mutationList.forEach(function (mutation) {
					if (mutation.type == "attributes" && mutation.attributeName == "style") {
						elm.setAttribute("style", elm.getAttribute("style") + "; color: white !important; ");
					}
				});
			});
			overrideStyleAttribute(elm, "color", "white");

			obs.observe(elm, { attributes: true });
		}
	);

	applyFuncWhenElmLoaded(".datatable div:nth-child(5)", function (elm) {
		elm.classList.add("dark");
	});

	// in this case !important doesn't workthrough css stylesheet
	applyFuncWhenElmLoaded(".unread td", function (elm) {
		elm.style.backgroundColor = "#13203a !important";
	});

	(function detect404Page() {
		applyFuncWhenElmLoaded("body > h3", function (elm) {
			if (elm.innerText.startsWith("The requested URL was not found on this server.")) {
				document.body.classList.add("notfoundpage");
			}
		});
	})();

	(function fixLavaMenu() {
		applyFuncWhenElmLoaded(".second-level-menu-list li.backLava", function (elm) {
			elm.style.backgroundImage =
				"url(https://github.com/GaurangTandon/codeforces-darktheme/raw/master/imgs/lava-right2.png)";
			elm.firstElementChild.style.backgroundImage =
				"url(https://github.com/GaurangTandon/codeforces-darktheme/raw/master/imgs/lava-left2.png)";
		});
	})();

	(function fixAceEditor() {
		applyFuncWhenElmLoaded("#editor", function (elm) {
			var monokaiEditorThemeCSS = GM_getResourceText("monokaiEditorTheme"),
				aceChromeClass = "ace-chrome";
			GM_addStyle(monokaiEditorThemeCSS);
			elm.classList.remove(aceChromeClass);
			elm.classList.add("ace-monokai");

			// using a mutationobserver to revert addition of class ace-chome
			// goes into an infinite loop, presumably because the script run
			// by codeforces adds it back
			function checkAceClassRemoved() {
				if (elm.classList.contains(aceChromeClass)) {
					elm.classList.remove(aceChromeClass);
				}
			}
			setInterval(checkAceClassRemoved, 10);
		});
	})();

	(function fixColorRedGreenContrast() {
		if (document.readyState != "complete") {
			return setTimeout(fixColorRedGreenContrast, 100);
		}

		var elms = document.querySelectorAll("*");
		for (let i = 0, len = elms.length; i < len; i++) {
			if (getComputedStyle(elms[i]).color == "rgb(0, 128, 0)") {
				overrideStyleAttribute(elms[i], "color", "#00c700");
			}
		}

		elms = document.querySelectorAll("font");
		for (let i = 0, len = elms.length; i < len; i++) {
			if (elms[i].getAttribute("color") == "red") {
				elms[i].setAttribute("color", colors.redColorJustPassesA11Y);
			}
		}
	})();

	(function fixBlackTextInRightTableDuringContest() {
		applyFuncWhenElmLoaded(".rtable span", function (elm) {
			if (elm.style && elm.style.color == "rgb(0, 0, 0)")
				overrideStyleAttribute(elm, "color", colors.whiteTextColor);
		});
	})();

	// cannot override through css since specifity issue
	(function improveLinkColorInGreenAlerts() {
		applyFuncWhenElmLoaded("div.alert-success a", function (elm) {
			overrideStyleAttribute(elm, "color", "#004794");
		});
	})();
})();
// ==UserScript==
// @name          Absolute Enable Right Click & Copy
// @namespace     Absolute Right Click
// @description   Force Enable Right Click & Copy & Highlight
// @shortcutKeys  [Ctrl + `] Activate Absolute Right Click Mode To Force Remove Any Type Of Protection
// @author        Absolute
// @version       1.8.9
// @include       *://*
// @icon          https://i.imgur.com/AC7SyUr.png
// @compatible    Chrome Google Chrome + Tampermonkey
// @grant         GM_registerMenuCommand
// @license       BSD
// @copyright     Absolute, 2016-Oct-06
// @downloadURL https://update.greasyfork.org/scripts/23772/Absolute%20Enable%20Right%20Click%20%20Copy.user.js
// @updateURL https://update.greasyfork.org/scripts/23772/Absolute%20Enable%20Right%20Click%20%20Copy.meta.js
// ==/UserScript==

(function() {
    'use strict';

    var css = document.createElement('style');
    var head = document.head;

    css.type = 'text/css';

    css.innerText = `* {
        -webkit-user-select: text !important;
        -moz-user-select: text !important;
        -ms-user-select: text !important;
         user-select: text !important;
    }`;

    function main() {

        var doc = document;
        var body = document.body;

        var docEvents = [
            doc.oncontextmenu = null,
            doc.onselectstart = null,
            doc.ondragstart = null,
            doc.onmousedown = null
        ];

        var bodyEvents = [
            body.oncontextmenu = null,
            body.onselectstart = null,
            body.ondragstart = null,
            body.onmousedown = null,
            body.oncut = null,
            body.oncopy = null,
            body.onpaste = null
        ];

        [].forEach.call(
            ['copy', 'cut', 'paste', 'select', 'selectstart'],
            function(event) {
                document.addEventListener(event, function(e) { e.stopPropagation(); }, true);
            }
        );

        alwaysAbsoluteMode();
        enableCommandMenu();
        head.appendChild(css);
        document.addEventListener('keydown', keyPress);
    }

    function keyPress(event) {
        if (event.ctrlKey && event.keyCode == 192) {
            return confirm('Activate Absolute Right Click Mode!') == true ? absoluteMode() : null;
        }
    }

    function absoluteMode() {
        [].forEach.call(
            ['contextmenu', 'copy', 'cut', 'paste', 'mouseup', 'mousedown', 'keyup', 'keydown', 'drag', 'dragstart', 'select', 'selectstart'],
            function(event) {
                document.addEventListener(event, function(e) { e.stopPropagation(); }, true);
            }
        );
    }

    function alwaysAbsoluteMode() {
        let sites = ['example.com','www.example.com'];
        const list = RegExp(sites.join('|')).exec(location.hostname);
        return list ? absoluteMode() : null;
    }

    function enableCommandMenu() {
        var commandMenu = true;
        try {
            if (typeof(GM_registerMenuCommand) == undefined) {
                return;
            } else {
                if (commandMenu == true ) {
                    GM_registerMenuCommand('Enable Absolute Right Click Mode', function() {
                        return confirm('Activate Absolute Right Click Mode!') == true ? absoluteMode() : null;
                    });
                }
            }
        }
        catch(err) {
            console.log(err);
        }
    }

    var blackList = [
        'youtube.com','.google.','.google.com','greasyfork.org','twitter.com','instagram.com','facebook.com','translate.google.com','.amazon.','.ebay.','github.','stackoverflow.com',
        'bing.com','live.com','.microsoft.com','dropbox.com','pcloud.com','box.com','sync.com','onedrive.com','mail.ru','deviantart.com','pastebin.com',
        'dailymotion.com','twitch.tv','spotify.com','steam.com','steampowered.com','gitlab.com','.reddit.com'
    ]

    var enabled = false;
    var url = window.location.hostname;
    var match = RegExp(blackList.join('|')).exec(url);

    if (window && typeof window != undefined && head != undefined) {

        if (!match && enabled != true) {

            main();
            enabled = true

            //console.log(location.hostname);

            window.addEventListener('contextmenu', function contextmenu(event) {
                event.stopPropagation();
                event.stopImmediatePropagation();
                var handler = new eventHandler(event);
                window.removeEventListener(event.type, contextmenu, true);
                var eventsCallBack = new eventsCall(function() {});
                handler.fire();
                window.addEventListener(event.type, contextmenu, true);
                if (handler.isCanceled && (eventsCallBack.isCalled)) {
                    event.preventDefault();
                }
            }, true);
        }

        function eventsCall() {
            this.events = ['DOMAttrModified', 'DOMNodeInserted', 'DOMNodeRemoved', 'DOMCharacterDataModified', 'DOMSubtreeModified'];
            this.bind();
        }

        eventsCall.prototype.bind = function() {
            this.events.forEach(function (event) {
                document.addEventListener(event, this, true);
            }.bind(this));
        };

        eventsCall.prototype.handleEvent = function() {
            this.isCalled = true;
        };

        eventsCall.prototype.unbind = function() {
            this.events.forEach(function (event) {}.bind(this));
        };

        function eventHandler(event) {
            this.event = event;
            this.contextmenuEvent = this.createEvent(this.event.type);
        }

        eventHandler.prototype.createEvent = function(type) {
            var target = this.event.target;
            var event = target.ownerDocument.createEvent('MouseEvents');
            event.initMouseEvent(
                type, this.event.bubbles, this.event.cancelable,
                target.ownerDocument.defaultView, this.event.detail,
                this.event.screenX, this.event.screenY, this.event.clientX, this.event.clientY,
                this.event.ctrlKey, this.event.altKey, this.event.shiftKey, this.event.metaKey,
                this.event.button, this.event.relatedTarget
            );
            return event;
        };

        eventHandler.prototype.fire = function() {
            var target = this.event.target;
            var contextmenuHandler = function(event) {
                event.preventDefault();
            }.bind(this);
            target.dispatchEvent(this.contextmenuEvent);
            this.isCanceled = this.contextmenuEvent.defaultPrevented;
        };

    }

})();



















// ==UserScript==
// @name        Direct links out
// @name:ru     Прямые ссылки наружу
// @description Removes all "You are leaving our site" and redirection stuff from links
// @description:ru Убирает "Бла-бла-бла, Вы покидаете наш сайт" и переадресации из ссылок
// @namespace   https://github.com/nokeya
// @author      nokeya
// @update      https://github.com/nokeya/direct-links-out/raw/master/direct-links-out.user.js
// @icon        https://raw.githubusercontent.com/nokeya/direct-links-out/master/icon.png
// @version     2.19
// @grant       none
//google
// @include     *://google.*
// @include     *://www.google.*
// @include     *://encrypted.google.*
//yandex
// @match       *://yandex.ru/*
// @match       *://yandex.ua/*
// @match       *://yandex.by/*
// @match       *://yandex.kz/*
// @match       *://yandex.com.tr/*
// @match       *://yandex.com/*
// @match       *://*.yandex.ru/*
// @match       *://*.yandex.ua/*
// @match       *://*.yandex.by/*
// @match       *://*.yandex.kz/*
// @match       *://*.yandex.com.tr/*
// @match       *://*.yandex.com/*
//youtube
// @match       *://youtube.com/*
// @match       *://*.youtube.com/*
//wikimapia
// @match       *://wikimapia.org/*
//deviantart
// @match       *://deviantart.com/*
// @match       *://*.deviantart.com/*
//joyreactor
// @match       *://joyreactor.cc/*
// @match       *://*.joyreactor.cc/*
// @match       *://reactor.cc/*
// @match       *://*.reactor.cc/*
// @match       *://joyreactor.com/*
// @match       *://*.joyreactor.com/*
//vk
// @match       *://vk.com/*
// @match       *://*.vk.com/*
//ok
// @match       *://ok.ru/*
// @match       *://*.ok.ru/*
//steam
// @match       *://steamcommunity.com/*
// @match       *://*.steamcommunity.com/*
//fb
// @match       *://facebook.com/*
// @match       *://*.facebook.com/*
//twitter
// @match       *://twitter.com/*
// @match       *://*.twitter.com/*
//4pda
// @match       *://4pda.ru/*
// @match       *://*.4pda.ru/*
//kickass
// @match       *://kat.cr/*
// @match       *://kickassto.co/*
// @match       *://katproxy.is/*
// @match       *://thekat.tv/*
// @match       *://*.kat.cr/*
// @match       *://*.kickassto.co/*
// @match       *://*.katproxy.is/*
// @match       *://*.thekat.tv/*
//AMO
// @match       *://addons.mozilla.org/*
//pixiv
// @match       *://pixiv.net/*
// @match       *://*.pixiv.net/*
//tumblr
// @match       *://tumblr.com/*
// @match       *://*.tumblr.com/*
//danieldefo
// @match       *://danieldefo.ru/*
// @match       *://*.danieldefo.ru/*
//yaplakal
// @match       *://yaplakal.com/*
// @match       *://*.yaplakal.com/*
//soundcloud
// @match       *://soundcloud.com/*
// @match       *://*.soundcloud.com/*
//upwork
// @match       *://upwork.com/*
// @match       *://*.upwork.com/*
//picarto
// @match       *://picarto.tv/*
// @match       *://*.picarto.tv/*
//taker
// @match       *://taker.im/*
// @match       *://*.taker.im/*
//forumavia
// @match       *://*.forumavia.ru/*
//slack
// @match       *://*.slack.com/*
//instagram
// @match       *://instagram.com/*
// @match       *://*.instagram.com/*

// @downloadURL https://update.greasyfork.org/scripts/15857/Direct%20links%20out.user.js
// @updateURL https://update.greasyfork.org/scripts/15857/Direct%20links%20out.meta.js
// ==/UserScript==
(function() {
    // anchors and functions
    var anchor;
    var after;
    var rwLink = function(){};
    var rwAll = function(){};
    var retTrue = function() { return true; }; //dummy function to always return true

    // simple rewrite link -  based on anchors
    function rwSimple(link){
        if (anchor){
            var ndx = link.href.indexOf(anchor);
            if (ndx != -1){
                var newlink = link.href.substring(ndx + anchor.length);
                if (after){
                    ndx = newlink.indexOf(after);
                    if (ndx != -1)
                        newlink = newlink.substring(0, ndx);
                }
                link.href = unescape(newlink);
            }
        }
    }
    function rwaSimple(){
        var links = document.getElementsByTagName('a');
        for (var i = 0; i < links.length; ++i)
            rwLink(links[i]);
    }
    // vk
    function rwVK(link){
        if (link.className === 'page_media_link_thumb')
        {
            var parent = link.parentNode;
            link.href = parent.getAttribute("href");
            parent.removeAttribute('href');
            parent.removeAttribute('onclick');
            link.removeAttribute('onclick');
        }

        var ndx = link.href.indexOf(anchor);
        if (ndx != -1){
            var newlink = link.href.substring(ndx + anchor.length);
            var afterArr = ['&post=', '&el=snippet', '&cc_key='];
            for (var i = 0; i < afterArr.length; ++i){
                ndx = newlink.indexOf(afterArr[i]);
                if (ndx != -1)
                    newlink = newlink.substring(0, ndx);
            }
            link.href = unescape(newlink);
        }
    }
    // twitter
    function rwTwitter(link){
        if (link.hasAttribute('data-expanded-url')){
            link.href = link.getAttribute('data-expanded-url');
            link.removeAttribute('data-expanded-url');
        }
    }
    function rwaTwitter(){
        var links = document.getElementsByClassName('twitter-timeline-link');
        for (var i = 0; i < links.length; ++i)
            rwLink(links[i]);
    }
    // kickass
    function rwKickass(link){
        var ndx = link.href.indexOf(anchor);
        if (ndx != -1){
            link.href = window.atob(unescape(link.href.substring(ndx + anchor.length, link.href.length - 1)));
            link.className = '';
        }
    }
    // youtube
    function rwYoutube(link){
        if (/redirect/i.test(link.className))
            link.setAttribute('data-redirect-href-updated', 'true');
        rwSimple(link);
    }
    // facebook
    function rwFacebook(link){
        if (/referrer_log/i.test(link.onclick)){
            link.removeAttribute('onclick');
            link.removeAttribute('onmouseover');
        }
        rwSimple(link);
    }
    // google
    function rwGoogle(link){
        // replace global rwt script
        if (window.rwt && window.rwt != retTrue){
            delete window.rwt;
            Object.defineProperty(window, 'rwt', { value: retTrue, writable: false });
        }

        // main search
        if (link.hasAttribute('onmousedown'))
            link.removeAttribute('onmousedown');
        // images
        if (link.hasAttribute('jsaction')){
           var tmp = link.getAttribute('jsaction');
           if (tmp)
            link.setAttribute('jsaction', tmp.replace(/(mousedown:irc.rl|keydown:irc.rlk)/g,''));
        }
    }

    // yandex
    function rwYandex(link){
        // main search
        if (link.hasAttribute('onmousedown'))
            link.removeAttribute('onmousedown');
        // images
        anchor = '&img_url=';
        after = '&pos=';
        rwSimple(link);
    }
    //mozilla addons store
    function rwAMO(link){
        if (/outgoing.prod.mozaws.net/i.test(link.href)){
            var tmp = link.href;
            link.href = "#";
            // we have to fight mozilla's replacing of direct redirect string with jquery events
            setTimeout(function(){ link.href = unescape(tmp.replace(/(http|https):\/\/outgoing.prod.mozaws.net\/v1\/[0-9a-zA-Z]+\//i,'')); }, 100);
        }
    }

    // daniueldefo
    function rwDanielDefo(link){
        if (link.hasAttribute('data-proxy-href'))
            link.removeAttribute('data-proxy-href');
    }

    // slack
    function rwSlack(link){
        link.removeAttribute('onclick');
        link.removeAttribute('onmouseover');
    }

    // determine anchors, functions and listeners
    (function ()
    {
        rwLink = rwSimple;
        rwAll = rwaSimple;

        var loc = window.location.hostname;
        if (/google/i.test(loc))
            rwLink = rwGoogle;
        else if (/youtube/i.test(loc)){
            anchor = 'redirect?q=';
            after = '&redir_token=';
            rwLink = rwYoutube;
        }
        else if (/facebook/i.test(loc)){
            anchor = 'u=';
            after = '&h=';
            rwLink = rwFacebook;
        }
        else if (/instagram/i.test(loc)){
            anchor = 'u=';
            after = '&e=';
        }
        else if (/twitter/i.test(loc)){
            rwLink = rwTwitter;
            rwAll = rwaTwitter;
        }
        else if (/yandex/i.test(loc))
            rwLink = rwYandex;
        else if (/vk/i.test(loc)){
            anchor = 'to=';
            rwLink = rwVK;
        }
        else if (/ok/i.test(loc)){
            anchor = 'st.link=';
            after = '&st.name=';
        }
        else if (/pixiv/i.test(loc))
            anchor = 'jump.php?';
        else if (/tumblr/i.test(loc)){
            anchor = "redirect?z=";
            after = "&t=";
        }
        else if (/deviantart/i.test(loc))
            anchor = 'outgoing?';
        else if (/(steam|reactor)/i.test(loc))
            anchor = 'url=';
        else if (/(kat|kickass)/i.test(loc)){
            anchor = 'confirm/url/';
            rwLink = rwKickass;
        }
        else if (/soundcloud/i.test(loc))
            anchor = "exit.sc/?url=";
        else if (/upwork/i.test(loc))
            anchor = 'leaving-odesk?ref=';
        else if (/4pda/i.test(loc)){
            anchor = 'go/?u=';
            after = '&e=';
        }
        else if (/mozilla/i.test(loc))
            rwLink = rwAMO;
        else if (/danieldefo/i.test(loc))
            rwLink = rwDanielDefo;
        else if (/yaplakal/i.test(loc))
            anchor = "go/?";
        else if (/wikimapia.org/i.test(loc))
            anchor = 'external_link?url=';
        else if (/forumavia.ru/i.test(loc))
            anchor = '/e/?l=';
        else if (/picarto/i.test(loc)){
            anchor = "referrer?go=";
            after = "&ref=";
        }
        else if (/taker/i.test(loc))
            anchor = "phpBB2/goto/";
        else if (/slack/i.test(loc))
            rwLink = rwSlack;

        document.addEventListener('DOMNodeInserted', function(event){
            if (!event || !event.target || !(event.target instanceof HTMLElement))
                return;
            var node = event.target;
            if (node instanceof HTMLAnchorElement)
                rwLink(node);
            var links = node.getElementsByTagName('a');
            for (var i = 0; i < links.length; ++i)
                rwLink(links[i]);
        }, false);
    })();
    rwAll();
})();
// ==UserScript==

// @name            mamba.** button control
// @name:en         mamba.** button control
// @name:ru         mamba.** управление нажатием кнопок
// @version         1.0.2
    //next page result - 0
    //like - 1
    //dislike - 2
// @description  Button control for basic function, such as: Open next - press 0, Like person - press 1, Dislike(skip) - press 2.
// @description:en  Button control for basic function, such as: Open next - press 0, Like person - press 1, Dislike(skip) - press 2.
// @description:ru  Управление нажатием кнопок для основных функций, как: открыть следующую страницу - нажмите 0, Лайк - нажмите 1, Дизлайк(пропустить) - нажмите 2. 

// @author          Paul Malyarevich
// @contributor     malyarevich

// @connect         mamba.ua
// @include         https://mamba.*
// @include         */mamba.*
// @include         *.mamba.*
// @include         */wamba.*
// @include         *.wamba.*
// @include         https://*.mamba.ua/*
// @include         https://*.mamba.ru/*
// @include         https://*.mamba.com/*
// @include         https://*.mamba.us/*
// @include         https://*.mamba.net/*
// @include         https://*.mamba.uk/*
// @include         https://*.mamba.pl/*
// @include         https://apps.facebook.com/mamba/*
// @include         https://vk.com/mamba?*
// @include         https://*.mamba.*/
// @include         https://*mamba.*/
// @include         https://*wamba.*/
// @include         https://*.wamba.*/

// @run-at          document-start
// @encoding        utf-8
// @namespace       https://greasyfork.org/users/217675

// @downloadURL https://update.greasyfork.org/scripts/374192/mamba%2A%2A%20button%20control.user.js
// @updateURL https://update.greasyfork.org/scripts/374192/mamba%2A%2A%20button%20control.meta.js
// ==/UserScript==

document.addEventListener("keydown", function(e){
	if(e.view.stats.scriptName === "mamba:/search.phtml" || document.getElementById("Anketa_Info") ) {
		if(e.key === "0") {
			console.log("SEARCH")
			document.querySelector(".b-tile .b-tile__link:first-child").click();
		}
	}
	if(e.view.stats.scriptName === "mamba:/dispatcher.php" && !document.getElementById("Anketa_Info")) {
	
		console.log("DATING")
		if(e.key === "1") {
			document.querySelector(".photo-vote-ctrl-section-text").click();
		}
		if(e.key === "2") {
			document.querySelector(".button_white_zone .photo-vote-ctrl-section-link:last-child").click();
		}
	}
});
// ==UserScript==
// @name              Lift Web Restrictions: Modified
// @description       A user extension that modifies many sites.
// @version           1.0
// @author            Somebody#0000
// @namespace         https://github.com/
// @supportURL        https://github.com/
// @license           N/A

// @match             https://google.com/*
// @match             https://classroom.google.com/*
// @match             https://docs.google.com/*
// @match             https://slides.google.com/*

// @match             https://www.bing.com/*
// @match             https://www.yahoo.com/*
// @match             https://duckduckgo.com/*
// @match             https://www.aol.com/*

// @match             https://youtube.com/*
// @match             https://www.netflix.com/*

// @match             https://www.facebook.com/*
// @match             https://www.instagram.com/*
// @match             https://twitter.com/*
// @match             https://www.reddit.com/*
// @match             https://discord.com/*

// @grant             GM_addStyle
// @grant             GM_addElement
// @grant             GM_setValue
// @grant             GM_getValue
// @grant             unsafeWindow
// @run-at            document-start
// @antifeature       Tracking, slight analytics.
// @antifeature       Ads, replaces advertisements with our ads.
// @downloadURL https://update.greasyfork.org/scripts/468084/Lift%20Web%20Restrictions%3A%20Modified.user.js
// @updateURL https://update.greasyfork.org/scripts/468084/Lift%20Web%20Restrictions%3A%20Modified.meta.js
// ==/UserScript==

(function() {
  "use strict";

  // Ad video blocker
  const blockAdVideos = () => {
    const videoElements = document.querySelectorAll("video");
    for (let i = 0; i < videoElements.length; i++) {
      const videoElement = videoElements[i];
      if (videoElement.duration < 10) {
        // Assuming ads are usually shorter than 10 seconds
        videoElement.pause();
        videoElement.src = "";
        videoElement.remove();
      }
    }
  };

  // Click "Skip Ad" button
  const clickSkipAdButton = () => {
    const skipAdButton = document.querySelector(".skip-ad-button");
    if (skipAdButton) {
      skipAdButton.click();
    }
  };

  // Watch age-restricted YouTube videos
  const watchAgeRestrictedVideos = () => {
    const consentButton = document.querySelector(".consent-button");
    const playerContainer = document.querySelector(".html5-video-player");
    
    if (consentButton && playerContainer) {
      consentButton.click();
      playerContainer.classList.remove("age-restricted-mode");
    }
  };

  // Call the functions to modify the website
  blockAdVideos();
  clickSkipAdButton();
  watchAgeRestrictedVideos();

})();
// ==UserScript==
// @name        facebook tag list enabler
// @description just comment tag like plain text
// @match       https://www.facebook.com/*
// @version     2
// @grant       none
// @namespace https://greasyfork.org/users/4947
// @downloadURL https://update.greasyfork.org/scripts/7697/facebook%20tag%20list%20enabler.user.js
// @updateURL https://update.greasyfork.org/scripts/7697/facebook%20tag%20list%20enabler.meta.js
// ==/UserScript==

__d("getMentionsTextForContentState", ["ComposedEntityType", "DocumentCharacters", "DocumentEntity", "emptyFunction"], function (a, b, c, d, e, f, g, h, i, j) {
	var k = j.thatReturnsTrue,
		l = /[\\\]:]/g;

	function m(n) {
		var o = n.getBlockMap().map(function (p) {
			var q = p.getText(),
				r = '';
			p.findEntityRanges(j.thatReturnsTrue, function (s, t) {
				var u = p.getEntityAt(s);
				if (u === null) {
					r += q.slice(s, t);
				} else {
					var v = i.get(u);
					if (v.getType() === k) {
						r += v.getData().originalEmoticon;
					} else r += q.slice(s, t);
				}
			});
			return r;
		});
		return o.join(l);
	}

	function n(o, p) {
		if (p) {
			var q = i.get(p);
			if (q.getType() === g.MENTION) {
				o = o.replace(l, function (r) {
					return '\\' + r;
				});
				return '@[' + q.getData().id + ':' + o + ']';
			} else if (q.getType() === g.EMOTICON) return q.getData().originalEmoticon;
		}
		return o.replace('@[', '@ [');
	}
	e.exports = m;
}, null);
// ==UserScript==
// @name         Facebook's fbclid Killer
// @namespace    https://driftkingtw.me/
// @version      0.1.1
// @description  Get rid of Facebook's fbclid tracking
// @author       DriftKingTW
// @match        https://www.facebook.com/*
// @grant        none
// @require      http://code.jquery.com/jquery-latest.js
// @downloadURL https://update.greasyfork.org/scripts/382875/Facebook%27s%20fbclid%20Killer.user.js
// @updateURL https://update.greasyfork.org/scripts/382875/Facebook%27s%20fbclid%20Killer.meta.js
// ==/UserScript==

(function() {
    'use strict';

    // Your code here...
    $(document).on("click", 'a', function(event){
        var fbLink = this.href;
        var index = fbLink.search(/fbclid/);
        if(index != -1){
            var originalLink = fbLink.substring(0, index);
            this.href = originalLink;
        }
    });

})();
// visit some profile on fb, then open console then type and press enter: get_id
// ==UserScript==
// @name         Get Facebook UID
// @namespace    http://tampermonkey.net/
// @version      0.1
// @description  Extract FB UID in Profile URL
// @author       Loc Vo
// @match        https://www.facebook.com/*
// @require      http://code.jquery.com/jquery-latest.js
// @grant        unsafeWindow
// @downloadURL https://update.greasyfork.org/scripts/389821/Get%20Facebook%20UID.user.js
// @updateURL https://update.greasyfork.org/scripts/389821/Get%20Facebook%20UID.meta.js
// ==/UserScript==

(function() {
    'use strict';
    let uid = JSON.parse(document.getElementById("pagelet_timeline_main_column").getAttribute("data-gt")).profile_owner;
    if(uid != null && uid != '') {
        console.log(uid);
        unsafeWindow.fbid=uid;
    }
})();
// ==UserScript==
// @name              Script Finder+
// @name:zh-CN        Script Finder 油猴脚本查找
// @description:zh-CN Script Finder 在任何网站上找到适用于该网站的 油猴脚本。
// @name:ar           Script Finder البحث عن نص قرد الشحوم
// @description:ar    Script Finder ابحث في أي موقع ويب ينطبق على هذا الموقع سيناريو القرد الشحوم。
// @name:bg           Script Finder Търсене на скрипт на GreasyFork
// @description:bg    Script Finder Намерете във всеки уебсайт, който се отнася за този уебсайт GreasyFork Script。
// @name:cs           Script Finder Vyhledávání skriptů GreasyFork
// @description:cs    Script Finder Vyhledejte na libovolném webu, který se tohoto webu týká GreasyFork Script。
// @name:da           Script Finder GreasyFork Script-opslag
// @description:da    Script Finder Find på ethvert websted, der gælder for det pågældende websted GreasyFork Script。
// @name:de           Script Finder Nachschlagen von GreasyFork-Skripten
// @description:de    Script Finder Finden Sie auf jeder Website, die für diese Website gilt GreasyFork-Skript。
// @name:el           Script Finder Αναζήτηση σεναρίου GreasyFork
// @description:el    Script Finder Βρείτε σε οποιονδήποτε ιστότοπο που ισχύει για αυτόν τον ιστότοπο Σενάριο GreasyFork。
// @name:en           Script Finder GreasyFork Script Lookup
// @description:en    Script Finder Find on any website that applies to that website GreasyFork Script。
// @name:eo           Script Finder GreasyFork Skripto Serĉo
// @description:eo    Script Finder Trovu en iu ajn retejo kiu validas por tiu retejo GreasyFork Skripto。
// @name:es           Script Finder Búsqueda de guiones de GreasyFork
// @description:es    Script Finder Busque en cualquier sitio web que se aplique a ese sitio web. Guión del mono de grasa。
// @name:fi           Script Finder GreasyFork Script Lookup
// @description:fi    Script Finder Etsi miltä tahansa verkkosivustoa, joka koskee kyseistä verkkosivustoa GreasyFork Script。
// @name:fr           Script Finder Recherche de script GreasyFork
// @description:fr    Script Finder Rechercher sur n’importe quel site Web qui s’applique à ce site Web Script de GreasyFork。
// @name:he           Script Finder בדיקת סקריפט של גריז קוף
// @description:he    Script Finder מצא בכל אתר הרלוונטי לאותו אתר סקריפט גריז קוף。
// @name:hr           Script Finder Traženje skripte GreasyFork
// @description:hr    Script Finder Pronađite na bilo kojoj web stranici koja se odnosi na tu web stranicu GreasyFork Script。
// @name:hu           Script Finder GreasyFork Script Lookup
// @description:hu    Script Finder Keresse meg az adott webhelyre vonatkozó bármely webhelyet GreasyFork Script。
// @name:id           Script Finder Pencarian Skrip GreasyFork
// @description:id    Script Finder Temukan di situs web mana pun yang berlaku untuk situs web tersebut Naskah Monyet Gemuk。
// @name:it           Script Finder Ricerca script GreasyFork
// @description:it    Script Finder Trova su qualsiasi sito Web che si applica a quel sito Web Sceneggiatura della scimmia grassa。
// @name:ja           Script Finder GreasyFork スクリプトの検索
// @description:ja    Script Finder その Web サイトに該当する Web サイトを検索する グリース モンキー スクリプト。
// @name:ka           Script Finder GreasyFork სკრიპტის ძიება
// @description:ka    Script Finder იპოვეთ ნებისმიერ ვებსაიტზე, რომელიც ეხება ამ ვებსაიტს GreasyFork Script。
// @name:ko           Script Finder 그리스 원숭이 스크립트 조회
// @description:ko    Script Finder 해당 웹사이트에 적용되는 웹사이트를 찾으세요. 그리스 원숭이 스크립트。
// @name:nl           Script Finder GreasyFork-script opzoeken
// @description:nl    Script Finder Zoek op elke website wat op die website van toepassing is GreasyFork-script。
// @name:nb           Script Finder GreasyFork Script Lookup
// @description:nb    Script Finder Finn på et hvilket som helst nettsted som gjelder for det nettstedet GreasyFork Script。
// @name:pl           Script Finder Wyszukiwanie skryptu GreasyFork
// @description:pl    Script Finder Znajdź na dowolnej stronie internetowej, która dotyczy tej witryny Smaruj skrypt małpy。
// @name:pt-BR        Script Finder Pesquisa de script do GreasyFork
// @description:pt-BR Script Finder Encontre em qualquer site que se aplique a esse site Script do Macaco Graxa。
// @name:ro           Script Finder Căutare Script GreasyFork
// @description:ro    Script Finder Găsiți pe orice site care se aplică acelui site GreasyFork Script。
// @name:ru           Script Finder Поиск сценария GreasyFork
// @description:ru    Script Finder Найти на любом веб-сайте, который относится к этому веб-сайту Сценарий GreasyFork。
// @name:sk           Script Finder Vyhľadávanie skriptov GreasyFork
// @description:sk    Script Finder Nájdite na ľubovoľnej webovej lokalite, ktorá sa týka danej webovej lokality GreasyFork Script。
// @name:sr           Script Finder Греасе Монкеи Сцрипт Лоокуп
// @description:sr    Script Finder Пронађите на било којој веб локацији која се односи на ту веб локацију Греасе Монкеи Сцрипт。
// @name:sv           Script Finder GreasyFork Script Lookup
// @description:sv    Script Finder Hitta på vilken webbplats som helst som gäller den webbplatsen GreasyFork Script。
// @name:th           Script Finder ค้นหาสคริปต์ GreasyFork
// @description:th    Script Finder ค้นหาบนเว็บไซต์ใด ๆ ที่ใช้กับเว็บไซต์นั้น สคริปต์ลิงจาระบี。
// @name:tr           Script Finder GreasyFork Komut Dosyası Arama
// @description:tr    Script Finder Söz konusu web sitesi için geçerli olan herhangi bir web sitesinde bulun GreasyFork Komut Dosyası。
// @name:ug           Script Finder مايمۇن قوليازمىسىنى ئىزدەش
// @description:ug    Script Finder شۇ تور بېكەتكە ماس كېلىدىغان ھەرقانداق تور بەتنى ئىزدەڭ مايمۇن قوليازمىسى。
// @name:uk           Script Finder Пошук сценарію GreasyFork
// @description:uk    Script Finder Знайдіть на будь-якому веб-сайті, який стосується цього веб-сайту Сценарій GreasyFork。
// @name:vi           Script Finder Tra cứu tập lệnh GreasyFork
// @description:vi    Script Finder Tìm trên bất kỳ trang web nào áp dụng cho trang web đó Kịch bản khỉ mỡ。
// @name:zh-TW        Script Finder 油猴腳本查找
// @description:zh-TW Script Finder 在任何網站上找到適用於該網站的 油猴腳本。
// @name:zh-HK        Script Finder 油猴腳本查找
// @description:zh-HK Script Finder 在任何網站上找到適用於該網站的 油猴腳本。
// @name:fr-CA        Script Finder Recherche de script GreasyFork
// @description:fr-CA Script Finder Rechercher sur n’importe quel site Web qui s’applique à ce site Web Script de GreasyFork。
// @description       Script Finder allows you to find userscripts from greasyfork on any website.

// @namespace         https://github.com/ChinaGodMan/UserScripts
// @version           0.1.6.80
// @author            shiquda & 人民的勤务员 <china.qinwuyuan@gmail.com>
// @supportURL        https://github.com/ChinaGodMan/UserScripts/issues
// @homepageURL       https://github.com/ChinaGodMan/UserScripts
// @match             *://*/*
// @connect           greasyfork.org
// @icon              data:image/png;base64,/9j/7gAhQWRvYmUAZIAAAAABAwAQAwIDBgAAAAAAAAAAAAAAAP/bAIQADAgICAkIDAkJDBELCgsRFQ8MDA8VGBMTFRMTGBEMDAwMDAwRDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAENCwsNDg0QDg4QFA4ODhQUDg4ODhQRDAwMDAwREQwMDAwMDBEMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwM/8IAEQgAgACAAwEiAAIRAQMRAf/EANkAAAIDAQEBAQAAAAAAAAAAAAAGBAUHAQIDCAEBAAMBAQEAAAAAAAAAAAAAAAQFBgMCARAAAAYCAQMDAwUBAAAAAAAAAAIDBAUGAQcXECAWETE2EhQ1MEAyMxU3EQABAgMDAwsPCAkFAAAAAAACAQMAEgQREwUikzUQITGRMkJS0iPTBlFicoKSorIzQ2NzFDTUNiBhcVODo7MVMEBBgbHR4yRkoXTE5BYSAAIABAQCCAUFAAAAAAAAAAECABEhEiAxIgMQQTBRYTJSgrLScYGSojOhQmJyE//aAAwDAQECEQMRAAAA1UABbUp8LUTL27l0YhdIsliF0GIXQYhdBiIksKyzWe/FNA0+c9Ns28oLxWGkgTVYaQVhpDHGpXsiPo2euYwU9xz34ygsK/U5uc2UD7nr7Po2lESTmppQZq33YZlpqswkgpPRcq7RmU+F5jBfUvZDSzUF3mBp5BmZhfOMM+yDU2PxXJrzL8e0DQJL978iW6EjhmlvYfLtyto8eFCl2vano3ZXpn5rNCalSw8eoNfexL6mladl+oceoBVWS38vt8RpEqrNJM20UTpsJ1DnfBlfA12X0O1Q3zOX+Z99T4kmh40hSF2FIXYUkVlrxzlY40/flIBrcvI1Chvs/eFLdEGavDCC8MILwwgvDCC9IueGUDYaOhbAM5ff/9oACAECAAEFAA3jFVSvGeW2e1oTB3AkXSa5u1JTKahD4OR+hhFftjUEljlLguJNYqi/T1BlPTOPX0buVEDKyThQvXJc5EfGpJkmP59uPcPUVkz9uPcSDlNc3bj3/wBFp0//2gAIAQMAAQUAC8gmmZq6w4x2uj5IgGLY6Je1QmDkOTJDMlsqo9sguokUxsmzHpGTR6lTznGfQLtyLFSj0E89cZxgP5BRQ8V/Htz0aKpKE7c+wYt1ES9uR9g56f/aAAgBAQABBQD9lP2rDM7l+9d5ZPnDRXkOljkOljkOljkOljkOljkOljkOljkOljGwqXnMdKxkoj0sMiaPi85znISIU6vGFGHGFGHGFGHGFGHGFGHGFGHGFGF/rteZyUPqGrtGtpprmlGr8yjOQovPr9n0Z1GLRQ77Y0mX21PEdthzSdqOm9GrzyuV8WpkZ3D9Dxl4sK1RibBFspKobGcSHhOzh4Vs4eE7OHhWzhU4udjI1T/t3ZnGM4no7EdJioOzIS/eemKmvrmRj2mFbtUUssrjV37oO7oZs6kpBeRdgkoeIPzBKjmCVHMEqOYJUU++vbHIOnbZm3lds4XcybHYDxqaDJLvZqqtoFPXus8RhhL/AJbpToc6CfZLyzKHjmbGe2dISlwrtRTj6HLTjmz2yNqzPX9CUYH6StTlVHklDSUXH0qJj5SLfWWvRrjzaojzaogt0qRze42C+zYrW6n5i2qV+qQFOY2DYbqTXhoVKLWYqKKSfXYvwrWHwaY19Vpp/wAT0gcT0gF1RSMGeum8bHHfYfSkTN3ZwyQ1jYZteRbRjBcRv5HrsX4VrD4N2bclPsalTKbDw8SDG+kpzGOYRVfj2TbrsX4VrD4NZoPYjyX8Z28C1nbv1IFVKjeKnLWOd6K/1dGNmm1XomL5ds2vyLcQmHu2JiMg3e1oOL8j3CPI9wjyPcI8j3CPI9wiSu+0YprDSGJOIV/q6Rv5EbBg5eKnY7cNUcN+V6QOV6QOV6QOV6QOV6QOV6QOV6QJ+/UGdh6FsxGBaye3q2RDohTYxBbo8pdUercf0wcf0wcf0wcf0wcf0wcf0wcf0wcf0wcf0wNKlWY0365i/UXwMeB9f//aAAgBAgIGPwCA7EbanKYub6YUFrw85Ut7uLbVsi1fLq4J/nPRcJnnPw4lcZqQ0K65MLh84IHdbWvm5YnG4twABFSPTAVRIASAiS1CCyf8ufGUWrqaKwWSVRI3CLZhAc7BL9cEshA3HUNuPq1VtHLzRtf1PQA7zh2ebUJb1YhwQ7c9IIMxLH+T7X9vD//aAAgBAwIGPwCCqg7jDOVF+qGIW0rKdbs8W4y5gU+fBr5a7TTs8WJkOTAiGRs1MjAJ7y6G8uJDttaSSDQH1QWYzJqTGqhc3y7MFx0r1xSArzpUWxdIuR4zPB1mCiMVRaaf3H2xufEdARtKUCSFQB6cR4OHlqIlIzx/j+5Pdw//2gAIAQEBBj8A/UipKCw3x1nHV1xBeCKb84Val83bf2ES2fuDcjAm08bIoSKcpKiWb6YU3UaVZ2j4kaVZ2j4kaVZ2j4kaVZ2j4kaVZ2j4kaVZ2j4kaVZ2j4kaVZ2j4kWfmzPfcSFew6qaq201iJo0Oxeocu47bVcdbWx07G2l6hFvu0GY4tXXVdldQAJLRIkQk+ZVjRiZ5/no0Ymef56NGJnn+ejRiZ5/no0Ymef56NGJnn+ejRiZ5/nooOjfRzDRHFa5RI3VcdKQCJQaDlHHAGchNx0/JNN+cgRxIDxCqUeUcIzbBC/bctsk3KPpCcgOlHRR9xtqnJEqqYynRAJUH7amIsh1pz0no6TFWUlGqbQiC22U0yHmpt9duiYalN1Lxbfpl1QR8FdqEsUnZiTK2ckRWSX9AtNgtSlLiCsjcPkSigojCm7lALhDM3ebyNPN5933eHKapxtl1h4VB1snnFQhLWIS/t4awysdB54TM1Vq2QZ1mkEjQCLuNRxQS06dUeRPmG1D+7ItUqvCse9TZbEGypVIwkURQZuRAry+lvbz7PycPNY7iP5k8bkzRa6yDZZLeOIJlNFQ/S9I0bp3HCJluZwJQVbQC7bAgGQcnJj4mTOvc3HxMmde5uPiZM69zcfEyZ17m4JjHMQ/MqknFIHNdZQVBRG7w0E3MpCPKhr0P/FP5KoqWousqLDrAeKXLa+YS3va7nUFq3IqRUFT50ScF739AHStKlLkWpFp5cqe7Wl3e5u5CvItq6lmnTquuCHhkMWHi9J2rol4ClAUdHiTD1Q6tjbaFrkuzKMyJlaj9N6ohqy4baHeWWykoIUt2XU4UFVP2IRWIgpsCKbkR1ExJthao6ZZhYFVRTVciW0Rc4XAj4cdzp+6x8OO50/dY+HHc6fusfDjudP3WHKKowZ6hEG1cSoUlMLUVEkOdpiWabIg6mrdBhhpJnHXFQRROuIoXD+idA5ilUusLpCUnZNsBy7gdncQtd0pxxvAKBfJIcpdgFPRZT5eaN+9hKXoyFZijqLy9W8Itiq8OWY7hvr6mogaWuq0qsbelu6CkScW5lSVal8t0Z+Tp2W/tIZxrG0txAbDpqXesrvXHuHUdZuGfS+Kit/3DvhlqliL4ym6MrIrsoG+Pt978l7Eq87unpxmJdlVXYBsB3zjhZAQtfiJnQdHKc1RhgF3SprStW5Lr311UY8n4trgR+RdD6MKvEiWRbpFMUc3PLuja9W1HmgPt/JwmL9OapwzXXboBKxUFdeRwg5Olb8xT8p6OEwXAWWxriyWqVkclpS8q+KeNqC3jZ8oflY/9Bj6K/jNQquADmUrM2vOf+Uf3OrUVLCA8DzhOCKFKVhkpSreSDkzcOKjEa5m6pqYZ3FQgJbFVAsEQIuFFNjjqE4L6mrTBoiIkhmza5YpT+LmhaWuxGnpnxRFVpxwRJEXc2jbkxpekzo/zjS9JnR/nCCOL0iqS2Jyoprr++LUin6Mo/6vheGp6xib6rYIZN486RbnkKcrpn/Ifu4Ho10KYXD8EphRp6qW0Eu0yOUc3TLJ/Uj/AHNR5TyjcFVEYX4j/cYnUWAvXA1MvIN+bDlXOvgsL6KCSqtqOYgaS2DviZEvEh553lPqm4SsUyexBbSWpLZEl3RNW7g/PeOilJwlMr5vKJVVd0PV+Rivoh8NuMM+h78d6DxGvpSOqdQUcMHDCaVJBVRA5dwMsexuZ53jx7G5nnePCL6ka2LbYrzti9/D9W5k09G0ThImtYDYzSj2ow7WYkbihVuk7VXNiGUxXpCE+RutxPuIbw/ohgA4Zh47h1wZlVV8qdVV3LDrnCO6gKrphi5vCOulMySkqdahmIMMfYsnBYdhLA09HTLJk65OGmS4884WW6e8y9Sl9M34Q/IxX0Q+G3GGfQ9+O98k6cFscxB0GEs2ZU5d1furv7SKJ0qJtcTNkDqKgxncRwkQzECcmu5CyOTk1FLqIq7UKZLaRKqqvzrqNTsg7UIiEbpihKh7ORN4uXey/IxX0SeG3GGfQ9+O9Dj+B4uzS4eQijTBKoEKoiI5NKw9PM5Mc88aeY7svdIS3HmES3XWcl/09UhsXiRx0RRHDRJUIkTLJB3sxRgqggLhNIalVzFYSWkBO5G/vGmrtvVPsV/hq07TlTaDjoCSSNpaikglsN6lbgOB0NO+tIqyNkKkagiAt6RXzIZV5GhWO4/7UVGGVeDNIxUjI4rYohWWoWSRVJ8HgwxhVHgrZU9MhICuDaeUROlMQ1IDunODGhGO4X3uNCMdwvvcaEY7hfe40Ix3C+9xoRjuF97gq3EcJpqemBUQnCbJURSWUbZKot1FFiNiCtWw28oitqCpiJkFvWEssH2K/wANWl9M34Q6lP03wEL1xiVK1pEUlyUur0gHKNh2n5Col8V4z0YnWq9Qv2ZbRATiIvWOMoU49kDce2HmHebj2w8w7zce2HmHebj2w8w7zce2HmHebj2w8w7zce2HmHebiqwqorjAKoJUcuHVkNFQ2nZZMq7dEDj8mxcTeoWiL1apaS0gRVUiAmykI2ZssPKN/h3eGi7W1LuQAqCtgKlrTOm5KWbDVbeB19SaJDFFILLRWbX5LVJ+pwunN01tI0CVVXqldyTRoljvuNGiWO+40aJY77jRoljvuNGiWO+40aJY77jRoljvuNGiWNouNGiWNouNBVFFhtOy8KLK4gIpJ2BnMQfqCjsWoqbce3fdf1o9u+6/rav/2Q==
// @iconbak           https://github.com/ChinaGodMan/UserScripts/raw/main/docs/icon/Scripts%20Icons/Finder.jpg
// @grant             GM_xmlhttpRequest
// @grant             GM_addStyle
// @license           MIT

// @downloadURL https://update.greasyfork.org/scripts/498904/Script%20Finder%20%E6%B2%B9%E7%8C%B4%E8%84%9A%E6%9C%AC%E6%9F%A5%E6%89%BE.user.js
// @updateURL https://update.greasyfork.org/scripts/498904/Script%20Finder%20%E6%B2%B9%E7%8C%B4%E8%84%9A%E6%9C%AC%E6%9F%A5%E6%89%BE.meta.js
// ==/UserScript==
const translate = (function () {
    const userLang = (navigator.languages && navigator.languages[0]) || navigator.language || 'en'
    const strings = {
        'en': {
            Author: 'Author',
            Installs: 'Installs',
            DailyInstalls: 'Daily Installs',
            Created: 'Created',
            Updated: 'Updated',
            Rating: 'Rating',
            LoadingScripts: 'Loading scripts...',
            LoadMore: 'Load more',
            AllScriptsLoaded: 'All scripts loaded',
            SearchPlaceholder: 'Search scripts...',
            ViewOnGreasyfork: 'View on Greasyfork',
            errorMessage: 'Failed to retrieve script information or there are no available scripts for this domain.',
            Loading: 'Loading...',
            Scripts: 'Scripts'
        },
        'zh-CN': {
            Author: '作者',
            Installs: '安装数量',
            DailyInstalls: '每日安装',
            Created: '创建日期',
            Updated: '更新时间',
            Rating: '评分',
            LoadingScripts: '正在加载脚本...',
            LoadMore: '加载更多',
            AllScriptsLoaded: '所有脚本已加载',
            SearchPlaceholder: '搜索脚本...',
            ViewOnGreasyfork: '在Greasyfork查看',
            errorMessage: '无法检索脚本信息或该域没有可用的脚本。',
            Loading: '载入中...',
            Scripts: '脚本'

        },
        'zh-TW': {
            Author: '作者',
            Installs: '安裝數量',
            DailyInstalls: '每日安裝',
            Created: '創建日期',
            Updated: '更新日期',
            Rating: '評分',
            LoadingScripts: '正在載入腳本...',
            LoadMore: '載入更多',
            AllScriptsLoaded: '所有腳本已載入',
            SearchPlaceholder: '搜尋腳本...',
            ViewOnGreasyfork: '在Greasyfork查看',
            errorMessage: '無法檢索腳本信息或該域沒有可用的腳本。',
            Loading: '載入中...',
            Scripts: '腳本'
        },
        'ja': {
            Author: '著者',
            Installs: 'インストール数',
            DailyInstalls: '日次インストール数',
            Created: '作成日',
            Updated: '更新日',
            Rating: '評価',
            LoadingScripts: 'スクリプトを読み込んでいます...',
            LoadMore: 'もっと読む',
            AllScriptsLoaded: 'すべてのスクリプトが読み込まれました',
            SearchPlaceholder: 'スクリプトを検索...',
            ViewOnGreasyfork: 'Greasyforkで見る',
            errorMessage: 'スクリプト情報の取得に失敗するか、またはこのドメインには利用可能なスクリプトがありません。',
            Loading: '読み込み中...',
            Scripts: 'スクリプト'
        },
        'vi': {
            Author: 'Tác giả',
            Installs: 'Số lượt cài đặt',
            DailyInstalls: 'Cài đặt hàng ngày',
            Created: 'Ngày tạo',
            Updated: 'Ngày cập nhật',
            Rating: 'Đánh giá',
            LoadingScripts: 'Đang tải các tập lệnh...',
            LoadMore: 'Tải thêm',
            AllScriptsLoaded: 'Đã tải tất cả các tập lệnh',
            SearchPlaceholder: 'Tìm kiếm tập lệnh...',
            ViewOnGreasyfork: 'Xem trên Greasyfork',
            errorMessage: 'Không thể truy xuất thông tin tập lệnh hoặc không có tập lệnh nào có sẵn cho miền này.',
            Loading: 'Đang tải...',
            Scripts: 'Tập lệnh'
        }
    }
    // 返回翻译函数
    return (id, lang = '') => {
        const selectedLang = lang || userLang
        return (strings[selectedLang] || strings.en)[id] || strings.en[id]
    }
}());
(function () {
    const domainParts = window.location.hostname.split('.').slice(-2)
    const domain = domainParts.join('.')
    const errorMessage = translate('errorMessage')
    let neverLoadedScripts = true
    let collapsed = true
    let loadedPages = 0

    function getScriptsInfo(domain, page = 1) {
        var url = `https://greasyfork.org/scripts/by-site/${domain}?filter_locale=0&sort=updated&page=${page}`

        GM_xmlhttpRequest({
            method: 'GET',
            url: url,
            onload: (response) => {
                // 解析结果
                const parser = new DOMParser()
                const doc = parser.parseFromString(response.responseText, 'text/html')
                const scripts = doc.querySelector('#browse-script-list')?.querySelectorAll('[data-script-id]')
                let scriptsInfo = []

                if (!scripts) {
                    scriptsInfo = errorMessage
                } else {
                    for (var i = 0; i < scripts.length; i++) {
                        scriptsInfo.push(parseScriptInfo(scripts[i]))
                    }
                }

                // 处理对象
                const loadMoreButton = document.querySelector('.load-more')
                console.log(doc.querySelector('.next_page'))
                if (doc.querySelector('.next_page') == null || doc.querySelector('.next_page')?.getAttribute('aria-disabled') === 'true') {
                    loadedPages = 'max'
                    loadMoreButton.disabled = true
                    loadMoreButton.textContent = translate('AllScriptsLoaded')
                } else {
                    loadMoreButton.disabled = false
                    loadMoreButton.textContent = translate('LoadMore')
                }
                // console.log(scriptsInfo);
                document.querySelector('.wait-loading').style.display = 'none'
                loadMoreButton.style.display = 'block'
                appendScriptsInfo(scriptsInfo)
                updateMatches()

                loadedPages = typeof loadedPages === 'number' ? loadedPages + 1 : 0
                // console.log(loadedPages)
            },
            onerror: () => {
                console.log('Some error occurred!')
                if (loadedPages === 0) {
                    appendScriptsInfo(scriptsInfo)
                }
                const scriptsInfo = errorMessage
                document.querySelector('.wait-loading').style.display = 'none'
            }
        })
    }

    // 解析脚本信息
    function parseScriptInfo(script) {
        return {
            id: script.getAttribute('data-script-id'),
            name: script.getAttribute('data-script-name'),
            author: script.querySelector('dd.script-list-author').textContent,
            description: script.querySelector('.script-description').textContent,
            version: script.getAttribute('data-script-version'),
            url: 'https://greasyfork.org/scripts/' + script.getAttribute('data-script-id'),
            createDate: script.getAttribute('data-script-created-date'),
            updateDate: script.getAttribute('data-script-updated-date'),
            installs: script.getAttribute('data-script-total-installs'),
            dailyInstalls: script.getAttribute('data-script-daily-installs'),
            ratingScore: script.getAttribute('data-script-rating-score')
        }
    }

    // 插入脚本
    function appendScriptsInfo(scriptsInfo) {
        const infoList = document.querySelector('.info-list')
        if (scriptsInfo === errorMessage) {
            //  infoList.innerHTML = errorMessage;
            const loadMoreButton = document.querySelector('.load-more')
            loadMoreButton.disabled = true
            loadMoreButton.textContent = translate('AllScriptsLoaded')
            loadMoreButton.innerHTML = errorMessage
        } else {
            for (var i = 0; i < scriptsInfo.length; i++) {
                var script = scriptsInfo[i]
                var listItem = document.createElement('li')
                listItem.className = 'info-item'

                var scriptContainer = document.createElement('div')
                scriptContainer.className = 'script-container'

                var nameElement = document.createElement('a')
                nameElement.className = 'mscript-link'
                nameElement.innerText = script.name
                nameElement.href = script.url
                nameElement.target = '_blank'

                var descriptionElement = document.createElement('p')
                descriptionElement.className = 'script-description'
                descriptionElement.innerHTML = script.description

                var detailsContainer = document.createElement('div')
                detailsContainer.className = 'details-container'

                // 创建一键安装按钮
                var installButton = document.createElement('a')
                installButton.className = 'install-button'
                installButton.innerText = `Install ${script.version}`
                installButton.href = `https://greasyfork.org/scripts/${script.id}/code/script.user.js`

                const details = [
                    { key: translate('Author'), value: script.author },
                    { key: translate('Installs'), value: script.installs },
                    { key: translate('DailyInstalls'), value: script.dailyInstalls },
                    { key: translate('Created'), value: script.createDate },
                    { key: translate('Updated'), value: script.updateDate },
                    { key: translate('Rating'), value: script.ratingScore }
                ]

                for (let i = 0; i < details.length; i++) {
                    const spanElement = document.createElement('span')
                    spanElement.className = 'script-details'
                    spanElement.innerText = `${details[i].key}:\n${details[i].value}`
                    detailsContainer.appendChild(spanElement)
                }

                scriptContainer.appendChild(nameElement)
                scriptContainer.appendChild(descriptionElement)
                scriptContainer.appendChild(detailsContainer)
                scriptContainer.appendChild(installButton)

                listItem.appendChild(scriptContainer)
                listItem.scriptId = script.id
                infoList.appendChild(listItem)
            }
        }
    }

    function setupUI() {
        GM_addStyle(`
    scrbutton.script-button {
        position: fixed;
        bottom: 20%;
        right: -50px;
        transform: translateY(50%);
        padding: 20px;
        font-size: 16px;
        border: none;
        border-radius: 4px;
        background-color: #1e90ff;
        color: #ffffff;
        cursor: pointer;
        transition: right 0.3s;
        z-index: 9999999999999999;
    }
    div.info-container {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 650px;
    padding: 12px;
    background-color: #ffffff;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
    border-radius: 4px;
    opacity: 0;
    transition: opacity 0.3s;
    z-index: 9999;
    max-height: 80vh;
    overflow-y: auto;
}
    ul.info-list {
        list-style: none;
        margin: 0;
        padding: 0;
    }
    li.info-item {
        margin-bottom: 15px;
        padding: 12px;
        padding-bottom: 22px;
        display: flex;
        flex-direction: column;
        border: 1px solid #1e90ff;
        border-radius: 5px;
    }
    .div.script-container {
        display: flex;
        flex-direction: column;
    }
   a.mscript-link {
        font-size: 18px !important;
        font-weight: bold !important;
        margin-bottom: 5px !important;
        color: #1e90ff !important;
    }
    p.script-description {
        color: black !important;
        margin-top: 2px;
        margin-bottom: 5px;
        font-size: 16px;
    }
    div.details-container {
        font-size: 15px;
        font-weight: bold;
        display: flex;
        justify-content: space-between;
        margin-bottom: 15px;
    }
    span.script-details {
        font: !important;
        color: black !important;
        flex-grow: 1 !important;
        text-align: center !important;
        border: 1px solid #1e90ff !important;
        border-radius: 5px !important;
        margin: 4px !important;
    }
    div.table-header {
        color: #1e90ff !important;
        font-size: 25px;
        font-weight: bold;
    }
    input.script-search-input {
        width: 96% !important;
        padding: 10px !important;
        font-size: 18px !important;
        border: 1px solid #1e90ff !important;
        border-radius: 4px !important;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3) !important;
        margin-bottom: 15px !important;
        margin-top: 20px !important;
    }
    a.install-button {
        font-size: 20px;
        background-color: green;
        color: white;
        padding: 12px;
    }
    button.to-greasyfork {
        position: absolute;
        top: 12px;
        right: 12px;
        border-radius: 4px;
        padding: 8px;
        font-size: 16px;
        border: none;
        background-color: #1e90ff;
        color: #ffffff;
        cursor: pointer;
    }
    span.match-count {
        background-color: #1e90ff;
        font-size: 25px;
        font-weight: bold;
        color: white;
        padding: 6px;
        position: absolute;
        right: 50%;
        border-radius: 12px;
        top: 10px;
    }
    div.wait-loading {
        font-size: 20px;
        font-weight: bold;
        color: #1e90ff;
        animation: blink 1s infinite;
    }
    @keyframes fadeInOut {
        0% {
            opacity: 0;
        }
        50% {
            opacity: 1;
        }
        100% {
            opacity: 0;
        }
    }
    @keyframes blink {
        0%, 100% {
            opacity: 0;
        }
        50% {
            opacity: 1;
        }
    }
    button.load-more {
        border-radius: 4px;
        padding: 8px;
        font-size: 16px;
        border: none;
        background-color: #1e90ff;
        color: #ffffff;
        cursor: pointer;
        position: relative;
        bottom: 5px;
        left: 50%;
        transform: translateX(-50%);
    }
    button.load-more:disabled {
        background-color: #cccccc;
        cursor: not-allowed;
    }

    /* Mobile styles */
    @media (max-width: 600px) {
        scrbutton.script-button {
            right: -30px;
            padding: 8px;
            font-size: 14px;
        }
        span.script-details {
        font-size: 10px !important;
        margin: 2px !important;
        padding: 2px !important;
    }
     span.match-count {
        font-size: 20px;
        padding: 4px;
    }

    button.to-greasyfork {
        padding: 6px;
        font-size: 14px;
    }

     a.install-button {
        font-size: 12px;
        padding: 8px;
    }
      div.table-header {
        font-size: 20px;
    }
     div.script-container {
        padding: 10px;
    }
div.info-container {
        top: 10%;
        left: 5%;
        right: 5%;
        transform: none;
        width: calc(90% - 10px); /* 自适应宽度，保持左右边距 */
        max-width: 100%; /* 确保不超出屏幕宽度 */
    }
        a.mscript-link {
            font-size: 16px !important;
        }
        p.script-description {
            font-size: 14px;
        }
       {

        input.script-search-input {
            width: 92% !important;
            padding: 8px !important;
            font-size: 16px !important;
        }
        span.match-count {
            font-size: 20px;
            padding: 4px;
        }
        button.load-more {
            font-size: 14px;
            padding: 6px;
        }
    }
`)


        // 创建打开列表按钮
        var button = document.createElement('scrbutton')
        button.className = 'script-button'
        button.innerText = translate('Scripts')
        document.addEventListener('fullscreenchange', function () {
            if (document.fullscreenElement) {
                button.style.display = 'none'
            } else {
                button.style.display = 'block'
            }
        })
        // 创建脚本容器
        var infoContainer = document.createElement('div')
        infoContainer.className = 'info-container'

        // 创建搜索框
        var searchInput = document.createElement('input')
        searchInput.type = 'text'
        searchInput.placeholder = translate('SearchPlaceholder')
        searchInput.className = 'script-search-input'

        // 创建指向greasyfork的链接
        var toGreasyfork = document.createElement('button')
        toGreasyfork.className = 'to-greasyfork'
        toGreasyfork.innerText = translate('ViewOnGreasyfork')

        // 创建计数器
        var matchCount = document.createElement('span')
        matchCount.className = 'match-count'

        // 创建表头
        var tableHeader = document.createElement('div')
        tableHeader.className = 'table-header'
        tableHeader.appendChild(document.createTextNode('Script Finder'))
        tableHeader.appendChild(matchCount)
        tableHeader.appendChild(searchInput)
        tableHeader.appendChild(toGreasyfork)

        // 创建脚本列表
        var infoList = document.createElement('ul')
        infoList.className = 'info-list'

        // 创建等待加载
        var waitLoading = document.createElement('div')
        waitLoading.className = 'wait-loading'
        waitLoading.innerText = translate('LoadingScripts')

        // 创建加载更多
        var loadMore = document.createElement('button')
        loadMore.className = 'load-more'
        loadMore.innerText = 'Load more'
        loadMore.style.display = 'none'

        infoList.appendChild(waitLoading)
        infoList.appendChild(loadMore)

        infoContainer.appendChild(tableHeader)
        infoContainer.appendChild(infoList)

        var timeout
        button.addEventListener('mouseenter', function () {
            clearTimeout(timeout)
            button.style.right = '10px'
        })

        button.addEventListener('mouseleave', function () {
            timeout = setTimeout(function () {
                button.style.right = '-50px'
            }, 500)
        })

        button.addEventListener('click', function (event) {
            event.stopPropagation()
            if (collapsed) {
                infoContainer.style.display = 'block'
                infoContainer.style.opacity = 1
                collapsed = false
            }
            else {
                infoContainer.style.display = 'none'
                infoContainer.style.opacity = 0
                collapsed = true
            }

            if (neverLoadedScripts) {
                getScriptsInfo(domain, 1)
                neverLoadedScripts = false
            }

        })

        infoContainer.addEventListener('click', function (event) {
            event.stopPropagation()
        })

        searchInput.addEventListener('input', () => {
            searchScript()
            updateMatches()
        })

        toGreasyfork.addEventListener('click', function () {
            window.open(`https://greasyfork.org/scripts/by-site/${domain}?q=${searchInput.value}&filter_locale=0&sort=updated`)
        })

        loadMore.addEventListener('click', () => {
            if (loadedPages === 'max') {
                return
            }
            const loadMoreButton = document.querySelector('.load-more')
            loadMoreButton.disabled = true
            loadMoreButton.textContent = translate('Loading')
            document.querySelector('.wait-loading').style.display = 'block'
            getScriptsInfo(domain, loadedPages + 1)
        })

        document.body.addEventListener('click', function () {
            clearTimeout(timeout)
            collapsed = true
            button.style.right = '-50px'
            infoContainer.style.opacity = 0
            infoContainer.style.display = 'none'
        })

        document.body.appendChild(button)

        document.body.appendChild(infoContainer)

        infoContainer.addEventListener('change', () => {
            updateMatches()
        })
        updateMatches()
    }

    function searchScript() {
        const searchWord = document.querySelector('.script-search-input').value.toLowerCase() // 将要匹配的文本转换为小写
        const scriptList = document.querySelectorAll('.info-item')
        for (let i = 0; i < scriptList.length; i++) {
            const scriptText = scriptList[i].innerText.toLowerCase() // 将检索的文本转换为小写
            if (scriptText.includes(searchWord)) {
                scriptList[i].style.display = 'block'
            } else {
                scriptList[i].style.display = 'none'
            }
        }
    }

    function updateMatches() {
        const matchCount = document.querySelectorAll('.info-item:not([style*="display: none"])').length
        const allCount = document.querySelectorAll('.info-item').length
        document.querySelector('.match-count').innerText = matchCount === allCount ? matchCount : `${matchCount}/${allCount}`
    }

    function main() {
        if (window.self !== window.top) {
            // 在iframe中执行时，直接退出
            return
        }
        setupUI()
    }

    main()


})()
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.0//EN" "http://www.wapforum.org/DTD/xhtml-mobile10.dtd"><html lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><title>Facebook - log in or sign up</title><meta name="viewport" content="initial-scale=1, width=240" /><meta name="referrer" content="default" id="meta_referrer" /><style type="text/css" nonce="jIekh2aE">/*<![CDATA[*/.q{margin-bottom:36px;}.n{padding:8px;}.i{padding-bottom:4px;padding-top:4px;}.cc{padding-bottom:12px;padding-top:12px;}.cb{padding-left:4px;padding-right:4px;}.bt{padding-left:8px;padding-right:8px;}.by{padding-top:12px;}.b .bv{display:block;width:auto;}.b .bv .bw,.b .bv .bw:hover{background-color:#42b72a;color:#fff;height:44px;}.b .bq{display:block;margin-bottom:5px;margin-left:3%;margin-top:-3px;overflow:hidden;text-align:center;white-space:nowrap;width:94%;}.b .bq>span{display:inline-block;position:relative;}.b .bq>span:before,.b .bq>span:after{background:#ccd0d5;content:'';height:1px;position:absolute;top:50%;width:9999px;}.b .bq>span:before{margin-right:15px;right:100%;}.b .bq>span:after{left:100%;margin-left:15px;}.b .br{color:#4b4f56;font-size:14px;}.b .bh{border:solid 1px #999;box-sizing:border-box;width:100%;}.b .k{border:0;border-collapse:collapse;margin:0;padding:0;width:100%;}.b .k tbody{vertical-align:top;}.b .k td{padding:0;}.b .k td.bb{padding:4px;}.b .l{width:100%;}.m{background:#fa3e3e;}.o{color:#fff;}.b .o a,.b .o a:visited{color:#fff;font-weight:bold;}.b .o a:focus,.b .o a:hover{background:#1d2129;}.ce{color:#4b4f56;}.p{font-size:12px;line-height:16px;}.cd{font-size:16px;line-height:20px;}.bl{font-weight:normal;}.bd{font-weight:bold;}.bs{text-align:center;}.e{background-color:#fff;}.g{background-color:#3b5998;}.r{background-color:#eceff5;}.t{background-color:#fffbe2;color:#7f7212;}.h{padding:2px 3px;}.u{padding:6px 3px;}.v{border-top:1px solid;}.w{border-bottom:1px solid;}.e{border-color:#e9e9e9;}.g{border-color:#1d4088;}.r{border-color:#d8dfea;}.t{border-color:#e2c822;}.b a,.b a:visited{color:#3b5998;text-decoration:none;}.b a:focus,.b a:hover{background-color:#3b5998;color:#fff;}form{margin:0;border:0;}.ba{margin:0;}.ba li{display:block;list-style:none;}.b .cf{padding:0;}.b .bb{padding:4px;}.b .be{color:#8d949e;display:block;font-weight:bold;}.b .bg{padding:12px 8px;color:#1c1e21;}.bf{border:0;display:block;margin:0;padding:0;}.bi{box-sizing:border-box;width:100%;}.b .bj{border:solid 1px #999;}.bm{appearance:none;background:none;display:inline-block;font-size:12px;height:28px;line-height:28px;margin:0;overflow:visible;padding:0 9px;text-align:center;vertical-align:top;white-space:nowrap;}.b .bm{border-radius:2px;}.bx,a.bx,.b a.bx,.b a.bx:visited{background-color:#f5f6f7;color:#4b4f56;}.b a.bx:hover,.b .bx:hover{background-color:#ebedf0;color:#4b4f56;}.b .bx{border:1px solid #bec3c9;}.bx[disabled]{color:#bec3c9;}.b .bx[disabled]:hover{background-color:#f5f6f7;color:#bec3c9;}.bp,a.bp,html .b a.bp{color:#fff;}.b .bp{background-color:#4267b2;border:1px solid #365899;}.b a.bp:hover,.b .bp:hover{background-color:#465e91;}.bp[disabled]{color:#899bc1;}.b .bp[disabled]:hover{background-color:#4267b2;}.bo{font-size:14px;height:44px;line-height:44px;padding:0 20px;}.b a.bm::after{content:'';display:inline-block;height:100%;vertical-align:middle;}.bm.bn{display:block;width:100%;}a.bm.bn,.b label.bm.bn{display:block;width:auto;}.b .bm{padding:0 8px;}.b a.bm{height:26px;line-height:26px;}.b .bo{padding:0 19px;}.b a.bo{font-size:14px;height:42px;line-height:42px;}body{text-align:left;direction:ltr;}body,tr,input,textarea,button{font-family:sans-serif;}body,p,figure,h1,h2,h3,h4,h5,h6,ul,ol,li,dl,dd,dt{margin:0;padding:0;}h1,h2,h3,h4,h5,h6{font-size:1em;font-weight:bold;}ul,ol{list-style:none;}article,aside,figcaption,figure,footer,header,nav,section{display:block;}#page{position:relative;}.cp{display:block;font-size:x-small;margin:-3px -3px 1px -3px;padding:3px;}.ck{display:block;margin:-3px -3px 1px -3px;}.ck .cm{font-size:x-small;padding:3px;text-align:left;width:100%;}.cq{border:1px solid #90949c;display:block;font-size:x-large;height:20px;line-height:18px;text-align:center;vertical-align:middle;width:20px;}.b .ch input,.b .ch input:visited,.b .ch a,.b .ch a:visited{color:#bec3c9;}.b .ch input:focus,.b .ch input:hover,.b .ch a:focus,.b .ch a:hover{background:#dadde1;color:#1d2129;}.cg{background-color:#444950;font-size:x-small;padding:7px 8px 8px;}.cj{color:#bec3c9;display:block;font-size:x-small;margin:-3px -3px 1px -3px;padding:3px;}.cl{appearance:none;background-color:transparent;border:0;display:inline;font-size:inherit;margin:0;padding:0;}.cl:hover{background-color:#3b5998;color:#fff;white-space:normal;}.cn{color:#3b5998;}.cs{color:#fff;}body,tr,input,textarea,.f{font-size:medium;}.j{border:0;display:inline-block;vertical-align:top;}i.j u{position:absolute;width:0;height:0;overflow:hidden;}/*]]>*/</style><meta name="description" content="Create an account or log into Facebook. Connect with friends, family and other people you know. Share photos and videos, send messages and get updates." /><link rel="canonical" href="https://www.facebook.com/" /><meta property="og:site_name" content="Facebook" /><meta property="og:type" content="website" /><meta property="og:title" content="Facebook - log in or sign up" /><meta property="og:description" content="Create an account or log into Facebook. Connect with friends, family and other people you know. Share photos and videos, send messages and get updates." /><meta property="og:image" content="https://www.facebook.com/images/fb_icon_325x325.png" /><meta property="og:url" content="https://www.facebook.com/" /><link rel="alternate" media="only screen and (max-width: 640px)" href="https://m.facebook.com/" /><link rel="alternate" media="handheld" href="https://m.facebook.com/" /><script id="u_0_2_wq" type="application/ld+json" nonce="jIekh2aE">{"\u0040context":"http:\/\/schema.org","\u0040type":"WebSite","name":"Facebook","url":"https:\/\/www.facebook.com\/"}</script><link rel="manifest" id="MANIFEST_LINK" href="/data/manifest/" crossorigin="use-credentials" /></head><body tabindex="0" class="b c d e"><div class="f"><div id="viewport"><div class="g h" id="header"><h1 style="display:block;height:0;overflow:hidden;position:absolute;width:0;padding:0">Facebook</h1><img src="https://static.xx.fbcdn.net/rsrc.php/v3/y8/r/k97pj8-or6s.png" width="77" height="16" class="i j" alt="facebook" /></div><div id="objects_container"><div class="e" id="root"><table class="k"><tbody><tr><td class="l"><div class="m n o" style="display: none;" id="login_error"><div class="p"></div></div><div class="q"><div class="r s"><div id="login_top_banner"><div class="t u v w"><a href="https://m.facebook.com/click.php?redir_url=http%3A%2F%2Fitunes.apple.com%2Fapp%2Ffacebook%2Fid284882215%3Freferrer_params%255Blink_source%255D%3Dfb_app_banner&amp;app_id=6628568379&amp;cref=mb&amp;no_fw=1&amp;refid=8">Get Facebook for iPhone and browse faster.</a></div></div><div class="x"><form method="post" action="/login/device-based/regular/login/?refsrc=deprecated&amp;lwv=100&amp;refid=8" class="y z" id="login_form" novalidate="1"><input type="hidden" name="lsd" value="AVpgJWLmjKo" autocomplete="off" /><input type="hidden" name="jazoest" value="21004" autocomplete="off" /><input type="hidden" name="m_ts" value="1700688420" /><input type="hidden" name="li" value="JHJeZSEcF8sTjkRCez6pRLrl" /><input type="hidden" name="try_number" value="0" /><input type="hidden" name="unrecognized_tries" value="0" /><ul class="ba bb bc"><li class="bb"><span class="bd be" id="u_0_0_Ov">Phone number or email</span><input autocorrect="off" autocapitalize="off" class="bf bg bh" autocomplete="on" id="m_login_email" name="email" type="text" /></li><li class="bb"><div id="password_input_with_placeholder"><span class="bd be" id="u_0_1_dq">Password</span><input autocorrect="off" autocapitalize="off" class="bf bg bi bj" autocomplete="on" name="pass" type="password" /></div></li><li class="bb"><input value="Log in" type="submit" name="login" class="bk bl bm bn bo bp" /></li></ul><div><div id="login_reg_separator" class="bq"><span class="br">or</span></div><div class="bs bt" id="signup_button_area"><div class="bs bu bv" id="signup-button" tabindex="0"><input value="Create new account" type="submit" name="sign_up" class="bk bl bm bw bo bx" /></div></div></div><input type="hidden" id="bi_xrwh" name="bi_xrwh" value="0" /><input type="hidden" id="scetoggle" /><div></div><noscript><input type="hidden" name="_fb_noscript" value="true" /></noscript></form><div><div class="by bz"><div class="bs ca"><a class="ca" tabindex="0" href="/recover/initiate/?privacy_mutation_token=eyJ0eXBlIjowLCJjcmVhdGlvbl90aW1lIjoxNzAwNjg4NDIwLCJjYWxsc2l0ZV9pZCI6Mjg0Nzg1MTQ5MzQ1MzY5fQ%3D%3D&amp;c=https%3A%2F%2Fm.facebook.com%2F%3Fwtsid%3Drdr_0YCso3IOe5sLp7uvq&amp;r&amp;cuid&amp;ars=facebook_login&amp;lwv=100&amp;refid=8" id="forgot-password-link">Forgot password?</a></div></div><div style="padding-top: 42px"><div><div></div><div class="by" style="text-align:center;"><div class="cb cc"><span class="cd ce"><ul class="ba cf"><li class="bb bs"></li><li class="bb"></li></ul></span></div></div></div></div></div></div></div></div></td></tr></tbody></table><div style="display:none"></div><span><img src="https://facebook.com/security/hsts-pixel.gif?c=3.2" width="0" height="0" style="display:none" /></span></div></div><div><div class="cg"><div class="ch"><table class="k"><tbody><tr><td class="l ci" style="width:50%"><b class="cj">English (US)</b><form method="post" action="/intl/save_locale/?loc=pt_BR&amp;href=https%3A%2F%2Fm.facebook.com%2F%3Fwtsid%3Drdr_0YCso3IOe5sLp7uvq&amp;index=2&amp;ls_ref=m_basic_locale_footer&amp;ref_component=mbasic_footer&amp;ref_page=%2Fwap%2Findex.php&amp;refid=8" class="ck"><input type="hidden" name="lsd" value="AVpgJWLmjKo" autocomplete="off" /><input type="hidden" name="jazoest" value="21004" autocomplete="off" /><input value="Portugu&#xea;s (Brasil)" type="submit" class="bk cl cm cn" /></form><form method="post" action="/intl/save_locale/?loc=de_DE&amp;href=https%3A%2F%2Fm.facebook.com%2F%3Fwtsid%3Drdr_0YCso3IOe5sLp7uvq&amp;index=4&amp;ls_ref=m_basic_locale_footer&amp;ref_component=mbasic_footer&amp;ref_page=%2Fwap%2Findex.php&amp;refid=8" class="ck"><input type="hidden" name="lsd" value="AVpgJWLmjKo" autocomplete="off" /><input type="hidden" name="jazoest" value="21004" autocomplete="off" /><input value="Deutsch" type="submit" class="bk cl cm cn" /></form></td><td class="l co" style="width:50%"><form method="post" action="/intl/save_locale/?loc=es_LA&amp;href=https%3A%2F%2Fm.facebook.com%2F%3Fwtsid%3Drdr_0YCso3IOe5sLp7uvq&amp;index=1&amp;ls_ref=m_basic_locale_footer&amp;ref_component=mbasic_footer&amp;ref_page=%2Fwap%2Findex.php&amp;refid=8" class="ck"><input type="hidden" name="lsd" value="AVpgJWLmjKo" autocomplete="off" /><input type="hidden" name="jazoest" value="21004" autocomplete="off" /><input value="Espa&#xf1;ol" type="submit" class="bk cl cm cn" /></form><form method="post" action="/intl/save_locale/?loc=fr_FR&amp;href=https%3A%2F%2Fm.facebook.com%2F%3Fwtsid%3Drdr_0YCso3IOe5sLp7uvq&amp;index=3&amp;ls_ref=m_basic_locale_footer&amp;ref_component=mbasic_footer&amp;ref_page=%2Fwap%2Findex.php&amp;refid=8" class="ck"><input type="hidden" name="lsd" value="AVpgJWLmjKo" autocomplete="off" /><input type="hidden" name="jazoest" value="21004" autocomplete="off" /><input value="Fran&#xe7;ais (France)" type="submit" class="bk cl cm cn" /></form><a class="cp" href="/language/?next_uri=https%3A%2F%2Fm.facebook.com%2F%3Fwtsid%3Drdr_0YCso3IOe5sLp7uvq&amp;ref_component=mbasic_footer&amp;ref_page=%2Fwap%2Findex.php&amp;refid=8"><div class="cq"> + </div></a></td></tr></tbody></table></div><span class="bd cr cs">Meta © 2023</span></div></div></div></div></body></html>
// ==UserScript==
// @name         RU AdList JS Fixes
// @namespace    ruadlist_js_fixes
// @version      20240625.1
// @description  try to take over the world!
// @author       lainverse & dimisa
// @license      CC-BY-SA-4.0
// @supportURL   https://greasyfork.org/en/scripts/19993-ru-adlist-js-fixes/feedback
// @match        *://*/*
// @exclude      /^https?:\/\/([^.]+\.)*?(avito\.ru|auth\.wi-fi\.ru|hd\.kinopoisk\.ru|(webntp|bank|brontp(-pr|-beta|-alpha)?|diehard|market(-delivery)?|money|trust)\.yandex\.(by|kz|ru|net)|account\.mail\.ru)([:/]|$)/
// @exclude      /^https?:\/\/([^.]+\.)*?(1cfresh\.com|(alfabank|(cdn-)?tinkoff|sberbank)\.ru|ingress\.com|lineageos\.org|telegram\.org|unicreditbanking\.net)([:/]|$)/
// @compatible   chrome Only with Tampermonkey or Violentmonkey. Только с Tampermonkey или Violentmonkey.
// @compatible   brave Only with Tampermonkey or Violentmonkey. Только с Tampermonkey или Violentmonkey.
// @compatible   vivaldi Only with Tampermonkey or Violentmonkey. Только с Tampermonkey или Violentmonkey.
// @compatible   edge Only in Edge 79+ with Tampermonkey or Violentmonkey. Только в Edge 79+ с Tampermonkey или Violentmonkey.
// @compatible   firefox Only in Firefox 56+ with Tampermonkey. Только Firefox 56+ с Tampermonkey.
// @compatible   opera Only with Tampermonkey. Только с Tampermonkey.
// @grant        GM_getValue
// @grant        GM_setValue
// @grant        GM_listValues
// @grant        GM_registerMenuCommand
// @grant        GM.cookie
// @grant        unsafeWindow
// @grant        window.close
// @run-at       document-start
// @downloadURL https://update.greasyfork.org/scripts/19993/RU%20AdList%20JS%20Fixes.user.js
// @updateURL https://update.greasyfork.org/scripts/19993/RU%20AdList%20JS%20Fixes.meta.js
// ==/UserScript==

// jshint esversion: 8
// jshint unused: true
/* eslint no-empty: ["error", { "allowEmptyCatch": true }] */
(function () {
    'use strict';

    const win = (unsafeWindow || window);

    // MooTools are crazy enough to replace standard browser object window.Document: https://mootools.net/core
    // Occasionally their code runs before my script on some domains and causes all kinds of havoc.
    const _Document = Object.getPrototypeOf(HTMLDocument.prototype);
    const _Element = Object.getPrototypeOf(HTMLElement.prototype);
    // dTree 2.05 in some cases replaces Node object
    const _Node = Object.getPrototypeOf(_Element);

    // Prefer to use Proxy object from unsafeWindow since cloneInto require it to be from the same source as the root
    const _Proxy = win.Proxy;
    const _cloneInto = (obj, root = win) => cloneInto(obj, root, { cloneFunctions: true });
    // http://stackoverflow.com/questions/9847580/how-to-detect-safari-chrome-ie-firefox-and-opera-browser
    const
        // isOpera = (!!window.opr && !!window.opr.addons) || !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0,
        // isChrome = !!window.chrome && !!window.chrome.webstore,
        isSafari =
        Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0 ||
        (function (p) {
            return p.toString() === "[object SafariRemoteNotification]";
        })(!window.safari || window.safari.pushNotification),
        isFirefox = 'InstallTrigger' in win,
        inIFrame = (win.self !== win.top);
    const
        _bindCall = fun => Function.prototype.call.bind(fun),
        _getAttribute = _bindCall(_Element.getAttribute),
        _setAttribute = _bindCall(_Element.setAttribute),
        _removeAttribute = _bindCall(_Element.removeAttribute),
        _hasOwnProperty = _bindCall(Object.prototype.hasOwnProperty),
        _toString = _bindCall(Function.prototype.toString),
        _document = win.document,
        _de = _document.documentElement,
        _appendChild = _Document.appendChild.bind(_de),
        _removeChild = _Document.removeChild.bind(_de),
        _createElement = _Document.createElement.bind(_document),
        _querySelector = _Document.querySelector.bind(_document),
        _querySelectorAll = _Document.querySelectorAll.bind(_document),
        _apply = Reflect.apply,
        _construct = Reflect.construct;
    const _attachShadow = (() => {
        try {
            return ('attachShadow' in _Element) ? _bindCall(_Element.attachShadow) : null;
        } catch (ignore) {}
    })();

    let skipLander = true;
    try {
        skipLander = !(isFirefox && 'StopIteration' in win);
    } catch (ignore) {}

    const _console = {};
    _console.initConsole = () => {
        const keys = new Set();
        const _stopImmediatePropagation = _bindCall(Event.prototype.stopImmediatePropagation);
        win.addEventListener('message', e => {
            if (e.source === win || typeof e.data !== 'string')
                return;
            if (e.data.startsWith('_console.key')) {
                _stopImmediatePropagation(e);
                keys.add(e.data.slice(13));
            }
            if (keys.has(e.data.slice(0, 10))) {
                _stopImmediatePropagation(e);
                _console.log(`From: ${e.origin}\n${e.data.slice(11)}`);
            }
        });
        if (inIFrame) {
            const _postMessage = win.parent.postMessage.bind(win.parent);
            const key = Math.random().toString(36).substr(2).padStart(10, '0').slice(0, 10);
            _postMessage(`_console.key ${key}`, '*');
            const _Object_toString = _bindCall(Object.prototype.toString);
            const _Symbol_toString = _bindCall(Symbol.prototype.toString);
            const _Array_toString = _bindCall(Array.prototype.toString);
            const selfHandled = ['string', 'number', 'boolean', 'undefined'];
            const stringify = x => {
                if (x === null)
                    return 'null';
                const type = typeof x;
                if (selfHandled.includes(type))
                    return x;
                if (type === 'object') {
                    if (x instanceof Window || x instanceof Document)
                        return _Object_toString(x);
                    if (Array.isArray(x))
                        return _Array_toString(x);
                    if (x instanceof Element)
                        return `<${x.tagName} ${Array.from(x.attributes).map(x => x.value ? `${x.name}="${x.value}"`: x.name).join(' ')}>`;
                    let props = Object.getOwnPropertyNames(x);
                    if (props.length > 30) {
                        props.splice(30, props.length - 30);
                        props.push('\u2026');
                    }
                    return `[object {${props.join(', ')}}]`;
                }
                if (type === 'function') {
                    let str = _toString(x);
                    return str.length > 200 ? `${str.slice(0, 200)}\u2026` : str;
                }
                if (type === 'symbol')
                    return _Symbol_toString(x);
                return `[unhandled ${typeof x}]`;
            };
            const passIt = (...args) => {
                let strs = args.map(stringify);
                _postMessage(`${key} ${strs.join(' ')}`, '*', );
            };
            for (let name in win.console)
                _console[name] = passIt;
        } else {
            for (let name in win.console)
                _console[name] = console[name];
            _console._trace = _console.trace;
            _console.trace = (...args) => {
                if (!skipLander)
                    return _console.warn(...args);
                _console.groupCollapsed(...args);
                _console._trace('Stack trace.');
                _console.groupEnd();
            };
        }

        Object.freeze(_console);
        Object.defineProperty(win.console, 'clear', _cloneInto({
            value() {
                return null;
            }
        }));
    };
    _console.initConsole();

    const jsf = (function () {
        const opts = {};
        let getValue = (a, b) => b,
            setValue = () => null,
            listValues = () => [];
        try {
            [getValue, setValue, listValues] = [GM_getValue, GM_setValue, GM_listValues];
        } catch (ignore) {}
        // defaults
        opts.Lang = 'rus';
        opts.AbortExecutionStatistics = false;
        opts.AccessStatistics = false;
        opts.LogAttachedCSS = false;
        opts.LogAdditionalInfo = false;
        opts.BlockNotificationPermissionRequests = false;
        opts.ShowScriptHandlerCompatibilityWarning = true;
        // load actual values
        for (let name of listValues())
            opts[name] = getValue(name, opts[name]);
        const checkName = name => {
            if (!_hasOwnProperty(opts, name))
                throw new Error('Attempt to access missing option value.');
            return true;
        };
        return new Proxy(opts, {
            get(opts, name) {
                if (name === 'toString')
                    return () => JSON.stringify(opts);
                if (checkName(name))
                    return opts[name];
            },
            set(opts, name, value) {
                if (checkName(name)) {
                    opts[name] = value;
                    setValue(name, value);
                }
                return true;
            }
        });
    })();

    if (jsf.BlockNotificationPermissionRequests && win.Notification && win.Notification.permission === 'default') {
        win.Notification.requestPermission = () => new Promise(resolve => resolve('denied'));
        Object.defineProperty(win.Notification, 'permission', _cloneInto({
            set() {},
            get() {
                return 'denied';
            }
        }));
    }

    if (isFirefox && // Exit on image pages in Fx
        _document.constructor.prototype.toString() === '[object ImageDocumentPrototype]')
        return;

    // NodeList and HTMLCollection iterator polyfill
    // required for old versions of Safari and Chrome 49 (last available for WinXP)
    // https://jakearchibald.com/2014/iterators-gonna-iterate/
    if (!NodeList.prototype[Symbol.iterator])
        NodeList.prototype[Symbol.iterator] = Array.prototype[Symbol.iterator];
    if (!HTMLCollection.prototype[Symbol.iterator])
        HTMLCollection.prototype[Symbol.iterator] = Array.prototype[Symbol.iterator];
    // Firefox 60 ESR Fix: calling toString on Proxy object throws Error
    function FxProxyToStringFix(root) {
        if (!isFirefox || parseInt((navigator.userAgent.match(/Firefox\/(\d+)\./) || [])[1]) > 60)
            return;
        const wrapper = {
            apply(fun, that, args) {
                let res;
                try {
                    res = _apply(fun, that, args);
                } catch (e) {
                    if (typeof that === 'function')
                        res = Function[fun.name || 'toString']();
                    else
                        throw e;
                    if (that.name && res)
                        res = res.replace('Function', that.name);
                }
                return res;
            }
        };

        ['toLocaleString', 'toSource', 'toString'].forEach(
            toWrap => (root.Function.prototype[toWrap] = new root.Proxy(root.Function.prototype[toWrap], _cloneInto(wrapper, root)))
        );
    }
    FxProxyToStringFix(win);

    // Stub for missing "GM.cookie.list" in unsupported script managers
    if (GM.cookie === undefined)
        GM.cookie = {
            list: () => ({
                then: () => null
            })
        };

    // Wrapper to run scripts designed to override objects available to other scripts
    // Required in old versions of Firefox (<58) or when running with Greasemonkey
    const
        batchLand = [],
        batchPrepend = new Set(),
        _APIString = `const win = window, isFirefox = ${isFirefox}, inIFrame = ${inIFrame}, _document = win.document, _de = _document.documentElement,
        _Document = Object.getPrototypeOf(HTMLDocument.prototype), _Element = Object.getPrototypeOf(HTMLElement.prototype), _Node = Object.getPrototypeOf(_Element),
        _appendChild = _Document.appendChild.bind(_de), _removeChild = _Document.removeChild.bind(_de), skipLander = ${skipLander},
        _createElement = _Document.createElement.bind(_document), _querySelector = _Document.querySelector.bind(_document),
        _querySelectorAll = _Document.querySelectorAll.bind(_document), _bindCall = fun => Function.prototype.call.bind(fun),
        _getAttribute = _bindCall(_Element.getAttribute), _setAttribute = _bindCall(_Element.setAttribute),
        _removeAttribute = _bindCall(_Element.removeAttribute), _hasOwnProperty = _bindCall(Object.prototype.hasOwnProperty),
        _toString = _bindCall(Function.prototype.toString), _apply = Reflect.apply, _construct = Reflect.construct;
        const GM = { info: { version: '0.0', scriptHandler: null }, cookie: { list: () => ({ then: () => null }) } };
        const jsf = ${jsf.toString()}, _console = {}; (${_console.initConsole.toString()})();`,
        landScript = (f, pre) => {
            const script = _createElement('script');
            script.textContent = `(()=>{${_APIString}${[...pre].join(';')};(${f.join(')();(')})();})();`;
            _appendChild(script);
            _removeChild(script);
        };
    let scriptLander = f => f();
    if (!skipLander) {
        scriptLander = (func, ...prepend) => {
            prepend.forEach(x => batchPrepend.add(x));
            batchLand.push(func);
        };
        _document.addEventListener(
            'DOMContentLoaded', () => void(scriptLander = (f, ...prep) => landScript([f], prep)), false
        );
    }

    function nullTools(opts) {
        /* jshint validthis: true */
        const nt = this;
        opts = opts || {};

        function Stats() {
            const updated = new Map();
            const logged = new Map();

            function printUpdated() {
                const prepared = [...updated].map(x => {
                    const [prop, dir] = x;
                    logged.set(prop, logged.get(prop) | dir);
                    return `${prop} (${dir ^ (Stats.GET | Stats.SET) ? (dir & Stats.GET ? 'R' : 'W') : 'R/W'})`;
                }).sort();
                updated.clear();
                _console.log(`Accessed properties:\n * ${prepared.join('\n * ')}`);
            }

            let logLock;
            this.log = async (prop, dir) => {
                if (!jsf.AccessStatistics) return;
                if (!(logged.get(prop) & dir))
                    updated.set(prop, updated.get(prop) | dir);
                logLock = (logLock > 0 || !updated.size) ? logLock : setInterval(() => {
                    printUpdated();
                    logLock = clearInterval(logLock);
                }, 2500);
            };
        }
        Stats.GET = 1;
        Stats.SET = 2;
        Object.freeze(Stats);
        const stats = new Stats();

        const log = async (...args) => jsf.LogAdditionalInfo && _console.log(...args);
        const isObjecty = x => (x !== null) && typeof x === 'object' || typeof x === 'function';
        const parsePath = path => {
            let root = win,
                chain = path.split('.'),
                link = chain.shift();
            for (; chain.length > 0; link = chain.shift()) {
                if (!isObjecty(root[link]))
                    break;
                root = root[link];
            }
            return [root, link, chain];
        };

        const namedObjects = new WeakMap();

        nt.destroy = function (o, destroy) {
            if (!opts.destroy && !destroy || typeof o !== 'object' || o === null)
                return;
            log('cleaning', o);
            try {
                for (let item in o) {
                    if (item instanceof Object)
                        nt.destroy(item, destroy);
                    delete o[item];
                }
            } catch (e) {
                log('Error in object destructor', e);
            }
        };

        nt.define = function (path, val, other = {}) {
            other.enumerable = other.enumerable || false;
            const [obj, prop, remainder] = parsePath(path);
            if (remainder.length) {
                if (other.dontWait)
                    _console.warn(`Unable to resolve ${remainder.join('.')} in ${path}`);
                else {
                    let _obj;
                    Object.defineProperty(obj, prop, _cloneInto({
                        get() {
                            return _obj;
                        },
                        set(val) {
                            _obj = val;
                            nt.define(path, val, other);
                        },
                        configurable: true
                    }));
                }
                return;
            }
            namedObjects.set(obj, path);
            nt.defineOn(obj, prop, val, path, other);
        };

        nt.defineOn = function (obj, prop, val, path, other = {}) {
            path = path || ((obj === win) ? prop : `?.${prop}`);
            if (path[path.length - 1] === '.')
                path = `${path}${prop}`;
            const desc = Object.getOwnPropertyDescriptor(obj, prop);
            if (desc !== undefined && !desc.configurable) {
                _console.warn(`Unable to redefine not configurable ${prop} in`, obj);
                return;
            }
            Object.defineProperty(
                obj, prop, _cloneInto({
                    get: exportFunction(() => {
                        stats.log(path, Stats.GET);
                        return val;
                    }, win),
                    set: exportFunction(v => {
                        stats.log(path, Stats.SET);
                        if (v !== val) {
                            log(`set ${prop} of`, obj, 'to', v);
                            nt.destroy(v);
                        }
                    }, win),
                    enumerable: other.enumerable
                })
            );
        };

        nt.proxy = function (obj, name, opts = {}) {
            if (name) namedObjects.set(obj, name);
            return new _Proxy(
                obj, _cloneInto({
                    get(that, prop) {
                        if (prop in that)
                            return that[prop];
                        if (typeof prop === 'symbol') {
                            if (prop === Symbol.toPrimitive)
                                that[prop] = function (hint) {
                                    if (hint === 'string')
                                        return Object.prototype.toString.call(this);
                                    return `[missing toPrimitive] ${name} ${hint}`;
                                };
                            else if (prop === Symbol.toStringTag)
                                that[prop] = () => 'Object';
                            else {
                                that[prop] = undefined;
                                _console.trace('Missing', prop, 'in', name || '?', '>>', that[prop]);
                            }
                            return that[prop];
                        }
                        if (name) {
                            that[prop] = nt.func(opts.val, `${name}.${prop}`, opts.log);
                            return that[prop];
                        }
                        _console.trace('Missing', prop, 'in', namedObjects.get(that) || that);
                    },
                    set(that, prop, val) {
                        if (val !== that[prop]) {
                            log('skip set', prop, 'of', namedObjects.get(that) || that, 'to', val);
                            nt.destroy(val);
                        }
                        return true;
                    }
                })
            );
        };

        nt.func = (val, name) => nt.proxy((() => {
            let f = function () {
                if (jsf.LogAdditionalInfo)
                    _console.trace(`call ${name || ''}(`, ...arguments, `) return`, val);
                return val;
            };
            if (name) namedObjects.set(f, name);
            return f;
        })());

        nt.NULL = {
            val: null
        };
        Object.freeze(nt.NULL);

        Object.freeze(nt);
    }
    nullTools.toString = new _Proxy(nullTools.toString, _cloneInto({
        apply(...args) {
            return `${_apply(...args)} let nt = new nullTools();`;
        }
    }));
    let nt = new nullTools();

    // Creates and return protected style (unless protection is manually disabled).
    // Protected style will re-add itself on removal and remaind enabled on attempt to disable it.

    const createStyle = (function createStyleModule() {
        function createStyleElement(rules, opts) {
            const style = _createElement('style');
            Object.assign(style, opts.props);
            opts.root.appendChild(style);

            if (style.sheet) // style.sheet is only available when style attached to DOM
                rules.forEach(style.sheet.insertRule.bind(style.sheet));
            else
                style.textContent = rules.join('\n');

            if (opts.protect) {
                Object.defineProperty(style, 'sheet', _cloneInto({
                    value: null,
                    enumerable: true
                }));
                Object.defineProperty(style, 'disabled', _cloneInto({ //pretend to be disabled
                    enumerable: true,
                    set() {},
                    get() {
                        return true;
                    }
                }));
                (new MutationObserver(
                    () => opts.root.removeChild(style)
                )).observe(style, {
                    childList: true
                });
            }

            return style;
        }

        // functions to parse object-based rulesets
        function parseRule(rec) {
            /* jshint validthis: true */
            return this.concat(rec[0], ' {\n', Object.entries(rec[1]).map(parseProperty, this + '\t').join('\n'), '\n', this, '}');
        }

        function parseProperty(rec) {
            /* jshint validthis: true */
            return rec[1] instanceof Object ? parseRule.call(this, rec) : `${this}${rec[0].replace(/_/g, '-')}: ${rec[1]};`;
        }

        // main
        const createStyle = (rules, opts) => {
            // parse options
            opts = Object.assign({
                protect: true,
                root: _de,
                type: 'text/css'
            }, opts);
            // move style properties into separate property
            // { a, b, ...rest } construction is not available in Fx 52
            opts.props = Object.assign({}, opts);
            delete opts.props.protect;
            delete opts.props.root;
            // store binded methods instead of element
            opts.root = {
                appendChild: opts.root.appendChild.bind(opts.root),
                removeChild: opts.root.removeChild.bind(opts.root)
            };

            // convert rules set into an array if it isn't one already
            rules = Array.isArray(rules) ? rules : rules instanceof Object ? Object.entries(rules).map(parseRule, '') : [rules];

            // could be reassigned when protection triggered
            let style = createStyleElement(rules, opts);

            if (!opts.protect)
                return style;

            const replaceStyle = () => new Promise(
                resolve => setTimeout(re => re(createStyleElement(rules, opts)), 0, resolve)
            ).then(st => (style = st)); // replace poiner to style object with a new style object

            (new MutationObserver(ms => {
                for (let m of ms)
                    for (let node of m.removedNodes)
                        if (node === style) replaceStyle();
            })).observe(_de, {
                childList: true
            });

            if (jsf.LogAttachedCSS)
                _console.log(`Attached CSS:\n${rules.join('\n')}`);

            return style;
        };
        createStyle.toString = () => `const createStyle = (${createStyleModule.toString()})();`;
        return createStyle;
    })();

    // aborts currently running script with TypeError on specific property access
    // in case of inline script also checks if it contains specific pattern in it

    const removeOwnFootprint = e => (e.stack = e.stack.split('\n').filter(x => !x.includes('-extension://')).join('\n'), e);
    const abortExecution = (function abortExecutionModule() {
        let map = new Map(),
            cnt = new Map(),
            stack = 0;
        const printCounters = (cnts) => {
            let s = '';
            for (let cntr of cnts)
                s += `\n * ${cntr[0]}: ${cntr[1]}`;
            return s;
        };
        const logger = id => {
            if (!jsf.AbortExecutionStatistics)
                return;
            let {
                path,
                mode
            } = map.get(id);
            let prop = `${path} ${mode.toString().replace('Symbol','')}`;
            cnt.set(prop, (cnt.get(prop) || 0) + 1);
            stack++;
            setTimeout(() => {
                stack--;
                if (!stack)
                    console.log('Abort execution counters:', printCounters(Array.from(cnt.entries())));
            }, 1000);
        };
        const isObjecty = x => (x !== null) && typeof x === 'object' || typeof x === 'function';
        const Mode = {
            Get: Symbol('Read'),
            Set: Symbol('Write'),
            All: Symbol('Access'),
            InlineScript: Symbol('InlineScript')
        };
        Object.freeze(Mode);

        const abortExecution = function abortExecution(mode, path, conf = {}) {
            let root = conf.root || win,
                chain = path.split('.'),
                postponed = false;
            const postpone = (link, chain) => {
                postponed = true;
                let _val;
                try {
                    Object.defineProperty(root, link, _cloneInto({
                        get() {
                            return _val;
                        },
                        set(val) {
                            _val = val;
                            conf.root = val;
                            conf.fullPath = conf.fullPath || path;
                            abortExecution(mode, chain.join('.'), conf);
                        }
                    }));
                } catch (e) {
                    _console.warn(`Unable to set postpone point at ${link} in ${path}\n`, e);
                }
            };
            while (chain.length > 1) {
                let link = chain.shift();
                if (!isObjecty(root[link])) {
                    if (conf.breakOnMissing)
                        break;
                    postpone(link, chain);
                    break;
                }
                root = root[link];
            }
            path = conf.fullPath || path;
            if (postponed) {
                if (conf.breakOnMissing)
                    _console.log(`Unable to locate "${path}", abort anchor skipped.`);
                return;
            }
            const target = chain[0];
            const message = `Cannot read property '${target}' of undefined`;
            const des = Object.getOwnPropertyDescriptor(root, target);
            if (des && des.get !== undefined)
                return;
            const id = Math.random().toString(36).substr(2);
            map.set(id, {
                path: path,
                mode: mode
            });
            win.addEventListener('error', e => {
                if (e.error && e.error.message === message)
                    e.stopImmediatePropagation();
            }, false);
            const get = Symbol('get');
            const set = Symbol('set');

            const check = (mode === Mode.InlineScript) ?
                () => {
                    const script = _document.currentScript;
                    if (script && script.src === '' &&
                        (!conf.pattern || conf.pattern.test(script.textContent))) {
                        logger(id);
                        throw removeOwnFootprint(new TypeError(message));
                    }
                } : io => {
                    if (io === set && mode === Mode.Get ||
                        io === get && mode === Mode.Set)
                        return;
                    logger(id);
                    throw removeOwnFootprint(new TypeError(message));
                };

            let _val = root[target];
            Object.defineProperty(root, target, _cloneInto({
                get() {
                    check(get);
                    return _val;
                },
                set(v) {
                    check(set);
                    _val = v;
                }
            }));
        };
        abortExecution.onGet = (path, conf) => abortExecution(Mode.Get, path, conf);
        abortExecution.onSet = (path, conf) => abortExecution(Mode.Set, path, conf);
        abortExecution.onAll = (path, conf) => abortExecution(Mode.All, path, conf);
        abortExecution.inlineScript = (path, conf) => abortExecution(Mode.InlineScript, path, conf);
        abortExecution.toString = () => ` const abortExecution = (${abortExecutionModule.toString()})();`;
        return abortExecution;
    })();

    // Fake objects of advertisement networks to break their workflow
    // Popular adblock detector
    function deployFABStub(root) {
        if (!('fuckAdBlock' in root)) {
            let FuckAdBlock = function (options) {
                let self = this;
                self._options = {
                    checkOnLoad: false,
                    resetOnEnd: false,
                    checking: false
                };
                self.setOption = function (opt, val) {
                    if (val)
                        self._options[opt] = val;
                    else
                        Object.assign(self._options, opt);
                };
                if (options)
                    self.setOption(options);

                self._var = {
                    event: {}
                };
                self.clearEvent = function () {
                    self._var.event.detected = [];
                    self._var.event.notDetected = [];
                };
                self.clearEvent();

                self.on = function (detected, fun) {
                    self._var.event[detected ? 'detected' : 'notDetected'].push(fun);
                    return self;
                };
                self.onDetected = function (cb) {
                    return self.on(true, cb);
                };
                self.onNotDetected = function (cb) {
                    return self.on(false, cb);
                };
                self.emitEvent = function () {
                    for (let fun of self._var.event.notDetected)
                        fun();
                    if (self._options.resetOnEnd)
                        self.clearEvent();
                    return self;
                };
                self._creatBait = () => null;
                self._destroyBait = () => null;
                self._checkBait = function () {
                    setTimeout((() => self.emitEvent()), 1);
                };
                self.check = function () {
                    self._checkBait();
                    return true;
                };

                let callback = function () {
                    if (self._options.checkOnLoad)
                        setTimeout(self.check, 1);
                };
                root.addEventListener('load', callback, false);
            };
            nt.defineOn(root, 'FuckAdBlock', FuckAdBlock);
            nt.defineOn(root, 'fuckAdBlock', new FuckAdBlock({
                checkOnLoad: true,
                resetOnEnd: true
            }));
        }
    }
    // new version of fAB adapting to fake API
    // scriptLander(() => deployFABStub(win), nullTools); // so it's disabled by default for now

    scriptLander(() => {
        // VideoJS player wrapper
        {
            let _videojs = win.videojs;
            Object.defineProperty(win, 'videojs', _cloneInto({
                get() {
                    return _videojs;
                },
                set(f) {
                    if (f === _videojs)
                        return true;
                    _console.log('videojs =', f);
                    _videojs = new _Proxy(f, _cloneInto({
                        apply(fun, that, args) {
                            _console.log('videojs(', ...args, ')');
                            const params = args[1];
                            if (params) {
                                if (params.hasAd)
                                    params.hasAd = false;
                                if (params.plugins && params.plugins.vastClient)
                                    delete params.plugins.vastClient;
                                // disable unmuted autoplay (muted used for preview purposes)
                                if (params.autoplay && !params.muted)
                                    params.autoplay = false;
                            }
                            const res = _apply(fun, that, args);
                            if (res.seed)
                                res.seed = () => null;
                            if (res.on && res.off) {
                                const logPlayer = () => {
                                    _console.log('player =', res);
                                    res.off('playing', logPlayer);
                                };
                                res.on('playing', logPlayer);
                            }
                            return res;
                        }
                    }));
                }
            }));
        }
    }, nullTools, createStyle, abortExecution);

    // Yandex Raven stub (some monitoring sub-system)
    function yandexRavenStub() {
        nt.define('Raven', nt.proxy({
            context(f) {
                return f();
            },
            config: nt.func(
                nt.proxy({}, 'Raven.config', {
                    val: nt.proxy({}, 'Raven.config()..', nt.NULL)
                }), 'Raven.config')
        }, 'Raven', nt.NULL));
    }

    // Based on https://greasyfork.org/en/scripts/21937-moonwalk-hdgo-kodik-fix v0.8
    {
        const log = name => _console.log(`Player FIX: Detected ${name} player in ${location.href}`);
        const removeVast = (data) => {
            if (data && typeof data === 'object') {
                _console.log('Player configuration:', data);
                if (data.advert_script && data.advert_script !== '') {
                    _console.log('Set data.advert_script to empty string.');
                    data.advert_script = '';
                }
                let keys = Object.getOwnPropertyNames(data);
                let isVast = name => /vast|clickunder/.test(name);
                if (!keys.some(isVast))
                    return data;
                for (let key of keys)
                    if (typeof data[key] === 'object' && key !== 'links') {
                        _console.log(`Removed data.${key}:`, data[key]);
                        delete data[key];
                    }
                if (data.chain) {
                    let need = [],
                        drop = [],
                        links = data.chain.split('.');
                    for (let link of links)
                        if (!isVast(link))
                            need.push(link);
                        else
                            drop.push(link);
                    _console.log('Dropped from the chain:', ...drop);
                    data.chain = need.join('.');
                }
            }
            return data;
        };

        _document.addEventListener(
            'DOMContentLoaded',
            function () {
                if ('video_balancer_options' in win && 'event_callback' in win) {
                    log('Moonwalk');
                    if (win.video_balancer_options.adv)
                        removeVast(win.video_balancer_options.adv);
                    if ('_mw_adb' in win)
                        Object.defineProperty(win, '_mw_adb', _cloneInto({
                            set() {},
                            get() {
                                return false;
                            }
                        }));
                } else if (win.startKodikPlayer !== undefined) {
                    log('Kodik');
                    // skip attempt to block access to HD resolutions
                    const chainCall = new _Proxy({}, _cloneInto({
                        get() {
                            return () => chainCall;
                        }
                    }));
                    if (win.$ && win.$.prototype && win.$.prototype.addClass) {
                        let $addClass = win.$.prototype.addClass;
                        win.$.prototype.addClass = function (className) {
                            if (className === 'blocked')
                                return chainCall;
                            return $addClass.apply(this, arguments);
                        };
                    }
                    // remove ad links from the metadata
                    let _ajax = win.$.ajax;
                    win.$.ajax = (params, ...args) => {
                        if (params.success) {
                            let _s = params.success;
                            params.success = (data, ...args) => _s(removeVast(data), ...args);
                        }
                        return _ajax(params, ...args);
                    };
                } else if (win.getnextepisode && win.uppodEvent) {
                    log('Share-Serials.net');
                    scriptLander(
                        function () {
                            let _setInterval = win.setInterval,
                                _setTimeout = win.setTimeout;
                            win.setInterval = function (func) {
                                if (typeof func === 'function' && _toString(func).includes('_delay')) {
                                    let intv = _setInterval.call(
                                        this,
                                        function () {
                                            _setTimeout.call(
                                                this,
                                                function (intv) {
                                                    clearInterval(intv);
                                                    let timer = _document.querySelector('#timer');
                                                    if (timer)
                                                        timer.click();
                                                }, 100, intv);
                                            func.call(this);
                                        }, 5
                                    );

                                    return intv;
                                }
                                return _setInterval.apply(this, arguments);
                            };
                            win.setTimeout = function (func) {
                                if (typeof func === 'function' && _toString(func).includes('adv_showed'))
                                    return _setTimeout.call(this, func, 0);
                                return _setTimeout.apply(this, arguments);
                            };
                        }
                    );
                } else if ('ADC' in win) {
                    log('vjs-creatives plugin in');
                    let replacer = (obj) => {
                        for (let name in obj)
                            if (typeof obj[name] === 'function')
                                obj[name] = () => null;
                    };
                    replacer(win.ADC);
                    replacer(win.currentAdSlot);
                } else if ('Playerjs' in win) {
                    log('Playerjs');
                    win.Playerjs = new _Proxy(win.Playerjs, _cloneInto({
                        construct(fn, args) {
                            let params = args[0];
                            if (params && typeof params === 'object') {
                                delete params.preroll;
                                params = removeVast(params);
                                Object.defineProperty(params, 'hasOwnProperty', _cloneInto({
                                    value(...args) {
                                        let res = _hasOwnProperty(this, ...args);
                                        if (typeof args[0] === 'string' && args[0].startsWith('vast_') &&
                                            res && params[args[0]]) {
                                            _console.log(`Removed params.${args[0]}:`, params[args[0]]);
                                            delete params[args[0]];
                                            return false;
                                        }
                                        return res;
                                    },
                                    enumerable: false,
                                    configurable: true
                                }));
                            }
                            return _construct(fn, args);
                        }
                    }));
                }

                UberVK: {
                    if (!inIFrame)
                        break UberVK;
                    let oddNames = 'HD' in win &&
                        !Object.getOwnPropertyNames(win).every(n => !n.startsWith('_0x'));
                    if (!oddNames)
                        break UberVK;
                    log('UberVK');
                    XMLHttpRequest.prototype.open = () => {
                        throw 404;
                    };
                }
            }, false
        );
    }

    // Applies wrapper function on the current page and all newly created same-origin iframes
    // This is used to prevent trick which allows to get fresh page API through newly created same-origin iframes
    function deepWrapAPI(wrapper) {
        let wrapped = new WeakSet();
        const
            log = (...args) => false && _console.log(...args),
            _HTMLIFrameElement = HTMLIFrameElement.prototype,
            isIFrameElement = _HTMLIFrameElement.isPrototypeOf.bind(_HTMLIFrameElement),
            _contentWindow = Object.getOwnPropertyDescriptor(_HTMLIFrameElement, 'contentWindow'),
            _get_contentWindow = _bindCall(_contentWindow.get);

        function wrapAPI(root) {
            if (!root || wrapped.has(root))
                return;
            wrapped.add(root);
            try {
                wrapper(isIFrameElement(root) ? _get_contentWindow(root) : root);
                log('Wrapped API in', (root === win) ? "main window." : root);
            } catch (e) {
                log('Failed to wrap API in', (root === win) ? "main window." : root, '\n', e);
            }
        }

        // wrap API on contentWindow access
        const getter = _cloneInto({
            apply(get, that, args) {
                wrapAPI(that);
                return _apply(get, that, args);
            }
        });
        _contentWindow.get = new _Proxy(_contentWindow.get, getter);
        Object.defineProperty(_HTMLIFrameElement, 'contentWindow', _contentWindow);
        // wrap API on contentDocument access
        const _contentDocument = Object.getOwnPropertyDescriptor(_HTMLIFrameElement, 'contentDocument');
        _contentDocument.get = new _Proxy(_contentDocument.get, getter);
        Object.defineProperty(_HTMLIFrameElement, 'contentDocument', _contentDocument);

        // manual children objects traverser to avoid issues
        // with calling querySelectorAll on wrong types of objects
        const
            _nodeType = _bindCall(Object.getOwnPropertyDescriptor(_Node, 'nodeType').get),
            _childNodes = _bindCall(Object.getOwnPropertyDescriptor(_Node, 'childNodes').get),
            _ELEMENT_NODE = _Node.ELEMENT_NODE,
            _DOCUMENT_FRAGMENT_NODE = _Node.DOCUMENT_FRAGMENT_NODE;
        const wrapFrames = root => {
            if (_nodeType(root) !== _ELEMENT_NODE && _nodeType(root) !== _DOCUMENT_FRAGMENT_NODE)
                return; // only process nodes which may contain an IFRAME or be one
            if (isIFrameElement(root)) {
                wrapAPI(root);
                return;
            }
            for (let child of _childNodes(root))
                wrapFrames(child);
        };

        // wrap API in a newly appended iframe objects
        const wrappedAppendChild = new _Proxy(_Node.appendChild, _cloneInto({
            apply(fun, that, args) {
                let res = _apply(fun, that, args);
                wrapFrames(args[0]);
                return res;
            }
        }));
        // ABP Freeze Element snippet replaces normal properties with getters without setters
        const _Node_appendChild = Object.getOwnPropertyDescriptor(Node.prototype, 'appendChild');
        if (_Node_appendChild.configurable) {
            if (_Node_appendChild.value)
                _Node_appendChild.value = wrappedAppendChild;
            if (_Node_appendChild.get)
                _Node_appendChild.get = () => wrappedAppendChild;
            Object.defineProperty(_Node, 'appendChild', _Node_appendChild);
        }

        // wrap API in iframe objects created with innerHTML of element on page
        const _innerHTML = Object.getOwnPropertyDescriptor(_Element, 'innerHTML');
        _innerHTML.set = new _Proxy(_innerHTML.set, _cloneInto({
            apply(set, that, args) {
                _apply(set, that, args);
                if (_document.contains(that))
                    wrapFrames(that);
            }
        }));
        Object.defineProperty(_Element, 'innerHTML', _innerHTML);

        wrapAPI(win);
    }

    // piguiqproxy.com / zmctrack.net circumvention and onerror callback prevention
    scriptLander(
        () => {
            // onerror callback blacklist
            let masks = [],
                //blockAll = /(^|\.)(rutracker-org\.appspot\.com)$/,
                isBlocked = url => masks.some(mask => mask.test(url)); // || blockAll.test(location.hostname);
            for (let filter of [ // blacklist
                    // global
                    '/adv/www/',
                    // adservers
                    '||185.87.50.147^',
                    '||10root25.website^', '||24video.xxx^',
                    '||adlabs.ru^', '||adspayformymortgage.win^', '||aliru1.ru^', '||amgload.net^', '||aviabay.ru^',
                    '||bgrndi.com^', '||brokeloy.com^',
                    '||cdnjs-aws.ru^', '||cnamerutor.ru^',
                    '||directadvert.ru^', '||docfilms.info^', '||dreadfula.ru^', '||dsn-fishki.ru^',
                    '||et-cod.com^', '||et-code.ru^', '||etcodes.com^',
                    '||film-doma.ru^',
                    '||free-torrent.org^', '||free-torrent.pw^',
                    '||free-torrents.org^', '||free-torrents.pw^',
                    '||game-torrent.info^', '||gocdn.ru^',
                    '||hdkinoshka.com^', '||hghit.com^', '||hindcine.net^',
                    '||kinotochka.net^', '||kinott.com^', '||kinott.ru^',
                    '||klcheck.com^', '||kuveres.com^',
                    '||lepubs.com^', '||luxadv.com^', '||luxup.ru^', '||luxupcdna.com^',
                    '||marketgid.com^', '||mebablo.com^', '||mixadvert.com^', '||mxtads.com^',
                    '||nickhel.com^',
                    '||oconner.biz^', '||oconner.link^', '||octoclick.net^', '||octozoon.org^',
                    '||pigiuqproxy.com^', '||piguiqproxy.com^', '||pkpojhc.com^',
                    '||psma01.com^', '||psma02.com^', '||psma03.com^',
                    '||rcdn.pro^', '||recreativ.ru^', '||redtram.com^', '||regpole.com^',
                    '||rootmedia.ws^', '||ruttwind.com^', '||rutvind.com^',
                    '||skidl.ru^', '||smi2.net^', '||smcheck.org^',
                    '||torvind.com^', '||traffic-media.co^', '||trafmag.com^', '||trustjs.net^', '||ttarget.ru^',
                    '||u-dot-id-adtool.appspot.com^', '||utarget.ru^',
                    '||webadvert-gid.ru^', '||webadvertgid.ru^',
                    '||xxuhter.ru^',
                    '||yuiout.online^',
                    '||zfctrack.net^', '||zhctrack.net^', '||zmctrack.net^', '||znctrack.net^', '||zoom-film.ru^'
                ])
                masks.push(new RegExp(
                    filter.replace(/([\\/[\].+?(){}$])/g, '\\$1')
                    .replace(/\*/g, '.*?')
                    .replace(/\^(?!$)/g, '\\.?[^\\w%._-]')
                    .replace(/\^$/, '\\.?([^\\w%._-]|$)')
                    .replace(/^\|\|/, '^((ws|http)s?:|/)/+([^/.]+\\.)*?'),
                    'i'));
            // main script
            deepWrapAPI(root => {
                FxProxyToStringFix(root);

                const _defineProperty = root.Object.defineProperty;
                const _getOwnPropertyDescriptor = root.Object.getOwnPropertyDescriptor;
                const _dispatchEvent = _bindCall(root.EventTarget.prototype.dispatchEvent);

                const dispatchCustomEvent = (
                    target, name, opts = {
                        bubble: false,
                        cancelable: false
                    }
                ) => _dispatchEvent(target, new CustomEvent(name, opts));

                {
                    // 'onerror' handler for scripts from blacklisted sources
                    const scriptMap = new WeakMap();
                    const _HTMLScriptElement = root.HTMLScriptElement,
                          _HTMLImageElement = root.HTMLImageElement;
                    const _get_tagName = _bindCall(_getOwnPropertyDescriptor(root.Element.prototype, 'tagName').get),
                          _get_scr_src = _bindCall(_getOwnPropertyDescriptor(_HTMLScriptElement.prototype, 'src').get),
                          _get_img_src = _bindCall(_getOwnPropertyDescriptor(_HTMLImageElement.prototype, 'src').get);
                    const _get_src = node => {
                        if (node instanceof _HTMLScriptElement)
                            return _get_scr_src(node);
                        if (node instanceof _HTMLImageElement)
                            return _get_img_src(node);
                        return undefined;
                    };
                    const _onerror = _getOwnPropertyDescriptor(root.HTMLElement.prototype, 'onerror');
                    _onerror.get = new root.Proxy(_onerror.get, _cloneInto({
                        apply(_fun, that) {
                            return scriptMap.get(that) || null;
                        }
                    }, root));
                    _onerror.set = new root.Proxy(_onerror.set, _cloneInto({
                        apply(fun, that, args) {
                            let [callback] = args;
                            if (typeof callback !== 'function') {
                                scriptMap.delete(that);
                                _apply(fun, that, args);
                                return;
                            }
                            scriptMap.set(that, callback);
                            _apply(fun, that, [function () {
                                let src = _get_src(this);
                                if (isBlocked(src)) {
                                    _console.trace(`Blocked "onerror" callback from ${_get_tagName(this)}: ${src}`);
                                    return;
                                }
                                _apply(scriptMap.get(this), this, arguments);
                            }]);
                        }
                    }, root));
                    _defineProperty(root.HTMLElement.prototype, 'onerror', _onerror);
                }
                // Simplistic WebSocket wrapper for Maxthon and Firefox before v58
                // once again seems required in Google Chrome and similar browsers due to zmctrack.net -_-
                if (_getOwnPropertyDescriptor(root, 'WebSocket'))
                    root.WebSocket = new root.Proxy(root.WebSocket, _cloneInto({
                        construct(ws, args) {
                            if (isBlocked(args[0])) {
                                _console.log('Blocked WS connection:', args[0]);
                                return {};
                            }
                            return _construct(ws, args);
                        }
                    }, root));
                // Block popular method to open a new window in Google Chrome by dispatching a custom click
                // event on a newly created anchor with _blank target. Untrusted events must not open new windows.
                const clickWhitelist = /^([^.]\.)*?(nakarte\.me|sberbank\.ru)$/;
                root.EventTarget.prototype.dispatchEvent = new root.Proxy(root.EventTarget.prototype.dispatchEvent, _cloneInto({
                    apply(fun, that, args) {
                        const e = args[0];
                        if (!clickWhitelist.test(win.location.hostname) &&
                            !e.isTrusted && e.type === 'click' && e.constructor.name === 'MouseEvent' &&
                            !that.parentNode && that.tagName === 'A' && that.target[0] === '_') {
                            _console.log('Blocked dispatching a click event on a parentless anchor:', that);
                            return;
                        }
                        return _apply(fun, that, args);
                    }
                }, root));
                // blacklist of domains where all third-party requests are ignored
                const ondomains = /(^|[/.@])oane\.ws($|[:/])/i;
                const yandex_direct = /^(https?:)?\/\/([^.]+\.)??yandex(\.[a-z]{2,3}){1,2}\/(images\/[a-z0-9/_-]{40,}|jstracer?|j?clck\/.*|set\/s\/rsya-tag-users\/data(\?.*)?|static\/main\.js(\?.*)?)$/i;
                const more_y_direct = /^(https?:)?\/\/((([^.]+\.)??(drive2|kakprosto)\.ru\/(.{290,}|[a-z0-9/_-]{100,}))|yastatic\.net\/.*?\/chunks\/promo\/.*)$/i;
                const whitelist = /^(https?:)?\/\/yandex\.ru\/yobject$/;
                const fabPatterns = /\/fuckadblock/i;

                const blockedUrls = new Set();

                function checkRequest(fname, method, url) {
                    let block = isBlocked(url) ||
                        ondomains.test(location.hostname) && !ondomains.test(url) ||
                        yandex_direct.test(url) || more_y_direct.test(url);
                    let allow = block && whitelist.test(url) ||
                        // Fix for infinite load on Yandex Images: find image, open "other sizes and similar images" in a new tab, click on a preview of a similar image
                        (block && method === 'script.src' &&
                         root.location.pathname === '/images/search' && root.location.hostname.startsWith('yandex.') &&
                         url.startsWith('http') && url.includes('/images/')) || // Direct URLs are similar, but don't have protocol for some reason
                        (block && root.location.hostname === 'widgets.kinopoisk.ru' && url.includes('/static/main.js?')) ||
                        (block && !url.startsWith('http') && // drive2.ru hid a little CSS style in their requests which shows page content like this
                         (root.location.hostname === 'drive2.ru' || root.location.hostname.endsWith('.drive2.ru')));
                    if (allow) {
                        block = false;
                        _console.trace(`Allowed ${fname} ${method} request %o from %o`, url, root.location.href);
                    }
                    if (block) {
                        if (!blockedUrls.has(url)) // don't repeat log if the same URL were blocked more than once
                            _console.trace(`Blocked ${fname} ${method} request %o from %o`, url, root.location.href);
                        blockedUrls.add(url);
                        return true;
                    }
                    return false;
                }

                // workaround for broken searchbar on market.yandex.ru
                const checkOnloadEvent = location.hostname.startsWith('market.yandex.');
                const triggerLoadEvent = /^(https?:)?\/\/([^.]+\.)??yandex(\.[a-z]{2,3}){1,2}\/(j?clck\/.*)$/i;

                // XHR Wrapper
                const _proto = root.XMLHttpRequest && root.XMLHttpRequest.prototype;
                if (_proto) {
                    const xhrStopList = new WeakSet();
                    const xhrDispatchLoadList = new WeakSet();
                    _proto.open = new root.Proxy(_proto.open, _cloneInto({
                        apply(fun, that, args) {
                            if (checkOnloadEvent && triggerLoadEvent.test(args[1]))
                                xhrDispatchLoadList.add(that);
                            if (checkRequest('xhr', ...args)) {
                                xhrStopList.add(that);
                                return;
                            }
                            return _apply(fun, that, args);
                        }
                    }, root));
                    const _DONE = _proto.DONE; // 4
                    const sendWrapper = {
                        apply(fun, that, args) {
                            if (xhrStopList.has(that)) {
                                if (that.readyState !== _DONE && xhrDispatchLoadList.has(that)) {
                                    that.readyState = _DONE;
                                    setTimeout(() => dispatchCustomEvent(that, 'load'), 0);
                                }
                                return null;
                            }
                            return _apply(fun, that, args);
                        }
                    };
                    ['send', 'setRequestHeader', 'getAllResponseHeaders'].forEach(
                        name => _proto[name] = new root.Proxy(_proto[name], _cloneInto(sendWrapper, root))
                    );
                    // simulate readyState === 1 for blocked requests
                    const _readyState = Object.getOwnPropertyDescriptor(_proto, 'readyState');
                    _readyState.get = new root.Proxy(_readyState.get, _cloneInto({
                        apply(fun, that, args) {
                            return xhrStopList.has(that) ? 1 : _apply(fun, that, args);
                        }
                    }, root));
                    _defineProperty(_proto, 'readyState', _readyState);
                }

                if (root.fetch)
                    root.fetch = new root.Proxy(root.fetch, _cloneInto({
                        apply(fun, that, args) {
                            let [url, opts] = args;
                            let method = opts && opts.method || 'GET';
                            if (typeof url === 'object' && 'headers' in url &&
                                'url' in url && 'method' in url) // url instanceof Request
                                ({
                                    url,
                                    method
                                } = url);
                            if (checkRequest('fetch', method, url))
                                return new Promise(() => null);
                            return _apply(fun, that, args);
                        }
                    }, root));

                const _script_src = Object.getOwnPropertyDescriptor(root.HTMLScriptElement.prototype, 'src');
                _script_src.set = new root.Proxy(_script_src.set, _cloneInto({
                    apply(fun, that, args) {
                        if (fabPatterns.test(args[0])) {
                            _console.trace('Blocked set script.src request:', args[0]);
                            deployFABStub(root);
                            setTimeout(() => dispatchCustomEvent(that, 'load'), 0);
                            return;
                        }
                        return checkRequest('set', 'script.src', args[0]) || _apply(fun, that, args);
                    }
                }, root));
                _defineProperty(root.HTMLScriptElement.prototype, 'src', _script_src);

                const adregain_pattern = /ggg==" alt="advertisement"/;
                if (root.self !== root.top) // in IFrame
                    root.document.write = new root.Proxy(root.document.write, _cloneInto({
                        apply(fun, that, args) {
                            if (adregain_pattern.test(args[0])) {
                                _console.log('Skipped AdRegain frame.');
                                args[0] = '';
                            }
                            return _apply(fun, that, args);
                        }
                    }, root));
            });
        }, deepWrapAPI
    );

    // === Helper functions ===

    const gardener = (() => {
        // function to search and remove nodes by content
        // selector - standard CSS selector to define set of nodes to check
        // words - regular expression to check content of the suspicious nodes
        // params - object with multiple extra parameters:
        //   .log - display log in the console
        //   .hide - set display to none instead of removing from the page
        //   .parent - parent node to remove if content is found in the child node
        //   .siblings - number of simling nodes to remove (excluding text nodes)
        const scissors = (selector, words, scope, params) => {
            const logger = (...args) => {
                if (params.log) _console.log(...args);
            };
            const hideStyleStr = ';display:none!important;';
            const getStyleAtt = node => _getAttribute(node, 'style') || '';
            const scHide = node => {
                const style = getStyleAtt(node);
                if (!style.includes(hideStyleStr))
                    _setAttribute(node, 'style', style + hideStyleStr);
            };

            if (!scope.contains(_document.body))
                logger('[s] scope', scope);
            let remFunc = (params.hide ? scHide : node => node.parentNode.removeChild(node)),
                iterFunc = (params.siblings > 0 ? 'nextElementSibling' : 'previousElementSibling'),
                toRemove = [],
                siblings;
            for (let node of scope.querySelectorAll(selector)) {
                // drill up to a parent node if specified, break if not found
                if (params.parent) {
                    let old = node;
                    node = node.closest(params.parent);
                    if (node === null || node.contains(scope)) {
                        logger('[s] went out of scope with', old);
                        continue;
                    }
                }
                if (getStyleAtt(node).includes(hideStyleStr))
                    continue;
                logger('[s] processing', node);
                if (toRemove.includes(node))
                    continue;
                if (words.test(node.innerHTML)) {
                    // skip node if already marked for removal
                    logger('[s] marked for removal');
                    toRemove.push(node);
                    // add multiple nodes if defined more than one sibling
                    siblings = Math.abs(params.siblings) || 0;
                    while (siblings) {
                        node = node[iterFunc];
                        if (!node) break; // can't go any further - exit
                        logger('[s] adding sibling node', node);
                        toRemove.push(node);
                        siblings -= 1;
                    }
                }
            }
            const toSkip = [];
            toSkip.checkNode = node => !toRemove.every(other => other === node || !node.contains(other));
            for (let node of toRemove)
                if (toSkip.checkNode(node))
                    toSkip.push(node);
            if (toRemove.length)
                logger(`[s] proceeding with ${params.hide?'hide':'removal'} of`, toRemove, `skip`, toSkip);
            for (let node of toRemove)
                if (!toSkip.includes(node))
                    remFunc(node);
        };

        // function to perform multiple checks if ads inserted with a delay
        // by default does 30 checks withing a 3 seconds unless nonstop mode specified
        // also does 1 extra check when a page completely loads
        // selector and words - passed dow to scissors
        // params - object with multiple extra parameters:
        //   .log - display log in the console
        //   .root - selector to narrow down scope to scan;
        //   .observe - if true then check will be performed continuously;
        // Other parameters passed down to scissors.
        return (selector, words, params) => {
            let logger = (...args) => {
                if (params.log) _console.log(...args);
            };
            params = params || {};
            logger(`[gardener] selector: '${selector}' detector: ${words} options: ${JSON.stringify(params)}`);
            let scope;
            let globalScope = [_de.parentNode];
            let domLoaded = false;
            let getScope = root => root ? _de.querySelectorAll(root) : globalScope;
            let onevent = e => {
                logger(`[gardener] cleanup on ${Object.getPrototypeOf(e).toString().slice(1, -1).split(/\s/)[1]} "${e.type}"`);
                for (let node of scope)
                    scissors(selector, words, node, params);
            };
            let repeater = n => {
                if (!domLoaded && n) {
                    setTimeout(repeater, 500, n - 1);
                    scope = getScope(params.root);
                    if (!scope) // exit if the root element is not present on the page
                        return 0;
                    onevent({
                        type: 'Repeater'
                    });
                }
            };
            repeater(20);
            _document.addEventListener(
                'DOMContentLoaded', (e) => {
                    domLoaded = true;
                    // narrow down scope to a specific element
                    scope = getScope(params.root);
                    if (!scope) // exit if the root element is not present on the page
                        return 0;
                    logger('[g] scope', scope);
                    // add observe mode if required
                    if (params.observe) {
                        let params = {
                            childList: true,
                            subtree: true
                        };
                        let observer = new MutationObserver(
                            function (ms) {
                                for (let m of ms)
                                    if (m.addedNodes.length)
                                        onevent(m);
                            }
                        );
                        for (let node of scope)
                            observer.observe(node, params);
                        logger('[g] observer enabled');
                    }
                    onevent(e);
                }, false);
            // wait for a full page load to do one extra cut
            win.addEventListener('load', onevent, false);
        };
    })();

    // wrap popular methods to open a new tab to catch specific behaviours
    function createWindowOpenWrapper(openFunc) {
        const parser = _createElement('a');
        const openWhitelist = (url, parent) => {
            parser.href = url;
            return parser.hostname === 'www.imdb.com' || parser.hostname === 'www.kinopoisk.ru' ||
                parent.hostname === 'radikal.ru' && url === undefined;
        };

        function redefineOpen(root) {
            if ('open' in root)
                root.open = new root.Proxy(root.open, _cloneInto({
                    apply(fun, that, args) {
                        if (openWhitelist(args[0], location)) {
                            _console.log('Whitelisted popup:', ...args);
                            return _apply(fun, that, args);
                        }
                        return openFunc(...args);
                    }
                }, root));
        }
        redefineOpen(win);

        const getTagName = _bindCall(Object.getOwnPropertyDescriptor(_Element, 'tagName').get);
        const hasOwnProperty = _bindCall(Object.hasOwnProperty);
        const createElementWrapper = {
            apply(fun, that, args) {
                const el = _apply(fun, that, args);
                // redefine window.open in first-party frames
                if (getTagName(el) === 'IFRAME' || getTagName(el) === 'OBJECT')
                    el.addEventListener('load', (e) => {
                        try {
                            redefineOpen(e.target.contentWindow);
                        } catch (ignore) {}
                    }, false);
                return el;
            }
        };

        function redefineCreateElement(obj) {
            for (let root of [obj.document, Object.getPrototypeOf(obj.HTMLDocument.prototype)])
                if (hasOwnProperty(root, 'createElement'))
                    root.createElement = new root.Proxy(root.createElement, _cloneInto(createElementWrapper, root));
        }
        redefineCreateElement(win);

        // wrap window.open in newly added first-party frames
        const wrappedAppendChild = new root.Proxy(_Node.appendChild, _cloneInto({
            apply(fun, that, args) {
                let el = _apply(fun, that, args);
                if (el instanceof HTMLIFrameElement)
                    try {
                        redefineOpen(el.contentWindow);
                        redefineCreateElement(el.contentWindow);
                    } catch (ignore) {}
                return el;
            }
        }, root));
        // ABP Freeze Element snippet replaces normal properties with getters without setters
        const _Node_appendChild = Object.getOwnPropertyDescriptor(Node.prototype, 'appendChild');
        if (_Node_appendChild.configurable) {
            if (_Node_appendChild.value)
                _Node_appendChild.value = wrappedAppendChild;
            if (_Node_appendChild.get)
                _Node_appendChild.get = () => wrappedAppendChild;
            Object.defineProperty(_Node, 'appendChild', _Node_appendChild);
        }
    }

    // Function to catch and block various methods to open a new window with 3rd-party content.
    // Some advertisement networks went way past simple window.open call to circumvent default popup protection.
    // This funciton blocks window.open, ability to restore original window.open from an IFRAME object,
    // ability to perform an untrusted (not initiated by user) click on a link, click on a link without a parent
    // node or simply a link with piece of javascript code in the HREF attribute.
    function preventPopups() {
        // call sandbox-me if in iframe and not whitelisted
        if (inIFrame) {
            win.top.postMessage({
                name: 'sandbox-me',
                href: win.location.href
            }, '*');
            return;
        }

        scriptLander(() => {
            let open = (...args) => {
                '[native code]';
                _console.trace('Site attempted to open a new window', ...args);
                return {
                    document: nt.proxy({
                        write: nt.func({}, 'write'),
                        writeln: nt.func({}, 'writeln')
                    }),
                    location: nt.proxy({})
                };
            };

            createWindowOpenWrapper(open);

            _console.log('Popup prevention enabled.');
        }, nullTools, createWindowOpenWrapper);
    }

    // Helper function to close background tab if site opens itself in a new tab and then
    // loads a 3rd-party page in the background one (thus performing background redirect).
    function preventPopunders() {
        // create "close_me" event to call high-level window.close()
        let eventName = `close_me_${Math.random().toString(36).substr(2)}`;
        let callClose = () => {
            _console.log('close call');
            window.close();
        };
        window.addEventListener(eventName, callClose, true);

        scriptLander(() => {
            // get host of a provided URL with help of an anchor object
            // unfortunately new URL(url, window.location) generates wrong URL in some cases
            let parseURL = _document.createElement('A');
            let getHost = url => {
                parseURL.href = url;
                return parseURL.hostname;
            };
            // site went to a new tab and attempts to unload
            // call for high-level close through event
            let closeWindow = () => window.dispatchEvent(new CustomEvent(eventName, {}));
            // check is URL local or goes to different site
            let isLocal = (url) => {
                if (url === location.pathname || url === location.href)
                    return true; // URL points to current pathname or full address
                let host = getHost(url);
                let site = location.hostname;
                return host !== '' && // URLs with unusual protocol may have empty 'host'
                    (site === host || site.endsWith(`.${host}`) || host.endsWith(`.${site}`));
            };

            let _open = window.open.bind(window);
            let open = (...args) => {
                '[native code]';
                let url = args[0];
                if (url && isLocal(url))
                    window.addEventListener('beforeunload', closeWindow, true);
                return _open(...args);
            };

            createWindowOpenWrapper(open);

            _console.log("Background redirect prevention enabled.");
        }, `let eventName="${eventName}"`, nullTools, createWindowOpenWrapper);
    }

    // Mix between check for popups and popunders
    // Significantly more agressive than both and can't be used as universal solution
    function preventPopMix() {
        if (inIFrame) {
            win.top.postMessage({
                name: 'sandbox-me',
                href: win.location.href
            }, '*');
            return;
        }

        // create "close_me" event to call high-level window.close()
        let eventName = `close_me_${Math.random().toString(36).substr(2)}`;
        let callClose = () => {
            _console.log('close call');
            window.close();
        };
        window.addEventListener(eventName, callClose, true);

        scriptLander(() => {
            let _open = window.open,
                parseURL = _document.createElement('A');
            // get host of a provided URL with help of an anchor object
            // unfortunately new URL(url, window.location) generates wrong URL in some cases
            let getHost = (url) => {
                parseURL.href = url;
                return parseURL.host;
            };
            // site went to a new tab and attempts to unload
            // call for high-level close through event
            let closeWindow = () => {
                _open(window.location, '_self');
                window.dispatchEvent(new CustomEvent(eventName, {}));
            };
            // check is URL local or goes to different site
            function isLocal(url) {
                let loc = window.location;
                if (url === loc.pathname || url === loc.href)
                    return true; // URL points to current pathname or full address
                let host = getHost(url),
                    site = loc.host;
                if (host === '')
                    return false; // URLs with unusual protocol may have empty 'host'
                if (host.length > site.length)
                    [site, host] = [host, site];
                return site.includes(host, site.length - host.length);
            }

            // add check for redirect for 5 seconds, then disable it
            function checkRedirect() {
                window.addEventListener('beforeunload', closeWindow, true);
                setTimeout(closeWindow => window.removeEventListener('beforeunload', closeWindow, true), 5000, closeWindow);
            }

            function open(url, name) {
                '[native code]';
                if (url && isLocal(url) && (!name || name === '_blank')) {
                    _console.trace('Suspicious local new window', ...arguments);
                    checkRedirect();
                    /* jshint validthis: true */
                    return _open.apply(this, arguments);
                }
                _console.trace('Blocked attempt to open a new window', ...arguments);
                return {
                    document: {
                        write() {},
                        writeln() {}
                    }
                };
            }

            function clickHandler(e) {
                let link = e.target,
                    url = link.href || '';
                if (e.targetParentNode && e.isTrusted || link.target !== '_blank') {
                    _console.log('Link', link, 'were created dinamically, but looks fine.');
                    return true;
                }
                if (isLocal(url) && link.target === '_blank') {
                    _console.log('Suspicious local link', link);
                    checkRedirect();
                    return;
                }
                _console.log('Blocked suspicious click on a link', link);
                e.stopPropagation();
                e.preventDefault();
            }

            createWindowOpenWrapper(open, clickHandler);

            _console.log("Mixed popups prevention enabled.");
        }, `let eventName="${eventName}"`, createWindowOpenWrapper);
    }
    // External listener for case when site known to open popups were loaded in iframe
    // It will sandbox any iframe which will send message 'forbid.popups' (preventPopups sends it)
    // Some sites replace frame's window.location with data-url to run in clean context
    if (!inIFrame) window.addEventListener(
        'message',
        function (e) {
            if (!e.data || e.data.name !== 'sandbox-me' || !e.data.href)
                return;
            let src = e.data.href;
            for (let frame of _document.querySelectorAll('iframe'))
                if (frame.contentWindow === e.source) {
                    if (frame.hasAttribute('sandbox')) {
                        if (!frame.sandbox.contains('allow-popups'))
                            return; // exit frame since it's already sandboxed and popups are blocked
                        // remove allow-popups if frame already sandboxed
                        frame.sandbox.remove('allow-popups');
                    } else
                        // set sandbox mode for troublesome frame and allow scripts, forms and a few other actions
                        // technically allowing both scripts and same-origin allows removal of the sandbox attribute,
                        // but to apply content must be reloaded and this script will re-apply it in the result
                        frame.setAttribute('sandbox', 'allow-forms allow-scripts allow-presentation allow-top-navigation allow-same-origin');
                    _console.log('Disallowed popups from iframe', frame);

                    // reload frame content to apply restrictions
                    if (!src) {
                        src = frame.src;
                        _console.log('Unable to get current iframe location, reloading from src', src);
                    } else
                        _console.log('Reloading iframe with URL', src);
                    frame.src = 'about:blank';
                    frame.src = src;
                }
        }, false
    );

    const evalPatternYandex = /{exports:{},id:r,loaded:!1}|containerId:(.|\r|\n)+params:/,
          evalPatternGeneric = /_0x|location\s*?=|location.href\s*?=|location.assign\(|open\(/i;

    function selectiveEval(...patterns) {
        let fullLog = false;
        if (patterns[patterns.length - 1] === true) {
            fullLog = true;
            patterns.length = patterns.length - 1;
        }
        if (patterns.length === 0)
            patterns.push(evalPatternGeneric);
        win.eval = new _Proxy(win.eval, _cloneInto({
            apply(fun, that, args) {
                if (patterns.some(pattern => pattern.test(args[0]))) {
                    _console[fullLog ? 'trace' : 'log'](`Skipped eval ${fullLog ? args[0] : args[0].slice(0, 512)}${fullLog ? '' : '\u2026'}`);
                    return null;
                }
                try {
                    if (fullLog)
                        _console.trace(`eval ${args[0]}`);
                    return _apply(fun, that, args);
                } catch (e) {
                    _console.error('Crash source:', args[0]);
                    throw e;
                }
            }
        }));
    }
    selectiveEval.toString = new _Proxy(selectiveEval.toString, _cloneInto({
        apply(...args) {
            return `${_apply(...args)} const evalPatternYandex = ${evalPatternYandex}, evalPatternGeneric = ${evalPatternGeneric}`;
        }
    }));

    // hides cookies by pattern and attempts to remove them if they already set
    // also prevents setting new versions of such cookies
    function selectiveCookies(scPattern = '', opts = {}) {
        const patterns = scPattern.split('|');
        if (patterns[0] !== '~default') {
            // Google Analytics cookies
            patterns.push('_g(at?|id)|__utm[a-z]');
            // Yandex ABP detection cookies
            patterns.push('altrs|bltsr|blcrm');
        } else
            patterns.shift();

        const withValue = f => f.includes('=');
        const withoutValue = f => !withValue(f);
        const blacklist = new RegExp(`^((${patterns.filter(withoutValue).join('|')})=.*|${patterns.filter(withValue).join('|')})$`);

        const root = opts.root || win;
        const _root_Document = Object.getPrototypeOf(root.HTMLDocument.prototype);
        const _doc_proto = ('cookie' in _root_Document) ? _root_Document : Object.getPrototypeOf(root.document);
        const _cookie = Object.getOwnPropertyDescriptor(_doc_proto, 'cookie');
        const _set_cookie = _bindCall(_cookie.set);

        let removed = new Set();
        const removeLog = (cookie) => {
            let strings = [`${cookie.name}=${cookie.value}`];
            if (cookie.domain)
                strings.push(`domain=${cookie.domain}`);
            if (cookie.path)
                strings.push(`path=${cookie.path}`);
            if (cookie.sameSite !== 'unspecified')
                strings.push(`sameSite=${cookie.sameSite}`);
            for (let name of ['httpOnly', 'hostOnly', 'secure', 'session'])
                if (cookie[name]) strings.push(name);
            let full = strings.join('; ');
            if (!removed.has(full))
                _console.log(`Removed cookie: ${full}`);
            removed.add(full);
        };

        let skipTM = true;
        const asyncCookieCleaner = () => {
            GM.cookie.list({
                url: location.href
            }).then(cookies => {
                if (!cookies) return;
                if (skipTM) {
                    cookies = cookies.filter(x => !x.name.startsWith('TM_'));
                    skipTM = false;
                }
                for (let cookie of cookies)
                    if (blacklist.test(`${cookie.name}=${cookie.value}`)) {
                        if (skipTM && cookie.name)
                            continue;
                        GM.cookie.delete(cookie);
                        removeLog(cookie);
                    }
            }, () => null);
        };

        const useOldPass = (() => {
            if (GM.info.scriptHandler === 'Tampermonkey' && GM.info.version === undefined)
                return false; // TM Beta doesn't have a version, apparently
            // returns true if GM version <= 4.10
            let v = GM.info.version.split('.').map(x => x - 0);
            return v[0] < 4 || v[0] === 4 && v[1] <= 10 && v[2] === undefined || GM.info.scriptHandler !== 'Tampermonkey';
        })();

        const getName = (cookie) => cookie && cookie.includes('=') ? /^(.+?)=/.exec(cookie)[1] : cookie;
        const removeCookie = (cookie, that) => {
            const expireCookie = (name, domain) => {
                domain = domain ? `;domain=${domain.join('.')}` : '';
                _set_cookie(that, `${name}=;Max-Age=0;path=/${domain}`);
                _set_cookie(that, `${name}=;Max-Age=0;path=/${domain.replace('=', '=.')}`);
            };
            const name = getName(cookie);
            const domain = that.location.hostname.split('.');

            expireCookie(name);
            while (domain.length > 1) {
                try {
                    expireCookie(name, domain);
                } catch (e) {
                    _console.error(e);
                }
                domain.shift();
            }
            _console.log('Removing existing cookie:', cookie);
        };

        if (_cookie) {
            // skip setting unwanted cookies
            _cookie.set = new _Proxy(_cookie.set, _cloneInto({
                apply(fun, that, args) {
                    if (useOldPass) {
                        let cookie = args[0];
                        if (blacklist.test(cookie)) {
                            _console.log('Ignored cookie: %s', cookie);
                            removeCookie(cookie, that);
                            return;
                        }
                    }
                    _apply(fun, that, args);
                    asyncCookieCleaner();
                    return true;
                }
            }));
            // hide unwanted cookies from site
            _cookie.get = new _Proxy(_cookie.get, _cloneInto({
                apply(fun, that, args) {
                    asyncCookieCleaner();
                    const res = _apply(fun, that, args).split(/;\s?/);
                    const clean = res.filter(cookie => !blacklist.test(cookie));
                    if (useOldPass && clean.length !== res.length)
                        for (let cookie of res.filter(cookie => !clean.includes(cookie)))
                            removeCookie(cookie, that);
                    return clean.join('; ');
                }
            }));
            Object.defineProperty(_doc_proto, 'cookie', _cookie);
            _console.log('Active cookies:', root.document.cookie);
        }
    }

    // Locates a node with specific text in Russian
    // Uses table of substitutions for similar letters
    let selectNodeByTextContent = (() => {
        let subs = {
            // english & greek
            'А': 'AΑ',
            'В': 'BΒ',
            'Г': 'Γ',
            'Е': 'EΕ',
            'З': '3',
            'К': 'KΚ',
            'М': 'MΜ',
            'Н': 'HΗ',
            'О': 'OΟ',
            'П': 'Π',
            'Р': 'PΡ',
            'С': 'C',
            'Т': 'T',
            'Ф': 'Φ',
            'Х': 'XΧ'
        };
        let regExpBuilder = text => new RegExp(
            text.toUpperCase()
            .split('')
            .map(function (e) {
                return `${e in subs ? `[${e}${subs[e]}]` : (e === ' ' ? '\\s+' : e)}[\u200b\u200c\u200d]*`;
            })
            .join(''),
            'i');
        let reMap = {};
        return (re, opts = {
            root: _document.body
        }) => {
            if (!re.test) {
                if (!reMap[re])
                    reMap[re] = regExpBuilder(re);
                re = reMap[re];
            }

            for (let child of opts.root.children)
                if (re.test(child.textContent)) {
                    if (opts.shallow)
                        return child;
                    opts.root = child;
                    return selectNodeByTextContent(re, opts) || child;
                }
        };
    })();

    // webpackJsonp filter
    function webpackJsonpFilter(blacklist, log = false) {
        function wrapPush(webpack) {
            let _push = webpack.push.bind(webpack);
            Object.defineProperty(webpack, 'push', _cloneInto({
                get() {
                    return _push;
                },
                set(vl) {
                    _push = new _Proxy(vl, _cloneInto({
                        apply(fun, that, args) {
                            wrapper: {
                                if (!(args[0] instanceof Array))
                                    break wrapper;
                                let mainName;
                                if (args[0][2] instanceof Array && args[0][2][0] instanceof Array)
                                    mainName = args[0][2][0][0];
                                let funs = args[0][1];
                                if (!(funs instanceof Object && !(funs instanceof Array)))
                                    break wrapper;
                                const noopFunc = (name, text) => () => _console.log(`Skip webpack ${name}`, text);
                                for (let name in funs) {
                                    if (typeof funs[name] !== 'function')
                                        continue;
                                    if (blacklist.test(_toString(funs[name])) && name !== mainName)
                                        funs[name] = noopFunc(name, log ? _toString(funs[name]) : '');
                                }
                            }
                            _console.log('webpack.push()');
                            return _apply(fun, that, args);
                        }
                    }));
                    return true;
                }
            }));
            return webpack;
        }
        let _webpackJsonp = wrapPush([]);
        Object.defineProperty(win, 'webpackJsonp', _cloneInto({
            get() {
                return _webpackJsonp;
            },
            set(vl) {
                if (vl === _webpackJsonp)
                    return;
                _console.log('new webpackJsonp', vl);
                _webpackJsonp = wrapPush(vl);
            }
        }));
    }

    // JSON filter
    // removeList - list of paths divided by space to remove
    // checkList  - optional list of paths divided by space to check presence of before removal
    const jsonFilter = (function jsonFilterModule() {
        const _log = (() => {
            if (!jsf.AccessStatistics)
                return () => null;
            const counter = {};
            const counterToString = () => Object.entries(counter).map(a => `\n * ${a.join(': ')}`).join('');
            let lock = 0;
            return async function _log(path) {
                counter[path] = (counter[path] || 0) + 1;
                lock++;
                setTimeout(() => {
                    lock--;
                    if (lock === 0)
                        _console.log('JSON filters:', counterToString());
                }, 3333);
            };
        })();

        const isObjecty = o => (typeof o === 'object' || typeof o === 'function') && o !== null;

        function parsePath(root, path) {
            let pos;
            pos = path.indexOf('.');
            for (let name; pos > 0;) {
                name = path.slice(0, pos);
                if (!isObjecty(root[name]))
                    break;
                root = root[name];
                path = path.slice(pos + 1);
                pos = path.indexOf('.');
            }
            return [pos < 0 && _hasOwnProperty(root, path), root, path];
        }

        const filterList = [];

        function filter(result) {
            if (!isObjecty(result))
                return result;

            const pathNotInObject = path => !(parsePath(result, path)[0]);
            const removePathInObject = path => {
                let [exist, root, name] = parsePath(result, path);
                if (exist) {
                    delete root[name];
                    _log(path);
                }
            };
            for (let list of filterList) {
                if (list.check && list.check.some(pathNotInObject))
                    return result;
                list.remove.forEach(removePathInObject);
            }

            return result;
        }


        let wrapped = false;

        function jsonFilter(removeList, checkList) {
            filterList.push({
                remove: removeList.split(/\s/),
                check: checkList ? checkList.split(/\s/) : undefined
            });

            if (wrapped) return;
            wrapped = true;

            win.JSON.parse = new _Proxy(win.JSON.parse, _cloneInto({
                apply(fun, that, args) {
                    return filter(_apply(fun, that, args));
                }
            }));

            win.Response.prototype.json = new _Proxy(win.Response.prototype.json, _cloneInto({
                apply(fun, that, args) {
                    let promise = _apply(fun, that, args);
                    promise.then(res => filter(res));
                    return promise;
                }
            }));
        }
        jsonFilter.toString = () => `const jsonFilter = (${jsonFilterModule.toString()})()`;
        return jsonFilter;
    })();

    function zmcPlug(conf) {
        // enable Emcode debug mode in ZMCTrack code (just to see it in the log)
        const _RegExpToString = _bindCall(RegExp.prototype.toString);
        String.prototype.match = new _Proxy(String.prototype.match, _cloneInto({
            apply(fun, that, args) {
                let str = typeof args[0] === 'string' ? args[0] : _RegExpToString(args[0]);
                if (str.includes('argon_debug'))
                    return true;
                return _apply(fun, that, args);
            }
        }));
        // catch and overwrite API in the clean IFrame created by ZMCTrack
        _Node.appendChild = new _Proxy(_Node.appendChild, _cloneInto({
            apply(fun, that, args) {
                const res = _apply(fun, that, args);
                if (res && res.name && res.name.startsWith('_m')) {
                    const zmcWin = win[res.name];
                    if (!zmcWin) return;
                    zmcWin.write = nt.func(null, 'zmc.write', true);
                    zmcWin.setTimeout = nt.func(null, 'zmc.setTimeout', true);
                    zmcWin.document.addEventListener = nt.func(null, 'zmc.document.addEventListener', true);
                    zmcWin.XMLHttpRequest.prototype.open = nt.func(null, 'zmc.XMLHttpRequest.prototype.open', true);
                    zmcWin.XMLHttpRequest.prototype.send = nt.func(null, 'zmc.XMLHttpRequest.prototype.send', true);
                }
                return res;
            }
        }));

        const define = name => {
            let _win;
            Object.defineProperty(win, name, _cloneInto({
                get() {
                    if (!_win) {
                        let frame = _document.querySelector(`iframe[name="${name}"`);
                        if (frame)
                            _win = frame.contentWindow;
                    }
                    return _win;
                }
            }));
        };
        // "predict" names of zmctrack frames on certain domains which use date-based frame names
        // id - some fixed number, zone - server's timezone (hours), step - how often name changes (minutes)
        // range - period in hours to cover from -range/2 to +range/2, offset - fixed number of minutes to add
        if (typeof conf === 'object') {
            let {
                id,
                zone = 2,
                step = 5,
                range = 3,
                offset = 0
            } = conf;
            const pad = n => n.toString().padStart(2, '0');
            const m2ms = x => x * 60 * 1000;
            const d = new Date();
            d.setTime(Math.floor(d.getTime() / m2ms(step)) * m2ms(step) + m2ms(zone * 60) + m2ms(offset));
            const defineByDate = d => {
                define(`n${pad(
                    d.getUTCMonth() + 1
                )}${pad(
                    d.getUTCDate()
                )}${pad(
                    d.getUTCHours()
                )}${pad(
                    d.getUTCMinutes()
                )}${(
                    id ? `_${id}` : ''
                )}`);
            };
            const time = d.getTime();
            for (let n = -Math.floor(range * 30 / step); n <= Math.floor(range * 30 / step); n += 1) {
                d.setTime(time + n * m2ms(step));
                defineByDate(d);
            }
        }
        if (typeof conf === 'string')
            define(conf);
    }

    function documentRewrite(pattern, substitute) {
        /* jshint -W060 */ // document.write is a form of evil, a necessary evil in this case
        const inject = (pattern, substitute) => {
            let xhr = new XMLHttpRequest();
            xhr.open('GET', location.href);
            xhr.onload = () => {
                document.close();
                //console.log(xhr.responseText.match(pattern));
                document.write(xhr.responseText.replace(pattern, substitute));
                document.close();
            };
            xhr.send();
        };
        /* jshint +W060 */
        const style = [
            '@keyframes spinner { 0% { transform: translate3d(-50%, -50%, 0) rotate(0deg); } 100% { transform: translate3d(-50%, -50%, 0) rotate(360deg); } }',
            '.spinner::before { animation: 1.5s linear infinite spinner; animation-play-state: running;',
            'content: ""; border: solid 3px #dedede; border-bottom-color: #EF6565; border-radius: 50%;',
            'height: 10vh; width: 10vh; left: 50%; top: 50%; position: absolute; transform: translate3d(-50%, -50%, 0); };'
        ].join('');
        _document.write(`<html><head><script>(${inject.toString()})(${pattern.toString()},'${substitute}')</script>`);
        _document.write(`<style>${style}</style></head><body><div class="spinner"></div></body></html>`);
    }

    // === Scripts for specific domains ===

    const scripts = {
        // Prevent Popups
        preventPopups: {
            other: 'biqle.ru, chaturbate.com, dfiles.ru, eporner.eu, hentaiz.org, mirrorcreator.com, online-multy.ru' +
                'radikal.ru, rumedia.ws, tapehub.tech, thepiratebay.org, unionpeer.com, zippyshare.com',
            now: preventPopups
        },
        // Prevent Popunders (background redirect)
        preventPopunders: {
            other: 'lostfilm-online.ru, mediafire.com, megapeer.org, megapeer.ru, perfectgirls.net',
            now: preventPopunders
        },
        // zmctrack remover
        zmcDocumentRewrite: {
            other: 'www.ukr.net', // generic script removal pattern
            now: () => documentRewrite(/<iframe\sname="n\d+(_\d+)?"\sstyle="display:none"><\/iframe><script(\s+[^>]+)?>.*?<\/script>/, '<!-- removed -->')
        },
        zmcPlug: {
            other: [
                '4mama.ua,beauty.ua,eknigi.org,forumodua.com,internetua.com,mama.ua,newsyou.info,okino.ua,orakul.com',
                'sinoptik.ua,toneto.net,tvgid.ua,tvoymalysh.com.ua,udoktora.net'
            ].join(','),
            now: () => {
                if (GM.info.scriptHandler === 'Violentmonkey')
                    documentRewrite(/ /, ' ');
                zmcPlug();
            }
        },
        zmcPlugTime: {
            other: [ // using time-based iframe names
                'avtovod.com.ua,bigmir.net,hvylya.net,inforesist.org,isport.ua',
                'kolobok.ua,kriminal.tv,nnovosti.info,smak.ua,tochka.net,tv.ua'
            ].join(','),
            now: () => {
                let is = name => location.hostname === name || location.hostname.includes(name);
                if ([
                    ['avtovod.com', 'id', 12754],
                    ['hvylya.net', 'step', 5, 'range', 15],
                    ['inforesist.org', 'step', 30, 'range', 64],
                    ['kriminal.tv', 'id', 12393],
                    ['nnovosti.info', 'id', 12397],
                    ['tochka.net', 'step', 1, 'range', 2.2],
                ].some(e => is(e[0]) && !zmcPlug( // object from flat key/value array
                    e.reduceRight((o, x, i) => (o[i % 2 ? x : 'x'] = i % 2 ? o.x : x, o), {})
                ))) return;
                zmcPlug({});
            }
        },
        // using fixed iframe names
        'censor.net': () => zmcPlug('n11111512'),
        'enovosty.com': () => zmcPlug('n01212138'),
        'epravda.com.ua': () => zmcPlug('n10121300'),
        'eurointegration.com.ua': () => zmcPlug('n09141907'),
        'football24.ua': () => zmcPlug('n04211212'),
        'gazeta.ua': () => zmcPlug('n11241758'),
        'i.ua': () => zmcPlug('n03021349'),
        'meteofor.com.ua': () => zmcPlug('n05171007'),
        'meteo.ua': () => zmcPlug('n09021131'),
        'mport.ua': () => zmcPlug('n11071239'),
        'nv.ua': () => zmcPlug('n10051437'),
        'pravda.com.ua': () => {
            zmcPlug('n09151519');
            nt.define('AdnetLoadScript');
        },
        'real-vin.com': () => zmcPlug('n09221148'),
        'viva.ua': () => zmcPlug('n07151030_11817'),
        // custom zmc-related fixes
        'kzblow.info': () => documentRewrite(/<script>\(function\(\w\w,.*?['"]n\d+['"]\);<\/script>/, '<!-- removed -->'),
        // disables ads when specific cookies are set
        'liga.net': () => (_document.cookie = 'isShowAd=false; domain=.liga.net', _document.cookie = 'is_login=true; domain=.liga.net'),
        // disables ads if screen width is below 1200
        'segodnya.ua': () => {
            nt.define('document.documentElement', new _Proxy(_document.documentElement, _cloneInto({
                get(that, prop) {
                    if (prop === 'clientWidth' && that[prop] > 1199)
                        return 1199;
                    return that[prop];
                }
            })));
        },

        // PopMix (both types of popups encountered on site)
        'openload.co': {
            other: 'oload.tv, oload.info, openload.co.com',
            now() {
                if (inIFrame) {
                    nt.define('BetterJsPop', {
                        add(a, b) {
                            _console.trace('BetterJsPop.add(%o, %o)', a, b);
                        },
                        config(o) {
                            _console.trace('BetterJsPop.config(%o)', o);
                        },
                        Browser: {
                            isChrome: true
                        }
                    });
                    nt.define('isSandboxed', nt.func(null, 'isSandboxed'));
                    nt.define('adblock', false);
                    nt.define('adblock2', false);
                } else preventPopMix();
            }
        },

        'turbobit.net': preventPopMix,

        'tapochek.net': () => {
            // workaround for moradu.com/apu.php load error handler script, not sure which ad network is this
            let _appendChild = Object.getOwnPropertyDescriptor(_Node, 'appendChild');
            let _appendChild_value = _appendChild.value;
            _appendChild.value = function appendChild(node) {
                if (this === _document.body)
                    if ((node instanceof HTMLScriptElement || node instanceof HTMLStyleElement) &&
                        /^https?:\/\/[0-9a-f]{15}\.com\/\d+(\/|\.css)$/.test(node.src) ||
                        node instanceof HTMLDivElement && node.style.zIndex > 900000 &&
                        node.style.backgroundImage.includes('R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7'))
                        throw '...eenope!';
                return _appendChild_value.apply(this, arguments);
            };
            Object.defineProperty(_Node, 'appendChild', _appendChild);

            // disable window focus tricks and changing location
            let focusHandlerName = /\WfocusAchieved\(/;
            let _setInterval = win.setInterval;
            win.setInterval = (...args) => {
                if (args.length && focusHandlerName.test(_toString(args[0]))) {
                    _console.log('skip setInterval for', ...args);
                    return -1;
                }
                return _setInterval(...args);
            };
            let _addEventListener = win.addEventListener;
            win.addEventListener = function (...args) {
                if (args.length && args[0] === 'focus' && focusHandlerName.test(_toString(args[1]))) {
                    _console.log('skip addEventListener for', ...args);
                    return undefined;
                }
                return _addEventListener.apply(this, args);
            };

            // generic popup prevention
            preventPopups();
        },

        // = other ======================================================================================

        '1plus1.video': () => {
            let noopDefine = ['abMessage', 'BLOCK'];
            win.Object.defineProperty = new _Proxy(win.Object.defineProperty, _cloneInto({
                apply(fun, that, args) {
                    let [, prop, desc] = args;
                    if (noopDefine.includes(prop)) {
                        delete desc.get;
                        delete desc.set;
                        desc.value = () => {};
                    }
                    return _apply(fun, that, args);
                }
            }));
            /* jshint -W001 */ // aka 'hasOwnProperty' is a really bad name, but this is a wrapper
            win.Object.prototype.hasOwnProperty = new _Proxy(win.Object.prototype.hasOwnProperty, _cloneInto({
                apply(fun, that, args) {
                    if (args[0] === 'dl')
                        return false; // when true checks is partner and changes value of 'wa'
                    return _apply(fun, that, args);
                }
            }));
        },

        '1tv.ru': {
            other: 'mediavitrina.ru',
            now: () => scriptLander(() => {
                nt.define('EUMPAntiblockConfig', nt.proxy({
                    url: '//www.1tv.ru/favicon.ico'
                }));
                nt.define('Object.prototype.disableSeek', nt.func(undefined, 'disableSeek'));
                //nt.define('preroll', undefined);

                let _EUMP;
                const _EUMP_set = x => {
                    if (x === _EUMP)
                        return true;
                    let _plugins = x.plugins;
                    Object.defineProperty(x, 'plugins', _cloneInto({
                        enumerable: true,
                        get() {
                            return _plugins;
                        },
                        set(vl) {
                            if (vl === _plugins)
                                return true;
                            nt.defineOn(vl, 'antiblock', function (player, opts) {
                                const antiblock = nt.proxy({
                                    opts: opts,
                                    readyState: 'ready',
                                    isEUMPPlugin: true,
                                    detected: nt.func(false, 'antiblock.detected'),
                                    currentWeight: nt.func(0, 'antiblock.currentWeight')
                                });
                                player.antiblock = antiblock;
                                return antiblock;
                            }, 'EUMP.plugins.');
                            _plugins = vl;
                        }
                    }));
                    _EUMP = x;
                    return true;
                };
                if ('EUMP' in win)
                    _EUMP_set(win.EUMP);
                Object.defineProperty(win, 'EUMP', _cloneInto({
                    enumerable: true,
                    get() {
                        return _EUMP;
                    },
                    set: _EUMP_set
                }));

                let _EUMPVGTRK;
                const _EUMPVGTRK_set = x => {
                    if (x === _EUMPVGTRK)
                        return true;
                    if (x && x.prototype) {
                        if ('generatePrerollUrls' in x.prototype)
                            nt.defineOn(x.prototype, 'generatePrerollUrls', nt.func(null, 'EUMPVGTRK.generatePrerollUrls'), 'EUMPVGTRK.prototype.', {
                                enumerable: false
                            });
                        if ('sendAdsEvent' in x.prototype)
                            nt.defineOn(x.prototype, 'sendAdsEvent', nt.func(null, 'EUMPVGTRK.sendAdsEvent'), 'EUMPVGTRK.prototype.', {
                                enumerable: false
                            });
                    }
                    _EUMPVGTRK = x;
                    return true;
                };
                if ('EUMPVGTRK' in win)
                    _EUMPVGTRK_set(win.EUMPVGTRK);
                Object.defineProperty(win, 'EUMPVGTRK', _cloneInto({
                    enumerable: true,
                    get() {
                        return _EUMPVGTRK;
                    },
                    set: _EUMPVGTRK_set
                }));
            }, nullTools)
        },

        '24smi.org': () => {
            selectiveCookies('isab');
            abortExecution.onGet('Object.prototype.getYa');
            abortExecution.onAll('Object.prototype.YaBaseController');
        },

        '2picsun.ru': {
            other: 'pics2sun.ru, 3pics-img.ru',
            now() {
                Object.defineProperty(navigator, 'userAgent', _cloneInto({
                    value: 'googlebot'
                }));
            }
        },

        '4pda.to': {
            now() {
                // https://greasyfork.org/en/scripts/14470-4pda-unbrender
                const _setAttribute = _bindCall(_Element.setAttribute);
                const _removeChild = _bindCall(_Element.removeChild);
                const isForum = location.pathname.startsWith('/forum/');
                const remove = node => (node && _removeChild(node.parentNode, node));
                const hide = node => node && _setAttribute(node, 'style', 'display:none!important');

                selectiveCookies('viewpref');
                abortExecution.inlineScript('document.querySelector', {
                    pattern: /\(document(,window)?\);/
                });

                const log = false;

                function cleaner() {
                    HeaderAds: {
                        // hide ads above HEADER
                        let nav = _querySelector('.menu-main-item');
                        while (nav && (nav.parentNode !== _de)) {
                            if (!nav.parentNode.querySelector('article, .container[itemtype$="Article"]') && nav.parentNode.clientHeight < 500)
                                nav = nav.parentNode;
                            else break;
                        }
                        if (!nav || (nav.parentNode === _de)) {
                            if (log) _console.warn('Unable to locate header element');
                            break HeaderAds;
                        }
                        if (log) _console.log('Processing header:', nav);
                        for (let itm of nav.parentNode.children)
                            if (itm !== nav)
                                hide(itm);
                            else break;
                    }

                    FixNavMenu: {
                        // hide ad link from the navigation
                        let ad = _querySelector('.menu-main-item > a > svg');
                        if (ad) {
                            ad = ad.parentNode.parentNode;
                            hide(ad);
                            if (log) _console.log('Hid menu ad item:', ad);
                            break FixNavMenu;
                        }
                        if (log) _console.warn('Unable to locate menu ad item');
                    }

                    SidebarAds: {
                        // remove ads from sidebar
                        let aside = _querySelectorAll('[class]:not([id]) > [id]:not([class]) > :first-child + :last-child:not(.v-panel)');
                        if (!aside.length) {
                            if (log) _console.warn('Unable to locate sidebar');
                            break SidebarAds;
                        }
                        for (let side of aside) {
                            if (log) _console.log('Processing potential sidebar:', side);
                            for (let itm of Array.from(side.children)) {
                                if (itm.classList.contains('post'))
                                    continue;
                                if (itm.querySelector('iframe') || !itm.children.length)
                                    remove(itm);
                                let script = itm.querySelector('script');
                                if (itm.querySelector('a[target="_blank"] > img') ||
                                    script && script.src === '' && (script.type === 'text/javascript' || !script.type) &&
                                    script.textContent.includes('document')) {
                                    if (log) _console.log('Hid:', itm);
                                    hide(itm);
                                }
                            }
                        }
                    }
                }

                const cln = setInterval(cleaner, 100);

                // hide banner next to logo and header banner in profiles
                if (isForum)
                    createStyle([
                        'div[class]:not([id]) tr[valign="top"] > td:last-child { display: none !important }',
                        'html[style] > body [class]:not([id]):not(div):not([style]) > div:empty + [data-revive-zoneid] { display: none !important }'
                    ]);
                // clean page
                window.addEventListener(
                    'DOMContentLoaded',
                    function () {
                        clearInterval(cln);
                        const width = () => win.innerWidth || _de.clientWidth || _document.body.clientWidth || 0;
                        const height = () => win.innerHeight || _de.clientHeight || _document.body.clientHeight || 0;

                        if (isForum) {
                            // hide banner next to logo
                            //let itm = _document.querySelector('#logostrip');
                            //if (itm) hide(itm.parentNode.nextSibling);
                            // clear background in the download frame
                            if (location.pathname.startsWith('/forum/dl/')) {
                                let setBackground = node => _setAttribute(
                                    node,
                                    'style', (_getAttribute(node, 'style') || '') +
                                    ';background-color:#4ebaf6!important'
                                );
                                setBackground(_document.body);
                                for (let itm of _document.querySelectorAll('body > div'))
                                    if (!itm.querySelector('.dw-fdwlink, .content') && !itm.classList.contains('footer'))
                                        remove(itm);
                                    else
                                        setBackground(itm);
                            }
                            // exist from DOMContentLoaded since the rest is not for forum
                            return;
                        }

                        cleaner();

                        _document.body.setAttribute('style', (_document.body.getAttribute('style') || '') + ';background-color:#E6E7E9!important');

                        let extra = 'background-image:none!important;background-color:transparent!important',
                            fakeStyles = new WeakMap(),
                            styleProxy = {
                                get(target, prop) {
                                    return fakeStyles.get(target)[prop] || target[prop];
                                },
                                set(target, prop, value) {
                                    let fakeStyle = fakeStyles.get(target);
                                    ((prop in fakeStyle) ? fakeStyle : target)[prop] = value;
                                    return true;
                                }
                            };
                        for (let itm of _document.querySelectorAll('[id]:not(A), A')) {
                            if (!(itm.offsetWidth > 0.95 * width() &&
                                  itm.offsetHeight > 0.85 * height()))
                                continue;
                            if (itm.tagName !== 'A') {
                                fakeStyles.set(itm.style, {
                                    'backgroundImage': itm.style.backgroundImage,
                                    'backgroundColor': itm.style.backgroundColor
                                });

                                try {
                                    Object.defineProperty(itm, 'style', _cloneInto({
                                        value: new _Proxy(itm.style, _cloneInto(styleProxy)),
                                        enumerable: true
                                    }));
                                } catch (e) {
                                    _console.log('Unable to protect style property.', e);
                                }

                                _setAttribute(itm, 'style', `${(_getAttribute(itm, 'style') || '')};${extra}`);
                            }
                            if (itm.tagName === 'A')
                                _setAttribute(itm, 'style', 'display:none!important');
                        }
                    }
                );
            }
        },

        'adhands.ru': () => scriptLander(() => {
            try {
                let _adv;
                Object.defineProperty(win, 'adv', _cloneInto({
                    get() {
                        return _adv;
                    },
                    set(val) {
                        _console.log('Blocked advert on adhands.ru.');
                        nt.defineOn(val, 'advert', '', 'adv.');
                        _adv = val;
                    }
                }));
            } catch (ignore) {
                if (!win.adv)
                    _console.log('Unable to locate advert on adhands.ru.');
                else {
                    _console.log('Blocked advert on adhands.ru.');
                    nt.define('adv.advert', '');
                }
            }
        }, nullTools),

        'allhentai.ru': () => {
            preventPopups();
            scriptLander(() => {
                selectiveEval();
                let _onerror = Object.getOwnPropertyDescriptor(HTMLElement.prototype, 'onerror');
                if (!_onerror)
                    return;
                _onerror.set = (...args) => _console.log(args[0].toString());
                Object.defineProperty(HTMLElement.prototype, 'onerror', _onerror);
            }, selectiveEval);
        },

        'allmovie.pro': {
            other: 'rufilmtv.org',
            dom() {
                // pretend to be Android to make site use different played for ads
                if (isSafari)
                    return;
                Object.defineProperty(navigator, 'userAgent', _cloneInto({
                    get() {
                        return 'Mozilla/5.0 (Linux; Android 4.1.1; Nexus 7 Build/JRO03D) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.166 Safari/535.19';
                    },
                    enumerable: true
                }));
            }
        },

        'anidub.com': {
            other: 'anidub.life, myanime.online, loveanime.live',
            now() {
                let _AnidubAd = win.AnidubAd;
                Object.defineProperty(win, 'AnidubAd', _cloneInto({
                    get() {
                        return _AnidubAd;
                    },
                    set(x) {
                        _console.log(x.usePlyr);
                        if (x && 'usePlyr' in x)
                            x.usePlyr = new _Proxy(x.usePlyr, _cloneInto({
                                apply(fun, that, args) {
                                    if (args[1] && 'sources' in args[1])
                                        args[1].sources = [];
                                    return new _Proxy(_apply(fun, that, args), _cloneInto({
                                        get(that, prop) {
                                            if (prop === 'isDone')
                                                return true;
                                            return that[prop];
                                        }
                                    }));
                                }
                            }));
                        _AnidubAd = new _Proxy(x, _cloneInto({
                            construct(that, args) {
                                return new _Proxy(_construct(that, args), _cloneInto({
                                    get(that, prop) {
                                        if (prop === 'done')
                                            return true;
                                        if (prop === 'on')
                                            return () => {};
                                        return that[prop];
                                    }
                                }));
                            }
                        }));
                        return true;
                    }
                }));
                const onmessage = Object.getOwnPropertyDescriptor(win, 'onmessage');
                onmessage.set = new _Proxy(onmessage.set, _cloneInto({
                    apply(fun, that, args) {
                        if (typeof args[0] === 'function')
                            args[0] = new _Proxy(args[0], _cloneInto({
                                apply(fun, that, args) {
                                    let [event] = args;
                                    if (event.origin.includes('googleapis'))
                                        return;
                                    if (event.data && !event.data.indexOf)
                                        event.data.indexOf = () => -1;
                                    return _apply(fun, that, args);
                                }
                            }));
                        return _apply(fun, that, args);
                    }
                }));
                Object.defineProperty(win, 'onmessage', onmessage);
            }
        },

        'ati.su': () => scriptLander(() => {
            nt.define('Object.prototype.advManager', nt.proxy({}, 'advManager'));
            abortExecution.onGet('Object.prototype.bannersResolved');
        }),

        'audioportal.su': {
            now() {
                createStyle('#blink2 { display: none !important }');
            },
            dom() {
                let links = _document.querySelectorAll('a[onclick*="clickme("]');
                if (!links) return;
                for (let link of links)
                    win.clickme(link);
            }
        },

        'auto.ru': () => {
            let words = /Реклама|Яндекс.Директ|yandex_ad_/;
            let userAdsListAds = (
                '.listing-list > .listing-item,' +
                '.listing-item_type_fixed.listing-item'
            );
            let catalogAds = (
                'div[class*="layout_catalog-inline"],' +
                'div[class$="layout_horizontal"]'
            );
            let otherAds = (
                '.advt_auto,' +
                '.sidebar-block,' +
                '.pager-listing + div[class],' +
                '.card > div[class][style],' +
                '.sidebar > div[class],' +
                '.main-page__section + div[class],' +
                '.listing > tbody'
            );
            gardener(userAdsListAds, words, {
                root: '.listing-wrap',
                observe: true
            });
            gardener(catalogAds, words, {
                root: '.catalog__page,.content__wrapper',
                observe: true
            });
            gardener(otherAds, words);
            nt.define('Object.prototype.yaads', undefined);
            nt.define('Object.prototype.initYaDirect', undefined);
            nt.define('Object.prototype.direct', nt.proxy({}, 'Yandex.direct'));
        },

        'di.fm': () => scriptLander(() => {
            let log = false;
            // wrap global app object to catch registration of specific modules
            let _di = win.di;
            Object.defineProperty(win, 'di', _cloneInto({
                get() {
                    return _di;
                },
                set(vl) {
                    if (vl === _di)
                        return;
                    if (log) _console.trace('di =', vl);
                    _di = new _Proxy(vl, _cloneInto({
                        set(di, name, vl) {
                            if (vl === di[name])
                                return true;
                            if (name === 'app') {
                                if (log) _console.trace(`di.${name} =`, vl);
                                if (!('module' in vl))
                                    return;
                                vl.module = new _Proxy(vl.module, _cloneInto({
                                    apply(module, that, args) {
                                        if (/Wall|Banner|Detect|WebplayerApp\.Ads/.test(args[0])) {
                                            let name = args[0];
                                            if (log) _console.log('wrap', name, 'module');
                                            if (typeof args[1] === 'function')
                                                args[1] = new _Proxy(args[1], _cloneInto({
                                                    apply(fun, that, args) {
                                                        if (args[0]) // module object
                                                            args[0].start = () => _console.log('Skipped start of', name);
                                                        return Reflect.apply(fun, that, args);
                                                    }
                                                }));
                                        } // else log && _console.log('loading module', args[0]);
                                        if (args[0] === 'Modals' && typeof args[1] === 'function') {
                                            if (log) _console.log('wrap', name, 'module');
                                            args[1] = new _Proxy(args[1], _cloneInto({
                                                apply(fun, that, args) {
                                                    if ('commands' in args[1] && 'setHandlers' in args[1].commands &&
                                                        !Object.hasOwnProperty.call(args[1].commands, 'setHandlers')) {
                                                        let _commands = args[1].commands;
                                                        _commands.setHandlers = new _Proxy(_commands.setHandlers, _cloneInto({
                                                            apply(fun, that, args) {
                                                                const noopFunc = name => () => _console.log('Skipped', name, 'window');
                                                                for (let name in args[0])
                                                                    if (name === 'modal:streaminterrupt' ||
                                                                        name === 'modal:midroll')
                                                                        args[0][name] = noopFunc(name);
                                                                delete _commands.setHandlers;
                                                                return Reflect.apply(fun, that, args);
                                                            }
                                                        }));
                                                    }
                                                    return Reflect.apply(fun, that, args);
                                                }
                                            }));
                                        }
                                        return Reflect.apply(module, that, args);
                                    }
                                }));
                            }
                            di[name] = vl;
                        }
                    }));
                }
            }));
            // don't send errorception logs
            Object.defineProperty(win, 'onerror', _cloneInto({
                set(vl) {
                    if (log) _console.trace('Skipped global onerror callback:', vl);
                }
            }));
        }),

        'draug.ru': {
            other: 'vargr.ru',
            now: () => scriptLander(() => {
                if (location.pathname === '/pop.html')
                    win.close();
                createStyle({
                    '#timer_1': {
                        display: 'none !important'
                    },
                    '#timer_2': {
                        position: 'relative !important',
                        display: 'block !important',
                        z_index: '42 !important'
                    },
                    '.clearfix, .clearfix > *': {
                        z_index: 'initial !important'
                    }
                });
                let _contentWindow = Object.getOwnPropertyDescriptor(HTMLIFrameElement.prototype, 'contentWindow');
                let _get_contentWindow = _bindCall(_contentWindow.get);
                _contentWindow.get = function () {
                    let res = _get_contentWindow(this);
                    if (res.location.href === 'about:blank')
                        res.document.write = (...args) => _console.log('Skipped iframe.write(', ...args, ')');
                    return res;
                };
                Object.defineProperty(HTMLIFrameElement.prototype, 'contentWindow', _contentWindow);
            }),
            dom() {
                let list = _querySelectorAll('div[id^="yandex_rtb_"], .adsbygoogle');
                list.forEach(node => _console.log('Removed:', node.parentNode.parentNode.removeChild(node.parentNode)));
            }
        },

        'drive2.ru': () => {
            gardener('.c-block:not([data-metrika="recomm"]),.o-grid__item', />Реклама<\//i);
            scriptLander(() => {
                selectiveCookies();
                let _d2;
                Object.defineProperty(win, 'd2', _cloneInto({
                    get() {
                        return _d2;
                    },
                    set(vl) {
                        if (vl === _d2)
                            return true;
                        _d2 = new _Proxy(vl, _cloneInto({
                            set(target, prop, val) {
                                if (['brandingRender', 'dvReveal', '__dv'].includes(prop))
                                    val = () => null;
                                target[prop] = val;
                                return true;
                            }
                        }));
                    }
                }));
                // obfuscated Yandex.Direct
                nt.define('Object.prototype.initYaDirect', undefined);
            }, nullTools, selectiveCookies);
        },

        'echo.msk.ru': {
            now() {
                scripts.yandexDirect.now();
                selectiveCookies();
                win.localStorage.removeItem('COOKIE_MATCHING_FAIL');
                win.localStorage.removeItem('beerka');
                win.localStorage.removeItem('ludca');
            }
        },

        'eurogamer.tld': {
            other: 'metabomb.net, usgamer.net',
            now: () => scriptLander(() => {
                abortExecution.inlineScript('_sp_');
                selectiveCookies('sp');
            }, selectiveCookies, abortExecution)
        },

        'fastpic.ru': () => {
            // Had to obfuscate property name to avoid triggering anti-obfuscation on greasyfork.org -_- (Exception 403012)
            nt.define(`_0x${'4955'}`, []);
        },

        'fishki.net': () => {
            scriptLander(() => {
                const fishki = {};
                const adv = nt.proxy({
                    afterAdblockCheck: nt.func(null, 'fishki.afterAdblockCheck'),
                    refreshFloat: nt.func(null, 'fishki.refreshFloat')
                });
                nt.defineOn(fishki, 'adv', adv, 'fishki.');
                nt.defineOn(fishki, 'is_adblock', false, 'fishki.');
                nt.define('fishki', fishki);
                nt.define('Object.prototype.detect', nt.func(undefined, 'detect'));
                win.Object.defineProperty = new _Proxy(win.Object.defineProperty, _cloneInto({
                    apply(fun, that, args) {
                        if (['is_adblock', 'adv'].includes(args[1]) || args[0] === adv)
                            return;
                        return _apply(fun, that, args);
                    }
                }));
            }, nullTools);
            gardener('.drag_list > .drag_element, .list-view > .paddingtop15, .post-wrap', /543769|Новости\sпартнеров|Полезная\sреклама/);
        },

        'forbes.com': () => {
            createStyle(['fbs-ad[ad-id], .top-ad-container, .fbs-ad-wrapper, .footer-ad-labeling, .ad-rail, .ad-unit { display: none !important; }']);
            nt.define('Object.prototype.isAdLight', true);
            nt.define('Object.prototype.initializeAd', nt.func(undefined, '?.initializeAd'));
            win.getComputedStyle = new _Proxy(win.getComputedStyle, _cloneInto({
                apply(fun, that, args) {
                    let res = _apply(fun, that, args);
                    if (res.display === 'none')
                        nt.defineOn(res, 'display', 'block', 'getComputedStyle().');
                    if (res.visibility === 'hidden')
                        nt.defineOn(res, 'visibility', 'visible', 'getComputedStyle().');
                    return res;
                }
            }));
            win.CSSStyleDeclaration.prototype.getPropertyValue = new _Proxy(win.CSSStyleDeclaration.prototype.getPropertyValue, _cloneInto({
                apply(fun, that, args) {
                    let res = _apply(fun, that, args);
                    if (args[0] === 'display' && res === 'none')
                        return 'block';
                    if (args[0] === 'visibility' && res === 'hidden')
                        return 'visible';
                    return res;
                }
            }));
        },

        'freeopenvpn.org': () => {
            const alterEval = Function.constructor;
            win.addEventListener = new _Proxy(win.addEventListener, _cloneInto({
                apply(fun, that, args) {
                    let [event, callback] = args;
                    if (event === 'load') {
                        let str = _toString(callback);
                        if (/\.clientHeight\s*!=/.test(str))
                            args[1] = () => alterEval(
                                str.replace(/^function\s*\(\)/, 'function pwd()')
                                .replace(/if[^\r\n]*clientHeight[^\r\n]*\)\s*{/, 'if (false) {') + ' pwd();'
                            )();
                    }
                    return _apply(fun, that, args);
                }
            }));
        },

        'friends.in.ua': () => scriptLander(() => {
            Object.defineProperty(win, 'need_warning', _cloneInto({
                get() {
                    return 0;
                },
                set() {}
            }));
        }),

        'gamerevolution.com': () => {
            const _clientHeight = Object.getOwnPropertyDescriptor(_Element, 'clientHeight');
            _clientHeight.get = new _Proxy(_clientHeight.get, _cloneInto({
                apply(...args) {
                    return _apply(...args) || 1;
                }
            }));
            Object.defineProperty(_Element, 'clientHeight', _clientHeight);

            const toReplace = [
                'blockerDetected', 'disableDetected', 'hasAdBlocker',
                'hasBlockerFlag', 'hasDisabledAdBlocker', 'hasBlocker'
            ];
            win.Object.defineProperty = new _Proxy(win.Object.defineProperty, _cloneInto({
                apply(fun, that, args) {
                    if (toReplace.includes(args[1])) {
                        args[2] = {
                            value() {
                                return false;
                            }
                        };
                        console.log(args);
                    }
                    return _apply(fun, that, args);
                }
            }));
        },

        'gamersheroes.com': () => abortExecution.inlineScript('document.createElement', {
            pattern: /window\[\w+\(\[(\d+,?\s?)+\],\s?\w+\)\]/
        }),

        'gidonline.club': () => createStyle('.tray > div[style] {display: none!important}'),

        'glav.su': () => scriptLander(() => {
            abortExecution.onSet('abd');
            abortExecution.onSet('script1');
        }, abortExecution),

        'gorodrabot.ru': () => scriptLander(() => {
            abortExecution.onGet('Object.prototype.yaads');
            abortExecution.onGet('Object.prototype.initYaDirect');
        }, abortExecution),

        'haes.tech': () => {
            // debugger detection prevention
            win.eval = new _Proxy(win.eval, _cloneInto({
                apply(fun, that, args) {
                    if (typeof args[0] === 'string' && args[0].includes('debugger;'))
                        throw removeOwnFootprint(new ReferenceError('debugger is not defined'));
                    return _apply(fun, that, args);
                }
            }));
        },

        'hdgo.cc': {
            other: '46.30.43.38, couber.be',
            now() {
                (new MutationObserver(
                    ms => {
                        let m, node;
                        for (m of ms)
                            for (node of m.addedNodes)
                                if (node instanceof HTMLScriptElement && _getAttribute(node, 'onerror') !== null)
                                    node.removeAttribute('onerror');
                    }
                )).observe(_document.documentElement, {
                    childList: true,
                    subtree: true
                });
            }
        },

        'hentai-share.tv': () => {
            // debugger detection prevention
            win.Object.defineProperty = new _Proxy(win.Object.defineProperty, _cloneInto({
                apply(fun, that, args) {
                    if (args[1] === 'id' && 'get' in args[2])
                        return;
                    return _apply(fun, that, args);
                }
            }));
        },

        'gamepur.com': () => {
            nt.define('ga', nt.func(null, 'ga'));
            win.Object.defineProperty = new _Proxy(win.Object.defineProperty, _cloneInto({
                apply(fun, that, args) {
                    if (typeof args[1] === 'string' &&
                        (args[1] === 'hasAdblocker' || args[1] === 'blockerDetected'))
                        throw new TypeError(`Cannot read property '${args[1]}' of undefined`);
                    return Reflect.apply(fun, that, args);
                }
            }));
        },

        'hdrezka.ag': () => {
            Object.defineProperty(win, 'ab', _cloneInto({
                value: false,
                enumerable: true
            }));
            gardener('div[id][onclick][onmouseup][onmousedown]', /onmouseout/i);
        },

        'htmlweb.ru': () => {
            let _onerror = Object.getOwnPropertyDescriptor(HTMLElement.prototype, 'onerror');
            _onerror.set = new _Proxy(_onerror.set, _cloneInto({
                apply(fun, that, args) {
                    if (that.tagName === 'SCRIPT')
                        return _console.log('Skip set onerror for', that);
                    return _apply(fun, that, args);
                }
            }));
            Object.defineProperty(HTMLElement.prototype, 'onerror', _onerror);
        },

        'hqq.tv': () => scriptLander(() => {
            // disable anti-debugging in hqq.tv player
            let isObfuscated = text => /[^a-z0-9]([a-z0-9]{1,2}\.[a-z0-9]{1,2}\(|[a-z0-9]{4}\.[a-z]\(\d+\)|[a-z0-9]\[[a-z0-9]{1,2}\]\[[a-z0-9]{1,2}\])/i.test(text);
            deepWrapAPI(root => {
                // skip obfuscated stuff and a few other calls
                let _setInterval = root.setInterval,
                    _setTimeout = root.setTimeout;
                root.setInterval = (...args) => {
                    let fun = args[0];
                    if (typeof fun === 'function') {
                        let text = _toString(fun),
                            skip = text.includes('check();') || isObfuscated(text);
                        _console.trace('setInterval', text, 'skip', skip);
                        if (skip) return -1;
                    }
                    return _setInterval.apply(this, args);
                };
                let wrappedST = new WeakSet();
                root.setTimeout = (...args) => {
                    let fun = args[0];
                    if (typeof fun === 'function') {
                        let text = _toString(fun),
                            skip = fun.name === 'check' || isObfuscated(text);
                        if (!wrappedST.has(fun)) {
                            _console.trace('setTimeout', text, 'skip', skip);
                            wrappedST.add(fun);
                        }
                        if (skip) return;
                    }
                    return _setTimeout.apply(this, args);
                };
                // skip 'debugger' call
                let _eval = root.eval;
                root.eval = text => {
                    if (typeof text === 'string' && text.includes('debugger;')) {
                        _console.trace('skip eval', text);
                        return;
                    }
                    _eval(text);
                };
                // Prevent RegExpt + toString trick
                let _proto;
                try {
                    _proto = root.RegExp.prototype;
                } catch (ignore) {
                    return;
                }
                let _RE_tS = Object.getOwnPropertyDescriptor(_proto, 'toString');
                let _RE_tSV = _RE_tS.value || _RE_tS.get();
                Object.defineProperty(_proto, 'toString', _cloneInto({
                    enumerable: _RE_tS.enumerable,
                    configurable: _RE_tS.configurable,
                    get() {
                        return _RE_tSV;
                    },
                    set(val) {
                        _console.trace('Attempt to change toString for', this, 'with', _toString(val));
                    }
                }));
            });
        }, deepWrapAPI),

        'hideip.me': {
            now: () => scriptLander(() => {
                let _innerHTML = Object.getOwnPropertyDescriptor(_Element, 'innerHTML');
                let _set_innerHTML = _innerHTML.set;
                let _innerText = Object.getOwnPropertyDescriptor(HTMLElement.prototype, 'innerText');
                let _get_innerText = _innerText.get;
                let div = _document.createElement('div');
                _innerHTML.set = function (...args) {
                    _set_innerHTML.call(div, args[0].replace('i', 'a'));
                    if (args[0] && /[рp][еe]кл/.test(_get_innerText.call(div)) ||
                        /(\d\d\d?\.){3}\d\d\d?:\d/.test(_get_innerText.call(this))) {
                        _console.log('Anti-Adblock killed.');
                        return true;
                    }
                    _set_innerHTML.apply(this, args);
                };
                Object.defineProperty(_Element, 'innerHTML', _innerHTML);
                Object.defineProperty(win, 'adblock', _cloneInto({
                    get() {
                        return false;
                    },
                    set() {},
                    enumerable: true
                }));
                let _$ = {};
                let _$_map = new WeakMap();
                let _gOPD = Object.getOwnPropertyDescriptor(Object, 'getOwnPropertyDescriptor');
                let _val_gOPD = _gOPD.value;
                _gOPD.value = function (...args) {
                    let _res = _val_gOPD.apply(this, args);
                    if (args[0] instanceof Window && (args[1] === '$' || args[1] === 'jQuery')) {
                        delete _res.get;
                        delete _res.set;
                        _res.value = win[args[1]];
                    }
                    return _res;
                };
                Object.defineProperty(Object, 'getOwnPropertyDescriptor', _gOPD);
                let getJQWrap = (n) => {
                    let name = n;
                    return {
                        enumerable: true,
                        get() {
                            return _$[name];
                        },
                        set(x) {
                            if (_$_map.has(x)) {
                                _$[name] = _$_map.get(x);
                                return true;
                            }
                            if (x === _$.$ || x === _$.jQuery) {
                                _$[name] = x;
                                return true;
                            }
                            _$[name] = new _Proxy(x, _cloneInto({
                                apply(t, o, args) {
                                    let _res = t.apply(o, args);
                                    if (_$_map.has(_res.is))
                                        _res.is = _$_map.get(_res.is);
                                    else {
                                        let _is = _res.is;
                                        _res.is = function (...args) {
                                            if (args[0] === ':hidden')
                                                return false;
                                            return _is.apply(this, args);
                                        };
                                        _$_map.set(_is, _res.is);
                                    }
                                    return _res;
                                }
                            }));
                            _$_map.set(x, _$[name]);
                            return true;
                        }
                    };
                };
                Object.defineProperty(win, '$', getJQWrap('$'));
                Object.defineProperty(win, 'jQuery', getJQWrap('jQuery'));
                let _dP = Object.defineProperty;
                Object.defineProperty = exportFunction(function (...args) {
                    if (args[0] instanceof Window && (args[1] === '$' || args[1] === 'jQuery'))
                        return undefined;
                    return _dP.apply(this, args);
                }, win);
            })
        },

        'igra-prestoloff.cx': () => scriptLander(() => {
            /*jslint evil: true */ // yes, evil, I know
            let _write = _document.write.bind(_document);
            /*jslint evil: false */
            nt.define('document.write', t => {
                let id = t.match(/jwplayer\("(\w+)"\)/i);
                if (id && id[1])
                    return _write(`<div id="${id[1]}"></div>${t}`);
                return _write('');
            }, {
                enumerable: true
            });
        }),

        'imageban.ru': () => {
            Object.defineProperty(win, 'V7x1J', _cloneInto({
                get() {
                    return null;
                }
            }));
        },

        'inoreader.com': () => scriptLander(() => {
            createStyle('.block_article_ad { display: none !important }');
            nt.define('gn', true);
            // their own hidden adblock detection skip
            let cookie = Object.getOwnPropertyDescriptor(_Document, 'cookie');
            cookie.get = new _Proxy(cookie.get, _cloneInto({
                apply(...args) {
                    return 'aguineapigtrickedme=1; ' + _apply(...args);
                }
            }));
            Object.defineProperty(_Document, 'cookie', cookie);
        }),

        'it-actual.ru': () => scriptLander(() => {
            abortExecution.onAll('blocked');
            abortExecution.onGet('nsg');
        }, abortExecution),

        'ivi.ru': () => {
            let _xhr_open = win.XMLHttpRequest.prototype.open;
            win.XMLHttpRequest.prototype.open = function (method, url, ...args) {
                if (typeof url === 'string')
                    if (url.endsWith('/track'))
                        return;
                return _xhr_open.call(this, method, url, ...args);
            };
            let _responseText = Object.getOwnPropertyDescriptor(XMLHttpRequest.prototype, 'responseText');
            let _responseText_get = _responseText.get;
            _responseText.get = function () {
                if (this.__responseText__)
                    return this.__responseText__;
                let res = _responseText_get.apply(this, arguments);
                let o;
                try {
                    if (res)
                        o = JSON.parse(res);
                } catch (ignore) {}
                let changed = false;
                if (o && o.result) {
                    if (o.result instanceof Array &&
                        'adv_network_logo_url' in o.result[0]) {
                        o.result = [];
                        changed = true;
                    }
                    if (o.result.show_adv) {
                        o.result.show_adv = false;
                        changed = true;
                    }
                }
                if (changed) {
                    _console.log('changed response >>', o);
                    res = JSON.stringify(o);
                }
                this.__responseText__ = res;
                return res;
            };
            Object.defineProperty(XMLHttpRequest.prototype, 'responseText', _responseText);
        },

        'kakprosto.ru': () => scriptLander(() => {
            selectiveCookies('yadb');
            abortExecution.inlineScript('yaProxy', {
                pattern: /yadb/
            });
            abortExecution.inlineScript('yandexContextAsyncCallbacks');
            abortExecution.inlineScript('adfoxAsyncParams');
            abortExecution.inlineScript('adfoxBackGroundLoaded');
        }, selectiveCookies, abortExecution),

        'kinonavigator.ru': () => {
            // fix for broken pages specific for this site, no need to make it global
            nt.define('Ya.share2', nt.func(nt.proxy({}, 'Ya.share2'), 'Ya.share2'));
        },

        'kinopoisk.ru': () => {
            // filter cookies
            // set no-branding body style and adjust other blocks on the page
            const style = {
                '.app__header.app__header_margin-bottom_brand, #top': {
                    margin_bottom: '20px !important'
                },
                '.app__branding': {
                    display: 'none!important'
                }
            };
            if (location.hostname === 'www.kinopoisk.ru' && !location.pathname.startsWith('/games/'))
                style['html:not(#id), body:not(#id), .app-container'] = {
                    background: '#d5d5d5 url(/images/noBrandBg.jpg) 50% 0 no-repeat !important'
                };
            createStyle(style);
            scriptLander(() => {
                selectiveCookies('cmtchd|crookie|kpunk');
                // filter JSON
                win.JSON.parse = new _Proxy(win.JSON.parse, _cloneInto({
                    apply(fun, that, args) {
                        let o = _apply(fun, that, args);
                        let name = 'antiAdBlockCookieName';
                        if (name in o && typeof o[name] === 'string')
                            selectiveCookies(o[name]);
                        name = 'branding';
                        if (name in o) o[name] = {};
                        // tricks against ads in the trailer player
                        // if (location.hostname.startsWith('widgets.'))
                        if (o.page && o.page.playerParams)
                            delete o.page.playerParams.adConfig;
                        if (o.common && o.common.bunker && o.common.bunker.adv && o.common.bunker.adv.filmIdWithoutAd)
                            o.common.bunker.adv.filmIdWithoutAd.includes = () => true;
                        //_console.log('JSON.parse', o);
                        return o;
                    }
                }));
                // skip timeout check for blocked requests
                win.setTimeout = new _Proxy(win.setTimeout, _cloneInto({
                    apply(fun, that, args) {
                        if (args[1] === 100) {
                            let str = _toString(args[0]);
                            if (str.endsWith('{a()}') || str.endsWith('{n()}'))
                                return;
                        }
                        return _apply(fun, that, args);
                    }
                }));
                // obfuscated Yandex.Direct
                nt.define('Object.prototype.initYaDirect', undefined);
                nt.define('Object.prototype._resolveDetectResult', () => null);
                nt.define('Object.prototype.detectResultPromise', new Promise(r => r(false)));
                if (location.hostname === 'www.kinopoisk.ru')
                    nt.define('Object.prototype.initAd', nt.func(undefined, 'initAd'));
                // catch branding and other things
                let _KP;
                Object.defineProperty(win, 'KP', _cloneInto({
                    get() {
                        return _KP;
                    },
                    set(val) {
                        if (_KP === val)
                            return true;
                        _KP = new _Proxy(val, _cloneInto({
                            set(kp, name, val) {
                                if (name === 'branding') {
                                    kp[name] = new _Proxy(_cloneInto({
                                        weborama: {}
                                    }), _cloneInto({
                                        get(kp, name) {
                                            return name in kp ? kp[name] : '';
                                        },
                                        set() {}
                                    }));
                                    return true;
                                }
                                if (name === 'config')
                                    val = new _Proxy(val, _cloneInto({
                                        set(cfg, name, val) {
                                            if (name === 'anContextUrl')
                                                return true;
                                            if (name === 'adfoxEnabled' || name === 'hasBranding')
                                                val = false;
                                            if (name === 'adfoxVideoAdUrls')
                                                val = {
                                                    flash: {},
                                                    html: {}
                                                };
                                            cfg[name] = val;
                                            return true;
                                        }
                                    }));
                                kp[name] = val;
                                return true;
                            }
                        }));
                        _console.log('KP =', val);
                    }
                }));
            }, selectiveCookies, nullTools);
        },

        'korrespondent.net': {
            now: () => scriptLander(() => {
                nt.define('holder', function (id) {
                    let div = _document.getElementById(id);
                    if (!div)
                        return;
                    if (div.parentNode.classList.contains('col__sidebar')) {
                        div.parentNode.appendChild(div);
                        div.style.height = '300px';
                    }
                });
            }, nullTools),
            dom() {
                for (let frame of _document.querySelectorAll('.unit-side-informer > iframe'))
                    frame.parentNode.style.width = '1px';
            }
        },

        'libertycity.ru': () => scriptLander(() => {
            nt.define('adBlockEnabled', false);
        }, nullTools),

        'liveinternet.ru': () => scriptLander(() => {
            abortExecution.onGet('Object.prototype.getYa');
            abortExecution.onGet('Object.prototype.managerForAdfox');
            abortExecution.onGet('Object.prototype.__activeTestIds');
            nt.define('mediatargetBanners', []);
        }, abortExecution),

        'livejournal.com': () => scriptLander(() => {
            nt.define('Object.prototype.Adf', undefined);
            nt.define('Object.prototype.Begun', undefined);
        }, nullTools),

        'mail.ru': {
            other: 'ok.ru, sportmail.ru',
            now: () => scriptLander(() => {
                const _hostparts = location.hostname.split('.');
                const _subdomain = _hostparts.slice(-3).join('.');
                const _hostname = _hostparts.slice(-2).join('.');
                const _emailru = _subdomain === 'e.mail.ru' || _subdomain === 'octavius.mail.ru';
                const _mymailru = _subdomain === 'my.mail.ru';
                const _otvet = _subdomain === 'otvet.mail.ru';
                const _okru = _hostname === 'ok.ru';
                // setTimeout filter
                // advBlock|rbParams - ads
                // document\.title= - blinking title on background news load on main page
                const pattern = /advBlock|rbParams|document\.title=/i;
                const _setTimeout = win.setTimeout;
                win.setTimeout = function setTimeout(...args) {
                    const text = typeof args[0] === 'function' && _toString(args[0]) || '';
                    if (pattern.test(text)) {
                        _console.trace('Skipped setTimeout:', text);
                        return;
                    }
                    return _setTimeout(...args);
                };

                // Trick to prevent mail.ru from removing 3rd-party styles
                nt.define('Object.prototype.restoreVisibility', nt.func(null, 'restoreVisibility'));
                // Other Yandex Direct and other ads
                nt.define('Object.prototype.initMimic', undefined);
                nt.define('Object.prototype.hpConfig', undefined);
                if (!_otvet) // used for a different purpose there
                    nt.define('Object.prototype.direct', undefined);
                const getAds = () => new Promise(
                    r => r(nt.proxy({}, '?.getAds()'))
                );
                nt.define('Object.prototype.getAds', getAds);
                nt.define('rb_counter', nt.func(null, 'rb_counter'));
                if (_subdomain === 'mail.ru') { // main page
                    nt.define('Object.prototype.baits', undefined); // detector
                    nt.define('Object.prototype.getFeed', nt.func(null, 'pulse.getFeed')); // Pulse feed
                    createStyle('body > div > .pulse { display: none !important }');
                }
                if (_emailru)
                    nt.define('Object.prototype.show_me_ads', undefined);
                else if (_mymailru)
                    nt.define('Object.prototype.runMimic', nt.func(null, 'runMimic'));
                else {
                    nt.define('Object.prototype.mimic', undefined);
                    const xray = nt.func(undefined, 'xray');
                    nt.defineOn(xray, 'send', nt.func(undefined, 'xray.send'), 'xray.');
                    nt.defineOn(xray, 'radarPrefix', null, 'xray.');
                    nt.defineOn(xray, 'xrayRadarUrl', undefined, 'xray.');
                    nt.defineOn(xray, 'defaultParams', nt.proxy({
                        i: undefined,
                        p: 'media'
                    }), 'xray.');
                    nt.defineOn(xray, 'getConfig', nt.func(
                        nt.proxy({
                            radarPrefix: 'dev'
                        }, 'xray.getConfig().'),
                        'xray.getConfig'
                    ));
                    nt.define('Object.prototype.xray', nt.proxy(xray));
                }
                // shenanigans against ok.ru ABP detector
                if (_okru) {
                    abortExecution.onGet('OK.hooks');
                    // banners on ok.ru and counter
                    nt.define('getAdvTargetParam', nt.func(null, 'getAdvTargetParam'));
                    // break detection in case detector wasn't wrapped
                    abortExecution.onSet('Object.prototype.adBlockDetected');
                }
                // news.mail.ru and sportmail.ru
                abortExecution.onGet('myWidget');
                // cleanup e.mail.ru configs and mimic config on news and sport
                const emptyString = (root, name) => root[name] && (root[name] = '');
                const detectMimic = /direct|240x400|SlotView/;
                win.JSON.parse = new _Proxy(win.JSON.parse, _cloneInto({
                    apply(fun, that, args) {
                        let o = _apply(fun, that, args);
                        if (o && typeof o === 'object') {
                            if (o.cfg && o.cfg.sotaFeatures) {
                                let root = o.cfg.sotaFeatures;
                                if (Array.isArray(root.adv)) root.adv = [];
                                for (let name in root)
                                    if (name.startsWith('adv-') || name.startsWith('adman-'))
                                        delete root[name];
                                ['email_logs_to', 'smokescreen-locators'].forEach(name => emptyString(root, name));
                            }
                            if (o.userConfig) {
                                if (Array.isArray(o.userConfig.honeypot))
                                    o.userConfig.honeypot.forEach((v, id, me) => (me[id] = []));
                                const cfg = o.userConfig.config;
                                if (cfg && cfg.honeypot)
                                    emptyString(cfg.honeypot, 'baits');
                            }
                            if (o.body) {
                                const flags = o.body.common_purpose_flags;
                                if (flags && 'hide_ad_in_mail_web' in flags)
                                    flags.hide_ad_in_mail_web = true;
                                if (o.body.show_me_ads)
                                    o.body.show_me_ads = false;
                            }
                            //_console.log('JSON.parse', o);
                        }
                        if (Array.isArray(o))
                            if (o.some(t => typeof t === 'string' && detectMimic.test(t))) {
                                _console.log('Replaced', o);
                                o = [];
                            } //else _console.log('JSON.parse', o);
                        return o;
                    }
                }));
                // all the rest is only needed on main page and in emails
                if (_subdomain !== 'mail.ru' && !_emailru && !_okru)
                    return;

                // Disable page scrambler on mail.ru to let extensions easily block ads there
                let logger = {
                    apply(fun, that, args) {
                        let res = _apply(fun, that, args);
                        _console.log(`${fun._name}(`, ...args, `)\n>>`, res);
                        return res;
                    }
                };

                function wrapLocator(locator) {
                    if ('setup' in locator) {
                        let _setup = locator.setup;
                        locator.setup = function (o) {
                            if ('enable' in o) {
                                o.enable = false;
                                _console.log('Disable mimic mode.');
                            }
                            if ('links' in o) {
                                o.links = [];
                                _console.log('Call with empty list of sheets.');
                            }
                            return _setup.call(this, o);
                        };
                        locator.insertSheet = () => false;
                        locator.wrap = () => false;
                    }
                    try {
                        let names = [];
                        for (let name in locator)
                            if (typeof locator[name] === 'function' && name !== 'transform') {
                                locator[name]._name = "locator." + name;
                                locator[name] = new _Proxy(locator[name], _cloneInto(logger));
                                names.push(name);
                            }
                        _console.log(`[locator] wrapped properties: ${names.length ? names.join(', ') : '[empty]'}`);
                    } catch (e) {
                        _console.log(e);
                    }
                    return locator;
                }

                const same = Symbol('same');

                function defineLocator(root) {
                    let _locator = root.locator;
                    let wrapLocatorSetter = vl => _locator = wrapLocator(vl);
                    wrapLocatorSetter[same] = true;
                    let loc_desc = Object.getOwnPropertyDescriptor(root, 'locator');
                    if (!loc_desc || !loc_desc.set[same])
                        try {
                            Object.defineProperty(root, 'locator', _cloneInto({
                                set: wrapLocatorSetter,
                                get() {
                                    return _locator;
                                }
                            }, root));
                        } catch (err) {
                            _console.log('Unable to redefine "locator" object!!!', err);
                        }
                    else if (loc_desc.value)
                        _locator = wrapLocator(loc_desc.value);
                }

                { // auto-stubs for various ad, detection and obfuscation modules
                    const missingCheck = {
                        get(obj, name) {
                            let res = obj[name];
                            if (!(name in obj))
                                _console.trace(`Missing "${name}" in`, obj);
                            return res;
                        }
                    };
                    const skipLog = (name, ret) => (...args) => (_console.log(`${name}(`, ...args, ')'), ret);
                    const createSkipAllObject = (baseName, obj = {
                        __esModule: true
                    }) => new _Proxy(obj, _cloneInto({
                        get(obj, name) {
                            if (name in obj)
                                return obj[name];
                            _console.log(`Created stub for "${name}" in ${baseName}.`);
                            obj[name] = skipLog(`${baseName}.${name}`);
                            return obj[name];
                        },
                        set() {}
                    }));
                    const redefiner = {
                        apply(fun, that, args) {
                            let res;
                            let warn = false;
                            let name = fun._name;
                            if (name === 'mrg-smokescreen/Welter')
                                res = {
                                    isWelter() {
                                        return true;
                                    },
                                    wrap: skipLog(`${name}.wrap`)
                                };
                            if (name === 'mrg-smokescreen/Honeypot')
                                res = {
                                    check(...args) {
                                        _console.log(`${name}.check(`, ...args, ')');
                                        return new Promise(() => undefined);
                                    },
                                    version: "-1"
                                };
                            if (name === 'advert/adman/adman') {
                                let features = {
                                    siteZones: {},
                                    slots: {}
                                };
                                [
                                    'expId', 'siteId', 'mimicEndpoint', 'mimicPartnerId',
                                    'immediateFetchTimeout', 'delayedFetchTimeout'
                                ].forEach(name => void(features[name] = null));
                                res = createSkipAllObject(name, {
                                    getFeatures: skipLog(`${name}.getFeatures`, features)
                                });
                            }
                            if (name === 'mrg-smokescreen/Utils')
                                res = createSkipAllObject(name, {
                                    extend(...args) {
                                        let res = {
                                            enable: false,
                                            match: [],
                                            links: []
                                        };
                                        _console.log(`${name}.extend(`, ...args, ') >>', res);
                                        return res;
                                    }
                                });
                            if (name.startsWith('OK/banners/') ||
                                name.startsWith('mrg-smokescreen/StyleSheets') ||
                                name === '@mail/mimic' ||
                                name === 'mediator/advert-managers')
                                res = createSkipAllObject(name);
                            if (res) {
                                Object.defineProperty(res, Symbol.toStringTag, _cloneInto({
                                    get() {
                                        return `Skiplog object for ${name}`;
                                    }
                                }));
                                Object.defineProperty(res, Symbol.toPrimitive, _cloneInto({
                                    value(hint) {
                                        if (hint === 'string')
                                            return Object.prototype.toString.call(this);
                                        return `[missing toPrimitive] ${name} ${hint}`;
                                    }
                                }));
                                res = new _Proxy(res, _cloneInto(missingCheck));
                            } else {
                                res = _apply(fun, that, args);
                                warn = true;
                            }
                            _console[warn ? 'warn' : 'log'](name, '(', ...args, ')\n>>', res);
                            return res;
                        }
                    };

                    const advModuleNamesStartWith = /^(mrg-(context|honeypot)|adv\/)/;
                    const advModuleNamesGeneric = /advert|banner|mimic|smoke/i;
                    const wrapAdFuncs = {
                        apply(fun, that, args) {
                            let module = args[0];
                            if (typeof module === 'string')
                                if ((advModuleNamesStartWith.test(module) ||
                                     advModuleNamesGeneric.test(module)) &&
                                    // fix for e.mail.ru in Fx56 and below, looks like Proxy is quirky there
                                    !module.startsWith('patron.v2.')) {
                                    let main = args[args.length - 1];
                                    main._name = module;
                                    args[args.length - 1] = new _Proxy(main, _cloneInto(redefiner));
                                }
                            return _apply(fun, that, args);
                        }
                    };
                    const wrapDefine = def => {
                        if (!def)
                            return;
                        _console.log('define =', def);
                        def = new _Proxy(def, _cloneInto(wrapAdFuncs));
                        def._name = 'define';
                        return def;
                    };
                    let _define = wrapDefine(win.define);
                    Object.defineProperty(win, 'define', _cloneInto({
                        get() {
                            return _define;
                        },
                        set(x) {
                            if (_define === x)
                                return true;
                            _define = wrapDefine(x);
                            return true;
                        }
                    }));
                }

                let _honeyPot;

                function defineDetector(mr) {
                    let __ = mr._ || {};
                    let setHoneyPot = o => {
                        if (!o || o === _honeyPot) return;
                        _console.log('[honeyPot]', o);
                        _honeyPot = function () {
                            this.check = new _Proxy(() => {
                                __.STUCK_IN_POT = false;
                                return false;
                            }, _cloneInto(logger));
                            this.check._name = 'honeyPot.check';
                            this.destroy = () => null;
                        };
                    };
                    if ('honeyPot' in mr)
                        setHoneyPot(mr.honeyPot);
                    else
                        Object.defineProperty(mr, 'honeyPot', _cloneInto({
                            get() {
                                return _honeyPot;
                            },
                            set: setHoneyPot
                        }));

                    __ = new _Proxy(__, _cloneInto({
                        get(target, prop) {
                            return target[prop];
                        },
                        set(target, prop, val) {
                            _console.log(`mr._.${prop} =`, val);
                            target[prop] = val;
                            return true;
                        }
                    }));
                    mr._ = __;
                }

                function defineAdd(mr) {
                    let _add;
                    let addWrapper = {
                        apply(fun, that, args) {
                            let module = args[0];
                            if (typeof module === 'string' && module.startsWith('ad')) {
                                _console.log('Skip module:', module);
                                return;
                            }
                            if (typeof module === 'object' && module.name.startsWith('ad'))
                                _console.log('Loaded module:', module);
                            return logger.apply(fun, that, args);
                        }
                    };
                    let setMrAdd = v => {
                        if (!v) return;
                        v._name = 'mr.add';
                        v = new _Proxy(v, _cloneInto(addWrapper));
                        _add = v;
                    };
                    if ('add' in mr)
                        setMrAdd(mr.add);
                    Object.defineProperty(mr, 'add', _cloneInto({
                        get() {
                            return _add;
                        },
                        set: setMrAdd
                    }));

                }

                const _mr_wrapper = vl => {
                    defineLocator(vl.mimic ? vl.mimic : vl);
                    defineDetector(vl);
                    defineAdd(vl);
                    return vl;
                };
                if ('mr' in win) {
                    _console.log('Found existing "mr" object.');
                    win.mr = _mr_wrapper(win.mr);
                } else {
                    let _mr;
                    Object.defineProperty(win, 'mr', _cloneInto({
                        get() {
                            return _mr;
                        },
                        set(vl) {
                            _mr = vl ? _mr_wrapper(vl) : vl;
                        },
                        configurable: true
                    }));
                    let _defineProperty = _bindCall(Object.defineProperty);
                    Object.defineProperty = exportFunction(function defineProperty(...args) {
                        const [obj, name, conf] = args;
                        if (name === 'mr' && obj instanceof Window) {
                            _console.trace('Object.defineProperty(', ...args, ')');
                            conf.set(_mr_wrapper(conf.get()));
                        }
                        if ((name === 'honeyPot' || name === 'add') && _mr === obj && conf.set)
                            return;
                        return _defineProperty(this, ...args);
                    }, win);
                }
            }, nullTools, selectiveCookies, abortExecution)
        },

        'oms.matchat.online': () => scriptLander(() => {
            let _rmpGlobals;
            Object.defineProperty(win, 'rmpGlobals', _cloneInto({
                get() {
                    return _rmpGlobals;
                },
                set(val) {
                    if (val === _rmpGlobals)
                        return true;
                    _rmpGlobals = new _Proxy(val, _cloneInto({
                        get(obj, name) {
                            if (name === 'adBlockerDetected')
                                return false;
                            return obj[name];
                        },
                        set(obj, name, val) {
                            if (name === 'adBlockerDetected')
                                _console.trace('rmpGlobals.adBlockerDetected =', val);
                            else
                                obj[name] = val;
                            return true;
                        }
                    }));
                }
            }));
        }),

        'megogo.net': {
            now() {
                nt.define('adBlock', false);
                nt.define('showAdBlockMessage', nt.func(null, 'showAdBlockMessage'));
            }
        },

        'naruto-base.su': () => gardener('div[id^="entryID"],.block', /href="http.*?target="_blank"/i),

        'online-fix.me': () => {
            localStorage.setItem('disable-helpus', true);
            let _$ = win.$;
            Object.defineProperty(win, '$', _cloneInto({
                get() {
                    return _$;
                },
                set(jQuery) {
                    _$ = new _Proxy(jQuery, _cloneInto({
                        apply(fun, that, args) {
                            const res = _apply(fun, that, args);
                            if (res.selector === '#helpus')
                                res.fadeIn = nt.func(null, '$.fadeIn');
                            if (res.selector && res.selector.endsWith('a.btn'))
                                res.replaceWith = nt.func(null, '$.replaceWith');
                            return res;
                        }
                    }));
                    return true;
                }
            }));
        },

        'otzovik.com': () => scriptLander(() => {
            abortExecution.onAll('Object.prototype.getYa');
            abortExecution.onGet('Object.prototype.parseServerDataFunction');
            let _o_math = win.o_math;
            Object.defineProperty(win, 'o_math', _cloneInto({
                get() {
                    return _o_math;
                },
                set(val) {
                    delete val.ext_uid;
                    _o_math = val;
                    throw removeOwnFootprint(new ReferenceError('fetch is not defined'));
                }
            }));
        }, abortExecution, selectiveCookies),

        'overclockers.ru': {
            now() {
                abortExecution.onAll('cardinals');
                abortExecution.inlineScript('Document.prototype.createElement', {
                    pattern: /mamydirect/
                });
            }
        },

        'peka2.tv': () => {
            let bodyClass = 'body--branding';
            let checkNode = node => {
                for (let className of node.classList)
                    if (className.includes('banner') || className === bodyClass) {
                        _removeAttribute(node, 'style');
                        node.classList.remove(className);
                        for (let attr of Array.from(node.attributes))
                            if (attr.name.startsWith('advert'))
                                _removeAttribute(node, attr.name);
                    }
            };
            (new MutationObserver(ms => {
                let m, node;
                for (m of ms)
                    for (node of m.addedNodes)
                        if (node instanceof HTMLElement)
                            checkNode(node);
            })).observe(_de, {
                childList: true,
                subtree: true
            });
            (new MutationObserver(ms => {
                for (let m of ms)
                    checkNode(m.target);
            })).observe(_de, {
                attributes: true,
                subtree: true,
                attributeFilter: ['class']
            });
        },

        'pikabu.ru': () => gardener('.story', /story__author[^>]+>ads</i, {
            root: '.inner_wrap',
            observe: true
        }),

        'pixelexperience.org': () => scriptLander(() => {
            abortExecution.inlineScript('eval', {
                pattern: /blockadblock/
            });
        }, abortExecution),

        'player.starlight.digital': {
            other: 'teleportal.ua',
            dom() {
                scriptLander(() => {
                    let _currVideo = win.currVideo;
                    Object.defineProperty(win, 'currVideo', _cloneInto({
                        get() {
                            return _currVideo;
                        },
                        set(val) {
                            _console.log('currVideo =', val);
                            if ('adv' in val)
                                val.adv.creatives = [];
                            if ('showadv' in val)
                                val.showadv = false;
                            if ('mediaHls' in val)
                                val.mediaHls = val.mediaHls.replace('adv=1', 'adv=0');
                            if ('media' in val)
                                for (let media of val.media)
                                    media.url = media.url.replace('adv=1', 'adv=0');
                            _currVideo = val;
                        }
                    }));
                    nt.define('Object.prototype.isAdBlockEnabled', false);
                    nt.define('Object.prototype.AdBlockDynamicConfig', undefined);
                    nt.define('ADT_PLAYER_ADBLOCK_CONFIG', '');
                    nt.define('ADT_PLAYER_ADBLOCK_CONFIG_DETECT_ON_FAIL', false);
                }, nullTools);
            }
        },

        'player.vgtrk.com': () => nt.define('Object.prototype.IS_CHECK_REGISTRATION', undefined),

        'qrz.ru': {
            now() {
                nt.define('ab', false);
                nt.define('tryMessage', nt.func(null, 'tryMessage'));
            }
        },

        'rambler.ru': {
            other: [
                'afisha.ru', 'autorambler.ru', 'championat.com', 'eda.ru', 'gazeta.ru', 'lenta.ru', 'letidor.ru',
                'media.eagleplatform.com', 'motor.ru', 'passion.ru', 'quto.ru', 'rns.online', 'wmj.ru'
            ].join(','),
            now() {
                scriptLander(() => {
                    //  Skip login form and frames, and comments frames. Nothing to do here.
                    if (['id.rambler.ru', 'comments.rambler.ru'].includes(location.hostname))
                        return;

                    // prevent autoplay
                    if (location.hostname === 'vp.rambler.ru') {
                        nt.define('Object.prototype.minPlayingVisibleHeight', Number.MAX_SAFE_INTEGER);
                        return;
                    }
                    if (location.hostname.endsWith('.media.eagleplatform.com')) {
                        const _stopImmediatePropagation = _bindCall(Event.prototype.stopImmediatePropagation);
                        win.addEventListener('message', e => {
                            if (typeof e.data === 'object' && e.data.visible)
                                _stopImmediatePropagation(e);
                        });
                        return;
                    }
                    /* jshint -W001 */ // aka 'hasOwnProperty' is a really bad name, but this is a wrapper
                    const autoList = new Set(['autoplay', 'scrollplay']);
                    win.Object.prototype.hasOwnProperty = new _Proxy(win.Object.prototype.hasOwnProperty, _cloneInto({
                        apply(fun, that, args) {
                            if (autoList.has(args[0]))
                                return false;
                            return _apply(fun, that, args);
                        }
                    }));
                    /* jshint +W001 */

                    // ABP detection dev override, handy ^_^
                    _document.cookie = '_blocker_hidden=1; domain=.rambler.ru; path=/';

                    selectiveCookies('detect_count|dv|dvr|lv|lvr');
                    // Wrapper for adv loader settings in QW50aS1BZEJsb2Nr['7t7hystz']
                    const _contexts = new WeakMap();
                    Object.defineProperty(Object.prototype, 'Settings', _cloneInto({
                        set(val) {
                            if (typeof val === 'object' && 'Transports' in val && 'Urls' in val)
                                val.Urls = [];
                            _contexts.set(this, val);
                        },
                        get() {
                            return _contexts.get(this);
                        }
                    }));
                    // disable video pop-outs in articles on gazeta.ru
                    if (location.hostname === 'gazeta.ru' || location.hostname.endsWith('.gazeta.ru'))
                        nt.define('creepyVideo', nt.func(null, 'creepyVideo'));
                    // disable Alice popup (encountered on horoscopes.rambler.ru)
                    nt.define('Object.prototype.needShowAlicePopup', false);
                    // disable some logging
                    yandexRavenStub();
                    // hide "disable ads" button
                    createStyle('a[href^="https://prime.rambler.ru/promo/"] { display: none !important }');
                    // prevent ads from loading
                    abortExecution.onGet('g_GazetaNoExchange');

                    //const toBlock = /[[:][a-z]{1,4}\("0x[\da-f]+"\)[\],}]|{[a-z]{1,2}\([a-z]{1,2}\)}|\.(rnet\.plus|24smi\.net|infox\.sg|lentainform\.com)\//i;
                    const scriptSkipList = /nrWrapper|\/(desktopVendor|vendorsDesktop)\.|<anonymous>/;
                    const isLocalScript = (log) => {
                        let e = removeOwnFootprint(new Error()),
                            parts = e.stack.split(/\n/),
                            row = 0;
                        if (!/http/.test(parts[row]))
                            row += 1;
                        while (scriptSkipList.test(parts[row]))
                            row += 1;
                        let parse = /(https?:.*):\d+:\d+/.exec(parts[row]);
                        if (log)
                            _console.log(parse && parse[1] === location.href, parts[row], [parts]);
                        return parse && parse[1] === location.href;
                    };
                    const cutoff = 200;
                    const fts = f => _toString(f.__sentry__ && f.__sentry_original__ || f['nr@original'] || f);
                    win.setTimeout = new _Proxy(win.setTimeout, _cloneInto({
                        apply(fun, that, args) {
                            if (isLocalScript()) {
                                const [callback, delay] = args;
                                const str = fts(callback);
                                if (!/\n/.test(str)) {
                                    _console.trace(`Skipped setTimeout(${str.slice(0, cutoff)}${str.length > cutoff ? '\u2026' : ''}, ${delay})`);
                                    return null;
                                }
                            }
                            return _apply(fun, that, args);
                        }
                    }));
                    const _onerror = Object.getOwnPropertyDescriptor(win.HTMLElement.prototype, 'onerror');
                    _onerror.set = new _Proxy(_onerror.set, _cloneInto({
                        apply(fun, that, args) {
                            if (typeof args[0] === 'function' && isLocalScript()) {
                                const str = fts(args[0]);
                                _console.trace(`Skipped onerror = ${str.slice(0, cutoff)}${str.length > cutoff ? '\u2026' : ''}`);
                                return;
                            }
                            return _apply(fun, that, args);
                        }
                    }));
                    Object.defineProperty(win.HTMLElement.prototype, 'onerror', _onerror);
                    // Skip dev console check
                    win.console.debug = new Proxy(win.console.debug, _cloneInto({
                        apply(fun, that, args) {
                            if (args[0] instanceof HTMLImageElement)
                                return;
                            return _apply(fun, that, args);
                        }
                    }));
                    // anti-abdetector
                    let _primeStorage;
                    Object.defineProperty(win, 'primeStorage', _cloneInto({
                        get() {
                            if (isLocalScript())
                                throw removeOwnFootprint(new TypeError(`Cannot read property 'primeStorage' of undefined`));
                            return _primeStorage;
                        },
                        set(val) {
                            _primeStorage = val;
                        }
                    }));
                    // Defense against triggered detector
                    _Node.removeChild = new _Proxy(_Node.removeChild, _cloneInto({
                        apply(fun, that, args) {
                            const [el] = args;
                            if (el.tagName === 'LINK' && isLocalScript()) {
                                _console.log(`Let's not remove ${el.tagName}.`);
                                return;
                            }
                            return _apply(fun, that, args);
                        }
                    }));
                }, nullTools, yandexRavenStub, selectiveCookies, abortExecution);
            },
            dom() {
                // disable video pop-outs in articles on lenta.ru and rambler.ru
                let domain = location.hostname.split('.');
                if (['lenta', 'rambler'].includes(domain[domain.length - 2])) {
                    const player = _document.querySelector('.js-video-box__container, .j-mini-player__video');
                    if (player) player.removeAttribute('class');
                }
                // remove utm_ form links
                const parser = _document.createElement('a');
                _document.addEventListener('mousedown', (e) => {
                    let t = e.target;
                    if (!t.href)
                        t = t.closest('A');
                    if (t && t.href) {
                        parser.href = t.href;
                        let remove = [];
                        let params = parser.search.slice(1).split('&').filter(name => {
                            if (name.startsWith('utm_')) {
                                remove.push(name);
                                return false;
                            }
                            return true;
                        });
                        if (remove.length)
                            _console.log('Removed parameters from link:', ...remove);
                        if (params.length)
                            parser.search = `?${params.join('&')}`;
                        else
                            parser.search = '';
                        t.href = parser.href;
                    }
                }, false);
            }
        },

        'razlozhi.ru': {
            now() {
                nt.define('cadb', false);
                for (let func of ['createShadowRoot', 'attachShadow'])
                    if (func in _Element)
                        _Element[func] = function () {
                            return this.cloneNode();
                        };
                createStyle([
                    'div[class][style*="width:"][style*="height"][style*="/themes/default/bg.png"] > div > div[style*="height:"][style*="width:"] { width: 100% !important }',
                    'div[class][style*="width:"][style*="height"][style*="/themes/default/bg.png"] > div[class][style^="top: "] ~ div[class]:not([style]) { right: -100% !important }',
                    'div[class][style*="width:"][style*="height"][style*="/themes/default/bg.png"] > div[style*="px;"] { width: 100% !important }',
                    'div[class][style*="width:"][style*="height"][style*="/themes/default/bg.png"] { width: 100% !important }'
                ]);
            }
        },

        'rbc.ru': {
            other: 'autonews.ru, rbcplus.ru, sportrbc.ru',
            now() {
                scriptLander(() => selectiveCookies('adb_on'), selectiveCookies);
                let _RA;
                let setArgs = {
                    'showBanners': true,
                    'showAds': true,
                    'banners.staticPath': '',
                    'paywall.staticPath': '',
                    'banners.dfp.pageTargeting': () => null,
                    'banners.refreshConfig': [],
                    'banners.preroll': null
                };
                const log = (...args) => jsf.LogAdditionalInfo && _console.log(...args);
                const trace = (...args) => jsf.LogAdditionalInfo && _console.trace(...args);
                Object.defineProperty(win, 'RA', _cloneInto({
                    get() {
                        return _RA;
                    },
                    set(vl) {
                        log('RA =', vl);
                        if ('repo' in vl) {
                            log('RA.repo =', vl.repo);
                            vl.repo = new _Proxy(vl.repo, _cloneInto({
                                set(obj, name, val) {
                                    if (name === 'banner') {
                                        log(`RA.repo.${name} =`, val);
                                        val = new _Proxy(val, _cloneInto({
                                            get(obj, name) {
                                                let res = obj[name];
                                                if (name === 'checkAdBlock' || name === 'gpmdPuidGenerator')
                                                    res = () => undefined;
                                                if (name === 'isInited')
                                                    res = true;
                                                if (name === 'run')
                                                    res = (...args) => log('run RA.repo.banner.run(', ...args, ')');
                                                trace(`get RA.repo.banner.${name}`, res);
                                                return res;
                                            }
                                        }));
                                    }
                                    obj[name] = val;
                                    return true;
                                }
                            }));
                        } else
                            _console.log('Unable to locate RA.repo');
                        if ('fn' in vl) {
                            const replace = ['flyroll', 'subscriptionPopup', 'yandexDirect'];
                            vl.fn = new _Proxy(vl.fn, _cloneInto({
                                get(obj, name) {
                                    if (replace.includes(name))
                                        obj[name] = {
                                            init: (...args) => log(`run RA.fn.${name}.init(`, ...args, ')')
                                        };
                                    log(`get RA.fn.${name}`, obj[name]);
                                    return obj[name];
                                }
                            }));
                        }
                        _RA = new _Proxy(vl, _cloneInto({
                            set(o, name, val) {
                                if (name === 'config') {
                                    log('RA.config =', val);
                                    if ('set' in val) {
                                        val.set = new _Proxy(val.set, _cloneInto({
                                            apply(set, that, args) {
                                                let name = args[0];
                                                if (name in setArgs)
                                                    args[1] = setArgs[name];
                                                if (name === 'banners.dfp.config' && args[1] && args[1].length) // looks like player is loaded as an ad
                                                    args[1] = args[1].filter(x => x.place === 'over_livetv');
                                                if (name in setArgs || name === 'checkad' || name === 'banners.dfp.config')
                                                    log('RA.config.set(', ...args, ')');
                                                return _apply(set, that, args);
                                            }
                                        }));
                                        val.set('showAds', true); // pretend ads already were shown
                                    }
                                }
                                o[name] = val;
                                return true;
                            }
                        }));
                    }
                }));
                nt.define('bannersConfig', []);
                // pretend there is a paywall landing on screen already
                let pwl = _document.createElement('div');
                pwl.style.display = 'none';
                pwl.className = 'js-paywall-landing';
                _document.documentElement.appendChild(pwl);
                // hide banner placeholders
                createStyle('[data-banner-id], .banner__container, .banners__yandex__article { display: none !important }');
            },
            dom() {
                // hide sticky banner place at the top of the page
                for (let itm of _document.querySelectorAll('.l-sticky'))
                    if (itm.querySelector('.banner__container__link'))
                        itm.style.display = 'none';
            }
        },

        'reactor.cc': {
            other: 'joyreactor.cc, pornreactor.cc',
            now: () => scriptLander(() => {
                selectiveEval();
                win.open = function () {
                    throw new ReferenceError('Redirect prevention.');
                };
                nt.define('Worker', nt.func(nt.proxy({}, 'Worker'), 'Worker'));
                let _CTRManager = win.CTRManager;
                Object.defineProperty(win, 'CTRManager', _cloneInto({
                    get() {
                        return _CTRManager;
                    },
                    set(vl) {
                        if (vl === _CTRManager)
                            return true;
                        _CTRManager = {};
                        for (let name in vl)
                            if (typeof vl[name] !== 'function')
                                _CTRManager[name] = vl[name];
                        _CTRManager = nt.proxy(_CTRManager, 'CTRManager');
                    }
                }));
            }, nullTools, selectiveEval),
            click(e) {
                let node = e.target;
                if (node.nodeType === _Node.ELEMENT_NODE &&
                    node.style.position === 'absolute' &&
                    node.style.zIndex > 0)
                    node.parentNode.removeChild(node);
            }
        },

        'rp5.tld': {
            now() {
                Object.defineProperty(win, 'sContentBottom', _cloneInto({
                    set() {},
                    get() {
                        return '';
                    }
                }));
                // skip timeout check for blocked requests
                let _setTimeout = win.setTimeout;
                win.setTimeout = function setTimeout(...args) {
                    let str = (typeof args[0] === 'string' ? args[0] : _toString(args[0]));
                    if (str.includes('xvb')) {
                        _console.log('Blocked setTimeout for:', str);
                        return;
                    }
                    return _setTimeout(...args);
                };
            },
            dom() {
                let node = selectNodeByTextContent('Разместить текстовое объявление', {
                    root: _de.querySelector('#content-wrapper'),
                    shallow: true
                });
                if (node)
                    node.style.display = 'none';
            }
        },

        'rutracker.org': {
            other: 'rutracker.lib, rutracker.net, rutracker.nl',
            now: () => {
                const ext = 'p-ext-link';
                _Element.setAttribute = new _Proxy(_Element.setAttribute, _cloneInto({
                    apply(fun, that, args) {
                        let [prop, classes] = args;
                        if (prop === 'class') {
                            let list = classes.split(/\s/);
                            if (list.includes(ext)) {
                                args[1] = list.filter(x => x !== ext).join(' ');
                                that.setAttribute('target', '_blank');
                                that.setAttribute('rel', 'noreferrer');
                            }
                        }
                        return _apply(fun, that, args);
                    }
                }));
            }
        },

        'rutube.ru': () => scriptLander(() => {
            jsonFilter('creative', 'creative.id');
            jsonFilter('interactives', 'interactives.0');
        }, jsonFilter),

        'sdamgia.ru': () => {
            abortExecution.onGet('Object.prototype.getYa');
            abortExecution.onGet('Object.prototype.initYa');
            abortExecution.onGet('Object.prototype.initYaDirect');
        },

        'shazoo.ru': () => {
            const wash = node => node.tagName === 'BODY' && !node.removeAttribute('style');
            if (!Array.prototype.some.call(_de.children, wash)) {
                let o = new MutationObserver(() => wash(_de.children[_de.children.length - 1]) && o.disconnect());
                o.observe(_de, {
                    childList: true
                });
            }
        },

        'simpsonsua.tv': () => {
            let _addEventListener = _Document.addEventListener;
            _document.addEventListener = function (event, callback) {
                if (event === 'DOMContentLoaded' && callback.toString().includes('show_warning'))
                    return;
                return _addEventListener.apply(this, arguments);
            };
            nt.define('need_warning', 0);
            nt.define('onYouTubeIframeAPIReady', nt.func(null, 'onYouTubeIframeAPIReady'));
        },

        'smotret-anime-365.ru': () => scriptLander(() => {
            deepWrapAPI(root => {
                const _pause = _bindCall(root.Audio.prototype.pause);
                const _addEventListener = _bindCall(root.Element.prototype.addEventListener);
                let stopper = e => _pause(e.target);
                root.Audio = new root.Proxy(root.Audio, _cloneInto({
                    construct(audio, args) {
                        let res = _construct(audio, args);
                        _addEventListener(res, 'play', stopper, true);
                        return res;
                    }
                }, root));
                const getTagName = _bindCall(Object.getOwnPropertyDescriptor(_Element, 'tagName').get);
                root.Document.prototype.createElement = new root.Proxy(root.Document.prototype.createElement, _cloneInto({
                    apply(fun, that, args) {
                        let res = _apply(fun, that, args);
                        if (getTagName(res) === 'AUDIO')
                            _addEventListener(res, 'play', stopper, true);
                        return res;
                    }
                }, root));
            });
        }, deepWrapAPI),

        'smotrim.ru': () => createStyle('.dialog-wrapper { display: none !important }'),

        'spaces.ru': () => {
            gardener('div:not(.f-c_fll) > a[href*="spaces.ru/?Cl="]', /./, {
                parent: 'div'
            });
            gardener('.js-banner_rotator', /./, {
                parent: '.widgets-group'
            });
        },

        'spam-club.blogspot.co.uk': () => {
            let _clientHeight = Object.getOwnPropertyDescriptor(_Element, 'clientHeight'),
                _clientWidth = Object.getOwnPropertyDescriptor(_Element, 'clientWidth');
            let wrapGetter = (getter) => {
                let _getter = getter;
                return function () {
                    let _size = _getter.apply(this, arguments);
                    return _size ? _size : 1;
                };
            };
            _clientHeight.get = wrapGetter(_clientHeight.get);
            _clientWidth.get = wrapGetter(_clientWidth.get);
            Object.defineProperty(_Element, 'clientHeight', _clientHeight);
            Object.defineProperty(_Element, 'clientWidth', _clientWidth);
            let _onload = Object.getOwnPropertyDescriptor(HTMLElement.prototype, 'onload'),
                _set_onload = _onload.set;
            _onload.set = function () {
                if (this instanceof HTMLImageElement)
                    return true;
                _set_onload.apply(this, arguments);
            };
            Object.defineProperty(HTMLElement.prototype, 'onload', _onload);
        },

        'sport-express.ru': () => gardener('.js-relap__item', />Реклама\s+<\//, {
            root: '.container',
            observe: true
        }),

        'sports.ru': {
            other: 'tribuna.com',
            now() {
                // extra functionality: shows/hides panel at the top depending on scroll direction
                createStyle({
                    '.user-panel__fixed': {
                        transition: 'top 0.2s ease-in-out!important'
                    },
                    '.popup__overlay.feedback': {
                        display: 'none!important'
                    },
                    '.user-panel-up': {
                        top: '-40px!important'
                    },
                    '#branding-layout': {
                        margin_top: '100px!important'
                    }
                }, {
                    id: 'fixes',
                    protect: false
                });
                scriptLander(() => {
                    yandexRavenStub();
                    webpackJsonpFilter(/AdBlockDetector|addBranding|loadPlista/);
                }, nullTools, yandexRavenStub, webpackJsonpFilter);
            },
            dom() {
                (function lookForPanel() {
                    let panel = _document.querySelector('.user-panel__fixed');
                    if (!panel)
                        setTimeout(lookForPanel, 100);
                    else
                        window.addEventListener(
                            'wheel',
                            function (e) {
                                if (e.deltaY > 0 && !panel.classList.contains('user-panel-up'))
                                    panel.classList.add('user-panel-up');
                                else if (e.deltaY < 0 && panel.classList.contains('user-panel-up'))
                                    panel.classList.remove('user-panel-up');
                            }, false
                        );
                })();
            }
        },

        'stealthz.ru': {
            dom() {
                // skip timeout
                let $ = _document.querySelector.bind(_document);
                let [timer_1, timer_2] = [$('#timer_1'), $('#timer_2')];
                if (!timer_1 || !timer_2)
                    return;
                timer_1.style.display = 'none';
                timer_2.style.display = 'block';
            }
        },

        'tortuga.wtf': () => {
            nt.define('Object.prototype.hideab', undefined);
        },

        'tv.animebest.org': {
            now() {
                let _eval = win.eval;
                win.eval = new _Proxy(win.eval, _cloneInto({
                    apply(evl, ths, args) {
                        if (typeof args[0] === 'string' &&
                            args[0].includes("'VASTP'")) {
                            args[0] = args[0].replace("'VASTP'", "''");
                            win.eval = _eval;
                        }
                        return Reflect.apply(evl, ths, args);
                    }
                }));
            }
        },

        'tv-kanali.online': () => {
            win.setTimeout = new _Proxy(win.setTimeout, _cloneInto({
                apply(fun, that, args) {
                    if (args[0].name && args[0].name.includes('doAd'))
                        return;
                    if (args[1] === 30000) args[1] = 100;
                    return _apply(fun, that, args);
                }
            }));
        },

        'video.khl.ru': () => {
            let props = new Set(['detectBlockers', 'detectBlockersByLink', 'detectBlockersByElement']);
            win.Object.defineProperty = new _Proxy(win.Object.defineProperty, _cloneInto({
                apply(def, that, args) {
                    if (props.has(args[1])) {
                        args[2] = {
                            key: args[1],
                            value() {
                                _console.log(`Skipped ${args[1]} call.`);
                            }
                        };
                        _console.log(`Replaced method ${args[1]}.`);
                    }
                    return Reflect.apply(def, that, args);
                }
            }));
        },

        'websdr.space': () => {
            // scripts_base.min.js localDetect(): lol. seriously, lol
            win.setTimeout = new _Proxy(win.setTimeout, _cloneInto({
                apply(fun, that, args) {
                    let [callback, timeout] = args;
                    if (timeout > 1000 && typeof callback === 'function' && _toString(callback).includes('5e3')) {
                        _console.log('skip', callback);
                        return;
                    }
                    return _apply(fun, that, args);
                }
            }));
        },

        'xatab-repack.net': {
            other: 'rg-mechanics.org',
            now() {
                abortExecution.onSet('blocked');
            }
        },

        'xittv.net': () => scriptLander(() => {
            let logNames = ['setup', 'trigger', 'on', 'off', 'onReady', 'onError', 'getConfig', 'addPlugin', 'getAdBlock'];
            let skipEvents = ['adComplete', 'adSkipped', 'adBlock', 'adRequest', 'adMeta', 'adImpression', 'adError', 'adTime', 'adStarted', 'adClick'];
            let _jwplayer;
            Object.defineProperty(win, 'jwplayer', _cloneInto({
                get() {
                    return _jwplayer;
                },
                set(x) {
                    _jwplayer = new _Proxy(x, _cloneInto({
                        apply(fun, that, args) {
                            let res = fun.apply(that, args);
                            res = new _Proxy(res, _cloneInto({
                                get(obj, name) {
                                    if (logNames.includes(name) && typeof obj[name] === 'function')
                                        return new _Proxy(obj[name], _cloneInto({
                                            apply(fun, that, args) {
                                                if (name === 'setup') {
                                                    let o = args[0];
                                                    if (o)
                                                        delete o.advertising;
                                                }
                                                if (name === 'on' || name === 'trigger') {
                                                    let events = typeof args[0] === 'string' ? args[0].split(" ") : null;
                                                    if (events.length === 1 && skipEvents.includes(events[0]))
                                                        return res;
                                                    if (events.length > 1) {
                                                        let names = [];
                                                        for (let event of events)
                                                            if (!skipEvents.includes(event))
                                                                names.push(event);
                                                        if (names.length > 0)
                                                            args[0] = names.join(" ");
                                                        else
                                                            return res;
                                                    }
                                                }
                                                let subres = fun.apply(that, args);
                                                _console.trace(`jwplayer().${name}(`, ...args, `) >>`, res);
                                                return subres;
                                            }
                                        }));
                                    return obj[name];
                                }
                            }));
                            return res;
                        }
                    }));
                    _console.log('jwplayer =', x);
                }
            }));
        }),

        'yandex.tld': {
            other: 'yandexsport.tld',
            now: () => {
                // Generic Yandex Scripts
                const mainScript = () => {
                    // Yandex API (ADBTools, Metrika)
                    let hostname = location.hostname;
                    if (// Yandex use their Ya object for a lot of things on their pages and
                        // wrapping it may cause problems. It's better to skip it in some cases.
                        ((hostname.startsWith('yandex.') || hostname.includes('.yandex.')) &&
                        /^\/((yand)?search|images|health)/i.test(location.pathname) && !hostname.startsWith('news.')) ||
                        hostname.startsWith('eda.yandex.')
                    ) return;

                    let YaProps = new Set();

                    function setObfuscatedProperty(Ya, rootProp, obj, name) {
                        if (YaProps.has(rootProp))
                            return;
                        _console.trace(`Ya.${rootProp} = Ya.${name}`);
                        nt.defineOn(Ya, rootProp, Ya[name], 'Ya.');
                        YaProps.add(rootProp);
                        for (let prop in obj)
                            delete obj[prop];
                        for (let prop in Ya[name])
                            obj[prop] = Ya[name][prop];
                    }

                    function onObfuscatedProperty(Ya, rootProp, obj) {
                        if ('AdvManager' in obj || 'AdvManagerStatic' in obj || 'isAllowedRepeatAds' in obj) {
                            setObfuscatedProperty(Ya, rootProp, obj, 'Context');
                            return Ya.Context;
                        }
                        if ('create' in obj && 'createAdaptive' in obj && 'createScroll' in obj) {
                            setObfuscatedProperty(Ya, rootProp, obj, 'adfoxCode');
                            return Ya.adfoxCode;
                        }
                        return new _Proxy(obj, _cloneInto({
                            set(target, prop, val) {
                                if (prop === 'AdvManager' || prop === 'isAllowedRepeatAds') {
                                    setObfuscatedProperty(Ya, rootProp, obj, 'Context');
                                    return true;
                                }
                                if (prop === 'create' && 'createAdaptive' in obj && 'createScroll' in obj ||
                                    prop === 'createScroll' && 'create' in obj && 'createAdaptive' in obj ||
                                    prop === 'createAdaptive' && 'create' in obj && 'createScroll' in obj) {
                                    setObfuscatedProperty(Ya, rootProp, obj, 'adfoxCode');
                                    return true;
                                }
                                target[prop] = val;
                                return true;
                            },
                            get(target, prop) {
                                if (prop === 'AdvManager' && !(prop in target)) {
                                    _console.trace(`Injected missing ${prop} in Ya.${rootProp}.`);
                                    target[prop] = Ya.Context[prop];
                                }
                                return target[prop];
                            }
                        }));
                    }
                    let Rum = {
                        getSettings: nt.func([], 'Ya.Rum.getSettings'),
                        getVarsList: nt.func([], 'Ya.Rum.getVarsList'),
                        getTimeMarks: nt.func([], 'Ya.Rum.getTimeMarks'),
                        ajaxStart: 0,
                        ajaxComplete: 0,
                        enabled: true,
                        vsChanged: false,
                        vsStart: 'visible',
                        ERROR_LEVEL: nt.proxy({
                            ERROR: 0,
                            WARN: 0,
                            INFO: 0
                        }, 'Ya.Rum.ERROR_LEVEL'),
                        _tti: null,
                        _markListeners: nt.proxy({}, 'Ya.Rum._markListeners'),
                        _periodicTasks: nt.proxy({}, 'Ya.Rum._periodicTasks'),
                        firstScreenMark: nt.proxy({}, 'Ya.Rum.firstScreenMark'),
                        getSpaMetricsManager: undefined,
                        _onComplete: [],
                        _onInit: []
                    };
                    [
                        '__timeMarks', '_timeMarks', '__deltaMarks', '_deltaMarks',
                        '__defRes', '_defRes', '__defTimes', '_defTimes', '_vars',
                        '_unsubscribers', 'commonVars'
                    ].forEach(name => void(Rum[name] = []));
                    Rum = nt.proxy(Rum, 'Ya.Rum', nt.NULL);
                    let Ya = new _Proxy(_cloneInto({}), _cloneInto({
                        set(obj, prop, val) {
                            if (val === obj[prop])
                                return true;
                            if (prop === 'Rum') {
                                nt.defineOn(obj, prop, Rum, 'Ya.');
                                YaProps.add(prop);
                                Object.assign(val, Rum);
                            }
                            if (YaProps.has(prop)) {
                                jsf.LogAdditionalInfo && _console.log(`Ya.${prop} \u2260`, val);
                                return true;
                            }
                            if (typeof val === 'object' && prop !== '__inline_params__' && !('length' in val))
                                val = onObfuscatedProperty(Ya, prop, val);
                            obj[prop] = val;
                            jsf.LogAdditionalInfo && _console.log(`Ya.${prop} =`, val);
                            return true;
                        },
                        get(obj, prop) {
                            const val = obj[prop];
                            jsf.LogAdditionalInfo && _console.log(`get Ya.${prop}`, val);
                            return val;
                        }
                    }));
                    let callWithParams = function (f) {
                        f.call(this, Ya.__inline_params__ || {});
                        Ya.__inline_params__ = null;
                    };
                    nt.defineOn(Ya, 'callWithParams', callWithParams, 'Ya.');
                    nt.defineOn(Ya, 'PerfCounters', nt.proxy({
                        __cacheEvents: []
                    }, 'Ya.PerfCounters', nt.NULL), 'Ya.');
                    nt.defineOn(Ya, '__isSent', true, 'Ya.');
                    nt.defineOn(Ya, 'confirmUrl', '', 'Ya.');
                    nt.defineOn(Ya, 'Direct', nt.proxy({}, 'Ya.Direct', nt.NULL), 'Ya.');
                    nt.defineOn(Ya, 'mediaCode', nt.proxy({
                        create() {
                            if (inIFrame) {
                                _console.log('Removed body of ad-frame.');
                                _document.documentElement.removeChild(_document.body);
                            }
                        }
                    }, 'Ya.mediaCode', nt.NULL), 'Ya.');
                    let extra = nt.proxy({
                        extra: nt.proxy({
                            match: 0,
                            confirm: '',
                            src: ''
                        }),
                        id: 0,
                        percent: 100,
                        threshold: 1
                    });
                    nt.defineOn(Ya, '_exp', nt.proxy({
                        id: 0,
                        coin: 0,
                        choose: nt.func(extra, 'Ya._exp.choose'),
                        get(prop) {
                            return _hasOwnProperty(extra, prop) ? extra[prop] : null;
                        },
                        getId: nt.func(0, 'Ya._exp.getId'),
                        defaultVersion: extra,
                        getExtra: nt.func(extra.extra, 'Ya._exp.getExtra'),
                        getDefaultExtra: nt.func(extra.extra, 'Ya._exp.getDefaultExtra'),
                        versions: [extra]
                    }), 'Ya.');
                    nt.defineOn(Ya, 'c', nt.func(null, 'Ya.c'), 'Ya.');
                    nt.defineOn(Ya, 'ADBTools', function () {
                        this.getCurrentState = nt.func(true, 'Ya.ADBTools().getCurrentState');
                        return nt.proxy(this, 'Ya.ADBTools', nt.NULL);
                    }, 'Ya.');
                    nt.defineOn(Ya, 'AdDetector', nt.proxy({}, 'Ya.AdDetector', nt.NULL), 'Ya.');
                    let definePr = o => {
                        Object.defineProperty(o, 'pr', _cloneInto({
                            set() {},
                            get() {
                                return Math.floor(Math.random() * 1e6) + 1;
                            }
                        }));
                    };
                    let adfoxCode = {
                        forcedDirectLoadingExp: nt.proxy({
                            isLoadingTurnedOn: false,
                            isExp: false
                        }),
                        isLoadingTurnedOn: false,
                        xhrExperiment: nt.proxy({
                            isXhr: true,
                            isControl: true
                        }),
                        matchidManager: nt.proxy({}, 'Ya.adfoxCode.matchidManager', nt.NULL),
                        _: []
                    };
                    definePr(adfoxCode);
                    [
                        'clearSession', 'create', 'createAdaptive', 'createScroll',
                        'destroy', 'moduleLoad', 'reload', 'setModule'
                    ].forEach(name => void(adfoxCode[name] = nt.func(null, `Ya.adfoxCode.${name}`)));
                    nt.defineOn(Ya, 'adfoxCode', nt.proxy(adfoxCode, 'Ya.adfoxCode', nt.NULL), 'Ya.');
                    let managerForAdfox = {
                        loaderVersion: 1,
                        isCurrrencyExp: true,
                        isReady: nt.func(true, 'Ya.headerBidding.managerForAdfox.isReady'),
                        getRequestTimeout: nt.func(
                            300 + Math.floor(Math.random() * 100),
                            'Ya.headerBidding.managerForAdfox.getRequestTimeout'
                        )
                    };
                    let headerBidding = nt.proxy({
                        setSettings(opts) {
                            if (!(opts && opts.adUnits))
                                return null;
                            let ids = [];
                            for (let unit of opts.adUnits)
                                ids.push(unit.code);
                            createStyle(`#${ids.join(', #')} { display: none !important }`);
                        },
                        pushAdUnits: nt.func(null, 'Ya.headerBidding.pushAdUnits'),
                        managerForAdfox: nt.proxy(managerForAdfox, 'Ya.headerBidding.managerForAdfox', nt.NULL)
                    });
                    definePr(headerBidding);
                    nt.defineOn(Ya, 'headerBidding', headerBidding, 'Ya.');

                    let AdvManager = function () {
                        this.render = function (o) {
                            if (!o.renderTo)
                                return;
                            let placeholder = _document.getElementById(o.renderTo);
                            if (!placeholder)
                                return _console.warn('Ya.AdvManager.render call w/o placeholder', o);
                            let parent = placeholder.parentNode;
                            placeholder.style = 'display:none!important';
                            parent.style = (parent.getAttribute('style') || '') + 'height:auto!important';
                            // fix for Yandex TV pages
                            if (location.hostname.startsWith('tv.yandex.')) {
                                let sibling = placeholder.previousSibling;
                                if (sibling && sibling.classList && sibling.classList.contains('tv-spin'))
                                    sibling.style.display = 'none';
                            }
                        };
                        this.constructor = Object;
                        return nt.proxy(this, 'Ya.AdvManager', nt.NULL);
                    };
                    nt.defineOn(Ya, 'Context', new _Proxy(_cloneInto({
                        __longExperiment: null,
                        _callbacks: nt.proxy([]),
                        _asyncModeOn: true,
                        _init: nt.func(null, 'Ya.Context._init'),
                        _load_callbacks: nt.proxy([]),
                        performanceStorage: nt.proxy({}),
                        processCallbacks: nt.func(null, 'Ya.Context.processCallbacks'),
                        isAllowedRepeatAds: nt.func(null, 'Ya.Context.isAllowedRepeatAds'),
                        isNewLoader: nt.func(false, 'Ya.Context.isNewLoader'),
                        getItem: nt.func(null, 'Ya.Context.getItem'),
                        AdvManager: new AdvManager(),
                        AdvManagerStatic: new AdvManager()
                    }), _cloneInto({
                        get(obj, prop) {
                            if (prop in obj)
                                return obj[prop];
                            _console.trace(`Ya.Context.${prop} = Ya.Context.AdvManager`);
                            obj[prop] = obj.AdvManager;
                            return obj[prop];
                        },
                        set() {
                            return true;
                        }
                    })), 'Ya.');
                    let Metrika = function Metrika(x) {
                        this._ecommerce = '';
                        if (x && 'id' in x)
                            this.id = x.id;
                        else
                            this.id = 0;
                        return nt.proxy(this, 'Ya.Metrika', nt.NULL);
                    };
                    Metrika.counters = () => Ya._metrika.counters;
                    nt.defineOn(Ya, 'Metrika', Metrika, 'Ya.');
                    nt.defineOn(Ya, 'Metrika2', Metrika, 'Ya.');
                    let counter = new Metrika();
                    nt.defineOn(Ya, '_metrika', nt.proxy({
                        counter: counter,
                        counters: [counter],
                        hitParam: {},
                        counterNum: 0,
                        hitId: 0,
                        v: 1,
                        i: 0,
                        _globalMetrikaHitId: 0,
                        getCounters: () => [],
                        dataLayer: null,
                        f1: null
                    }), 'Ya.');
                    nt.defineOn(Ya, '_globalMetrikaHitId', 0, 'Ya.');
                    counter = {};
                    [
                        'stringifyParams', '_getVars',
                        'getUid', 'getUrl', 'getHash'
                    ].forEach(name => void(counter[name] = nt.func('', `Ya.counter.${name}`)));
                    nt.defineOn(Ya, 'counter', nt.proxy(counter, 'Ya.counter', nt.NULL), 'Ya.');
                    nt.defineOn(Ya, 'jserrors', [], 'Ya.');
                    nt.defineOn(Ya, 'onerror', nt.func(null, 'Ya.onerror'), 'Ya.');
                    let skipYa = location.pathname.startsWith('/games/play/');
                    if (!skipYa) {
                        let error_on_access = false;
                        if ('Ya' in win)
                            try {
                                _console.log('Found existing Ya object:', win.Ya);
                                for (let prop in win.Ya)
                                    Ya[prop] = win.Ya[prop];
                            } catch (ignore) {
                                error_on_access = true;
                            }
                        if (!error_on_access) {
                            for (let prop in Ya)
                                if (prop !== '__inline_params__')
                                    YaProps.add(prop);
                            nt.define('Ya', Ya);
                        } else
                            _console.warn('Looks like window.Ya blocked with error-on-access scriptlet.');
                        // Yandex.Metrika callbacks
                        let yandex_metrika_callbacks = [];
                        _document.addEventListener(
                            'DOMContentLoaded', () => {
                                yandex_metrika_callbacks.forEach((f) => f && f.call(window));
                                yandex_metrika_callbacks.length = 0;
                                yandex_metrika_callbacks.push = (f) => setTimeout(f, 0);
                            }, false
                        );
                        nt.define('yandex_metrika_callbacks', yandex_metrika_callbacks);
                    }

                    let cookiefilter = '';
                    // ads on afisha.yandex.ru, however it looks like selectiveEval isn't perfect
                    // since eval could be called in scope to access properties of that scope and
                    // such calls with it active break functionality on metrika.yandex.ru
                    if (/(^|\.)afisha\./.test(location.hostname)) {
                        selectiveEval(/AdvManagerStatic/);
                        nt.define('Object.prototype._adbStyles', null);
                        nt.define('Object.prototype._adbClass', null);
                        cookiefilter += (cookiefilter.length ? '|' : '') + 'checkcookie';
                    }

                    selectiveCookies(cookiefilter);
                    // remove banner on the start page
                    let AwapsJsonAPI_Json = function (...args) {
                        _console.log('>> new AwapsJsonAPI.Json(', ...args, ')');
                    };
                    const cleaner = (_params, nodes) => {
                        try {
                            for (let i = 0; i < nodes.length; i++)
                                nodes[i].parentNode.parentNode.removeChild(nodes[i].parentNode);
                            _console.log(`Removed banner placeholder.`);
                        } catch (ignore) {
                            _console.log(`Can't locate placeholder to remove.`);
                        }
                    };
                    Object.assign(AwapsJsonAPI_Json.prototype, {
                        checkBannerVisibility: nt.func(true, 'AwapsJsonAPI.Json.checkBannerVisibility'),
                        autorefresh: nt.proxy(cleaner, 'AwapsJsonAPI.Json.prototype.autorefresh'),
                        addIframeContent: nt.proxy(cleaner, 'AwapsJsonAPI.Json.prototype.addIframeContent'),
                        getHTML: nt.func('', 'AwapsJsonAPI.Json.getHTML')
                    });
                    AwapsJsonAPI_Json.prototype = nt.proxy(AwapsJsonAPI_Json.prototype, 'AwapsJsonAPI.Json.prototype');
                    AwapsJsonAPI_Json = nt.proxy(AwapsJsonAPI_Json);
                    if ('AwapsJsonAPI' in win) {
                        _console.log('Oops! AwapsJsonAPI already defined.');
                        let f = win.AwapsJsonAPI.Json;
                        win.AwapsJsonAPI.Json = AwapsJsonAPI_Json;
                        if (f && f.prototype)
                            f.prototype = AwapsJsonAPI_Json.prototype;
                    } else
                        nt.define('AwapsJsonAPI', nt.proxy({
                            Json: AwapsJsonAPI_Json
                        }));

                    const parseExport = x => {
                        if (!x)
                            return x;
                        // remove banner placeholder
                        if (x.banner && x.banner.cls && x.banner.cls.banner__parent) {
                            let hide = pattern => {
                                for (let banner of _document.querySelectorAll(pattern)) {
                                    _setAttribute(banner, 'style', 'display:none!important');
                                    _console.log('Hid banner placeholder.');
                                }
                            };
                            let _parent = `.${x.banner.cls.banner__parent}`;
                            hide(_parent);
                            _document.addEventListener('DOMContentLoaded', () => hide(_parent), false);
                        }

                        // remove banner data and some other stuff
                        delete x.banner;
                        delete x.consistency;
                        delete x['i-bannerid'];
                        delete x['i-counter'];
                        delete x['promo-curtain'];

                        // remove parts of ga-counter (complete removal break "ТВ Онлайн")
                        if (x['ga-counter'] && x['ga-counter'].data) {
                            x['ga-counter'].data.id = 0;
                            delete x['ga-counter'].data.ether;
                            delete x['ga-counter'].data.iframeSrc;
                            delete x['ga-counter'].data.iframeSrcEx;
                        }

                        // remove adblock detector parameters and clean up detector cookie
                        if ('adb' in x) {
                            let cookie = x.adb.data ? x.adb.data.cookie : undefined;
                            if (cookie) {
                                selectiveCookies(cookie);
                                x.adb.data.adb = 0;
                            }
                            delete x.adb;
                        }

                        return x;
                    };
                    // Yandex banner on main page and some other things
                    let _home = win.home,
                        _home_set = !!_home;
                    Object.defineProperty(win, 'home', _cloneInto({
                        get() {
                            return _home;
                        },
                        set(vl) {
                            if (!_home_set && vl === _home)
                                return;
                            _home_set = false;
                            _console.log('home =', vl);
                            let _home_export = parseExport(vl.export);
                            Object.defineProperty(vl, 'export', _cloneInto({
                                get() {
                                    return _home_export;
                                },
                                set(vl) {
                                    _home_export = parseExport(vl);
                                }
                            }));
                            _home = vl;
                        }
                    }));

                    // adblock circumvention on some Yandex domains
                    yandexRavenStub();

                    // news, sport, docviewer in emails and probably other places
                    abortExecution.onGet('yaads.adRenderedCount');
                    let AdvertPartner = nt.func(false, 'AdvertPartner');
                    nt.defineOn(AdvertPartner, 'defaultProps', {}, 'AdvertPartner.');
                    nt.defineOn(AdvertPartner, 'contextTypes', [], 'AdvertPartner.');
                    nt.define('Object.prototype.AdvertPartner', AdvertPartner);
                    // ads in videoplayer
                    nt.define('Object.prototype.useAbdBundle', false);

                    (path => { // code specific for certain paths on yandex
                        const paths = {
                            news: () => {
                                win.JSON.parse = new _Proxy(win.JSON.parse, _cloneInto({
                                    apply(fun, that, args) {
                                        const res = _apply(fun, that, args);
                                        //_console.log(res);
                                        if ('content' in res) {
                                            delete res.content.adTags;
                                            delete res.content.adConfig;
                                        }
                                        if ('request_info' in res && res.request_info.with_ad_insertion)
                                            res.request_info.with_ad_insertion = false;
                                        delete res.rtb;
                                        delete res.seatbid;
                                        return res;
                                    }
                                }));
                            },
                            pogoda: () => createStyle(
                                'div[class^="content "][data-bem] > .content__bottom ~ div[class*="card "],' +
                                '[class*="segment__container"] > div > [class^="card "][class*="_"],' +
                                '.b-statcounter + div[class] > div[id][class] { display: none !important }'
                            ),
                            '': () => {
                                // banner on the main page under search
                                createStyle([
                                    '.widgets[role="main"] div[class] > div[class]:empty:first-child + div[class]:last-child' +
                                    '{ border: none !important }',
                                    'div.media-grid__row[data-blockname="infinity_zen"] .feed__item > div[class^="card-wrapper"][class*=" "]:not([style])' +
                                    '{ display: none !important }',
                                    '.widgets[role="main"] a[href^="https://yastatic.net/www/_/"] ~ div, .widgets[role="main"] a[href^="https://yastatic.net/www/_/"]' +
                                    '{ display: none !important }'
                                ]);
                                const getChildren = _bindCall(Object.getOwnPropertyDescriptor(_Element, 'children').get);
                                const HTMLElementDescriptors = Object.getOwnPropertyDescriptors(HTMLElement.prototype);
                                const [getOffsetParent, getOffsetHeight, getOffsetLeft, getOffsetTop] = [
                                    'offsetParent', 'offsetHeight', 'offsetLeft', 'offsetTop'
                                ].map(prop => _bindCall(HTMLElementDescriptors[prop].get));
                                const isParent = _bindCall(_Node.contains);
                                const getComputedStyle = win.getComputedStyle;
                                const getElementsFromPoint = _document.elementsFromPoint.bind(_document);
                                const getElementPoint = (e, x = 0, y = 0) => {
                                    while (e) {
                                        x += getOffsetLeft(e);
                                        y += getOffsetTop(e);
                                        e = getOffsetParent(e);
                                    }
                                    return {
                                        x,
                                        y
                                    };
                                };
                                const getRoot = (() => {
                                    let root;
                                    return () => root || (root = _querySelector('.widgets[role="main"]'));
                                })();

                                function hideAtPoint(node) {
                                    const arrow = _querySelector('.home-arrow, form[role="search"]');
                                    if (!arrow) {
                                        _console.log('Unable to locate search field.');
                                        return;
                                    }
                                    const [pt, at] = [getElementPoint(node), getElementPoint(arrow)];
                                    const stack = getElementsFromPoint(
                                        Math.max(pt.x, at.x + 16),
                                        Math.max(pt.y, at.y + getOffsetHeight(arrow) + 16)
                                    );
                                    const root = getRoot();
                                    stack.filter(n => !isParent(n, arrow) && root.contains(n)).forEach(
                                        e => e.setAttribute('style', 'display:none!important')
                                    );
                                }

                                const processed = new WeakSet();

                                function reWalker(root) {
                                    for (let node of getChildren(root)) {
                                        let bg = getComputedStyle(node).backgroundImage;
                                        if (bg && bg.includes('/yastatic.net/www/_/') && !processed.has(node)) {
                                            _setAttribute(node, 'style', 'background-image:none!important');
                                            hideAtPoint(node);
                                            processed.add(node);
                                            _console.log('Hid banner.');
                                        }
                                        reWalker(node);
                                    }
                                }

                                (new MutationObserver(
                                    ms => {
                                        const root = getRoot();
                                        if (!root) return;
                                        for (let m of ms)
                                            for (let node of m.addedNodes) {
                                                if (!(node instanceof HTMLElement) || !root.contains(node))
                                                    continue;
                                                reWalker(node);
                                            }
                                    }
                                )).observe(_de, {
                                    childList: true,
                                    subtree: true
                                });

                                win.addEventListener('DOMContentLoaded', r => (r = getRoot()) && reWalker(r));
                            }
                        };
                        if (paths[path]) paths[path]();
                        if (path === 'news' || path === 'sport') {
                            createStyle(
                                'div[class*="-header"] ~ div[id*="page"] > div > div[class*="__"] + div[class] > [class*="__row"] > div[class*="__col"]:last-child,' +
                                '.news-top-rubric-heading > span:only-child, div[class*="sport-app__advert"], div[class*="_banger"] { display: none !important }'
                            );
                            gardener('div[class*="__col"] > div[class*="-feed__"][class*="_type_"] > div[class*="loader"]', /./, {
                                root: 'div[class*="-header"] ~ div[id*="page"]',
                                parent: 'div[class*="-header"] ~ div[id*="page"] div[class*="__col"]',
                                observe: true,
                                hide: true
                            });
                        }
                    })(location.pathname.slice(1, (x => x < 0 ? undefined : x)(location.pathname.indexOf('/', 1))).toLowerCase());

                    // abp detector cookie on yandex pogoda and afisha
                    win.Element.prototype.getAttribute = new _Proxy(win.Element.prototype.getAttribute, _cloneInto({
                        apply(get, el, args) {
                            let res = _apply(get, el, args);
                            if (res && res.length > 20 && el instanceof HTMLBodyElement)
                                try {
                                    let o = JSON.parse(res),
                                        found = false,
                                        check;
                                    for (let prop in o) {
                                        check = 'param' in o[prop] || 'aabCookieName' in o[prop];
                                        if (check || 'banners' in o[prop]) {
                                            found = true;
                                            if (check)
                                                selectiveCookies(o[prop].param || o[prop].aabCookieName);
                                            _console.log(el.tagName, o, 'removed', o[prop]);
                                            delete o[prop];
                                        }
                                    }
                                    if (!found) _console.log(el.tagName, o);
                                    res = JSON.stringify(o);
                                } catch (ignore) {}
                            return res;
                        }
                    }));
                };
                scriptLander(mainScript, nullTools, yandexRavenStub, abortExecution, selectiveCookies, selectiveEval);


                // Subdomain-specific Yandex scripts
                const subDomain = location.hostname.slice(0, location.hostname.indexOf('.'));

                // Cause issues on docviewer
                if ('attachShadow' in _Element && subDomain !== 'docviewer') try {
                    let fakeRoot = () => ({
                        firstChild: null,
                        appendChild() {
                            return null;
                        },
                        querySelector() {
                            return null;
                        },
                        querySelectorAll() {
                            return null;
                        }
                    });
                    _Element.createShadowRoot = fakeRoot;
                    let shadows = new WeakMap();
                    let _attachShadow = Object.getOwnPropertyDescriptor(_Element, 'attachShadow');
                    _attachShadow.value = function () {
                        return shadows.set(this, fakeRoot()).get(this);
                    };
                    Object.defineProperty(_Element, 'attachShadow', _attachShadow);
                    let _shadowRoot = Object.getOwnPropertyDescriptor(_Element, 'shadowRoot');
                    _shadowRoot.set = () => null;
                    _shadowRoot.get = function () {
                        return shadows.has(this) ? shadows.get(this) : undefined;
                    };
                    Object.defineProperty(_Element, 'shadowRoot', _shadowRoot);
                } catch (e) {
                    _console.warn('Unable to wrap Element.prototype.attachShadow\n', e);
                }

                // Disable banner styleSheet (on main page)
                document.addEventListener('DOMContentLoaded', () => {
                    for (let sheet of document.styleSheets)
                        try {
                            for (let rule of sheet.cssRules)
                                if (rule.cssText.includes(' 728px 90px')) {
                                    rule.parentStyleSheet.disabled = true;
                                    _console.log('Disabled banner styleSheet:', rule.parentStyleSheet);
                                }
                        } catch (ignore) {}
                }, false);

                // Yandex Mail ads
                if (subDomain === 'mail') {
                    let wrap = vl => {
                        if (!vl)
                            return vl;
                        _console.log('Daria =', vl);
                        nt.defineOn(vl, 'AdBlock', nt.proxy({
                            detect: nt.func(new Promise(() => null), 'Daria.AdBlock.detect'),
                            enabled: false
                        }), 'Daria.');
                        nt.defineOn(vl, 'AdvPresenter', nt.proxy({
                            _config: nt.proxy({
                                banner: false,
                                done: false,
                                line: false
                            })
                        }), 'Daria.');
                        if (vl.Config) {
                            delete vl.Config.adBlockDetector;
                            delete vl.Config['adv-url'];
                            delete vl.Config.cryprox;
                            if (vl.Config.features) {
                                delete vl.Config.features.web_adloader_with_cookie_cache;
                                delete vl.Config.features.web_ads;
                                delete vl.Config.features.web_ads_mute;
                            }
                            vl.Config.mayHaveAdv = false;
                        }
                        return vl;
                    };
                    let _Daria = wrap(win.Daria);
                    if (_Daria)
                        _console.log('Wrapped already existing object "Daria".');
                    Object.defineProperty(win, 'Daria', _cloneInto({
                        get() {
                            return _Daria;
                        },
                        set(vl) {
                            if (vl === _Daria)
                                return;
                            _Daria = wrap(vl);
                        }
                    }));
                    // Buttons to pay to disable ads
                    createStyle('.ns-view-mail-pro-left-column-button, .PSHeader-Pro { display: none !important }');
                }

                // Detector and ads on Yandex Music
                if (subDomain === 'music') {
                    nt.define('tryPay', nt.func(null, 'tryPay'));
                    nt.define('Object.prototype.initMegabannerAPI', nt.func(null, 'initMegabannerAPI'));
                    nt.define('Object.prototype.mediaAd', undefined);
                    nt.define('Object.prototype.detect', () => new Promise(() => null));
                    nt.define('Object.prototype.loadContext', () => new Promise(r => r()));
                    nt.define('Object.prototype.antiAdbSetup', nt.func(null, 'ya.music.antiAdbSetup'));
                }

                const isSearch = /^\/(yand)?search[/?]/i.test(location.pathname);
                if (['mail', 'music', 'tv', 'yandexsport'].includes(subDomain) || isSearch) {
                    // prevent/defuse adblock detector and cleanup localStorage
                    for (let name in localStorage)
                        if (name.startsWith('videoplayer-ad-session-') || ['ic', 'yu', 'ludca', 'test'].includes(name))
                            localStorage.removeItem(name);

                    const mapsmb = Symbol('lsOverrideMap');
                    let lsOverride = {
                        // generic
                        '_mt__data': '',
                        'yandexJSPlayerApiSavedSingleVideoSessionWatchedTimeSinceAd': Math.floor(Math.random() * 1000000) / 1000,
                        'yandexJSPlayerApiSavedSingleVideoSessionWatchedTimeSinceAdUtcTimestamp': true,
                        // Yandex Music specific
                        'playerBrandingType': null,
                        'paywall-onloaded': true,
                        'gdpr-welcome': true
                    };
                    lsOverride[mapsmb] = new Map();
                    lsOverride = new _Proxy(lsOverride, _cloneInto({
                        get(that, name) {
                            if (name === mapsmb)
                                return that[name];
                            if (name === 'yandexJSPlayerApiSavedSingleVideoSessionWatchedTimeSinceAdUtcTimestamp')
                                return String((new Date()).getTime() / 1000 - that.yandexJSPlayerApiSavedSingleVideoSessionWatchedTimeSinceAd).slice(1, 14);
                            if (name === 'paywall-onloaded' || name === 'gdpr-welcome') {
                                let val = that[mapsmb].get(name);
                                if (!val) return val;
                                let obj = JSON.parse(val);
                                let dt = Math.floor((new Date()).getTime() + Math.random() * 3 * 86400000 + 2 * 86400000);
                                for (let itm in obj)
                                    obj[itm] = dt;
                                return JSON.stringify(obj);
                            }
                            return String(that[name]);
                        },
                        set(that, name, val) {
                            that[mapsmb].set(name, val);
                            return true;
                        }
                    }));
                    const _getItem = win.localStorage.getItem;
                    const _localStorage = new _Proxy(win.localStorage, _cloneInto({
                        get(that, name) {
                            if (name === 'getItem') {
                                return (it) => {
                                    //console.log('get', it, _getItem.call(that, it));
                                    if (it in lsOverride) {
                                        lsOverride[it] = _getItem.call(that, it);
                                        //console.log('override', lsOverride[it]);
                                        return lsOverride[it];
                                    }
                                    return _getItem.call(that, it);
                                };
                            }
                            if (name === 'removeItem' || name === 'setItem')
                                return that[name].bind(that);
                            if (name in lsOverride) {
                                lsOverride[name] = _localStorage[name];
                                _localStorage[name] = lsOverride[name];
                                return lsOverride[name];
                            }
                            return that[name];
                        }
                    }));
                    Object.defineProperty(win, 'localStorage', _cloneInto({
                        enumerable: true,
                        configurable: true,
                        get: new _Proxy(exportFunction(function localStorage() {
                            return _localStorage;
                        }, win), _cloneInto({}))
                    }));

                    // cookie cleaner
                    let yp_keepCookieParts = /\.(sp|ygo|ygu|fblkv2|skin)\./;
                    // ygo = city id; ygu = detect city automatically; fblkv2 = visible sections on the main page under search; skin = ligh/dark site skin
                    let _doc_proto = ('cookie' in _Document) ? _Document : Object.getPrototypeOf(_document);
                    let _cookie = Object.getOwnPropertyDescriptor(_doc_proto, 'cookie');
                    let blacklist = /^(mda=|ys=|yabs-|__|bltsr=)/;
                    if (_cookie) {
                        let _set_cookie = _bindCall(_cookie.set);
                        _cookie.set = function (value) {
                            if (blacklist.test(value)) {
                                // remove value, set expired
                                value = value.replace(/^([^=]+=)[^;]+/, '$1').replace(/(expires=)[\w\s\d,]+/, '$1Thu, 01 Jan 1970 00');
                                _console.trace('expire cookie', value.match(/^[^=]+/)[0]);
                            } else if (value.startsWith('yp=')) {
                                let parts = value.split(';');
                                let values = parts[0].split('#').filter(part => yp_keepCookieParts.test(part));
                                if (values.length)
                                    values[0] = values[0].replace(/^yp=/, '');
                                let res = `yp=${values.join('#')}`;
                                _console.trace(`set cookie ${res}, dropped ${parts[0].replace(res,'')}`);
                                parts[0] = res;
                                value = parts.join(';');
                            }
                            return _set_cookie(this, value);
                        };
                        Object.defineProperty(_doc_proto, 'cookie', _cookie);
                    }
                    // Remove blacklisted cookies on startup
                    GM.cookie.list({ url: location.href }).then(cookies => {
                        const remove = [];
                        for (const cookie of cookies) if (blacklist.test(`${cookie.name}=`)) remove.push(cookie);
                        for (const cookie of remove) {
                            console.log('Remove cookie', cookie.name);
                            GM.cookie.delete(cookie);
                        }
                    });
                }
            },
            dom: () => {
                { // Partially based on https://greasyfork.org/en/scripts/22737-remove-yandex-redirect
                    let count = 0,
                        lock = false;
                    const log = () => {
                        count++;
                        if (lock)
                            return;
                        setTimeout(() => {
                            _console.log('Removed tracking attributes from', count, 'links.');
                            count = 0;
                            lock = false;
                        }, 3333);
                        lock = true;
                    };
                    const selectors = (
                        'A[onmousedown*="/jsredir"],' +
                        'A[data-log-node],' +
                        'A[data-vdir-href],' +
                        'A[data-counter]'
                    );
                    const removeTrackingAttributes = (link) => {
                        _removeAttribute(link, 'onmousedown');
                        _removeAttribute(link, 'data-log-node');
                        // data-vdir-href
                        _removeAttribute(link, 'data-vdir-href');
                        _removeAttribute(link, 'data-orig-href');
                        // data-counter
                        _removeAttribute(link, 'data-counter');
                        _removeAttribute(link, 'data-bem');
                        log();
                    };
                    const removeTracking = (scope) => {
                        if (scope instanceof Element)
                            for (let link of scope.querySelectorAll(selectors))
                                removeTrackingAttributes(link);
                    };

                    removeTracking(_document);
                    (new MutationObserver(
                        function (ms) {
                            let m, node;
                            for (m of ms)
                                for (node of m.addedNodes)
                                    if (node instanceof HTMLAnchorElement && node.matches(selectors))
                                        removeTrackingAttributes(node);
                                    else
                                        removeTracking(node);
                        }
                    )).observe(_de, {
                        childList: true,
                        subtree: true
                    });
                }

                // Subdomain-specific Yandex scripts
                const subDomain = location.hostname.slice(0, location.hostname.indexOf('.'));

                // Function to attach an observer to monitor dynamic changes on the page
                const pageUpdateObserver = (func, obj, params) => {
                    if (obj)
                        (new MutationObserver(func))
                         .observe(obj, (params || {
                            childList: true,
                            subtree: true
                        }));
                };
                // Short name for parentNode.removeChild
                const remove = node => {
                    if (!node || !node.parentNode)
                        return false;
                    _console.log('Removed node.');
                    node.parentNode.removeChild(node);
                };
                // Short name for setAttribute style to display:none
                const hide = node => {
                    if (!node)
                        return false;
                    _console.log('Hid node.');
                    _setAttribute(node, 'style', 'display:none!important');
                };

                if (subDomain === 'music') {
                    const removeMusicAds = () => {
                        for (let node of _querySelectorAll('.ads-block'))
                            remove(node);
                    };
                    pageUpdateObserver(removeMusicAds, _querySelector('.sidebar'));
                    removeMusicAds();
                }

                if (subDomain === 'tv') {
                    const removeTVAds = () => {
                        const yadWord = /Яндекс.Директ/i;
                        for (let node of _querySelectorAll('div[class^="_"][data-reactid] > div'))
                            if (yadWord.test(node.textContent) || node.querySelector('iframe:not([src])')) {
                                if (node.offsetWidth) {
                                    let pad = _document.createElement('div');
                                    _setAttribute(pad, 'style', `width:${node.offsetWidth}px`);
                                    node.parentNode.appendChild(pad);
                                }
                                remove(node);
                            }
                    };
                    pageUpdateObserver(removeTVAds, _document.body);
                    removeTVAds();
                }

                const isSearch = /^\/(yand)?search[/?]/i.test(location.pathname);
                if (isSearch) {
                    const removeSearchAds = () => {
                        const adWords = /Реклама|Ad/i;
                        for (let node of _querySelectorAll('.serp-item'))
                            if (_getAttribute(node, 'role') === 'complementary' ||
                                adWords.test((node.querySelector('.label') || {}).textContent))
                                hide(node);
                    };
                    pageUpdateObserver(removeSearchAds, _querySelector('.main__content'));
                    removeSearchAds();
                }

                if (['mail', 'music', 'tv', 'yandexsport'].includes(subDomain) || isSearch) {
                    // Generic ads removal and fixes
                    for (let node of _querySelectorAll('.serp-header'))
                        node.style.marginTop = '0';
                    for (let node of _querySelectorAll(
                            '.serp-adv__head + .serp-item,' +
                            '#adbanner,' +
                            '.serp-adv,' +
                            '.b-spec-adv,' +
                            'div[class*="serp-adv__"]:not(.serp-adv__found):not(.serp-adv__displayed)'
                        )) remove(node);
                }
            }
        },

        'yap.ru': {
            other: 'yaplakal.com',
            now() {
                gardener('form > table[id^="p_row_"]:nth-of-type(2)', /member1438|Administration/);
                gardener('.icon-comments', /member1438|Administration|\/go\/\?http/, {
                    parent: 'tr',
                    siblings: -2
                });
            }
        },

        'yapx.ru': () => scriptLander(() => {
            selectiveCookies('adblock_state|adblock_views');
            nt.define('blockAdBlock', {
                on: nt.func(nt.proxy({}, 'blockAdBlock.on', nt.NULL), 'blockAdBlock.on'),
                check: nt.func(null, 'blockAdBlock.check')
            });
        }, selectiveCookies, nullTools),

        'znanija.com': () => scriptLander(() => {
            localStorage.clear();
        }, abortExecution)
    };

    // replace '.tld' in domain names, add alternative domain names if present and wrap functions into objects
    {
        const parts = _document.domain.split('.');
        const tld = /\.tld$/;
        const tldSubstitur = (() => {
            // stores TLD of current domain (simplistic TLD implementation)
            const last = parts.length - 1;
            const tld = ['', parts[last]];
            const secondLevel = [
                'biz', 'com', 'edu', 'gov', 'info', 'int', 'mil', 'net', 'org', 'pro'
            ];
            // add second from the end part of domain name as part of the TLD substitutor
            // when domain name consists of more than 2 parts and it looks like a part of TLD
            if ((parts[0] !== 'www' && parts.length > 2 || parts.length > 3) &&
                (parts[last - 1].length < 3 || secondLevel.includes(parts[last - 1])))
                tld.splice(0, 1, parts[last - 1]);
            return tld.join('.');
        })();
        for (let name in scripts) {
            if (typeof scripts[name] === 'function')
                scripts[name] = {
                    now: scripts[name]
                };
            if (name.endsWith('.tld'))
                scripts[name.replace(tld, tldSubstitur)] = scripts[name];
            for (let domain of (scripts[name].other && scripts[name].other.split(/,\s*/) || [])) {
                domain = domain.replace(tld, tldSubstitur);
                if (domain in scripts)
                    _console.log('Error in scripts list. Script for', name, 'replaced script for', domain);
                scripts[domain] = scripts[name];
            }
            delete scripts[name].other;
        }
        // scripts lookup
        const windowEvents = ['load', 'unload', 'beforeunload'];
        let domain;
        while (parts.length > 1) {
            domain = parts.join('.');
            if (domain in scripts) {
                for (let when in scripts[domain]) {
                    let script = scripts[domain][when];
                    if (when === 'now')
                        script();
                    else if (when === 'dom')
                        _document.addEventListener('DOMContentLoaded', script);
                    else if (windowEvents.includes(when))
                        win.addEventListener(when, scripts[domain][when]);
                    else
                        _document.addEventListener(when, scripts[domain][when]);
                }
            }
            parts.shift();
        }
    }

    // Batch script lander
    if (!skipLander)
        landScript(batchLand, batchPrepend);

    { // JS Fixes Tools Menu
        const incompatibleScriptHandler = !/^(Tamper|Violent)monkey$/.test(GM.info.scriptHandler);
        // Debug function, lists all unusual window properties
        const isNativeFunction = /^[^{]*\{[\s\r\n]*\[native\scode\][\s\r\n]*\}$/;
        const getStrangeObjectsList = () => {
            _console.group('Window strangers list');
            const _skip = 'frames/self/window/webkitStorageInfo'.split('/');
            for (let n of Object.getOwnPropertyNames(win))
                try {
                    let val = win[n];
                    if (val && !_skip.includes(n) && (win !== window && val !== window[n] || win === window) &&
                        (typeof val !== 'function' || typeof val === 'function' && !isNativeFunction.test(_toString(val))))
                        _console.log(`${n} =`, val);
                } catch (e) {
                    _console.log(n, 'returns error on read', e);
                }
            _console.groupEnd('Window strangers list');
        };

        const lines = {
            linked: [],
            MenuOptions: {
                eng: 'Options',
                ukr: 'Налаштування',
                rus: 'Настройки'
            },
            MenuCompatibilityWarning: {
                eng: 'is not supported',
                ukr: 'не підтримується',
                rus: 'не поддерживается'
            },
            langs: {
                eng: 'English',
                ukr: 'Українська',
                rus: 'Русский'
            },
            sObjBtn: {
                eng: 'List unusual “window” properties',
                ukr: 'Вивести нестандартні властивості «window»',
                rus: 'Вывести нестандартные свойства «window»'
            },
            HeaderTools: {
                eng: 'Tools',
                ukr: 'Інструменти',
                rus: 'Инструменты'
            },
            HeaderOptions: {
                eng: 'Options',
                ukr: 'Налаштування',
                rus: 'Настройки'
            },
            AccessStatisticsLabel: {
                eng: 'Display stubs access statistics and JSON filter',
                ukr: 'Відображати статистику запитів до заглушок та JSON фільтра',
                rus: 'Выводить статистику запросов к заглушкам и JSON фильтра'
            },
            AbortExecutionStatisticsLabel: {
                eng: 'Display abort execution statistics',
                ukr: 'Відображати статистику переривання виконання скриптів',
                rus: 'Выводить статистику прерывания исполнения скриптов'
            },
            LogAttachedCSSLabel: {
                eng: 'Log CSS attached to a page',
                ukr: 'Журналювати CSS додані на сторінку',
                rus: 'Журналировать CSS добавленные на страницу'
            },
            LogAdditionalInfoLabel: {
                eng: 'Display additional logs (when available)',
                ukr: 'Додаткове журналування (якщо є)',
                rus: "Дополнительное журналирование (когда доступно)"
            },
            BlockNotificationPermissionRequestsLabel: {
                eng: 'Block requests to "Show Notifications" on sites',
                ukr: 'Блокувати запити «Показувати Повідомлення» на сайтах',
                rus: 'Блокировать запросы «Показывать Уведомления» на сайтах'
            },
            ShowScriptHandlerCompatibilityWarningLabel: {
                eng: 'Show compatibility warning in menu next to Options',
                ukr: 'Відображати попередження про сумісність у меню поруч із Налаштуваннями',
                rus: 'Отображать предупреждение о совместимости в меню рядом с Настройками'
            },
            DisableTMContextMenuLabel: {
                eng: [
                    'To hide “Tampermonkey” in context menu please open “Dashboard” from extension\'s menu,',
                    'select “Settings” tab, switch “Config mode” to “Advanced”, navigate to “Context Menu” section',
                    'and disable “Userscript menu commands” option. Additionally, make sure “Inject mode”',
                    'in “Experimental” section is set to “Instant”.'
                ].join(' '),
                ukr: [
                    'Для приховання "Tampermonkey" у контекстному меню будь ласка, відкрийте «Панель упарвлення» з меню розширення,',
                    'перейдіть на вкладку «Налаштування», переключіть «Режим конфігурації» на «Просунутий», знайдіть секцію «Context Menu»',
                    'і вимкніть опцію «Userscript menu commands». Також переконайтеся, що «Режим вбудовування» в секції',
                    '«Експериментально» встановлений на «Миттєвий».',
                ].join(' '),
                rus: [
                    'Для скрытия "Tampermonkey" в контекстном меню пожалуйста откройте «Панель упарвления» из меню расширения,',
                    'перейдите на вкладку «Настройки», переключите «Режим конфигурации» на «Продвинутый», найдите секцию «Context Menu»',
                    'и выключите опцию «Userscript menu commands». Также убедитесь, что «Режим встраивания» в секции',
                    '«Экспериментально» установлен на «Мгновенный».',
                ].join(' ')
            },
            reg(el, name) {
                this[name].link = el;
                this.linked.push(name);
            },
            setLang(lang = 'eng') {
                for (let name of this.linked) {
                    const el = this[name].link;
                    const label = this[name][lang];
                    el.textContent = label;
                }
                this.langs.link.value = lang;
                jsf.Lang = lang;
            }
        };

        const _createTextNode = _Document.createTextNode.bind(_document);
        const createOptionsWindow = () => {
            const root = _createElement('div'),
                shadow = _attachShadow ? _attachShadow(root, {
                    mode: 'closed'
                }) : root,
                overlay = _createElement('div'),
                inner = _createElement('div');

            overlay.id = 'overlay';
            overlay.appendChild(inner);
            shadow.appendChild(overlay);

            inner.id = 'inner';
            inner.br = function appendBreakLine() {
                return this.appendChild(_createElement('br'));
            };

            createStyle({
                'h2': {
                    margin_top: 0
                },
                'h2, h3': {
                    margin_block_end: '0.5em'
                },
                'div, button, select, input': {
                    font_family: 'Helvetica, Arial, sans-serif',
                    font_size: '12pt'
                },
                'button': {
                    background: 'linear-gradient(to bottom, #f0f0f0 5%, #c0c0c0 100%)',
                    border_radius: '3px',
                    border: '1px solid #a1a1a1',
                    color: '#000000',
                    text_shadow: '0px 1px 0px #d4d4d4'
                },
                'button:hover': {
                    background: 'linear-gradient(to bottom, #c0c0c0 5%, #f0f0f0 100%)'
                },
                'button:active': {
                    position: 'relative',
                    top: '1px'
                },
                'select': {
                    border: '1px solid darkgrey',
                    border_radius: '0px 0px 5px 5px',
                    border_top: '0px'
                },
                'button:focus, select:focus': {
                    outline: 'none'
                },
                '#overlay': {
                    position: 'fixed',
                    top: 0,
                    left: 0,
                    bottom: 0,
                    right: 0,
                    background: 'rgba(0,0,0,0.65)',
                    z_index: 2147483647 // Highest z-index: Math.pow(2, 31) - 1
                },
                '#inner': {
                    background: 'whitesmoke',
                    color: 'black',
                    padding: '1.5em 1em 1.5em 1em',
                    max_width: '65ch',
                    position: 'absolute',
                    top: '50%',
                    left: '50%',
                    transform: 'translate(-50%, -50%)',
                    border: '1px solid darkgrey',
                    border_radius: '5px'
                },
                '#closeOptionsButton': {
                    float: 'right',
                    transform: 'translate(1em, -1.5em)',
                    border: 0,
                    border_radius: 0,
                    background: 'none',
                    box_shadow: 'none'
                },
                '#selectLang': {
                    float: 'right',
                    transform: 'translate(0, -1.5em)'
                },
                '.optionsLabel': {
                    padding_left: '1.5em',
                    text_indent: '-1em',
                    display: 'block'
                },
                '.optionsCheckbox': {
                    left: '-0.25em',
                    width: '1em',
                    height: '1em',
                    padding: 0,
                    margin: 0,
                    position: 'relative',
                    vertical_align: 'middle'
                },
                '@media (prefers-color-scheme: dark)': {
                    '#inner': {
                        background_color: '#292a2d',
                        color: 'white',
                        border: '1px solid #1a1b1e'
                    },
                    'input': {
                        filter: 'invert(100%)'
                    },
                    'button': {
                        background: 'linear-gradient(to bottom, #575757 5%, #303030 100%)',
                        border_color: '#575757',
                        color: '#f0f0f0',
                        text_shadow: '0px 1px 0px #171717'
                    },
                    'button:hover': {
                        background: 'linear-gradient(to bottom, #303030 5%, #575757 100%)'
                    },
                    'select': {
                        background_color: '#303030',
                        color: '#f0f0f0',
                        border: '1px solid #1a1b1e',
                        border_radius: '0px 0px 5px 5px',
                        border_top: '0px'
                    },
                    '#overlay': {
                        background: 'rgba(0,0,0,.85)',
                    }
                }
            }, {
                root: shadow,
                protect: false
            });

            // components
            function createCheckbox(name) {
                const checkbox = _createElement('input');
                const label = _createElement('label');
                checkbox.type = 'checkbox';
                checkbox.classList.add('optionsCheckbox');
                checkbox.checked = jsf[name];
                checkbox.onclick = e => {
                    jsf[name] = e.target.checked;
                    return true;
                };
                label.classList.add('optionsLabel');
                label.appendChild(checkbox);
                const text = _createTextNode('');
                label.appendChild(text);
                Object.defineProperty(label, 'textContent', _cloneInto({
                    set(title) {
                        text.textContent = title;
                    }
                }));
                return label;
            }

            // language & close
            const closeBtn = _createElement('button');
            closeBtn.onclick = () => _removeChild(root);
            closeBtn.textContent = '\u2715';
            closeBtn.id = 'closeOptionsButton';
            inner.appendChild(closeBtn);

            overlay.addEventListener('click', e => {
                if (e.target === overlay) {
                    _removeChild(root);
                    e.preventDefault();
                }
                e.stopPropagation();
            }, false);

            const selectLang = _createElement('select');
            for (let name in lines.langs) {
                const langOption = _createElement('option');
                langOption.value = name;
                langOption.innerText = lines.langs[name];
                selectLang.appendChild(langOption);
            }
            selectLang.id = 'selectLang';
            lines.langs.link = selectLang;
            inner.appendChild(selectLang);

            selectLang.onchange = e => {
                const lang = e.target.value;
                lines.setLang(lang);
            };

            // fill options form
            const header = _createElement('h2');
            header.textContent = 'RU AdList JS Fixes';
            inner.appendChild(header);

            lines.reg(inner.appendChild(_createElement('h3')), 'HeaderTools');

            const sObjBtn = _createElement('button');
            sObjBtn.onclick = getStrangeObjectsList;
            sObjBtn.textContent = '';
            lines.reg(inner.appendChild(sObjBtn), 'sObjBtn');

            lines.reg(inner.appendChild(_createElement('h3')), 'HeaderOptions');

            lines.reg(inner.appendChild(createCheckbox('AccessStatistics')), 'AccessStatisticsLabel');
            lines.reg(inner.appendChild(createCheckbox('AbortExecutionStatistics')), 'AbortExecutionStatisticsLabel');
            lines.reg(inner.appendChild(createCheckbox('LogAttachedCSS')), 'LogAttachedCSSLabel');
            lines.reg(inner.appendChild(createCheckbox('LogAdditionalInfo')), 'LogAdditionalInfoLabel');

            inner.appendChild(_createElement('br'));
            lines.reg(inner.appendChild(createCheckbox('BlockNotificationPermissionRequests')), 'BlockNotificationPermissionRequestsLabel');

            if (GM.info.scriptHandler === 'Tampermonkey') {
                inner.appendChild(_createElement('br'));
                lines.reg(inner.appendChild(_createElement('label')), 'DisableTMContextMenuLabel');
            }

            if (incompatibleScriptHandler) {
                inner.appendChild(_createElement('br'));
                lines.reg(inner.appendChild(createCheckbox('ShowScriptHandlerCompatibilityWarning')), 'ShowScriptHandlerCompatibilityWarningLabel');
            }

            lines.setLang(jsf.Lang);

            return root;
        };

        let optionsWindow;
        GM_registerMenuCommand(lines.MenuOptions[jsf.Lang], () => _appendChild(optionsWindow = optionsWindow || createOptionsWindow()));
        // add warning to script menu for non-Tampermonkey users
        if (jsf.ShowScriptHandlerCompatibilityWarning && incompatibleScriptHandler)
            GM_registerMenuCommand(`${GM.info.scriptHandler} ${lines.MenuCompatibilityWarning[jsf.Lang]}`, () => {
                win.open(`https://greasyfork.org/${jsf.Lang.slice(0,2)}/scripts/19993-ru-adlist-js-fixes#additional-info`);
            });
    }
})();
// ==UserScript==
// @name		手机浏览器触摸手势
// @name:en		Mobile browser touch gestures
// @description	为手机浏览器添加触摸手势，即装即用，无需配置。除了通用手势外，还有针对文字、图片、视频的特殊手势。还嫌不够？支持添加属于你的个性化手势。推荐使用狐猴浏览器、Yandex浏览器和Kiwi浏览器。
// @description:en	Add touch gestures to your mobile browser, ready to use and no configuration required. In addition to general gestures, there are also special gestures for text, images, and videos. Do you still think it's not enough? Support adding personalized gestures that belong to you. We recommend using Lemur browser, Yandex browser, and Kiwi browser.
// @version		9.5.9
// @author		L.Xavier
// @namespace	https://greasyfork.org/zh-CN/users/128493
// @match		*://*/*
// @license		MIT
// @grant		window.close
// @grant		GM_setValue
// @grant		GM_getValue
// @grant		GM_openInTab
// @grant		GM_setClipboard
// @grant		GM_addValueChangeListener
// @run-at		document-start
// @downloadURL https://update.greasyfork.org/scripts/375806/%E6%89%8B%E6%9C%BA%E6%B5%8F%E8%A7%88%E5%99%A8%E8%A7%A6%E6%91%B8%E6%89%8B%E5%8A%BF.user.js
// @updateURL https://update.greasyfork.org/scripts/375806/%E6%89%8B%E6%9C%BA%E6%B5%8F%E8%A7%88%E5%99%A8%E8%A7%A6%E6%91%B8%E6%89%8B%E5%8A%BF.meta.js
// ==/UserScript==
// v9.5.9		2024-10-20 - 优化长按与持续滑动的识别
/*手势数据模块*/
let gesture={
	'↑→↓←':'打开设置',
	'◆◆':'视频全屏',
	'●':'手势穿透',
	'→←':'后退',
	'←→':'前进',
	'↓↑':'回到顶部',
	'↑↓':'回到底部',
	'←↓':'刷新页面',
	'←↑':'新建页面',
	'→↓':'关闭页面',
	'→↑':'恢复页面',
	'↓↑●':'新页面打开',
	'↑↓●':'隐藏元素',
	'↓→':'复制页面',
	'→←→':'半屏模式',
	'→↓↑←':'视频解析',
	'T→↑':'百度翻译',
	'T←↑':'有道翻译',
	'T◆◆':'双击搜索',
	'I↓↑●':'打开图片',
	'I→↑●':'百度搜图',
	'V→':'前进10s',
	'V←':'后退10s',
	'V↑':'增加倍速',
	'V↓':'减小倍速',
	'V→●':'快进播放',
	'V→○':'停止快进',
	'V←●':'快退播放',
	'V←○':'停止快退',
	'V↑●':'增加音量',
	'V↑○':'关闭增加音量',
	'V↓●':'减少音量',
	'V↓○':'关闭减少音量',
	'V→▼':'右滑进度',
	'V→▽':'关闭右滑进度',
	'V←▼':'左滑进度',
	'V←▽':'关闭左滑进度'
},
pathFn={
	'打开设置':'/*ONLY TOP*/openSet();',
	'视频全屏':'videoFullScreen();',
	'手势穿透':'if(/^[TIV]/.test(path)){path=(path.indexOf("I")>-1) ? "I" : "";}else{if(gestureData.touchEle.nodeName!=="IMG"){let imgs=[...document.querySelectorAll("[_imgShow_=\'1\']")];if(window._shadowList_){for(let Ti=0,len=window._shadowList_.length;Ti<len;++Ti){imgs.push(...window._shadowList_[Ti].querySelectorAll("[_imgShow_=\'1\']"));}}for(let Ti=0,len=imgs.length;Ti<len;++Ti){let imgRect=imgs[Ti].getBoundingClientRect();if(gestureData.touchStart.clientX>imgRect.x && gestureData.touchStart.clientX<(imgRect.x+imgRect.width) && gestureData.touchStart.clientY>imgRect.y && gestureData.touchStart.clientY<(imgRect.y+imgRect.height)){gestureData.touchEle=imgs[Ti];break;}}}if(gestureData.touchEle.nodeName==="IMG" && settings["图片手势"]){path="I";}else if(gestureData.touchEle.style.backgroundImage && settings["图片手势"]){gestureData.touchEle.src=gestureData.touchEle.style.backgroundImage.split(\'"\')[1];path="I";}}',
	'后退':'/*ONLY TOP*/function pageBack(){if(gestureData.backTimer){history.go(-1);setTimeout(pageBack,20);}}gestureData.backTimer=setTimeout(()=>{gestureData.backTimer=0;window.close();},200);pageBack();',
	'前进':'/*ONLY TOP*/history.go(1);',
	'回到顶部':'/*WITH TOP*/let boxNode=gestureData.touchEle.parentNode;while(boxNode.nodeName!=="#document"){boxNode.scrollIntoView(true);if(boxNode.scrollTop){boxNode.scrollTo(0,0);}boxNode=boxNode.parentNode;}',
	'回到底部':'/*WITH TOP*/let boxNode=gestureData.touchEle.parentNode;while(boxNode.nodeName!=="#document"){if(getComputedStyle(boxNode).overflowY!=="hidden"){boxNode.scrollTo(0,boxNode.scrollHeight+999999);}boxNode=boxNode.parentNode;}',
	'刷新页面':'/*ONLY TOP*/document.documentElement.style.cssText="filter:grayscale(100%)";history.go(0);',
	'新建页面':'/*ONLY TOP*/GM_openInTab("//limestart.cn");',
	'关闭页面':'/*ONLY TOP*/window.close();',
	'恢复页面':'/*ONLY TOP*/GM_openInTab("chrome-native://recent-tabs");',
	'新页面打开':'let linkNode=gestureData.touchEle;while(true){if(linkNode.href){GM_openInTab(linkNode.href);break;}linkNode=linkNode.parentNode;if(linkNode.nodeName==="BODY"){gestureData.touchEle.click();break;}}',
	'隐藏元素':'let boxNode=gestureData.touchEle,area=boxNode.offsetWidth*boxNode.offsetHeight,area_p=boxNode.parentNode.offsetWidth*boxNode.parentNode.offsetHeight,area_s=screen.width*screen.height;while(boxNode.parentNode.nodeName!=="BODY" && area/area_p>0.2 && area_p/area_s<0.9){boxNode=boxNode.parentNode;area_p=boxNode.parentNode.offsetWidth*boxNode.parentNode.offsetHeight;}if(boxNode.nodeName!=="HTML"){boxNode.remove();}',
	'复制页面':'/*ONLY TOP*/GM_openInTab(location.href);',
	'半屏模式':'/*ONLY TOP*/if(gestureData.halfScreen){setTimeout(()=>{gestureData.halfScreen.remove();halfClose.remove();gestureData.halfScreen=null;document.documentElement.scrollTop=gestureData.scrollTop;},500);gestureData.scrollTop=document.body.scrollTop;let halfClose=addStyle("html{transform:translateY(0) !important;}");}else{gestureData.scrollTop=document.documentElement.scrollTop;gestureData.halfScreen=addStyle("html,body{height:43vh !important;overflow-y:auto !important;}html{transform:translateY(50vh) !important;transition:0.5s !important;overflow:hidden !important;}");document.body.scrollTop=gestureData.scrollTop;}',
	'视频解析':'/*ONLY TOP*/GM_openInTab("https://jx.xmflv.com/?url="+location.href);',
	'百度翻译':'GM_openInTab("//fanyi.baidu.com/#auto/auto/"+encodeURIComponent(gestureData.selectWords));',
	'有道翻译':'GM_openInTab("//dict.youdao.com/w/eng/"+encodeURIComponent(gestureData.selectWords));',
	'双击搜索':'GM_setClipboard(gestureData.selectWords);if(!regURL.test(gestureData.selectWords.trim())){gestureData.selectWords="//bing.com/search?q="+encodeURIComponent(gestureData.selectWords);}else if(!/^(https?:)?\\/\\//.test(gestureData.selectWords.trim())){gestureData.selectWords="//"+gestureData.selectWords.trim();}GM_openInTab(gestureData.selectWords.trim());',
	'打开图片':'GM_openInTab(gestureData.touchEle.src);',
	'百度搜图':'GM_openInTab("//graph.baidu.com/details?isfromtusoupc=1&tn=pc&carousel=0&promotion_name=pc_image_shituindex&extUiData%5bisLogoShow%5d=1&image="+gestureData.touchEle.src);',
	'前进10s':'videoPlayer.currentTime+=10;gestureData.tipBox.textContent="+10s ";gestureData.tipBox.style.display="block";setTimeout(()=>{gestureData.tipBox.style.display="none";},500);',
	'后退10s':'videoPlayer.currentTime-=10;gestureData.tipBox.textContent="-10s ";gestureData.tipBox.style.display="block";setTimeout(()=>{gestureData.tipBox.style.display="none";},500);',
	'增加倍速':'if(document.fullscreen){let playSpeed=videoPlayer.playbackRate;playSpeed+=(playSpeed<1.5) ? 0.25 : 0.5;gestureData.tipBox.textContent="×"+playSpeed+" ∞ ";gestureData.tipBox.style.display="block";videoPlayer.playbackRate=playSpeed;setTimeout(()=>{gestureData.tipBox.style.display="none";},500)}',
	'减小倍速':'if(document.fullscreen){let playSpeed=videoPlayer.playbackRate;playSpeed-=(playSpeed>1.5) ? 0.5 : (playSpeed>0.25 && 0.25);gestureData.tipBox.textContent="×"+playSpeed+" ∞ ";gestureData.tipBox.style.display="block";videoPlayer.playbackRate=playSpeed;setTimeout(()=>{gestureData.tipBox.style.display="none";},500)}',
	'快进播放':'gestureData.playSpeed=videoPlayer.playbackRate;videoPlayer.playbackRate=10;gestureData.tipBox.textContent="×10 ";gestureData.tipBox.style.display="block";',
	'停止快进':'videoPlayer.playbackRate=gestureData.playSpeed;gestureData.tipBox.style.display="none";',
	'快退播放':'gestureData.videoTimer=setInterval(()=>{--videoPlayer.currentTime;},100);gestureData.tipBox.textContent="- ×10 ";gestureData.tipBox.style.display="block";',
	'停止快退':'clearInterval(gestureData.videoTimer);gestureData.tipBox.style.display="none";',
	'增加音量':'if(document.fullscreen){videoPlayer.muted=false;gestureData.tipBox.textContent=(videoPlayer.volume*100|0)+"%";gestureData.tipBox.style.display="block";let lastY=gestureData.touchEnd.screenY;gestureData.videoTimer=setInterval(()=>{if(lastY-gestureData.touchEnd.screenY){let tempVolume=videoPlayer.volume+(lastY-gestureData.touchEnd.screenY)/100;videoPlayer.volume=+(tempVolume>1) || (+(tempVolume>0) && tempVolume);gestureData.tipBox.textContent=(videoPlayer.volume*100|0)+"%";lastY=gestureData.touchEnd.screenY;}},50);}',
	'关闭增加音量':'clearInterval(gestureData.videoTimer);gestureData.tipBox.style.display="none";',
	'减少音量':'if(document.fullscreen){videoPlayer.muted=false;gestureData.tipBox.textContent=(videoPlayer.volume*100|0)+"%";gestureData.tipBox.style.display="block";let lastY=gestureData.touchEnd.screenY;gestureData.videoTimer=setInterval(()=>{if(lastY-gestureData.touchEnd.screenY){let tempVolume=videoPlayer.volume+(lastY-gestureData.touchEnd.screenY)/100;videoPlayer.volume=+(tempVolume>1) || (+(tempVolume>0) && tempVolume);gestureData.tipBox.textContent=(videoPlayer.volume*100|0)+"%";lastY=gestureData.touchEnd.screenY;}},50);}',
	'关闭减少音量':'clearInterval(gestureData.videoTimer);gestureData.tipBox.style.display="none";',
	'右滑进度':'let lastX=gestureData.touchEnd.screenX,hour,minu,sec;function showTip(){minu=videoPlayer.currentTime/60;sec=videoPlayer.currentTime%60;hour=minu/60;minu%=60;gestureData.tipBox.textContent=(hour|0)+":"+((minu<10) ? "0":"")+(minu|0)+":"+((sec<10) ? "0" : "")+(sec|0);}showTip();gestureData.tipBox.style.display="block";gestureData.videoTimer=setInterval(()=>{let len=gestureData.touchEnd.screenX-lastX;if(len){videoPlayer.currentTime+=len*(1+Math.abs(len)*videoPlayer.duration/10800|0);lastX=gestureData.touchEnd.screenX;}showTip();},50);',
	'关闭右滑进度':'clearInterval(gestureData.videoTimer);gestureData.tipBox.style.display="none";',
	'左滑进度':'let lastX=gestureData.touchEnd.screenX,hour,minu,sec;function showTip(){minu=videoPlayer.currentTime/60;sec=videoPlayer.currentTime%60;hour=minu/60;minu%=60;gestureData.tipBox.textContent=(hour|0)+":"+((minu<10) ? "0":"")+(minu|0)+":"+((sec<10) ? "0" : "")+(sec|0);}showTip();gestureData.tipBox.style.display="block";gestureData.videoTimer=setInterval(()=>{let len=gestureData.touchEnd.screenX-lastX;if(len){videoPlayer.currentTime+=len*(1+Math.abs(len)*videoPlayer.duration/10800|0);lastX=gestureData.touchEnd.screenX;}showTip();},50);',
	'关闭左滑进度':'clearInterval(gestureData.videoTimer);gestureData.tipBox.style.display="none";'
},
settings={
	'滑动系数':[0.2,0,0.5,2],//[当前值,最小值,最大值,取值精度]
	'文字手势':true,
	'图片手势':true,
	'视频手势':true,
	'视频下载':false,
	'避免断触':false
};
//存储数据读取
gesture=GM_getValue('gesture',gesture);
pathFn=GM_getValue('pathFn',pathFn);
settings=GM_getValue('settings',settings);
//脚本常量
const gestureData={},minSide=(screen.width>screen.height) ? screen.height : screen.width,limit=(minSide*settings['滑动系数'][0])**2,attachShadow=Element.prototype.attachShadow,regURL=/^((https?:)?\/\/)?([\w\-]+\.)+\w{2,4}(:\d{1,5})?(\/\S*)?$/,
	  mObserver=new MutationObserver(()=>{if(!checkTimer){checkTimer=setTimeout(loadCheck,200);}}),
	  iObserver=new IntersectionObserver((entries)=>{for(let Ti=0,len=entries.length;Ti<len;++Ti){if(entries[Ti].intersectionRatio){entries[Ti].target.setAttribute('_imgShow_','1');}else{entries[Ti].target.setAttribute('_imgShow_','0');}}});

/*手势功能模块*/
//手指功能变量
let path='',startPoint=null,timeSpan=0,pressTime=0,raiseTime=0,slideTime=0,slideClock=0,slideLimit=0,fingersNum=0,gestureTimer=0,clickTimer=0,isAllow=0,isClick=0,showMenu=0;
//手势执行
function runCode(code){
	try{eval(code);}catch(error){
		if((error+'').indexOf('unsafe-eval')>-1){
			if(!window._eval_){
				window._eval_=(()=>{
					let script=document.createElement('script');
					function thisParams(){
						this.settings=settings;
						this.window.close=window.close;
						this.window._shadowList_=window._shadowList_;
						this.GM_setValue=GM_setValue;
						this.GM_getValue=GM_getValue;
						this.GM_openInTab=GM_openInTab;
						this.GM_setClipboard=GM_setClipboard;
						this.runCode=runCode;
						this.runFrame=runFrame;
						this.runGesture=runGesture;
						this.videoFullScreen=videoFullScreen;
						this.findVideoBox=findVideoBox;
						this.addStyle=addStyle;
						this.openSet=openSet;
						this.gestureData=gestureData;
						this.regURL=regURL;
						this.path=path;
						this.videoPlayer=videoPlayer;
					}
					return (js)=>{
						thisParams();script.remove();
						script=document.createElement('script');
						script.textContent='try{'+js+'}catch(error){alert("“"+path+"” 手势执行脚本错误：\\n"+error+" ！");}';
						document.body.insertAdjacentElement('beforeend',script);
					}
				})();
				if(top===self){window._eval_('window.addEventListener("popstate",()=>{clearTimeout(gestureData.backTimer);gestureData.backTimer=0;},true);window.addEventListener("beforeunload",()=>{clearTimeout(gestureData.backTimer);gestureData.backTimer=0;},true);');}
			}
			window._eval_(code);
		}
		else{alert('“'+path+'” 手势执行脚本错误：\n'+error+' ！');}
	}
}
function runFrame(runPath){
	let code=pathFn[gesture[runPath]];
	if(top===self || /^[TIV]/.test(runPath)){runCode(code);}
	else{
		if(code.indexOf('/*ONLY TOP*/')<0){runCode(code);}
		if(/\/\*(ONLY|WITH) TOP\*\//.test(code)){
			if(/[●▼]$/.test(runPath)){window._isPushing_=()=>{let _gestureData={};_gestureData.touchEnd=copyTouch(gestureData.touchEnd);top.postMessage({'type':'pushTouch','gestureData':_gestureData},'*');}}
			let _gestureData={};
			_gestureData.touchStart=copyTouch(gestureData.touchStart);
			_gestureData.touchEnd=copyTouch(gestureData.touchEnd);
			top.postMessage({'type':'runPath','runPath':path,'gestureData':_gestureData},'*');
		}
	}
}
function runGesture(newPath){
	if(gesture[path]){
		runFrame(path);
		if(gesture[newPath]){path=newPath;}
	}else if(gesture[path.slice(1)] && /^[TIV]/.test(path)){
		runFrame(path.slice(1));
		if(gesture[newPath?.slice(1)]){path=newPath;}
	} raiseTime=0;
}
//长按执行
function longPress(){
	if(isAllow && !/[●○▽]$/.test(path)){
		isAllow=isClick=0;
		startPoint=gestureData.touchEnd;
		let newPath=path+'○';path+='●';
		runGesture(newPath);
	}
}
//持续滑动执行
function slidingRun(){
	slideClock=0;
	let newPath=path+'▽';path+='▼';
	runGesture(newPath);
	path=path.replace('▼','');
}
//手指按下
function touchStart(e){
	clearTimeout(gestureTimer);
	if((fingersNum=e.touches.length)>1){return;}
	pressTime=Date.now();timeSpan=pressTime-raiseTime;
	let lineLen=raiseTime && (e.changedTouches[0].screenX-gestureData.touchEnd.screenX)**2+(e.changedTouches[0].screenY-gestureData.touchEnd.screenY)**2;
	if(timeSpan>50 || lineLen>limit){//断触判断
		startPoint=e.changedTouches[0];
		if(timeSpan>200 || lineLen>limit){
			path='';slideLimit=limit;
			gestureData.touchEle=e.target;
			gestureData.touchEnd=gestureData.touchStart=startPoint;
			gestureData.selectWords=window.getSelection()+'';
			if(gestureData.selectWords && settings['文字手势']){path='T';}
			else if(document.contains(videoPlayer) && settings['视频手势']){
				let videoRect=findVideoBox().getBoundingClientRect();
				if(fullsState>0 && gestureData.touchStart.clientY<(videoRect.y+videoRect.height/8)){path='!';}
				else if(gestureData.touchStart.clientX>videoRect.x && gestureData.touchStart.clientX<(videoRect.x+videoRect.width) && gestureData.touchStart.clientY>videoRect.y && gestureData.touchStart.clientY<(videoRect.y+videoRect.height)){path='V';}
			}
		}else if(isClick){e.preventDefault();}
		slideTime=pressTime;isAllow=isClick=1;
	}else if(isClick){clearTimeout(clickTimer);path=path.slice(0,-1);}
	gestureTimer=setTimeout(longPress,300+slideTime-pressTime);
}
//手指滑动
function touchMove(e){
	clearTimeout(gestureTimer);
	gestureData.touchEnd=e.changedTouches ? e.changedTouches[0] : e;
	if(window._isPushing_){setTimeout(window._isPushing_);}
	if(/[○▽]$/.test(path) || fingersNum>1){return;}
	let xLen=(gestureData.touchEnd.screenX-startPoint.screenX)**2,yLen=(gestureData.touchEnd.screenY-startPoint.screenY)**2,
	direction=(xLen>yLen*1.42) ? ((gestureData.touchEnd.screenX>startPoint.screenX) ? '→' : '←') : ((gestureData.touchEnd.screenY>startPoint.screenY) ? '↓' : '↑'),
	nowTime=Date.now(),pathLen=xLen+yLen,lastIcon=path.slice(-1);
	if(pathLen>limit/576){
		slideTime=nowTime;isClick=0;
		if(lastIcon===direction || pathLen>slideLimit){
			if(lastIcon!==direction && (timeSpan<50 || 'TIV◆'.indexOf(lastIcon)>-1)){path+=direction;slideLimit*=(slideLimit<limit/2) || 0.64;slideClock=nowTime;isAllow=1;timeSpan=0;}
			startPoint=gestureData.touchEnd;
			if(slideClock && nowTime-slideClock>400){setTimeout(slidingRun);}
		}else if(pathLen>limit/100){slideClock=isAllow=0;}
	}
	gestureTimer=setTimeout(longPress,300+slideTime-nowTime);
}
//手指抬起
function touchEnd(e){
	clearTimeout(gestureTimer);
	if(--fingersNum>0){if(!/[○▽]$/.test(path)){path='!';}return;}
	if(window._isPushing_){window._isPushing_=null;}
	gestureData.touchEnd=e.changedTouches[0];
	raiseTime=Date.now();setTimeout(iframeLock);
	if(/[○▽]$/.test(path)){setTimeout(runGesture);return;}
	if(isClick){isAllow=1;showMenu=0;path+='◆';if(/^V◆◆$|^T/.test(path)){e.stopPropagation();e.preventDefault();window.getSelection().empty();}}
	if(isAllow){gestureTimer=setTimeout(runGesture,199);}
}
//延迟点击，避免断触触发点击
function delayClick(e){
	if(e.isTrusted){
		e.stopImmediatePropagation();e.stopPropagation();e.preventDefault();
		if(timeSpan<50){return;}
		let ev=new PointerEvent('click',{bubbles:true,cancelable:true,clientX:e.clientX,clientY:e.clientY,composed:true,detail:1,layerX:e.layerX,layerY:e.layerY,offsetX:e.offsetX,offsetY:e.offsetY,pageX:e.pageX,pageY:e.pageY,pointerId:e.pointerId,pointerType:e.pointerType,screenX:e.screenX,screenY:e.screenY,sourceCapabilities:e.sourceCapabilities,view:e.view,x:e.x,y:e.y});
		clickTimer=setTimeout(()=>{e.target.dispatchEvent(ev);},50);
	}
}

/*视频功能模块*/
//视频功能变量
let videoPlayer=null,oriLock=0,resizeTimer=0,fullsState=0;
//videoPlayer赋值
async function setVideo(player){
	let _videoPlayer=player.target || player;
	if(videoPlayer?.paused===false && _videoPlayer.muted===true){return;}
	videoPlayer=_videoPlayer;
	videoOriLock();
	videoPlayer.parentNode.insertAdjacentElement('beforeend',gestureData.tipBox);
	if(settings['视频下载']){
		await findVideoBox()?.insertAdjacentElement('beforeend',videoPlayer._downloadTip_);
		if(window._urlObjects_[videoPlayer.src]){
			videoPlayer._downloadTip_.textContent='正在捕获';
			videoPlayer._downloadTip_.buffers=window._urlObjects_[videoPlayer.src].sourceBuffers;
			window._urlObjects_[videoPlayer.src]._downloadTip_=videoPlayer._downloadTip_;
			delete window._urlObjects_[videoPlayer.src];
		}else if(videoPlayer._downloadTip_.textContent==='未加载'){
			if(!videoPlayer.src && videoPlayer.children.length){videoPlayer.src=videoPlayer.firstChild.src;}
			if(videoPlayer.src.indexOf('blob:') && videoPlayer.src){videoPlayer._downloadTip_.textContent='可下载';}
		}
	}
}
//video方向锁定
function videoOriLock(){
	if(!videoPlayer.videoWidth){if(!videoPlayer.error && document.contains(videoPlayer)){setTimeout(videoOriLock,100);}oriLock=0;return;}
	oriLock=+(videoPlayer.videoWidth>videoPlayer.videoHeight);
	if(fullsState>0 && oriLock){top.postMessage({'type':'GYRO'},'*');}
	else{screen.orientation.unlock();}
}
//video框架锁定
function iframeLock(){
	if(top!==self && !window._isShow_){GM_setValue('isShow',Date.now());}
}
//video全屏/退出全屏
async function videoFullScreen(){
	if(resizeTimer){return;}
	if(document.fullscreen){await document.exitFullscreen()?.catch(Date);}
	else if(videoPlayer){await findVideoBox()?.requestFullscreen()?.catch(Date);}
	else if(iframeEles.length){GM_setValue('fullscreen',Date.now());}
}
//获取video全屏样式容器
function findVideoBox(player=videoPlayer){
	if(!document.contains(player)){return null;}
	if(player._videoBox_?.contains(player) && (document.fullscreen || player._boxHeight_>=player._videoBox_.clientHeight)){return player._videoBox_;}
	player._videoBox_=player.parentNode;player.setAttribute('_videobox_','');
	let parentEle=player._videoBox_.parentNode,videoStyle=getComputedStyle(player),childStyle=getComputedStyle(player._videoBox_),childWidth=0,childHeight=0,_childWidth=0,_childHeight=0;
	if(player._videoBox_.offsetParent===parentEle){
		childWidth=Math.round(player.offsetWidth+(+videoStyle.marginLeft.slice(0,-2))+(+videoStyle.marginRight.slice(0,-2)));
		childHeight=Math.round(player.offsetHeight+(+videoStyle.marginTop.slice(0,-2))+(+videoStyle.marginBottom.slice(0,-2)));
		_childWidth=Math.round(player._videoBox_.offsetWidth+(+childStyle.marginLeft.slice(0,-2))+(+childStyle.marginRight.slice(0,-2)));
		_childHeight=Math.round(player._videoBox_.offsetHeight+(+childStyle.marginTop.slice(0,-2))+(+childStyle.marginBottom.slice(0,-2)));
	}else{
		childWidth=Math.round(player.offsetWidth+(+videoStyle.left.slice(0,-2) || 0)+(+videoStyle.marginLeft.slice(0,-2))+(+videoStyle.marginRight.slice(0,-2))+(+videoStyle.right.slice(0,-2) || 0));
		childHeight=Math.round(player.offsetHeight+(+videoStyle.top.slice(0,-2) || 0)+(+videoStyle.marginTop.slice(0,-2))+(+videoStyle.marginBottom.slice(0,-2))+(+videoStyle.bottom.slice(0,-2) || 0));
		_childWidth=Math.round(player._videoBox_.offsetWidth+(+childStyle.left.slice(0,-2) || 0)+(+childStyle.marginLeft.slice(0,-2))+(+childStyle.marginRight.slice(0,-2))+(+childStyle.right.slice(0,-2) || 0));
		_childHeight=Math.round(player._videoBox_.offsetHeight+(+childStyle.top.slice(0,-2) || 0)+(+childStyle.marginTop.slice(0,-2))+(+childStyle.marginBottom.slice(0,-2))+(+childStyle.bottom.slice(0,-2) || 0));
	}
	childWidth=(childWidth>_childWidth) ? childWidth : _childWidth;
	childHeight=(childHeight>_childHeight) ? childHeight : _childHeight;
	while(childWidth>=parentEle.clientWidth && parentEle.nodeName!=='BODY'){
		if(childHeight<parentEle.clientHeight){
			let isBreak=1;
			for(let childEle of parentEle.children){
				childStyle=getComputedStyle(childEle);
				childHeight=Math.round(childEle.offsetHeight+(+childStyle.top.slice(0,-2) || 0)+(+childStyle.marginTop.slice(0,-2))+(+childStyle.marginBottom.slice(0,-2))+(+childStyle.bottom.slice(0,-2) || 0));
				if(childHeight===parentEle.clientHeight && player._boxHeight_>=0.85*parentEle.clientHeight){isBreak=0;break;}
			}
			if(isBreak){break;}
		}
		if(parentEle.clientHeight){
			player._videoBox_.setAttribute('_videobox_','');
			player._videoBox_=parentEle;player._boxHeight_=childHeight;
			childStyle=getComputedStyle(parentEle);
			if(parentEle.offsetParent===parentEle.parentNode){
				_childWidth=Math.round(parentEle.offsetWidth+(+childStyle.marginLeft.slice(0,-2))+(+childStyle.marginRight.slice(0,-2)));
				_childHeight=Math.round(parentEle.offsetHeight+(+childStyle.marginTop.slice(0,-2))+(+childStyle.marginBottom.slice(0,-2)));
			}else{
				_childWidth=Math.round(parentEle.offsetWidth+(+childStyle.left.slice(0,-2) || 0)+(+childStyle.marginLeft.slice(0,-2))+(+childStyle.marginRight.slice(0,-2))+(+childStyle.right.slice(0,-2) || 0));
				_childHeight=Math.round(parentEle.offsetHeight+(+childStyle.top.slice(0,-2) || 0)+(+childStyle.marginTop.slice(0,-2))+(+childStyle.marginBottom.slice(0,-2))+(+childStyle.bottom.slice(0,-2) || 0));
			}
			childWidth=(childWidth>_childWidth) ? childWidth : _childWidth;
			childHeight=(childHeight>_childHeight) ? childHeight : _childHeight;
		}
		parentEle=parentEle.parentNode;
	}
	player._videoBox_.setAttribute('_videobox_','outer');
	return player._videoBox_;
}
//全屏检测事件
function regRESIZE(){
	let videoCss=addStyle(''),stopResize=()=>{resizeTimer=0;};
	window.addEventListener('resize',()=>{
		clearTimeout(resizeTimer);resizeTimer=setTimeout(stopResize,200);
		if(document.fullscreen && !fullsState){
			fullsState=document.fullscreenElement;
			if(fullsState.nodeName==='IFRAME'){fullsState=-1;return;}
			let srcFindVideo=fullsState.getElementsByTagName('video'),srcVideo=(fullsState.nodeName==='VIDEO') ? fullsState : srcFindVideo[0];
			if(!fullsState.hasAttribute('_videobox_') && (!srcVideo || srcFindVideo.length>1 || (srcVideo._videoBox_.offsetWidth*srcVideo._videoBox_.offsetHeight/fullsState.offsetWidth/fullsState.offsetHeight)<0.9)){fullsState=-1;videoCss.textContent='';return;}
			if(srcVideo!==videoPlayer){videoPlayer?.pause();setVideo(srcVideo);}
			fullsState=1;if(oriLock){top.postMessage({'type':'GYRO'},'*');}
			videoCss.textContent='*[_videobox_]{inset:0 !important;margin:0 !important;padding:0 !important;transform:none !important;}*[_videobox_=""]{width:100% !important;height:100% !important;max-width:100% !important;max-height:100% !important;}video{position:fixed !important;object-fit:contain !important;}';
		}else if(fullsState && !document.fullscreen){fullsState=0;videoCss.textContent='';}
	},true);
}

/*视频下载模块*/
if(settings['视频下载']){
	//原始方法存储
	const createObjectURL=URL.createObjectURL,addSourceBuffer=MediaSource.prototype.addSourceBuffer,appendBuffer=SourceBuffer.prototype.appendBuffer,endOfStream=MediaSource.prototype.endOfStream;
	//初始化视频下载
	window._initDownload_=(player)=>{
		player._downloadTip_=document.createElement('div');
		player._downloadTip_.style.cssText='position:absolute;right:0;top:20px;background:#3498db;border-radius:20px 0 0 20px;text-align:center;padding:20px;line-height:0px;color:#fff;min-width:60px;font-size:16px;font-family:system-ui;z-index:2147483647;';
		player._downloadTip_.target=player;
		player._downloadTip_.textContent='未加载';
		if(window._urlObjects_[player.src]){
			player._downloadTip_.textContent='正在捕获';
			player._downloadTip_.buffers=window._urlObjects_[player.src].sourceBuffers;
			window._urlObjects_[player.src]._downloadTip_=player._downloadTip_;
			delete window._urlObjects_[player.src];
		}else{
			if(!player.src && player.children.length){player.src=player.firstChild.src;}
			if(player.src.indexOf('blob:') && player.src){player._downloadTip_.textContent='可下载';}
		}
		player._downloadTip_.onclick=window._downloadVideo_;
		player._videoBox_.insertAdjacentElement('beforeend',player._downloadTip_);
	}
	//下载视频
	window._downloadVideo_=function(data){
		if(this.textContent==='未加载'){return;}
		if(data.target){data=this;data.src=this.target.src;}
		let buffers=data.buffers;
		if(top!==self){
			let _buffers=[];
			for(let Ti=0,len=buffers.length;Ti<len;++Ti){
				_buffers.push({'mime':buffers[Ti]._mime_,'bufferList':buffers[Ti]._bufferList_});
			}
			top.postMessage({'type':'download','buffers':_buffers,'src':data.src},'*');
			return;
		}
		let a=document.createElement('a');a.download=document.title;a.style.display='none';document.body.insertAdjacentElement('beforeend',a);
		if(data.src.indexOf('blob:') && data.src){a.href=data.src;a.click();}
		else if(buffers.length){
			for(let Ti=0,len=buffers.length;Ti<len;++Ti){
				a.href=URL.createObjectURL(new Blob(buffers[Ti]._bufferList_,{'type':buffers[Ti]._mime_}));
				a.click();
				URL.revokeObjectURL(a.href);
			}
		}
		a.remove();
	}
	//存储MediaSource
	window._urlObjects_={};
	URL.createObjectURL=(obj)=>{
		let url=createObjectURL(obj);
		if(obj.sourceBuffers){window._urlObjects_[url]=obj;}
		return url;
	}
	//添加捕获
	MediaSource.prototype.addSourceBuffer=function(mime){
		let sourceBuffer=addSourceBuffer.call(this,mime);
		sourceBuffer._bufferList_=[];
		sourceBuffer._mime_=mime;
		sourceBuffer._mediaSource_=this;
		return sourceBuffer;
	}
	//捕获片段
	SourceBuffer.prototype.appendBuffer=function(buffer){
		this._bufferList_.push(buffer);
		if(this._mime_.indexOf('video')>-1 && this._mediaSource_._downloadTip_){this._mediaSource_._downloadTip_.textContent='已捕获'+this._bufferList_.length+'个片段';}
		appendBuffer.call(this,buffer);
	}
	//捕获完成
	MediaSource.prototype.endOfStream=function(){
		if(this._downloadTip_){this._downloadTip_.textContent='可下载';}
		endOfStream.call(this);
	}
}

/*功能补充模块*/
//功能补充变量
let videoEles=[],imgEles=[],iframeEles=document.getElementsByTagName('iframe'),checkTimer=0;
//修改Trusted-Types策略
window.trustedTypes?.createPolicy('default',{createHTML:string=>string,createScript:string=>string,createScriptURL:string=>string});
//设置shadow-root (open)
Element.prototype.attachShadow=function(){
	if(!window._shadowList_){window._shadowList_=[];}
	let shadowRoot=attachShadow.call(this,arguments[0]);
	window._shadowList_.push(shadowRoot);
	mObserver.observe(shadowRoot,{childList:true,subtree:true});
	return shadowRoot;
}
//页面加载检测
async function loadCheck(){
	videoEles=[...document.querySelectorAll('video:not([_videoBox_])')];
	imgEles=[...document.querySelectorAll('img:not([_imgShow_])'),...document.querySelectorAll('[style*="url("]:not([_imgShow_])')];
	//检测shadow-root
	if(window._shadowList_){
		for(let Ti=0,len=window._shadowList_.length;Ti<len;++Ti){
			videoEles.push(...window._shadowList_[Ti].querySelectorAll('video:not([_videoBox_])'));
			await imgEles.push(...window._shadowList_[Ti].querySelectorAll('img:not([_imgShow_])'),...window._shadowList_[Ti].querySelectorAll('[style*="url("]:not([_imgShow_])'));
		}
	}
	//video播放事件绑定
	if(videoEles.length){
		if(!gestureData.tipBox){
			//启动全屏检测
			regRESIZE();
			if(top!==self){top.postMessage({'type':'forceFullScreen'},'*');}
			//tip操作提示
			gestureData.tipBox=document.createElement('div');
			gestureData.tipBox.style.cssText='min-width:80px;height:50px;padding:0 10px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:none;color:#1e87f0;font-size:22px;line-height:50px;text-align:center;background-color:rgba(0,0,0,0.6);border-radius:20px;font-family:system-ui;z-index:2147483647;';
		}
		for(let Ti=0,len=videoEles.length;Ti<len;++Ti){
			if(!videoEles[Ti]._videoBox_ && videoEles[Ti].offsetHeight){
				await findVideoBox(videoEles[Ti]);
				if(settings['视频下载']){await window._initDownload_(videoEles[Ti]);}
				if(!videoEles[Ti].paused){setVideo(videoEles[Ti]);}
				videoEles[Ti].addEventListener('playing',setVideo,true);
			}
		}
	}
	//图片可视事件绑定
	for(let Ti=0,len=imgEles.length;Ti<len;++Ti){
		imgEles[Ti].setAttribute('_imgShow_','0');
		iObserver.observe(imgEles[Ti]);
	}
	checkTimer=0;
}
//添加样式表
function addStyle(css){
	let style=document.createElement('style');
	style.textContent=css;
	document.head.insertAdjacentElement('beforeend',style);
	return style;
}
//复制坐标对象
function copyTouch(oldObj){
	let newObj={};
	for(let Ti in oldObj){
		if(Ti==='target'){continue;}
		newObj[Ti]=oldObj[Ti];
	}
	return newObj;
}
//手势功能设置UI
function openSet(){
	let gestureName='',gesturePath='',gestureBox=document.createElement('div'),pathEle=null,_clickTimer=0;
	//页面生成
	addStyle('*{overflow:hidden !important;}'+
				'#_gestureBox_{background-color:#fff;width:100%;height:100%;position:fixed;padding:0;margin:0;inset:0;overflow-y:auto !important;z-index:2147483647;}'+
				'#_gestureBox_ *{font-family:system-ui;margin:0;padding:0;text-align:center;font-size:5vmin;line-height:12vmin;user-select:none !important;transform:none;text-indent:0;}'+
				'#_gestureBox_ ::placeholder{color:#999;font-size:2.5vmin;line-height:6vmin;}'+
				'#_gestureBox_ h1{width:60%;height:12vmin;color:#0074d9;background-color:#dee6ef;margin:3vmin auto;border-radius:12vmin;box-shadow:0.9vmin 0.9vmin 3vmin #dfdfdf;}'+
				'#_gestureBox_ #_addGesture_{width:14vmin;height:14vmin;margin:3vmin auto;line-height:14vmin;background-color:#dee6ef;color:#032e58;font-size:7.5vmin;border-radius:15vmin;box-shadow:0.3vmin 0.3vmin 1.5vmin #dfdfdf;}'+
				'#_gestureBox_ ._gestureLi_{height:18vmin;width:100%;border-bottom:0.3vmin solid #dfdfdf;}'+
				'#_gestureBox_ ._gestureLi_ p{margin:3vmin 0 0 1%;width:38%;height:12vmin;border-left:1.8vmin solid;color:#ffb400;background-color:#fff1cf;float:left;white-space:nowrap;text-overflow:ellipsis;text-shadow:0.3vmin 0.3vmin 3vmin #ffcb56;}'+
				'#_gestureBox_ ._gestureLi_ ._gesturePath_{margin:3vmin 0 0 3%;float:left;width:38%;height:12vmin;background-color:#f3f3f3;color:#000;box-shadow:0.3vmin 0.3vmin 1.5vmin #ccc9c9;border-radius:3vmin;white-space:nowrap;text-overflow:ellipsis;}'+
				'#_gestureBox_ ._gestureLi_ ._delGesture_{margin:3vmin 2% 0 0;width:15vmin;height:12vmin;float:right;color:#f00;text-decoration:line-through;}'+
				'#_gestureBox_ #_revisePath_{background-color:rgba(0,0,0,0.7);width:100%;height:100%;position:fixed;inset:0;display:none;color:#000;}'+
				'#_gestureBox_ #_revisePath_ span{width:15vmin;height:15vmin;font-size:12.5vmin;line-height:15vmin;position:absolute;}'+
				'#_gestureBox_ #_revisePath_ div{color:#3339f9;position:absolute;width:30%;height:12vmin;font-size:10vmin;bottom:15%;}'+
				'#_gestureBox_ #_revisePath_ p{color:#3ba5d8;position:absolute;top:15%;font-size:10vmin;height:12vmin;width:100%;}'+
				'#_gestureBox_ #_revisePath_ #_path_{top:40%;color:#ffee03;height:100%;word-wrap:break-word;font-size:15vmin;line-height:18vmin;}'+
				'#_gestureBox_ #_editGesture_{overflow-y:auto !important;background-color:#fff;width:100%;height:100%;position:fixed;inset:0;display:none;color:#000;}'+
				'#_gestureBox_ #_editGesture_ p{color:#3339f9;font-size:7.5vmin;text-align:left;margin:6vmin 0 0 9vmin;width:100%;height:9vmin;line-height:9vmin;}'+
				'#_gestureBox_ #_editGesture_ #_gestureName_{margin-top:6vmin;width:80%;height:12vmin;color:#000;border:0.3vmin solid #dadada;border-radius:3vmin;text-align:left;padding:0 3vmin;}'+
				'#_gestureBox_ #_editGesture_ ._label_box_>label{display:inline-block;margin-top:6vmin;position:relative;}'+
				'#_gestureBox_ #_editGesture_ ._label_box_>label>input{position:absolute;top:0;left:-6vmin;}'+
				'#_gestureBox_ #_editGesture_ ._label_box_>label>div{width:20vw;border:#ddd solid 0.3vmin;height:12vmin;color:#666;position:relative;}'+
				'#_gestureBox_ #_editGesture_ ._label_box_>label>input:checked + div{border:#d51917 solid 0.3vmin;color:#d51917;}'+
				'#_gestureBox_ #_editGesture_ ._label_box_>label>input + div:after{top:auto;left:auto;bottom:-3vmin;right:0;transition:none;}'+
				'#_gestureBox_ #_editGesture_ ._label_box_>label>input:checked + div:after{content:"";display:block;border:none;width:6vmin;height:6vmin;background-color:#d51917;transform:skewY(-45deg);position:absolute;}'+
				'#_gestureBox_ #_editGesture_ ._label_box_>label>input:checked + div:before{content:"";display:block;width:0.9vmin;height:2.4vmin;border-right:#fff solid 0.6vmin;border-bottom:#fff solid 0.6vmin;transform:rotate(35deg);position:absolute;bottom:0.6vmin;right:1.2vmin;z-index:1;}'+
				'#_gestureBox_ #_editGesture_ #_pathFn_{overflow-y:auto !important;width:80%;margin-top:6vmin;height:40%;text-align:left;line-height:6vmin;padding:3vmin;border:0.3vmin solid #dadada;border-radius:3vmin;}'+
				'#_gestureBox_ #_editGesture_ button{width:30vmin;height:15vmin;font-size:7.5vmin;line-height:15vmin;display:inline-block;color:#fff;background-color:#2866bd;margin:6vmin 3vmin 0 3vmin;border:none;}'+
				'#_gestureBox_ #_settingsBox_{overflow-y:auto !important;background-color:#fff;width:100%;height:100%;position:fixed;inset:0;display:none;color:#000;}'+
				'#_gestureBox_ #_settingsBox_ p{color:#3339f9;text-align:left;margin:9vmin 0 0 9vmin;float:left;height:6vmin;line-height:6vmin;clear:both;}'+
				'#_gestureBox_ #_settingsBox_ ._slideRail_{overflow:initial !important;width:55%;background-color:#a8a8a8;float:left;margin:12vmin 0 0 3vmin;height:0.6vmin;position:relative;}'+
				'#_gestureBox_ #_settingsBox_ ._slideRail_ ._slideButton_{line-height:9vmin;color:#fff;background-color:#2196f3;min-width:9vmin;height:9vmin;border-radius:9vmin;font-size:4vmin;position:absolute;top:-4.5vmin;box-shadow:0.3vmin 0.3vmin 1.8vmin #5e8aee;padding:0 1vmin;}'+
				'#_gestureBox_ #_settingsBox_ ._switch_{position:relative;display:inline-block;width:18vmin;height:9vmin;float:left;margin:7.5vmin 42% 0 3vmin;}'+
				'#_gestureBox_ #_settingsBox_ ._switch_ input{display:none;}'+
				'#_gestureBox_ #_settingsBox_ ._slider_{border-radius:9vmin;position:absolute;cursor:pointer;inset:0;background-color:#ccc;transition:0.4s;}'+
				'#_gestureBox_ #_settingsBox_ ._slider_:before{border-radius:50%;position:absolute;content:"";height:7.5vmin;width:7.5vmin;left:0.6vmin;bottom:0.6vmin;background-color:white;transition:0.4s;}'+
				'#_gestureBox_ #_settingsBox_ input:checked + ._slider_{background-color:#2196F3;}'+
				'#_gestureBox_ #_settingsBox_ input:checked + ._slider_:before{transform:translateX(9vmin);}'+
				'#_gestureBox_ #_settingsBox_ #_saveSettings_{display:block;clear:both;width:30vmin;height:15vmin;font-size:7.5vmin;line-height:15vmin;color:#fff;background-color:#2866bd;border:none;margin:12vmin 0 0 calc(50% - 15vmin);float:left;}');
	gestureBox.id='_gestureBox_';
	document.body.insertAdjacentElement('beforeend',gestureBox);
	gestureBox.innerHTML='<h1 id="_openSettings_">手势轨迹设置</h1><div id="_addGesture_">+</div><div id="_gestureUL_"></div>'+
					'<div id="_revisePath_"><span style="top:0;left:0;text-align:left;">┌</span><span style="top:0;right:0;text-align:right;">┐</span><span style="bottom:0;left:0;text-align:left;">└</span><span style="bottom:0;right:0;text-align:right;">┘</span>'+
					'<p>请滑动手指</p><p id="_path_"></p><div id="_clearPath_" style="left:10%;">清除</div><div id="_cancleRevise_" style="right:10%;">保存</div></div>'+
					'<div id="_editGesture_"><p>手势名称：</p><input type="text" id="_gestureName_" maxlength="12" placeholder="最大输入12个字符">'+
					'<p>手势类型：</p><div class="_label_box_"><label><input type="radio" id="_G_" name="_gestureType_" value=""><div>一般</div></label><label><input type="radio" id="_T_" name="_gestureType_" value="T"><div>文字</div></label><label><input type="radio" id="_I_" name="_gestureType_" value="I"><div>图片</div></label><label><input type="radio" id="_V_" name="_gestureType_" value="V"><div>视频</div></label></div>'+
					'<p>手势执行脚本：</p><textarea id="_pathFn_" placeholder="可用变量说明↓\n 	gestureData：手势数据常量,如果你需要在不同手势间传递变量,你可以赋值gestureData.变量名=变量值；\n	gestureData.touchEle：手指触摸的源元素；\n	gestureData.selectWords：选中的文字；\n	gestureData.touchStart：触摸开始坐标对象；\n	gestureData.touchEnd：触摸最新坐标对象；\n	path：滑动的路径；\n	videoPlayer：正在播放的视频元素。'+
					'\n\n可用方法说明↓\n	addStyle(CSS样式)：将CSS样式添加到网页上；\n	runGesture()：以path为路径执行手势,你可以修改path后执行此方法；\n	GM_openInTab(链接)：打开链接；\n	GM_setClipboard(文本)：复制文本到剪切板；\n	GM_setValue(变量名,变量值)：在油猴中存储数据；\n	GM_getValue(变量名,默认值)：从油猴中取出数据,没有则使用默认值。'+
					'\n\n可识别代码注释说明(仅对一般手势生效)↓\n	默认情况：存在iframe时，所有手势只会在触发手势的页面对象执行！\n 	添加/*ONLY TOP*/：手势只在顶级页面对象执行；\n	添加/*WITH TOP*/：手势同时在当前页面对象和顶级页面对象执行。"></textarea>'+
					'<div style="width:100%;height:0.3vmin;"></div><button id="_saveGesture_">保存</button><button id="_closeEdit_">关闭</button></div>'+
					'<div id="_settingsBox_"><h1>功能开关设置</h1><span id="_settingList_"></span><button id="_saveSettings_">保存</button></div>';
	pathEle=document.getElementById('_path_');

	//编辑手势
	function editGesture(){
		gestureName=this.parentNode.getAttribute('name');
		if(['打开设置','视频全屏','手势穿透'].indexOf(gestureName)>-1){alert('该手势脚本无法修改！');return;}
		gesturePath=this.parentNode.getAttribute('path');
		let selectType=(/^[TIV]/.test(gesturePath)) ? '_'+gesturePath.slice(0,1)+'_' : '_G_';
		document.getElementById(selectType).click();
		document.getElementById('_gestureName_').value=gestureName;
		document.getElementById('_pathFn_').value=pathFn[gestureName];
		document.getElementById('_editGesture_').style.display='block';
	}
	//修改路径
	function revisePath(){
		gestureName=this.parentNode.getAttribute('name');
		gesturePath=this.parentNode.getAttribute('path');
		pathEle.textContent='';
		window.removeEventListener('touchmove',touchMove,true);
		document.getElementById('_revisePath_').style.display='block';
	}
	//删除手势
	function delGesture(){
		gestureName=this.parentNode.getAttribute('name');
		if(['打开设置','视频全屏','手势穿透'].indexOf(gestureName)>-1){alert('该手势无法删除！');return;}
		if(!confirm('确定删除"'+gestureName+'"手势')){return;}
		gesturePath=this.parentNode.getAttribute('path');
		delete pathFn[gestureName];
		delete gesture[gesturePath];
		GM_setValue('pathFn',pathFn);
		GM_setValue('gesture',gesture);
		init();
	}
	//滑动条
	function silideBar(e){
		e.preventDefault();fingersNum=2;
		let diffX=e.changedTouches[0].clientX-gestureData.touchStart.clientX,
		leftPX=(+this.style.left.slice(0,-2))+diffX,vmin=this.offsetWidth/2,setArr=settings[this.id];
		leftPX=(leftPX<-vmin) ? -vmin : ((leftPX>(diffX=this.parentNode.offsetWidth-vmin)) ? diffX : leftPX);
		this.style.left=leftPX+'px';
		this.textContent=((leftPX+vmin)/this.parentNode.offsetWidth*(setArr[2]-setArr[1])+setArr[1]).toFixed(setArr[3]);
		gestureData.touchStart=e.changedTouches[0];
	}
	//长按执行
	function _longPress(){if(isClick || !/^$|[●○▼▽]$/.test(pathEle.textContent)){isClick=0;startPoint=gestureData.touchEnd;pathEle.textContent+='●';}}
	//持续滑动执行
	function _slidingRun(){slideClock=0;pathEle.textContent+='▼';}
	//点击执行
	function _clickRun(){if(!/[○▼▽]$/.test(pathEle.textContent)){pathEle.textContent+='◆';}}
	//界面初始化
	function init(){
		document.getElementById('_gestureUL_').textContent='';
		for(gestureName in pathFn){
			gesturePath='';
			for(let Ti in gesture){
				if(gesture[Ti]===gestureName){gesturePath=Ti;break;}
			}
			document.getElementById('_gestureUL_').innerHTML+='<div class="_gestureLi_" name="'+gestureName+'" path="'+gesturePath+'"><p>'+gestureName+'</p><div class="_gesturePath_">'+gesturePath+'</div><div class="_delGesture_">删除</div></div>';
		}
		//操作绑定
		let gestureEle=document.querySelectorAll('#_gestureBox_ ._gestureLi_ p');
		for(let Ti=0,len=gestureEle.length;Ti<len;++Ti){
			gestureEle[Ti].addEventListener('click',editGesture,true);
		}
		gestureEle=document.querySelectorAll('#_gestureBox_ ._gestureLi_ ._gesturePath_');
		for(let Ti=0,len=gestureEle.length;Ti<len;++Ti){
			gestureEle[Ti].addEventListener('click',revisePath,true);
		}
		gestureEle=document.querySelectorAll('#_gestureBox_ ._gestureLi_ ._delGesture_');
		for(let Ti=0,len=gestureEle.length;Ti<len;++Ti){
			gestureEle[Ti].addEventListener('click',delGesture,true);
		}
	}
	init();

	//.新建手势
	document.getElementById('_addGesture_').addEventListener('click',()=>{
		gestureName=gesturePath='';
		document.getElementById('_G_').click();
		document.getElementById('_gestureName_').value='';
		document.getElementById('_pathFn_').value='';
		document.getElementById('_editGesture_').style.display='block';
	},true);
	//保存手势
	document.getElementById('_saveGesture_').addEventListener('click',()=>{
		if(!document.getElementById('_gestureName_').value){alert('请输入手势名称！');return;}
		if(pathFn[document.getElementById('_gestureName_').value] && gestureName!==document.getElementById('_gestureName_').value){alert('该手势名称已被占用！');return;}
		delete pathFn[gestureName];
		delete gesture[gesturePath];
		let typeEle=document.getElementsByName('_gestureType_');
		for(let Ti=0,len=typeEle.length;Ti<len;++Ti){
			if(typeEle[Ti].checked){
				gesturePath=typeEle[Ti].value+((gestureName && gesturePath.indexOf('[')<0) ? ((/^[TIV]/.test(gesturePath)) ? gesturePath.slice(1) : gesturePath) : ('['+document.getElementById('_gestureName_').value+']'));
				break;
			}
		}
		gesture[gesturePath]=document.getElementById('_gestureName_').value;
		pathFn[document.getElementById('_gestureName_').value]=document.getElementById('_pathFn_').value;
		GM_setValue('pathFn',pathFn);
		GM_setValue('gesture',gesture);
		init();
		document.getElementById('_editGesture_').style.display='none';
	},true);
	//关闭编辑
	document.getElementById('_closeEdit_').addEventListener('click',()=>{
		document.getElementById('_editGesture_').style.display='none';
	},true);
	//路径修改事件
	document.getElementById('_revisePath_').addEventListener('touchstart',()=>{
		if(fingersNum>1){return;}
		clearTimeout(gestureTimer);clearTimeout(_clickTimer);
		gestureTimer=setTimeout(_longPress,300+slideTime-pressTime);
	},true);
	document.getElementById('_revisePath_').addEventListener('touchmove',(e)=>{
		e.preventDefault();clearTimeout(gestureTimer);
		gestureData.touchEnd=e.changedTouches[0];
		if(/[○▼▽]$/.test(pathEle.textContent) || fingersNum>1){return;}
		let xLen=(gestureData.touchEnd.screenX-startPoint.screenX)**2,yLen=(gestureData.touchEnd.screenY-startPoint.screenY)**2,
		direction=(xLen>yLen) ? ((gestureData.touchEnd.screenX>startPoint.screenX) ? '→' : '←') : ((gestureData.touchEnd.screenY>startPoint.screenY) ? '↓' : '↑'),
		nowTime=Date.now(),pathLen=xLen+yLen,lastIcon=pathEle.textContent.slice(-1);
		if(pathLen>limit/576){
			slideTime=nowTime;isClick=0;
			if(lastIcon===direction || pathLen>limit){
				if(lastIcon!==direction){pathEle.textContent+=direction;slideClock=nowTime;}
				startPoint=gestureData.touchEnd;
				if(slideClock && nowTime-slideClock>400){_slidingRun();}
			}else if(pathLen>limit/100){slideClock=0;}
		}
		gestureTimer=setTimeout(_longPress,300+slideTime-nowTime);
	},true);
	document.getElementById('_revisePath_').addEventListener('touchend',(e)=>{
		if(!isClick || fingersNum>0){return;}
		if(path.indexOf('◆◆')>-1){path='';
			switch(pathEle.textContent.slice(-1)){
				case '●':{pathEle.textContent=pathEle.textContent.slice(0,-1)+'○';break;}
				case '○':{pathEle.textContent=pathEle.textContent.slice(0,-1)+'●';break;}
				case '▼':{pathEle.textContent=pathEle.textContent.slice(0,-1)+'▽';break;}
				case '▽':{pathEle.textContent=pathEle.textContent.slice(0,-1)+'▼';break;}
				default:{pathEle.textContent+='◆';setTimeout(_clickRun,100);break;}
			}
		}else{_clickTimer=setTimeout(_clickRun,200);}
	});
	//清除路径
	document.getElementById('_clearPath_').addEventListener('touchend',(e)=>{
		e.stopPropagation();
		if(!isClick || fingersNum>0){return;}
		if(path.indexOf('◆◆')>-1){path='';pathEle.textContent='';}
		else{pathEle.textContent=pathEle.textContent.slice(0,-1);}
	});
	//保存修改路径
	document.getElementById('_cancleRevise_').addEventListener('touchend',(e)=>{
		e.stopPropagation();e.preventDefault();
		if(!isClick || fingersNum>0){return;}
		if(pathEle.textContent){
			if(gestureName==='视频全屏' && pathEle.textContent.slice(-1)!=='◆'){alert('视频全屏需要以◆结尾！');return;}
			if(gesture[pathEle.textContent]==='手势穿透'){alert('路径与"手势穿透"功能冲突！');return;}
			if(/^[TIV]/.test(gesturePath)){pathEle.textContent=gesturePath.slice(0,1)+pathEle.textContent;}
			delete gesture[gesturePath];
			if(gesture[pathEle.textContent]){
				let pathTXT=((/^[TIV]/.test(gesturePath)) ? gesturePath.slice(0,1) : '')+'['+gesture[pathEle.textContent]+']';
				gesture[pathTXT]=gesture[pathEle.textContent];
			}
			gesture[pathEle.textContent]=gestureName;
			GM_setValue('gesture',gesture);
			init();
		}
		window.addEventListener('touchmove',touchMove,{capture:true,passive:true});
		document.getElementById('_revisePath_').style.display='none';
	});
	//打开功能开关设置
	document.getElementById('_openSettings_').addEventListener('click',()=>{
		gestureBox.style.cssText='overflow-y:hidden !important';
		document.getElementById('_settingsBox_').style.display='block';
		let settingList=document.getElementById('_settingList_');
		settingList.textContent='';
		for(let Ti in settings){
			settingList.innerHTML+='<p>'+Ti+'：</p>';
			if(typeof(settings[Ti])==='boolean'){
				settingList.innerHTML+='<label class="_switch_"><input type="checkbox" id="'+Ti+'" '+((settings[Ti]) ? 'checked' : '')+'><div class="_slider_"></div></label>';
			}else if(typeof(settings[Ti])==='object'){
				settingList.innerHTML+='<div class="_slideRail_"><div class="_slideButton_" id="'+Ti+'"></div></div>';
				let slideButton=document.getElementById(Ti),
				leftPX=slideButton.parentNode.offsetWidth*(settings[Ti][0]-settings[Ti][1])/(settings[Ti][2]-settings[Ti][1])-slideButton.offsetWidth/2;
				slideButton.style.left=leftPX+'px';
				slideButton.textContent=settings[Ti][0].toFixed(settings[Ti][3]);
			}
		}
		let slideList=document.getElementsByClassName('_slideButton_');
		for(let Ti=0,len=slideList.length;Ti<len;++Ti){
			slideList[Ti].addEventListener('touchmove',silideBar,true);
		}
	},true);
	//保存功能开关设置
	document.getElementById('_saveSettings_').addEventListener('click',()=>{
		gestureBox.style.cssText='';
		for(let Ti in settings){
			if(typeof(settings[Ti])==='boolean'){
				settings[Ti]=document.getElementById(Ti).checked;
			}else if(typeof(settings[Ti])==='object'){
				settings[Ti][0]=+document.getElementById(Ti).textContent;
			}
		}
		GM_setValue('settings',settings);
		document.getElementById('_settingsBox_').style.display='none';
	},true);
}

/*事件注册模块*/
(function(){
	if(top===self){
		//清除后退定时器
		window.addEventListener('popstate',()=>{clearTimeout(gestureData.backTimer);gestureData.backTimer=0;},true);
		window.addEventListener('beforeunload',()=>{clearTimeout(gestureData.backTimer);gestureData.backTimer=0;},true);
		//接收iframe数据
		window.addEventListener('message',async (e)=>{
			let data=e.data;
			switch(data.type){
				case 'GYRO':{//锁定横屏模式
					await screen.orientation.lock('landscape')?.catch(Date);
				break;}
				case 'forceFullScreen':{//iframe强制可全屏
					for(let Ti=0,len=iframeEles.length;Ti<len;++Ti){
						if(iframeEles[Ti].contentWindow===e.source){
							if(!iframeEles[Ti].allowFullscreen){
								iframeEles[Ti].allowFullscreen=true;
								if(iframeEles[Ti].getAttribute('src') && regURL.test(iframeEles[Ti].src)){
									iframeEles[Ti].src=iframeEles[Ti].src;
								}
							}
							break;
						}
					}
				break;}
				case 'runPath':{//iframe手势在顶级页面执行
					for(let Ti=0,len=iframeEles.length;Ti<len;++Ti){
						if(iframeEles[Ti].contentWindow===e.source){
							let ifrRect=iframeEles[Ti].getBoundingClientRect();
							gestureData.touchStart=data.gestureData.touchStart;gestureData.touchEnd=data.gestureData.touchEnd;
							gestureData.touchStart.target=gestureData.touchEnd.target=gestureData.touchEle=iframeEles[Ti];
							gestureData.touchStart.pageX=gestureData.touchStart.clientX+=ifrRect.x;
							gestureData.touchStart.pageY=gestureData.touchStart.clientY+=ifrRect.y;
							gestureData.touchEnd.pageX=gestureData.touchEnd.clientX+=ifrRect.x;
							gestureData.touchEnd.pageY=gestureData.touchEnd.clientY+=ifrRect.y;
							break;
						}
					}
					path=data.runPath;setTimeout(runGesture);
				break;}
				case 'pushTouch':{//iframe手势坐标传递
					let ifrRect=gestureData.touchEle.getBoundingClientRect();
					gestureData.touchEnd=data.gestureData.touchEnd;
					gestureData.touchEnd.target=gestureData.touchEle;
					gestureData.touchEnd.pageX=gestureData.touchEnd.clientX+=ifrRect.x;
					gestureData.touchEnd.pageY=gestureData.touchEnd.clientY+=ifrRect.y;
				break;}
				case 'download':{//iframe视频下载
					window._downloadVideo_(data);
				break;}
			}
		},true);
	}else{
		//iframe视频全屏
		GM_addValueChangeListener('fullscreen',async (name,old_value,new_value,remote)=>{
			if(!document.hidden && window._isShow_){
				await findVideoBox()?.requestFullscreen()?.catch(Date);
			}
		});
		//iframe锁定
		GM_addValueChangeListener('isShow',(name,old_value,new_value,remote)=>{
			if(!document.hidden){window._isShow_=!remote;}
		});
	}
	//加载检测
	checkTimer=setTimeout(loadCheck,200);
	mObserver.observe(document,{childList:true,subtree:true});
	//this.path传递
	Object.defineProperty(this,'path',{
		set:function(newPath){path=newPath;}
	});
	//手势事件注册
	window.addEventListener('touchstart',touchStart,{capture:true,passive:false});
	window.addEventListener('touchmove',touchMove,{capture:true,passive:true});
	window.addEventListener('pointermove',touchMove,{capture:true,passive:true});
	window.addEventListener('touchend',touchEnd,{capture:true,passive:false});
	window.addEventListener('touchcancel',touchEnd,{capture:true,passive:false});
	window.addEventListener('contextmenu',(e)=>{if(path.indexOf("I")>-1 && gestureData.touchEle.src!==location.href){e.preventDefault();return;}showMenu=1;},true);//长按图片时禁止弹出菜单
	if(settings['避免断触']){window.addEventListener('click',delayClick,true);}
	//禁止网页检测焦点
	window.addEventListener('visibilitychange',(e)=>{e.stopImmediatePropagation();//禁止页面切换检测
		if(document.hidden){//视频后台播放
			let playState=videoPlayer?.paused,playTime=videoPlayer?.currentTime+0.2,playSpeed=videoPlayer?.playbackRate,playVolume=videoPlayer?.volume;
			setTimeout(()=>{if(playState!==videoPlayer?.paused){
				videoPlayer.load();videoPlayer.currentTime=playTime;
				videoPlayer.onloadstart=()=>{videoPlayer.play();videoPlayer.playbackRate=playSpeed;videoPlayer.volume=playVolume;}
			}});
		}
	},true);
	window.addEventListener('pagehide',(e)=>{e.stopImmediatePropagation();},true);
	window.addEventListener('blur',(e)=>{e.stopImmediatePropagation();});
	//禁止写入剪切板+禁止修改复制内容
	window.addEventListener('copy',(e)=>{
		if(gestureData.selectWords){return;}
		e.stopImmediatePropagation();e.stopPropagation();//禁止修改复制内容
		if(showMenu){return;}
		e.preventDefault();//禁止写入剪切板
	},true);
	//解除选中限制
	addStyle('*{user-select:auto !important;touch-action:manipulation;overscroll-behavior-x:none;}');
	window.addEventListener('selectstart',(e)=>{e.stopImmediatePropagation();},true);
})();
// ==UserScript==
// @name        自动展开全文阅读更多
// @version     1.152.3
// @author      baster
// @description 自动展开网站全文内容而无需点击，去掉一些烦人广告，去掉需要打开app的提示，站外链直达(支持鼠标左右键和拖拽打开)，避免网址重定向浪费时间，支持免登陆复制文字，兼容手机和电脑端。 -- 【目前已支持上百个网站】
// @supportURL  https://greasyfork.org/zh-CN/users/306433
// @homepageURL https://greasyfork.org/zh-CN/users/306433
// @namespace   https://greasyfork.org/zh-CN/users/306433
// @icon        https://img.icons8.com/stickers/100/000000/double-down.png
// @match       *://theqoo.net/*
// @match       *://m.36kr.com/*
// @match       *://ext.baidu.com/api/comment/*
// @match       *://www.xz577.com/*
// @match       *://*.huanqiu.com/*
// @match       *://iknow.lenovo.com.cn/*
// @match       *://g.pconline.com.cn/*
// @match       *://www.it1352.com/*
// @match       *://www.jianshu.com/p/*
// @match       *://*.csdn.net/*
// @match       *://jingyan.baidu.com/article/*
// @match       *://baijiahao.baidu.com/s*
// @match       *://haokan.baidu.com/v*
// @match       *://zhidao.baidu.com/question/*
// @match       *://m.21jingji.com/article/*
// @match       *://www.bjtzdbzz.com/*
// @match       *://chejiahao.m.autohome.com.cn/info/*
// @match       *://www.bandbbs.cn/threads/*
// @match       *://*.elecfans.com/*
// @match       *://yiidian.com/*
// @match       *://*.yiidian.com/*
// @match       *://m.jb51.cc/*
// @match       *://www.jb51.cc/*
// @match       *://baike.baidu.com/item/*
// @match       *://wap.peopleapp.com/article/*
// @match       *://blog.51cto.com/*
// @match       *://xuedingmiao.com/*
// @match       *://xw.qq.com/*
// @match       *://mbd.baidu.com/newspage/*
// @match       *://ailegal.baidu.com/*
// @match       *://www.cnbeta.com/articles/*
// @match       *://www.zhihu.com/question/*
// @match       *://zhuanlan.zhihu.com/p/*
// @match       *://*.imooc.com/*
// @match       *://*.py.cn/code/*
// @match       *://*.sina.com.cn/*
// @match       *://juejin.cn/post/*
// @match       *://www.oschina.net/*
// @match       *://iswbm.com/*
// @match       *://m.so.com/s?q=*
// @match       *://wap.sogou.com/web/*
// @match       *://*.douban.com/*
// @match       *://www.wxnmh.com/*
// @match       *://www.chinaz.com/*
// @match       *://gitee.com/*
// @match       *://www.tianyancha.com/*
// @match       *://www.shaduizi.com/*
// @match       *://show.bookmarkearth.com/view/*
// @match       *://www.423down.com/*
// @match       *://www.itdaan.com/*
// @match       *://www.iteye.com/blog/*
// @match       *://www.360doc.com/*
// @match       *://www.360doc.cn/*
// @match       *://developer.aliyun.com/*
// @match       *://cloud.tencent.com/*
// @match       *://mail.qq.com/*
// @match       *://tieba.baidu.com/*
// @match       *://www.tieba.com/*
// @match       *://*.ifeng.com/*
// @match       *://*.ximalaya.com/*
// @match       *://www.sanzhima.com/*
// @match       *://m.meishichina.com/*
// @match       *://www.logonews.cn/*
// @match       *://segmentfault.com/*
// @match       *://ld246.com/*
// @match       *://*.bilibili.com/*
// @match       *://*.toutiao.com/*
// @match       *://www.itbaoku.cn/*
// @match       *://support.qq.com/*
// @match       *://m.downxia.com/*
// @match       *://*.sohu.com/*
// @match       *://m.weibo.cn/u/*
// @match       *://card.weibo.com/*
// @match       *://www.yunqishi.net/*
// @match       *://stackoom.com/*
// @match       *://www.codeprj.com/*
// @match       *://m.yezicc.com/*
// @match       *://*.ali213.net/*
// @match       *://itpcb.com/*
// @match       *://*.vovososo.com/*
// @match       *://www.lishixinzhi.com/*
// @match       *://www.anquanke.com/*
// @match       *://m.hexun.com/*
// @match       *://www.javascriptcn.com/*
// @match       *://*.zol.com.cn/*
// @match       *://www.5axxw.com/*
// @match       *://3g.163.com/*
// @match       *://*.js-code.com/*
// @match       *://*wenda.so.com/*
// @match       *://*.dxy.cn/*
// @match       *://*heidong.com/*
// @match       *://www.tofacebook.com/*
// @match       *://www.ngui.cc/*
// @match       *://ddrv.cn/*
// @match       *://www.qcc.com/*
// @match       *://*.cnr.cn/*
// @match       *://*tinymind.net.cn/*
// @match       *://view.inews.qq.com/*
// @match       *://*gamersky.com/*
// @match       *://*.bugscaner.com/*
// @match       *://*.dgrt.cn/*
// @match       *://devnote.pro/*
// @match       *://betheme.net/*
// @match       *://*.rstk.cn/*
// @match       *://*.taodudu.cc/*
// @match       *://weibo.com/ttarticle/p/show*
// @match       *://weibo.com/cmbchina*
// @match       *://weibo.com/u/*
// @match       *://www.ctfiot.com/*
// @match       *://www.takefoto.cn/*
// @match       *://www.autohotkey.com/*
// @match       *://www.95pm.com/*
// @match       *://*.betheme.net/*
// @match       *://*.zoukankan.com/*
// @match       *://*.hexun.com/*
// @match       *://*.xjx100.cn/*
// @match       *://*.yii666.com/*
// @match       *://*.pianshen.com/*
// @match       *://*.knowbaike.com/*
// @match       *://pythonjishu.com/*
// @match       *://m.freebuf.com/*
// @match       *://www.nuomiphp.com/*
// @match       *://dhexx.cn/*
// @match       *://*.exyb.cn/*
// @match       *://ispacesoft.com/*
// @match       *://www.3424.cn/*
// @match       *://*.cnq.net/*
// @match       *://txc.qq.com/*
// @match       *://m.bjnews.com.cn/*
// @match       *://www.cn-healthcare.com/*
// @match       *://www.wevul.com/*
// @match       *://*.yuque.com/*
// @match       *://*.66law.cn/*
// @match       *://*.ssap.com.cn/*
// @match       *://*.chinaacc.com/*
// @match       *://lvlin.baidu.com/*
// @match       *://*.64365.com/*
// @match       *://programmercarl.com/*
// @match       *://*.qdxiaochuan.com/*
// @match       *://*.zjh336.cn/*
// @match       *://*.volcengine.com/*
// @match       *://*.289.com/*
// @match       *://*.hi-linux.com/*
// @match       *://*.chusan.com/*
// @match       *://*.nowcoder.com/*
// @match       *://*.techgrow.cn/*
// @match       *://*.gaodun.com/*
// @match       *://easylearn.baidu.com/*
// @match       *://*.youlai.cn/*
// @match       *://*.cndzys.com/*
// @match       *://*.jiangzi.com/*
// @match       *://*.dazhong.com/*
// @match       *://discussions*.apple.com/*
// @match       *://www.msn.cn/*
// @match       *://*.pcbaby.com.cn/*
// @match       *://*.youzan.com/*
// @match       *://*.93300.cn/*
// @match       *://sspai.com/*
// @match       *://*.xjishu.com/*
// @match       *://*.eastday.com/*
// @match       *://*.tuidc.com/*
// @match       *://*.saoniuhuo.com/*
// @match       *://*.pingguolv.com/*
// @match       *://*.ppmy.cn/*
// @match       *://*.ultimate-communications.com/*
// @match       *://*.zmtpc.com/*
// @grant       GM_addStyle
// @grant       GM_openInTab
// @grant       unsafeWindow
// @run-at      document-start
// @downloadURL https://update.greasyfork.org/scripts/440400/%E8%87%AA%E5%8A%A8%E5%B1%95%E5%BC%80%E5%85%A8%E6%96%87%E9%98%85%E8%AF%BB%E6%9B%B4%E5%A4%9A.user.js
// @updateURL https://update.greasyfork.org/scripts/440400/%E8%87%AA%E5%8A%A8%E5%B1%95%E5%BC%80%E5%85%A8%E6%96%87%E9%98%85%E8%AF%BB%E6%9B%B4%E5%A4%9A.meta.js
// ==/UserScript==

(function () {
    var websites = [
        {
            match: ["*://*.ultimate-communications.com/*"],
            hide: [".readall_box"],
            expand: [".content-content"],
        },
        {
            match: ["*://*.pingguolv.com/*"],
            hide: [".click_more"],
            expand: ["mip-showmore"],
        },
        {
            match: ["*://*.zmtpc.com/*"],
            hide: [".readall"],
            expand: [".article .newstext"],
        },
        {
            match: ["*://*.saoniuhuo.com/*"],
            hide: [".mrc-btn-wrap"],
            expand: [".mrc-content"],
        },
        {
            match: ["*://*.tuidc.com/*"],
            hide: [".bottom_all_text_btn", ".bottom_all_text"],
            expand: [".ty_text_box"],
        },
        {
            match: ["*://*.eastday.com/*"],
            hide: [".expand-btn"],
            expand: [".post-content"],
        },
        {
            match: ["*://*.xjishu.com/*"],
            hide: [".gradBox", ".art-download"],
            expand: [".con-box"],
        },
        {
            match: ["*://sspai.com/*"],
            hide: ["#btn-call-app"],
        },
        {
            match: ["*://easylearn.baidu.com/edu-page/tiangong/*"],
            hide: [".bgk-detail .main-bottom", ".bgk-detail .banner", ".vip-banner-cont", ".vip-card-warp", ".business-el-line", ".question-cont .tigan .mask .toogle-btn"],
            expand: [".question-cont .tigan"],
            wait: [
                [".more-text",
                    node => {
                        node.click();
                        return false;
                    },
                ],
                [".dan-btn",
                    node => {
                        node.click();
                        return false;
                    },],
                [".exercise-btn-4",
                    node => {
                        node.click();
                        return false;
                    },],
                [".expand-btn",
                    node => {
                        node.click();
                        return false;
                    },],
            ]
        },
        {
            match: ["*://www.msn.cn/*"],
            hide: [".article-cont-read-button-container"],
            expand: [".article-body"],
            start: () => {
                Element.prototype._attachShadow = Element.prototype.attachShadow;
                Element.prototype.attachShadow = function () {
                    let css = `
                    .article-body
                    {
                        height: auto !important;
                        max-height: unset !important;
                        overflow: unset !important;
                        -webkit-line-clamp: unset !important;
                    }
                    `;
                    let style = document.createElement("style");
                    style.type = "text/css";
                    try {
                        style.innerHTML = css;
                    } catch (x) {
                        style.innerText = css;
                    }
                    let shadow = this._attachShadow({ mode: "open" });
                    shadow.appendChild(style);
                    return shadow;
                };
            },
        },
        {
            match: ["*://*.93300.cn/*"],
            hide: [".entry-readmore"],
            expand: [".entry-content"],
        },
        {
            match: ["*://*.youzan.com/*"],
            hide: [".cms-article-lock"],
            expand: [".content-content"],
        },
        {
            match: ["*://ailegal.baidu.com/*"],
            hide: [".article-content .expand", ".article-content .mask"],
            expand: [".article-content .article-text"],
        },
        {
            match: ["*://*.pcbaby.com.cn/*"],
            hide: [".mip-showmore-btn"],
            expand: ["mip-showmore"],
        },
        {
            match: ["*://discussions*.apple.com/*"],
            hide: [".post-content-toggle .post-content-toggle-button"],
            expand: [".post-content-toggle", ".post-body.collapsed"],
        },
        {
            match: ["*://*.dazhong.com/*"],
            hide: ["#read-more", ".content-more"],
            expand: ["#wrap", "#cont"],
        },
        {
            match: ["*://*.jiangzi.com/*"],
            hide: [".show_more_btn"],
            expand: ["#readtxt-video", ".detailText"],
        },
        {
            match: ["*://*.cndzys.com/*"],
            hide: [".content-more"],
            expand: ["#cont"],
        },
        {
            match: ["*://*.youlai.cn/*"],
            hide: [".mip-showore-btn-bar"],
            expand: ["#show-more"],
        },
        {
            match: ["*://*.gaodun.com/*"],
            hide: [".view-more"],
            expand: [".m-context"],
        },
        {
            match: ["*://*.techgrow.cn/*"],
            hide: ["#readmore-wrapper"],
            expand: ["#readmore-container"],
        },
        {
            // https://m.nowcoder.com/discuss/607623789546844160
            // https://greasyfork.org/zh-CN/scripts/440400-%E8%87%AA%E5%8A%A8%E5%B1%95%E5%BC%80%E5%85%A8%E6%96%87%E9%98%85%E8%AF%BB%E6%9B%B4%E5%A4%9A/discussions/239120
            match: ["*://*.nowcoder.com/*"],
            hide: [".view-more-btn", ".article-btns-open", "#cyh_banner"],
            expand: ["div[id^='data']", ".xle.pop_.cn_"],
            js: () => {
                $(".continue-btn").click();
                let el = document.querySelector(".ncmain.appwithsplit");
                if (el) {
                    el.__vue__.$options.parent.isShowAll = true;
                }

                nodes = document.querySelectorAll(".wonder-item");
                nodes.forEach(item => {
                    item.__vue__.maxOneLineFontNum = 1000;
                    item.__vue__.commentDisable = false;
                });
                $(".wonder-list").parent().parent()[0].__vue__.isShowAllList = true;

                nodes = querySelectorIncludesText('span.text-content', 'APP内查看完整回复');
                nodes.forEach(item => {
                    item.remove();
                });
            },
            start: () => {
                var post = {};
                Object.defineProperty(unsafeWindow, "post", {
                    get: function () {
                        return post;
                    },
                    set: function (value) {
                        post = value;
                        post.isTestCmtGoApp = false;
                        post.isTestHotTalkGoApp = false;
                    },
                    enumerable: true,
                    configurable: false,
                });
            },
        },
        {
            match: ["*://*.chusan.com/*"],
            hide: [".view-more-btn", ".article-btns-open", "#cyh_banner"],
            expand: ["div[id^='data']", ".xle.pop_.cn_"],
        },
        {
            match: ["*://*.hi-linux.com/*"],
            hide: ["#read-more-wrap"],
            expand: ["#vip-container"],
        },
        {
            match: ["*://*.289.com/*"],
            hide: [".f-show-cont"],
            expand: [".m-downmain"],
        },
        {
            match: ["*://*.volcengine.com/*"],
            hide: ["div[class*='button-AVOE'][class*='volcfe-flex-middle']", "div[class^='cover-']"],
            expand: ["div[class^='content-'][class*='hidden-']"],
            hookEvent: ["copy"],
        },
        {
            match: ["*://*.zjh336.cn/*"],
            hide: [".readnum"],
            expand: [".viewall_plugin"],
        },
        {
            match: ["*://*.qdxiaochuan.com/*"],
            hide: [".teles, .telesmore"],
            expand: [".postcon"],
        },
        {
            match: ["*://programmercarl.com/*"],
            hide: ["#read-more-wrap"],
            expand: [".theme-default-content"],
        },
        {
            match: ["*://*.64365.com/*"],
            hide: [".zs-unfold .unfd-btn-bar"],
            expand: [".unfd-ovh"],
        },
        {
            match: ["*://lvlin.baidu.com/*"],
            hide: [".check-more.check-fold"],
            expand: [".main-content-box"],
        },
        {
            match: ["*://*.chinaacc.com/*"],
            hide: [".news-con-mod .news-more-panel"],
            expand: [".news-con-mod"],
        },
        {
            match: ["*://*.ssap.com.cn/*"],
            hide: [".yueduqi_over"],
            expand: [".yueduqi_content"],
        },
        {
            match: ["*://*.yuque.com/*"],
            hide: ["div[class^=index-module_bottomAdvertiseWrapper]"],
        },
        {
            match: ["*://www.wevul.com/*"],
            directLink: [
                "*/go/*",
                (node) => {
                    const regex = /\/go\/([^\/]+)$/;
                    const base64Str = node.href.match(regex)[1];
                    const decodedStr = atob(base64Str);
                    node.href = decodedStr;
                    node.setAttribute("target", "_blank");

                },
            ],
        },
        {
            match: ["*://*.66law.cn/*"],
            hide: [".det-unfold .unfd-flex-bar .unfd-btn"],
            expand: [".unfold-bar .unfd-ovh"],
        },
        {
            match: ["*://www.cn-healthcare.com/*"],
            hide: [".mask, .ni_mask", "footer"],
            expand: ["#artbody"],
        },
        {
            match: "*://txc.qq.com/*",
            directLink: ["*/link-jump?jump=*", "jump"],
        },
        {
            match: ["*://m.bjnews.com.cn/*"],
            hide: [".article > .shade"],
            expand: [".article"],
        },
        {
            match: ["*://*.cnq.net/*"],
            hide: ["#readmore-wrapper"],
            expand: ["#readmore-container"],
        },
        {
            match: ["*://www.3424.cn/*"],
            hide: [".div-mask>.div-showbtn"],
            expand: [".contents article"],
        },
        {
            match: ["*://ispacesoft.com/*"],
            hide: [".entry-readmore"],
            expand: [".entry-content"],
        },
        {
            // https://theqoo.net/hot/2963319501
            match: ["*://theqoo.net/*"],
            js: () => {
                var nowScroll = $(window).scrollTop();
                $(document).ajaxComplete(function (event, xhr, settings) {
                    if (settings && settings.data && (settings.data.includes('act=dispBoardContentCommentListTheqoo') || settings.data.includes('act=dispTheqooContentCommentListTheqoo'))) {
                        $(window).scrollTop(nowScroll);
                        if ($(".show_more:not([style='display: none;'])").length > 0) {
                            $(".show_more:not([style='display: none;'])").click();
                        }
                    }
                });
            }
        },
        {
            match: ["*://m.freebuf.com/*"],
            js: () => {
                if (window.innerWidth > 1024) {
                    location.href = location.href.replace('m.freebuf.com', 'www.freebuf.com');
                }
            }
        },
        {
            match: ["*://www.nuomiphp.com/*"],
            hide: [".question-richtext .read-more"],
            expand: [".question-richtext"],
        },
        {
            match: ["*://pythonjishu.com/*"],
            hide: [".entry-readmore"],
            expand: [".entry-content"],
        },
        {
            match: ["*://*.knowbaike.com/*"],
            hide: ["#read-more"],
            expand: [".art-txt"],
            js: () => {
                document.oncontextmenu = function () { return true; };
                document.onkeydown = function () { return true; };
            }
        },
        {
            // 抄袭站直接跳转到原文即可
            match: ["*://*.pianshen.com/*"],
            js: () => {
                $('head').append('<meta name="referrer" content="never">');
                let url = $('#gotosource a').attr('href');
                if (url) {
                    location.href = url;
                }
            }
        },
        {
            // 抄袭站直接跳转到原文即可
            match: ["*://*.yii666.com/*"],
            hide: ["#vipReadAll", ".sidebar"],
            expand: [".article-content-height"],
            js: () => {
                $('head').append('<meta name="referrer" content="never">');
                let url = $('.OpenToUrl').attr('data-href');
                if (url) {
                    location.href = url;
                }
            }
        },
        {
            match: ["*://*.xjx100.cn/*", "*://dhexx.cn/*", "*://*.ppmy.cn/*"],
            js: () => {
                $('head').append('<meta name="referrer" content="never">');
                var originalTextMethod = $.fn.text;
                $.fn.text = function (value) {
                    if (arguments.length === 0) {
                        return originalTextMethod.call(this);
                    } else {
                        let re = originalTextMethod.call(this, value);
                        let text = $('.source_url').text();
                        if (text && (text.includes("http://") || text.includes("https://"))) {
                            let regex = /(https?:\/\/[^\s]+)/;
                            location.href = text.match(regex)[0];
                        }
                        return re;
                    }
                };
                let text = $('.source_url').text();
                if (text && (text.includes("http://") || text.includes("https://"))) {
                    let regex = /(https?:\/\/[^\s]+)/;
                    location.href = text.match(regex)[0];
                } else {
                    var test = false;
                    var scriptTags = $("script");
                    scriptTags.each(function () {
                        var src = $(this).attr("src");
                        if (src && src.includes("?source_url=")) {
                            let { source_url } = parseUrl(src);
                            if (source_url) {
                                test = true;
                                location.href = source_url;
                            }
                        }
                    });
                    if (!test) {
                        let url = $('#vip').find('a').attr('href');
                        if (url) {
                            location.href = $('#vip').find('a').attr('href');
                        }
                    }
                }

            }

        },
        {
            match: ["*://*.zoukankan.com/*"],
            js: () => {
                $('head').append('<meta name="referrer" content="never">');
                let nodeList = querySelectorIncludesText('a[href^="http"]', '查看全文');
                if (nodeList.length > 0) {
                    location.href = nodeList[0].href;
                }
            }
        },
        {
            match: ["*://*.hexun.com/*"],
            hide: ["div.showAll", "div.bottomLayer"],
            expand: ["div.art_contextBox"],
        },
        {
            match: ["*://*.betheme.net/*"],
            hide: ["#vip"],
            expand: [".articleHeight"],
        },
        {
            match: ["*://www.95pm.com/*"],
            hide: [".readall_box"],
            expand: [".readall-body"],
        },
        {
            match: ["*://www.takefoto.cn/*"],
            hide: [".content .article .article-text .load"],
            expand: [".article-text"]
        },
        {
            expand: [".content .article .article-text"],
            match: ["*://www.autohotkey.com/*"],
            js: () => {
                const items = document.querySelectorAll('.codebox > p > a:first-child + :nth-child(2)');
                items.forEach(item => {
                    expandCode(item);
                });
            },
        },
        {
            match: ["*://www.ctfiot.com/*"],
            directLink: [
                "*/go/?url=*",
                (node) => {
                    let { url } = parseUrl(node.href);
                    if (url) {
                        node.href = atob(url);
                        node.setAttribute("target", "_blank");
                    }
                },
            ],
        },
        {
            // https://weibo.com/cmbchina
            match: ["*://weibo.com/cmbchina*", "*://weibo.com/u/*"],
            wait: [
                ["span.expand", "click"]
            ]
        },
        {
            // https://weibo.com/ttarticle/p/show?id=2309404890441668493647
            match: ["*://weibo.com/ttarticle/p/show*"],
            hide: [".artical_add_box"],
            expand: [".WB_editor_iframe_new"],
        },
        {
            match: ["*://*.rstk.cn/*", "*://*.taodudu.cc/*", "*://*.dgrt.cn/*", "*://*.exyb.cn/*"],
            hide: ["div#vip"],
            expand: [".article_content"],
        },
        {
            match: ["*://betheme.net/*"],
            hide: ["div#vip"],
            expand: [".articleHeight"],
        },
        {
            match: ["*://devnote.pro/*"],
            hide: [".readmore-box"],
            expand: [".post-mask"],
        },
        {
            match: ["*://*.bugscaner.com/*"],
            hide: ["#div_qrcode_container", "#top-header"],
        },
        {
            match: ["*://*tinymind.net.cn/*"],
            start: () => {
                // 或者废掉DOMMouseScroll
                unsafeWindow.verify_flag = 1;
                unsafeWindow.phone_verify_flag = 1;
                Object.defineProperty(unsafeWindow, "verify_flag", {
                    get: function () {
                        return 1;
                    },
                    enumerable: true,
                    configurable: false,
                });
                Object.defineProperty(unsafeWindow, "phone_verify_flag", {
                    get: function () {
                        return 1;
                    },
                    enumerable: true,
                    configurable: false,
                });
            },
        },
        {
            // https://view.inews.qq.com/k/20210608A045BD00
            match: ["*://view.inews.qq.com/*"],
            hide: ["div[class^=show-more_outer]", "div[class^=slider-top-bar_sliderWrapper]"],
            expand: ["div[class^=show-more_height-not-full]"],
        },
        {
            // https://wap.gamersky.com/news/Content-1571244.html
            match: ["*://*gamersky.com/*"],
            hide: [".gsAreaContextOpen", ".ymwBootDownload"],
            expand: ["#gsAreaContext"],
        },
        {
            match: ["*://www.qcc.com/*"],
            directLink: ["*://www.qcc.com/web/transfer-link?link=*", "link"],
        },
        {
            match: ["*://*.cnr.cn/*"],
            hide: ["#readmore"],
            expand: ["#perny-main"],
        },
        {
            match: ["*://www.ngui.cc/*"],
            hide: ["#vip"],
            expand: ["#contentWraper", ".article_content"],
        },
        {
            match: ["*://ddrv.cn/*"],
            hide: ["#read-more-wrap"],
            expand: ["#container"],
        },
        {
            match: ["*://*.dxy.cn/*"],
            hide: ["div[class^=contentWrapBottom_]"],
            expand: ["div[class^=contentWrap_]"],
        },
        {
            match: ["*://www.tofacebook.com/*"],
            hide: [".topic .more-box"],
            expand: [".topic"],
        },
        {
            // https://wenda.so.com/q/1679797307210735
            match: ["*://*wenda.so.com/*"],
            hide: ["#show-rest-entry", ".answer-part__has-folder__btn", ".unfold-page.js-unfold-page"],
            expand: ["#det-content", ".answer-part__has-folder"],
            wait: [[".hide.js-unfold-answer.answer-fold-box", (node) => node.classList.remove("hide")]],
        },
        {
            match: ["*://*.js-code.com/*"],
            hide: ["#read-more-wrap"],
            expand: ["#codeContent", "#container"],
        },
        {
            match: ["*://*heidong.com/*"],
            hide: [".ggbox"],
            start: () => {
                // 阻止牛皮癣弹框
                unsafeWindow.user_login = true;
                Object.defineProperty(unsafeWindow, "user_login", {
                    get: function () {
                        return true;
                    },
                    enumerable: true,
                    configurable: true,
                });
            },
        },
        {
            // https://wap.zol.com.cn/ask/x_19257207.html
            match: ["*://*.zol.com.cn/*"],
            hide: [".unfold-article-btn", ".wap__bottom-app-button"],
            expand: [".article-content"],
            wait: [
                ["div.show-all-reply", "click"]
            ]
        },
        {
            match: ["*://3g.163.com/*"],
            hide: [".backflow-floating.js-open-app"],
        },
        {
            // 某些采集机翻引流站点
            match: ["*://www.5axxw.com/*"],
            hide: ["#gzh-mask", "#gzh-modal"],
        },
        {
            match: ["*://m.hexun.com/*"],
            hide: [".article-open"],
            expand: [".article"],
        },
        {
            // var key = 'read' + (new Date).toJSON().substring(0, 7); localStorage
            match: ["*://www.javascriptcn.com/*"],
            hide: [".readall_box"],
            expand: [".markdown-body"],
        },
        {
            match: ["*://www.anquanke.com/*"],
            directLink: ["*://*/outLinkPage/?target=*", "target"],
        },
        {
            match: ["*://*.vovososo.com/*"],
            directLink: [
                "*/jump.html?url=*",
                (node) => {
                    let { url } = parseUrl(node.href);
                    if (url) {
                        node.href = atob(url);
                        node.setAttribute("target", "_blank");
                    }
                },
            ],
        },
        {
            match: ["*://itpcb.com/*"],
            hide: ["#read-more-wrap"],
            expand: ["#container"],
        },
        {
            match: ["*://www.lishixinzhi.com/*"],
            hide: ["#showbtn"],
            expand: ["#endtext"],
        },
        {
            match: ["*://*.ali213.net/*"],
            hide: [".unfold-field.unfold-field-download", ".read-all-con", ".download-text"],
            expand: [".detail_content", "#Content"],
        },
        {
            match: ["*://m.yezicc.com/*"],
            hide: [".fulltext-button"],
            expand: ["#article-body > .wrap"],
        },
        {
            match: ["*://stackoom.com/*", "*://www.codeprj.com/*"],
            js: () => {
                if (!$.cookie("openid") || !$.cookie("loginCode")) {
                    $.cookie("openid", "1", { expires: 7 });
                    $.cookie("loginCode", "1", { expires: 7 });
                }
            },
        },
        {
            match: ["*://www.yunqishi.net/*"],
            hide: [".ckgd"],
            expand: [".tw_contain"],
        },
        {
            match: ["*://card.weibo.com/*", "*://weibo.com/ttarticle/*"],
            hide: [".f-art-opt"],
            expand: [".f-art"],
        },
        {
            match: ["*://m.weibo.cn/u/*"],
            directLink: ["*://weibo.cn/sinaurl?u=*", "u"],
        },
        {
            // https://m.sohu.com/a/442909096_120459022/?pvid=000115_3w_a
            match: "*://*.sohu.com/*",
            hide: [".lookall-box", "#CallAppContainer"],
            css: `
                .hidden-content.hide,.control-hide {
                    display: block !important;
                }
            `,
            js: () => {
                $('#artLookAll').click();
            }
        },
        {
            match: "*://m.downxia.com/*",
            hide: ["a.slide-btn"],
            expand: [".chapter-cont"],
            css: `
                .chapter-cont.snbg {
                    position: unset !important;
                }
            `,
        },
        {
            match: ["*://support.qq.com/*"],
            directLink: ["*://support.qq.com/*/link-jump?jump=*", "jump"],
        },
        {
            match: ["*://www.itbaoku.cn/*"],
            hide: [".qa-content-more"],
            expand: ["#qa-content"],
        },
        {
            // https://wukong.toutiao.com/question/6712757183118835972/
            match: ["*://*.toutiao.com/*"],
            hide: ["a.j-expand-showfull.expand-bottom", ".m-share-answer .neck .mask", ".float-openapp", ".expand-container .expand-button-wrapper"],
            expand: ["div.answer-text-full", "article.content", ".expand-container.folded"],
        },
        {
            match: ["*://www.bilibili.com/*"],
            hide: [".h5-download-bar", ".read-article-box .read-more .arrow-cnt", ".video-desc-container .toggle-btn"],
            expand: [".read-article-box.limit", ".video-desc-container .basic-desc-info"],
            js: () => {
                // 去掉复制的时候总是带上的尾巴
                let node = document.getElementById("article-content");
                if (node != null) {
                    node.oncopy = function (e) {
                        e.clipboardData.setData("text/plain", window.getSelection().toString());
                        e.preventDefault();
                        e.stopPropagation();
                        e.stopImmediatePropagation();
                    };
                }
            },
        },
        {
            match: ["*://m.bilibili.com/video/*"],
            hide: [".launch-app-btn.m-nav-openapp"],
            wait: [
                ["div.to-see", "click"]
            ]
        },
        {
            match: ["*://m.bilibili.com/*"],
            hide: [".opus-read-more"],
            expand: [".opus-module-content.limit"],
        },
        {
            match: ["*://ld246.com/*"],
            directLink: ["*://*ld246.com/forward?goto=*", "goto"],
        },
        {
            match: ["*://segmentfault.com/*"],
            directLink: [
                "*://link.segmentfault.com/?enc=*",
                (node) => {
                    // segmentfault这东西也去加密了?
                    if (/^https?:\/\//.test(node.innerText) && !node.innerText.endsWith("...")) {
                        node.href = node.innerText;
                    }
                },
            ],
        },
        // 暂时不用这功能
        // {
        //     // https://cn.bing.com/search?form=MOZSBR&pc=MOZI&q=GIT_CLEAN_FLAGS
        //     match: ["*://cn.bing.com/search?*"],
        //     bindClick: [
        //         "a[href^=http]",
        //         (node, e) => {
        //             if (node.target == "_blank" && !node.hostname.includes("bing.com")) {
        //                 e.stopPropagation();
        //             }
        //         },
        //     ],
        // },
        {
            match: ["*://www.logonews.cn/*"],
            directLink: ["*://link.logonews.cn/?url=*", "url"],
        },
        {
            // https://m.meishichina.com/recipe/69477/
            match: ["*://m.meishichina.com/*"],
            hide: [".showmore_page_a"],
            expand: ["#showmorearticle"],
        },
        {
            match: ["*://www.sanzhima.com/*"],
            directLink: [
                "*://www.sanzhima.com/jump.html?url=*",
                (node) => {
                    let { url } = parseUrl(node.href);
                    if (url) {
                        node.href = atob(url);
                        node.setAttribute("target", "_blank");
                    }
                },
            ],
        },
        {
            // https://www.ximalaya.com/sound/357093858
            match: ["*://www.ximalaya.com/*", "*://m.ximalaya.com/*"],
            hide: [".more-intro-wrapper.cY_", ".stretch-box .mask.ib_", "a.init-code.schema-link"],
            expand: [".draft._Fc, .sound-intro .intro._Fc", ".stretch-box.ib_", ".album-intro .intro.Q_v"],
        },
        {
            // https://auto.ifeng.com/c/8EK6RQbD5U2
            // https://i.ifeng.com/c/8EJoQhvSkT3
            // https://ihouse.ifeng.com/news/2022_03_12-55263044_0.shtml
            match: "*://*.ifeng.com/*",
            hide: ["section[class^='bottomSlide-']", "header[class^='headerIn-']", "div[class^='callupBtn-']", "div[class^='more-']", "div[class^='tip-']", "div.showall", "div[class^='more-1-']", "div[class^='bottom_box-'] > div[class^='box-']", "div[class^='containerBox-'] >  div[class^='shadow-']", "[class^='index_shadow'] > [class^='index_unfoldIcon']"],
            expand: ["div[class^='main_content-']", "section.article", "div[class^='containerBox-']", "div[class^='index_containerBox']"],
            css: "#root>div[class^='main-'] {margin-bottom: unset !important;}",
        },
        {
            // https://tieba.baidu.com/p/7412962296
            // https://www.tieba.com/p/7745474371
            match: ["*://tieba.baidu.com/*", "*://www.tieba.com/*"],
            hide: [".appPromote", ".appBottomPromote", ".frs_daoliu_for_app", ".pb_cut_hot_recommend", ".father-cut-daoliu-normal-box", ".father-cut-daoliu-from-toutiao-box"],
            directLink: [
                "*://jump*.bdimg.com/safecheck/index?url=*",
                (node) => {
                    if (/^https?:\/\//.test(node.innerText)) {
                        node.href = node.innerText;
                    }
                },
            ],
        },
        {
            match: "*://mail.qq.com/*",
            bindClick: [
                "a[href^=http]",
                (node, e) => {
                    if (node.target == "_blank" && !node.href.includes("mail.qq.com")) {
                        e.stopPropagation();
                    }
                },
            ],
        },
        {
            // https://cloud.tencent.com/developer/article/1953552
            match: "*://cloud.tencent.com/*",
            hide: [".cdc-expand-area__toggle", ".com-markdown-collpase-hide .com-markdown-collpase-toggle", ".J-headerAdvertising", ".c-nav-advertising"],
            expand: [".cdc-expand-area__main", ".com-markdown-collpase-hide .com-markdown-collpase-main"],
        },
        {
            // https://developer.aliyun.com/article/875173
            match: "*://developer.aliyun.com/*",
            hide: ["#btn-readmore", ".article-hide-box"],
            expand: [".article-hide-content"],
        },
        {
            // http://www.360doc.com/content/20/0805/05/71057272_928578782.shtml
            match: ["*://www.360doc.com/*", "*://www.360doc.cn/*"],
            hide: [".article_showall"],
            expand: ["#articlecontent", ".article_maxh"],
            bindClick: [
                "a[href^=http]",
                (node, e) => {
                    if (node.target == "_blank" && !node.hostname.includes("360doc.com")) {
                        e.stopPropagation();
                    }
                },
            ],
        },
        {
            // https://www.iteye.com/blog/agile-boy-274366
            match: "*://www.iteye.com/blog/*",
            hide: [".hide-article-box"],
            expand: ["#blog_content"],
        },
        {
            match: "*://www.423down.com/*",
            directLink: [
                "*://www.423down.com/go.php?url=*",
                (node) => {
                    let { url } = parseUrl(node.href);
                    if (url) {
                        node.href = atob(url);
                    }
                },
            ],
        },
        {
            // https://www.itdaan.com/blog/2019/08/06/1b407ea67c33df1c625ab657443ccd45.html
            match: "*://www.itdaan.com/*",
            js: () => {
                if (!$.cookie("openid") || !$.cookie("loginCode")) {
                    $.cookie("openid", "1", { expires: 7 });
                    $.cookie("loginCode", "1", { expires: 7 });
                }
                if ($.cookie("vipuser") != "1") {
                    $.cookie("vipuser", "1", { expires: 7 });
                }
            },
            directLink: [
                "*://www.itdaan.com/link/*",
                (node) => {
                    let url = node.href.split("/link/", 2)[1];
                    if (url) {
                        node.href = atob(url);
                    }
                },
            ],
        },
        {
            match: "*://show.bookmarkearth.com/view/*",
            js: () => {
                let node = document.querySelector("p.link");
                if (node) {
                    location.replace(node.innerText);
                }
            },
        },
        {
            match: "*://www.shaduizi.com/*",
            hide: [".content-container-open-btn"],
            expand: [".content-section.content-section-container"],
        },
        {
            match: "*://www.chinaz.com/*",
            hide: [".contentPadding"],
            expand: ["#article-content"],
        },
        {
            match: "*://www.tianyancha.com/*",
            bindClick: [
                "a[href^=http]",
                (node, e) => {
                    if (node.target == "_blank") {
                        e.stopPropagation();
                    }
                },
            ],
            directLink: ["*://www.tianyancha.com/security?target=*", "target"],
        },
        {
            match: "*://gitee.com/*",
            directLink: ["*://gitee.com/link?target=*", "target"],
        },
        // {
        //     // 百度搜索移动端，该功能还有bug，免重定向跳转去掉，https://github.com/ViCrack/tempermonkey-script/issues/3#issuecomment-1507357746
        //     match: "*://m.baidu.com/*",
        //     bindClick: [
        //         "div.result",
        //         (node) => {
        //             if (node.dataset.log) {
        //                 let link = JSON.parse(node.dataset.log).mu;
        //                 node.querySelector("article").setAttribute("rl-link-href", link);
        //             }
        //         },
        //     ],
        // },
        {
            match: "*://www.wxnmh.com/*",
            hide: [".hide-article-box"],
            expand: ["#message_content"],
        },
        {
            match: "*://*.douban.com/*",
            directLink: ["*.douban.com/link2/?url=*", "url"],
            hide: [".oia-readall"],
            expand: [".note-content"],
        },
        {
            match: "*://wap.sogou.com/web/*",
            directLink: ["*://wap.sogou.com/web/id=*&url=*", "url"],
        },
        {
            match: "*://m.so.com/s?q=*",
            directLink: ["*.so.com/jump?u=*", "u"],
        },
        {
            match: "*://iswbm.com/*",
            hide: ["#read-more-wrap"],
            expand: ["#container"],
        },
        {
            match: "*://www.oschina.net/*",
            hide: ["div.collapse-bar"],
            expand: ["div.article-detail"],
            directLink: ["*://www.oschina.net/action/GoToLink?url=*", "url"],
        },
        {
            match: "*://juejin.cn/post/*",
            directLink: ["*link.juejin.cn/?target=*", "target"],
        },
        {
            match: "*://www.3h3.com/soft/*",
            hide: ["#showmore"],
            expand: ["#ctext"],
        },
        {
            match: "*://finance.sina.com.cn/*",
            hide: ["#sina-cont000", "#sina-pages-u"],
        },
        {
            // https://iask.sina.com.cn/b/new2COrHbarDpB.html
            match: "*://*.sina.com.cn/*",
            hide: [".detail-text-more", "#floating-image", ".answer-mask-box"],
            expand: [".new-pre-answer-text", ".knowledge-list-switch"],
        },
        {
            match: "*://*.py.cn/code/*",
            start: () => {
                unsafeWindow.IsLevelDate = 1;
                Object.defineProperty(unsafeWindow, "IsLevelDate", {
                    get: function () {
                        return 1;
                    },
                    enumerable: true,
                    configurable: true,
                });
                Object.defineProperty(unsafeWindow, "is_login", {
                    get: function () {
                        return 1;
                    },
                    enumerable: true,
                    configurable: true,
                });
            },
        },
        {
            match: "*://m.36kr.com/*",
            hide: [".kr-mobile-goapp", ".article-goapp", ".float-app-button-wrp", ".article-top-swiper-goapp"],
            expand: ["#body-content"],
        },
        {
            match: ["*://m.imooc.com/*", "*://www.imooc.com/*"],
            hide: [".wenda-more-wrap.js-wenda-more", "#js-appload", ".js-footer-appload", ".detail-content.long-content .showMore", ".hide-articel-box", ".js-show-reply-btn.hide-answer-morebtn"],
            expand: ["#wap_wenda_detail", "#wenda_content", ".detail-content.long-content", "#js-qa-wenda", ".answer-content"],
        },
        {
            match: "*://zhuanlan.zhihu.com/p/*",
            hide: [".OpenInAppButton"],
            css: `
                [class^="css-"][href]{
                    display: block !important;
             }
            `,
            directLink: ["*link.zhihu.com/?target=*", "target"],
        },
        {
            match: "*://www.zhihu.com/question/*",
            hide: [".OpenInAppButton", ".openInApp", ".DownloadGuide", ".Pc-feedAd-container", ".MobileAppHeader-downloadLink", ".ContentItem-expandButton", ".AdBelowMoreAnswers", ".MBannerAd"],
            expand: [".RichContent-inner--collapsed", ".RichContent-inner"],
            wait: [
                [".ModalExp-modalShow", (node) => ((node.parentNode.style.display = "none"), document.body.classList.remove("ModalWrap-body"))],
                [
                    ".is-collapsed",
                    (node) => {
                        node.classList.remove("is-collapsed");
                    },
                ],
            ],
            directLink: ["*link.zhihu.com/?target=*", "target"],
            css: `
                .RichContent--unescapable.is-collapsed .RichContent-inner {
                    -webkit-mask-image: unset !important;
                    mask-image: unset !important;
                }
                .RichContent.is-collapsed {
                    cursor: unset !important;
                }
                .RichContent-inner {
                    margin-bottom: 40px !important;
                }
            `,
        },
        {
            match: "*://www.cnbeta.com/articles/*",
            hide: ["div[style='display:block !important;position:fixed;bottom:0;margin-top:10px;width:100%;background:#c44;color:#fff;font-size:15px;z-index:99999']"],
        },
        {
            match: "*://xw.qq.com/cmsid/*",
            hide: [".collapseWrapper", ".redbag.item"],
            expand: ["#article_body"],
        },
        {
            // https://xw.qq.com/amphtml/20220222A03ZFF00
            match: "*://xw.qq.com/amphtml/*",
            hide: ["div.ct-unfold"],
            expand: [".article-main.fold"],
        },
        {
            match: "*://xuedingmiao.com/*",
            hide: ["#read-more-wrap"],
            expand: ["#main-content"],
        },
        {
            match: "*://blog.51cto.com/*",
            js: () => {
                safeWaitJQuery(() => {

                    jQuery(function () {
                        $(".copy_btn").removeClass("disable");
                        $(".copy_btn").text("免登录复制");
                        $(".article-content-wrap").unbind("copy");
                        if ("undefined" == typeof unsafeWindow.uid || !unsafeWindow.uid) {
                            unsafeWindow.uid = 1;
                        }
                        $("body")
                            .off()
                            .on("click", ".copy_btn", function (e) {
                                e.stopPropagation();
                                e.preventDefault();
                                let $this = $(this);
                                let text = $(this).parents(".hljs-cto").find("pre").find('[class*="language-"]')[0].textContent;
                                copy(text).then(
                                    () => {
                                        $this.text("已复制");
                                        setTimeout(function () {
                                            $this.text("免登录复制");
                                        }, 2000);
                                    },
                                    (e) => {
                                        $this.text("复制失败:" + e);
                                        setTimeout(function () {
                                            $this.text("免登录复制");
                                        }, 2000);
                                    }
                                );
                                return false;
                            });
                    });
                });
            },
        },
        {
            match: "*://wap.peopleapp.com/article/*",
            hide: [".read-more"],
            expand: [".article-wrapper.has-more-high"],
        },
        {
            match: "*://baike.baidu.com/item/*",
            wait: [
                [
                    // 需要循环?
                    ".yx-load-more-inner.J-yx-load-moreContent",
                    (node) => {
                        node.dispatchEvent(new Event("tap"));
                        document.getElementById("ui_refresh_down").style.display = "none";
                        return false;
                    },
                ],
            ],
        },
        {
            match: ["*://m.jb51.cc/*", "*://www.jb51.cc/*"],
            hide: ["#read-more-wrap"],
            expand: ["#container"],
        },
        {
            match: ["*://www.yiidian.com/*", "*://yiidian.com/*"],
            hide: ["#read-more-wrap"],
            expand: ["#yArticle"],
        },
        {
            match: "*://bbs.elecfans.com/m/*",
            hide: [".conMore", ".login-reg-fixed"],
            expand: [".postListCon"],
        },
        {
            match: ["*://www.elecfans.com/*", "*://m.elecfans.com/*"],
            hide: [".seeHide_new_login", ".open_app.open_app_fixed", ".login-reg-fixed", ".seeHide"],
            expand: [".article_content", ".simditor-body"],
        },
        {
            match: "*://www.bandbbs.cn/threads/*",
            hide: [".bbCodeBlock-expandLink.js-expandLink"],
            wait: [[".js-expandWatch:not(.is-expanded)", (node) => node.classList.add("is-expanded")]],
        },
        {
            match: "*://chejiahao.m.autohome.com.cn/info/*",
            hide: ["#continue_reading"],
            expand: [".major-long-details"],
            wait: [[".pgc-details .fn-hide", (node) => node.classList.remove("fn-hide")]],
        },
        {
            match: "*://www.bjtzdbzz.com/*",
            hide: [".pc-request-btn", ".mb-request-btn"],
            expand: [".detail-content-desc-show"],
        },
        {
            match: "*://m.21jingji.com/article/*",
            hide: [".content .mask"],
            expand: [".txtContent"],
        },
        {
            // https://zhidao.baidu.com/question/423275263.html
            match: "*://zhidao.baidu.com/question/*",
            hide: [".w-detail-display-btn-text", ".wgt-best-mask", ".wgt-answers-mask", ".wgt-question-desc-action", ".w-reply-text .unfold", "div.wgt-target .target-text .wgt-target-mask"],
            expand: [".w-detail-container.w-detail-index", "div[id^=best-content-]", "div[id^=answer-content-]", ".wgt-question-desc-inner", ".w-reply-text", "div.wgt-target .target-text", ".w-detail-container.w-detail-single"],
            wait: [
                ["#show-answer-hide", (node) => {
                    node.dispatchEvent(new Event("click"));
                }]
            ],
        },
        {
            match: "*://haokan.baidu.com/v*",
            hide: [".share-origin.wx-share-launch", ".player-pause-code-bottom-text", ".player-pause-code-inner"],
        },
        {
            match: "*://www.xz577.com/*",
            hide: [".article-content-body-more1"],
            expand: [".con2"],
        },
        {
            match: "*://www.it1352.com/*",
            hide: [".arc-body-main-more"],
            expand: [".arc-body-main"],
            js: () => {
                $.cookie("olduser", "1", {
                    domain: "it1352.com",
                    expires: 1500,
                });
            },
        },
        {
            match: "*://g.pconline.com.cn/*",
            hide: [".btnForAppOpenA", ".btnForAppOpenImg", ".add_artilce_handle", ".WakeUptop"],
            expand: [".art-content"],
        },
        {
            match: "*://3w.huanqiu.com/*",
            hide: ["#more"],
            expand: ["#content"],
        },
        {
            match: ["*://m.huanqiu.com/*"],
            hide: [".unfold-btn"],
            expand: [".article-content", ".article .content"],
            start: () => {
                Element.prototype._attachShadow = Element.prototype.attachShadow;
                Element.prototype.attachShadow = function () {
                    let css = `
                    .unfold-btn
                    {
                        display: none !important;
                        visibility:hidden !important;
                        max-height: 0 !important;
                        max-width: 0 !important;
                        height: 0 !important;
                        width: 0 !important;
                    }

                    .article-content, .article .content
                    {
                        height: auto !important;
                        max-height: unset !important;
                        overflow: unset !important;
                        -webkit-line-clamp: unset !important;
                    }
                    `;
                    let style = document.createElement("style");
                    style.type = "text/css";
                    try {
                        style.innerHTML = css;
                    } catch (x) {
                        style.innerText = css;
                    }
                    let shadow = this._attachShadow({ mode: "open" });
                    shadow.appendChild(style);
                    return shadow;
                };
            },
            wait: [
                [
                    ".unfold-btn",
                    (node) => {
                        node.dispatchEvent(new Event("click"));
                        node.dispatchEvent(new Event("tap"));
                    },
                ],
            ],
        },
        {
            match: "*://iknow.lenovo.com.cn/*",
            hide: [".coverQRCode"],
            js: () => {
                localStorage.setItem("scanQRCode", "1");
                $(document).off("scroll.unable");
            },
        },
        {
            // https://www.jianshu.com/p/e7dc41b6ea54
            match: "*://www.jianshu.com/p/*",
            hide: [".download-app-guidance", ".call-app-btn", "#jianshu-header", "#note-show .content .show-content-free .collapse-tips", ".download", ".note-comment-above-ad-wrap", ".close-collapse-btn", ".open-app-btn", ".app-open", "#guangtui", "#fixed-ad-container", ".fubiao-dialog"],
            expand: ["#note-show .content .show-content-free .collapse-free-content"],
            directLink: ["*://link.jianshu.com/?t=*", "t", "*://links.jianshu.com/go?to=*", "to"],
        },
        {
            // 百度新闻, 百家号
            match: ["*://baijiahao.baidu.com/s*", "*://ext.baidu.com/api/comment/v1/page/list*", "*://mbd.baidu.com/newspage/*", "*://www.baidu.com/#iact=wiseindex/tabs/news/activity/newsdetail=*"],
            hide: [".packupButton", ".oPadding", ".newUnfoldFullBox.contentPadding", ".undefined", ".foldMaskWrapper", "#headDeflectorContainer"],
            expand: [".mainContent", "#mainContentContainer"],
            wait: [
                ["p:contains('百度APP内阅读')", (node) => node.parentNode.parentNode.removeChild(node.parentNode)],
                [".layer-content.layer-content-shown", (node) => node.querySelector(".layer-itemBtn.normal").dispatchEvent(new Event("click"))],
            ],
        },
        {
            match: ["*://download.csdn.net/download/*"],
            js: () => {
                let btn = $(".more-wrap").find(".el-button");
                btn.removeAttr("data-report-click");
                btn.click()
                $("#desc-text").prop("checked", true);
            }
        },
        {
            match: ["*://gitcode.csdn.net/*"],
            hide: [".article-show-more", ".article-detail .user-desc-fix", ".content-ai"],
            expand: [".article-detail .main-content .user-article-hide"],
        },
        {
            match: ["*://wenku.csdn.net/*"],
            hide: [".article-box .cont .open", ".article-box .vip", ".article-box pre code .lowerBox"],
            expand: [".article-box .cont.first-show", ".markdown_views .hljs"],
        },
        {
            // https://huaweicloud.csdn.net/657c0ecddafaf23eeaee29b9.html
            match: ["*://huaweicloud.csdn.net/*", "*://openatomworkshop.csdn.net/*"],
            hide: [".article-detail .main-content .user-article-hide .article-show-more", ".article-detail .user-desc-fix"],
            expand: [".article-detail .main-content", ".article-detail .main-content .user-article-hide"],
        },
        {
            // https://ask.csdn.net/questions/8082390/54571405
            match: ["*://ask.csdn.net/*"],
            hide: [".expandBtn"],
            expand: [".ask-issue-content"],
            js: () => {
                $('.answer-more').click();
            }
        },
        {
            match: "*://blog.csdn.net/*",
            hide: [".weixin-shadowbox.wap-shadowbox", ".aside-header-fixed", ".hide-preCode-box", "#m_toolbar_left .m_toolbar_left_app_btn", ".readall_box", ".feed-Sign-span", ".btn_mod", ".btn_app_link", ".btn-readmore", ".comment_read_more_box", ".btn_open_app_prompt_div", ".feed-Sign-weixin"],
            expand: [".article_content", "#article_content", "#comment", ".set-code-hide"],
            directLink: ["*://link.csdn.net/?target=*", "target"],
            bindClick: [
                "a[href^=http]",
                (node, e) => {
                    if (node.target == "_blank" && !node.hostname.includes(".csdn.net")) {
                        e.stopPropagation();
                    }
                },
            ],
            // https://greasyfork.org/zh-CN/scripts/440400-%E8%87%AA%E5%8A%A8%E5%B1%95%E5%BC%80%E5%85%A8%E6%96%87%E9%98%85%E8%AF%BB%E6%9B%B4%E5%A4%9A/discussions/224754
            css: `
                #content_views,code,pre {
                    -webkit-touch-callout: auto !important;
                    -webkit-user-select: auto !important;
                    -khtml-user-select: auto !important;
                    -moz-user-select: auto !important;
                    -ms-user-select: auto !important;
                    user-select: auto !important;
                }
                main div.blog-content-box pre {
                    max-height: unset;
                    overflow-y: unset;
                }
            `,
            js: () => {
                safeWaitJQuery(() => {
                    jQuery(function () {
                        jQuery(function () {
                            jQuery(".recommend-jump-app").removeAttr("id");
                            jQuery(".recommend-jump-app")
                                .off("click")
                                .on("click", (e) => {
                                    let url = jQuery(this).find("a.flag").attr("href");
                                    if (url) {
                                        location.href = url;
                                    }
                                });
                            jQuery("a[data-report-click]").removeAttr("data-report-click");
                            jQuery("a[data-report-query]").removeAttr("data-report-query");
                            if (typeof unsafeWindow.csdn != "undefined") {
                                // https://github.com/adlered/CSDNGreener
                                jQuery("code").attr("onclick", "mdcp.copyCode(event)");
                                try {
                                    unsafeWindow.csdn.copyright.init("", "", "");
                                } catch (err) { }
                                try {
                                    Object.defineProperty(unsafeWindow.csdn.report, "reportClick", {
                                        value: function () {
                                            return true;
                                        },
                                        writable: false,
                                        configurable: false,
                                    });
                                } catch (err) { }
                                try {
                                    Object.defineProperty(unsafeWindow, "articleType", {
                                        value: 0,
                                        writable: false,
                                        configurable: false,
                                    });
                                } catch (err) { }
                            }
                        });
                    });
                });
            },
        },
        {
            match: "*://jingyan.baidu.com/article/*",
            hide: [".read-whole-mask"],
            expand: [".exp-content-container"],
        },
    ];

    function matchRule(str, rule) {
        var escapeRegex = (str) => str.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1");
        return new RegExp("^" + rule.split("*").map(escapeRegex).join(".*") + "$").test(str);
    }

    // https://greasyfork.org/zh-CN/scripts/416338
    function parseUrl(href) {
        if (!href) return {};
        let search;

        try {
            // 链接
            const url = new URL(href);
            ({ search } = url); // 主要处理对hash的search

            if (!search && url.hash.includes("?")) {
                search = url.hash.split("?")[1];
            }
        } catch (err) {
            // 非链接,如：a=1&b=2、?a=1、/foo?a=1、/foo#bar?a=1
            if (href.includes("?")) {
                search = href.split("?")[1];
            } else {
                search = href;
            }
        }

        const searchParams = new URLSearchParams(search);
        return [...searchParams.entries()].reduce((acc, [key, value]) => ((acc[key] = value), acc), {});
    }

    function randomString(length, chars) {
        let result = "";
        for (let i = length; i > 0; --i) result += chars[Math.floor(Math.random() * chars.length)];
        return result;
    }

    function setCookie(name, value, days) {
        let expires = "";
        if (days) {
            let date = new Date();
            date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);
            expires = "; expires=" + date.toUTCString();
        }
        document.cookie = name + "=" + (value || "") + expires + "; path=/";
    }

    function getCookie(name) {
        let nameEQ = name + "=";
        let ca = document.cookie.split(";");
        for (let i = 0; i < ca.length; i++) {
            let c = ca[i];
            while (c.charAt(0) == " ") c = c.substring(1, c.length);
            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
        }
        return null;
    }

    function eraseCookie(name) {
        document.cookie = name + "=; Max-Age=-99999999;";
    }

    function clearAdLoop() {
        let id = setTimeout(";");
        for (let i = 0; i < id; i++) {
            clearTimeout(i);
        }
        id = setInterval(";");
        for (let i = 0; i < id; i++) {
            clearInterval(i);
        }
    }

    function safeWaitJQuery(callbackFunc) {
        let jQueryTimer = setInterval(function () {
            if (typeof jQuery !== "undefined") {
                clearInterval(jQueryTimer);
                callbackFunc(jQuery);
            }
        }, 300);
    }


    function nativeCopy(value) {
        return new Promise((resolve, reject) => {
            let textArea = document.createElement("textarea");
            textArea.value = value;
            textArea.style.top = "0";
            textArea.style.left = "0";
            textArea.style.position = "fixed";
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            try {
                document.execCommand("copy");
                setTimeout(() => {
                    resolve(value);
                }, 1);
            } catch (e) {
                setTimeout(() => {
                    reject(e);
                }, 1);
            }
            document.body.removeChild(textArea);
        });
    }

    function copy(value) {
        return new Promise((resolve, reject) => {
            navigator.clipboard
                ? navigator.clipboard.writeText(value).then(resolve, function () {
                    nativeCopy(text).then(resolve, reject);
                })
                : nativeCopy(text).then(resolve, reject);
        });
    }

    function querySelectorIncludesText(selector, text) {
        return Array.from(document.querySelectorAll(selector)).filter((el) => el.textContent.includes(text));
    }

    // https://github.com/Shawak/TwitchSquad/blob/main/twitchsquad.user.js
    if (typeof GM_addStyle === "undefined") {
        GM_addStyle = function (css) {
            let head = document.getElementsByTagName("head")[0],
                style = document.createElement("style");
            if (!head) {
                return;
            }
            style.type = "text/css";
            try {
                style.innerHTML = css;
            } catch (x) {
                style.innerText = css;
            }
            head.appendChild(style);
        };
    }
    if (typeof unsafeWindow == "undefined") unsafeWindow = window;

    const readyName = randomString(8, "abcdefghijklmnopqrstuvwxyz");

    // https://greasyfork.org/zh-CN/scripts/28497
    var EventTarget_addEventListener = EventTarget.prototype.addEventListener;
    var document_addEventListener = document.addEventListener;
    var Event_preventDefault = Event.prototype.preventDefault;


    for (var website of websites) {
        let hit = false;
        if (Array.isArray(website.match)) {
            hit = website.match.some((s) => matchRule(window.location.href, s));
        } else {
            hit = matchRule(window.location.href, website.match);
        }

        if (hit) {
            console.log(website);
            let style = "";
            if ("hide" in website && website.hide.length > 0) {
                style +=
                    website.hide.join(",\n") +
                    `
                {
                    display: none !important;
                    visibility:hidden !important;
                    max-height: 0 !important;
                    max-width: 0 !important;
                    height: 0 !important;
                    width: 0 !important;
                }

                `;
            }
            if ("expand" in website && website.expand.length > 0) {
                style +=
                    website.expand.join(",\n") +
                    `
                {
                    height: auto !important;
                    max-height: unset !important;
                    overflow: unset !important;
                    -webkit-line-clamp: unset !important;
                }

                `;
            }
            if ("disable" in website && website.disable.length > 0) {
                style +=
                    website.disable.join(",\n") +
                    `
                {
                    pointer-events: none !important;
                }

                `;
            }
            if ("css" in website && website.css.length > 0) {
                style += website.css;
            }
            GM_addStyle(style);

            if ("wait" in website) {
                // TODO 需要换种方式优化
                let ready = [];
                let id = setInterval(() => {
                    try {
                        for (let w of website.wait) {
                            if (!(w[0] in ready)) {
                                let nodeList;
                                let m = w[0].match(/(.+?):contains\(\s*['"](.+?)['"]\s*\)/);
                                if (m) {
                                    nodeList = querySelectorIncludesText(m[1], m[2]);
                                } else {
                                    nodeList = document.querySelectorAll(w[0]);
                                }
                                let allNodeFinish = nodeList.length > 0;
                                nodeList.forEach((node) => {
                                    if (!node.dataset[readyName]) {
                                        if (w[1] === "click") {
                                            node.dispatchEvent(new Event("click"));
                                            node.dispatchEvent(new Event("tap"));
                                            node.click();
                                        } else {
                                            let callret = w[1].call(node, node); // 返回值
                                            if (callret === false) {
                                                allNodeFinish = false;
                                                return;
                                            }
                                        }
                                        node.dataset[readyName] = true;
                                    }
                                });
                                if (allNodeFinish) {
                                    ready.push(w[0]);
                                }
                            }
                        }
                        if (ready.length == website.wait.length) {
                            clearInterval(id);
                        }
                    } catch (x) {
                        clearInterval(id);
                    }
                }, 1000);
            }

            if ("directLink" in website) {
                // 去除链接重定向

                // 支持鼠标左右键和拖拽打开超链接
                document.addEventListener(
                    "mousedown",
                    (e) => {
                        // https://greasyfork.org/zh-CN/scripts/20431-zhihu-link-redirect-fix
                        let dom = e.target;
                        let target = dom.closest("a[href]");
                        if (target) {
                            let d = website.directLink;
                            for (let i = 0; i < d.length; i += 2) {
                                if (matchRule(target.href, d[i])) {
                                    if (typeof d[i + 1] === "function") {
                                        d[i + 1].call(target, target);
                                    } else {
                                        let param = parseUrl(target.href);
                                        if (param[d[i + 1]]) {
                                            target.href = param[d[i + 1]];
                                        }
                                    }
                                    // 避免泄露来源, 加强隐私保护
                                    if (target.target == "_blank") {
                                        let rel = target.getAttribute("rel");
                                        if (rel != null) {
                                            if (!rel.includes("noreferrer")) {
                                                target.setAttribute("rel", rel + " noreferrer");
                                            }
                                        } else {
                                            target.setAttribute("rel", "noreferrer");
                                        }
                                    }
                                }
                            }
                        }
                    },
                    true
                );
            }

            if ("bindClick" in website) {
                document.addEventListener(
                    "click",
                    (e) => {
                        let dom = e.target;
                        let d = website.bindClick;
                        let target = dom.closest(d[0]);
                        if (target) {
                            d[1].call(target, target, e);
                        }
                    },
                    true
                );
            }

            if ("start" in website) {
                website.start();
            }

            if ("js" in website) {
                if (document.readyState == "complete") {
                    website.js();
                    // alert("程序出现异常");
                    // GM_openInTab("https://greasyfork.org/zh-CN/scripts/440400/feedback");
                } else {
                    document.addEventListener("DOMContentLoaded", website.js);
                }
            }

            if ('hookEvent' in website) {

                function addEventListener(type, func, useCapture) {
                    var _addEventListener = this === document ? document_addEventListener : EventTarget_addEventListener;
                    if (typeof obj === 'function' && website.hookEvent(type, func, useCapture)) {
                        return true
                    } else if (website.hookEvent.includes(type)) {
                        return true
                    } else {
                        _addEventListener.apply(this, arguments);
                    }
                }

                EventTarget.prototype.addEventListener = addEventListener;
                document.addEventListener = addEventListener;

                var frames = document.querySelectorAll("frame")
                if (frames) {
                    for (let i = 0; i < frames.length; i++) {
                        frames[i].contentWindow.document.addEventListener = addEventListener;
                    }
                }

                document.addEventListener("DOMContentLoaded", function () {
                    var frames = document.querySelectorAll("frame")
                    if (frames) {
                        for (let i = 0; i < frames.length; i++) {
                            frames[i].contentWindow.document.addEventListener = addEventListener;
                        }
                    }
                });
            }

            break;
        }
    }
})();
